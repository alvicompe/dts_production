"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[599],{61242:(e,i,t)=>{t.d(i,{a:()=>u});var s=t(85893),n=t(41120),o=t(52663),a=t(66083),d=t(29525),r=t(66856),c=t(95477),l=t(282);const v=(0,n.Z)({disabledPadding:{padding:0,textAlign:"center"}}),u=({open:e,handleClose:i,handleConfirm:t,title:n,children:u,maxWidth:h="lg",disabled:x=!1,loading:j})=>{const g=v();return(0,s.jsxs)(o.Z,Object.assign({open:e,onClose:i,maxWidth:h},{children:[(0,s.jsx)(a.Z,Object.assign({className:g.disabledPadding},{children:n}),void 0),(0,s.jsx)(d.Z,{children:u},void 0),(0,s.jsx)(r.Z,{children:j?(0,s.jsx)(c.Z,{style:{width:"30px",height:"30px"}},void 0):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,Object.assign({size:"small",color:"primary",onClick:i},{children:"Cancel"}),void 0),t&&(0,s.jsx)(l.Z,Object.assign({disabled:x,variant:"outlined",size:"small",color:"secondary",onClick:t,autoFocus:!0},{children:"Confirm"}),void 0)]},void 0)},void 0)]}),void 0)}},53280:(e,i,t)=>{t.d(i,{Z:()=>u});var s=t(85893),n=t(13258),o=t(33901),a=t(10046),d=t(22318),r=t(18463),c=t(93584);const l=t(69711),v=t(53292),u=({unit:e,isSelect:i,isTruck:t,isItemHytera:u})=>(0,s.jsxs)(r.Z,Object.assign({elevation:1,style:{width:u?"8em":"12em",height:u?"3em":"4em",padding:"2px",display:"flex",flexDirection:"row",alignItems:"center",borderRadius:"4pxv",backgroundColor:i?`${c.sb}`:"white"}},{children:[!u&&(0,s.jsx)(n.Z,{size:"small",inputProps:{"aria-label":"secondary checkbox"},checked:i},void 0),(0,s.jsx)(o.Z,{style:{width:u?"22px":"33px",height:u?"22px":"33px",marginLeft:"4px"},variant:"square",src:t?l:v},void 0),(0,s.jsxs)(a.Z,Object.assign({style:{textAlign:"center"}},{children:[(0,s.jsx)(d.Z,Object.assign({variant:"subtitle2",style:{marginLeft:"8px",color:i?"white":"black"}},{children:e.deviceAlias}),void 0),(0,s.jsx)(d.Z,Object.assign({variant:"body2",style:{marginLeft:"8px",fontSize:"12px",color:i?"white":"#676665"}},{children:e.deviceId}),void 0)]}),void 0)]}),void 0)},990:(e,i,t)=>{t.d(i,{M:()=>n});var s=t(67294);const n=e=>{const[i,t]=(0,s.useState)(e);return[i,e=>{t(Object.assign(Object.assign({},i),{[e.target.name]:e.target.value}))},()=>{t(e)},t]}},15635:(e,i,t)=>{t.d(i,{r:()=>o});var s=t(67294),n=t(95090);const o=e=>{const[i,t]=(0,s.useState)(!1);return(0,s.useEffect)((()=>(e===n.JD.DONE||e===n.JD.UNKNOWN||e===n.JD.ERROR?t(!1):t(!0),()=>{t(!1)})),[e]),[i]}},16281:(e,i,t)=>{t.d(i,{h:()=>Z});var s=t(85893),n=t(45258),o=t(28358),a=t(282),d=t(22318),r=t(43471),c=t(5977),l=t(55517),v=t(17812),u=t(96617),h=t(73637),x=t(79895),j=t(16575),g=t(51972),p=t(67294),m=t(73855),f=t(45855);const b=({title:e,content:i})=>(0,s.jsxs)("div",{children:[(0,s.jsxs)(d.Z,Object.assign({variant:"subtitle1"},{children:[(0,s.jsx)(j.Z,{style:{fontSize:"14px",marginRight:"4px"}},void 0),e]}),void 0),(0,s.jsx)(d.Z,Object.assign({variant:"body1"},{children:i}),void 0),(0,s.jsx)(l.Z,{},void 0)]},void 0),y=({})=>{var e,i,t;const[n,o]=(0,p.useState)(null),[a,r]=(0,p.useState)(!1),{notificationsHeader:c}=(0,m.C)(f.Af),l=(0,m.T)();(0,p.useEffect)((()=>{l((0,f.pK)())}),[]);const j=a&&Boolean(n)?"transition-popper":void 0;return console.log("notificationsHeader.notificationsList",c.notificationsList),(0,s.jsxs)("div",Object.assign({style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",width:"8%",marginRight:"4px"}},{children:[(0,s.jsx)(v.Z,Object.assign({color:(null===(e=c.notificationsList)||void 0===e?void 0:e.length)>0?"primary":"inherit",onClick:e=>{o(e.currentTarget),r((e=>!e))},size:"small"},{children:(0,s.jsxs)("div",Object.assign({style:{margin:"4px"}},{children:[(0,s.jsx)(d.Z,Object.assign({variant:"subtitle2",style:{color:"white",zIndex:1,position:"absolute",justifyContent:"right",marginLeft:"18px"}},{children:(null===(i=c.notificationsList)||void 0===i?void 0:i.length)>0?null===(t=c.notificationsList)||void 0===t?void 0:t.length:""}),void 0),(0,s.jsx)(g.Z,{},void 0)]}),void 0)}),void 0),(0,s.jsx)("div",Object.assign({style:{zIndex:1}},{children:(0,s.jsx)(u.Z,Object.assign({id:j,open:a,anchorEl:n,transition:!0,style:{zIndex:3}},{children:({TransitionProps:e})=>{var i,t,n;return(0,s.jsx)(h.Z,Object.assign({},e,{timeout:350},{children:(0,s.jsxs)(x.Z,Object.assign({elevation:3,style:{width:"300px",height:(null===(i=c.notificationsList)||void 0===i?void 0:i.length)>10?"87vh":"100%",padding:"8px",overflow:"scroll"}},{children:[(!c.notificationsList||0===(null===(t=c.notificationsList)||void 0===t?void 0:t.length))&&(0,s.jsx)(s.Fragment,{children:"Not Have a new Notification"},void 0),null===(n=c.notificationsList)||void 0===n?void 0:n.map(((e,i)=>(0,s.jsx)(b,{title:e.title,content:e.message},i)))]}),void 0)}),void 0)}}),void 0)}),void 0)]}),void 0)},Z=({title:e,positionContainer:i,notificationPannel:t})=>{const l=i||"sticky",v=(0,c.k6)();return(0,s.jsx)(n.Z,Object.assign({position:l,color:"secondary",style:{display:"flex"},elevation:0},{children:(0,s.jsxs)("div",Object.assign({style:{display:"flex"}},{children:[(0,s.jsxs)(o.Z,Object.assign({variant:"dense",style:{width:"90%"}},{children:[(0,s.jsx)(a.Z,{size:"small",startIcon:(0,s.jsx)(r.Z,{color:"action",style:{color:"#fff"}},void 0),onClick:()=>{v.goBack()}},void 0),(0,s.jsx)(d.Z,Object.assign({variant:"h6"},{children:e}),void 0)]}),void 0),t&&(0,s.jsx)(y,{},void 0)]}),void 0)}),void 0)}},59599:(e,i,t)=>{t.r(i),t.d(i,{default:()=>L});var s=t(85893),n=t(10046),o=t(41749),a=t(22318),d=t(282),r=t(62822),c=t(50998),l=t(73430),v=t(30387),u=t(44562),h=t(67294),x=t(73855),j=t(86282),g=t(15635),p=t(31940),m=t(26666),f=t(10465),b=t(61242),y=t(53280),Z=t(8286),k=t(990);const C=({openEditTruck:e,setOpenEditTruck:i,truck:t})=>{console.log("TruckSelect: ",t);const o=(0,x.T)(),{truckInfoList:a}=(0,j.Md)(),{truckSelects:d}=(0,x.C)(p.__),[r,c,l,v]=(0,k.M)(Object.assign({},t)),{deviceAlias:u,deviceId:g,id:f,deviceInterval:y,plate:C}=r,w=(0,h.useCallback)((e=>{let i=!1;if(e){const t=e.toUpperCase();return a.filter((e=>{e.deviceAlias.toUpperCase()===t&&(i=!0)})),i}}),[a]);return(0,s.jsx)(b.a,Object.assign({open:e,handleClose:()=>{i(!1),l()},handleConfirm:()=>{return e=void 0,t=void 0,n=function*(){u&&!w(r.deviceAlias)&&(yield o((0,p.xT)(r)),o((0,p.xJ)()),yield o((0,m.RK)()),i(!1))},new((s=void 0)||(s=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(e){o(e)}}function d(e){try{r(n.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,d)}r((n=n.apply(e,t||[])).next())}));var e,t,s,n},title:"Edit Truck",customise:!0},{children:(0,s.jsxs)(n.Z,Object.assign({component:"form",style:{color:"dark"}},{children:[(0,s.jsx)(Z.Z,{error:!!w(r.deviceAlias),variant:"outlined",required:!0,onChange:c,style:{width:"100%"},label:"Alias",size:"small",value:u,name:"deviceAlias",helperText:w(r.deviceAlias)?"There is already a truck with that same Device Alias":""},void 0),(0,s.jsx)(n.Z,{height:"12px"},void 0),(0,s.jsx)(Z.Z,{error:!!w(r.deviceId),variant:"outlined",required:!0,onChange:c,style:{width:"100%"},label:"Id",size:"small",disabled:!0,value:r.deviceId,name:"deviceId",helperText:w(r.deviceId)?"There is already a truck with that same Device Id":""},void 0)]}),void 0)}),void 0)};const w=({openNewTruck:e,setOpenNewTruck:i})=>{const{truckSelects:t,stateCreate:o}=(0,x.C)(p.__),a=(0,x.T)(),{truckInfoList:d}=(0,j.Md)(),[r,c,l,v]=(0,k.M)({deviceAlias:"",deviceId:"",id:"",plate:"",deviceInterval:0,description:"",horometer:0}),{deviceAlias:u,deviceId:f,horometer:y}=r,[C]=(0,g.r)(o),[w,O]=(0,h.useState)(!1),I=(0,h.useCallback)((e=>{let i=!1;if(e){const t=e.toUpperCase();return d.filter((e=>{e.deviceAlias.toUpperCase()===t&&(i=!0),e.deviceId.toUpperCase()===t&&(i=!0)})),i}}),[d]);return(0,h.useEffect)((()=>{O(!!u&&!!f&&!!y&&y>0&&!I(r.deviceAlias)&&!I(r.deviceId))}),[r]),(0,s.jsx)(b.a,Object.assign({open:e,handleClose:()=>{a((0,m.RK)()),i(!1),l()},handleConfirm:()=>{return e=void 0,t=void 0,n=function*(){w&&(yield a((0,p.gZ)(r)),yield a((0,m.RK)()),i(!1),l())},new((s=void 0)||(s=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(e){o(e)}}function d(e){try{r(n.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,d)}r((n=n.apply(e,t||[])).next())}));var e,t,s,n},title:"Insert New Truck",customise:!0,loading:C,disabled:!w},{children:(0,s.jsxs)(n.Z,Object.assign({component:"form",style:{color:"dark"}},{children:[(0,s.jsx)(Z.Z,{error:!!I(r.deviceAlias),variant:"outlined",required:!0,onChange:c,style:{width:"100%"},label:"Device Alias",size:"small",value:u,name:"deviceAlias",helperText:I(r.deviceAlias)?"There is already a truck with that same Device Alias":""},void 0),(0,s.jsx)(n.Z,{height:"12px"},void 0),(0,s.jsx)(Z.Z,{error:!!I(r.deviceId),variant:"outlined",required:!0,onChange:c,style:{width:"100%"},label:"Device Id",size:"small",value:f,name:"deviceId",helperText:I(r.deviceId)?"There is already a truck with that same Device Id":"Insert Device Id"},void 0),(0,s.jsx)(Z.Z,{error:y<0,variant:"outlined",required:!0,type:"number",onChange:c,style:{width:"100%"},label:"Horometer",size:"small",value:y,name:"horometer",helperText:y<0?"Hourmeter needs to be > 0":"Insert Horometer"},void 0)]}),void 0)}),void 0)};var O=function(e,i,t,s){return new(t||(t=Promise))((function(n,o){function a(e){try{r(s.next(e))}catch(e){o(e)}}function d(e){try{r(s.throw(e))}catch(e){o(e)}}function r(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(a,d)}r((s=s.apply(e,i||[])).next())}))};const I=()=>{const[e,i]=h.useState(!1),[t,Z]=(0,h.useState)(!1),[k,I]=h.useState(!1),[T,S]=h.useState(!1),{truckSelects:A,stateCreate:L,statusDelete:z}=(0,x.C)(p.__),D=(0,x.T)(),{truckInfoList:E}=(0,j.Md)(),{truckListHytera:N}=(0,x.C)(p.qB),[H,R]=(0,h.useState)([]),[U]=(0,g.r)(L),[P]=(0,g.r)(z);(0,h.useEffect)((()=>{R(E)}),[E]);const q=(0,h.useCallback)((e=>{if(e){const i=e.target?e.target.value.toUpperCase():"";R(E.filter((e=>e.deviceAlias.toUpperCase().includes(i))))}}),[E]),J=(0,h.useCallback)((()=>{R(E)}),[E]),_=()=>{i(!1),I(!1),S(!1),D((0,p.xJ)())};return(0,s.jsx)(n.Z,{children:(0,s.jsxs)(o.Z,Object.assign({spacing:1,container:!0,direction:"column",style:{padding:"12px"}},{children:[(0,s.jsx)(o.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,s.jsx)(a.Z,Object.assign({variant:"subtitle1"},{children:"List Trucks"}),void 0)}),void 0),(0,s.jsxs)(o.Z,Object.assign({item:!0,container:!0,alignItems:"center",style:{width:"100%"}},{children:[(0,s.jsx)(f.V,{placeholder:"Buscar por id",functionFilter:q,functionCancel:J},void 0),(0,s.jsx)(d.Z,Object.assign({startIcon:(0,s.jsx)(l.Z,{},void 0),onClick:()=>{I(!0)},size:"small",style:{background:"#1d4e89",marginLeft:"2em",color:"white"}},{children:"New Truck"}),void 0),A.length>0&&(0,s.jsx)(d.Z,Object.assign({onClick:()=>{i(!0)},size:"small",style:{background:"#1d4e89",marginLeft:"2em",color:"white"}},{children:"Disable Trucks"}),void 0),1===A.length&&(0,s.jsx)(d.Z,Object.assign({startIcon:(0,s.jsx)(v.Z,{},void 0),onClick:()=>{Z(!0)},size:"small",style:{background:"#1d4e89",marginLeft:"2em",color:"white"}},{children:"Edit"}),void 0),(0,s.jsx)(o.Z,{item:!0,xs:12,md:6,xl:6},void 0),(0,s.jsx)(o.Z,{item:!0,xs:12,md:6,xl:6},void 0)]}),void 0),(0,s.jsx)(o.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,s.jsx)(r.Z,Object.assign({dense:!0,style:{display:"flex",flexWrap:"wrap",backgroundColor:"rgb(250 250 250)"}},{children:H.map((e=>{return(0,s.jsx)(c.Z,Object.assign({button:!0,onClick:()=>{(e=>{D((0,p.sq)(e))})(e)},style:{width:"12em",padding:"0px",margin:"0.2em",backgroundColor:"white"}},{children:(0,s.jsx)(y.Z,{unit:e,isSelect:(i=e,!!A.find((e=>i.deviceId===e.deviceId))),isTruck:!0},void 0)}),e.deviceId);var i}))}),void 0)}),void 0),(0,s.jsx)(w,{openNewTruck:k,setOpenNewTruck:I},void 0),A.length>0&&(0,s.jsx)(b.a,Object.assign({open:e,handleClose:_,handleConfirm:()=>O(void 0,void 0,void 0,(function*(){yield D((0,p.Fr)(A)),yield D((0,m.RK)()),D((0,p.xJ)()),i(!1)})),title:"sure you want to Disable",customise:!0,loading:P},{children:(0,s.jsxs)(u.Z,Object.assign({severity:"warning"},{children:["Disable: ",A.map((e=>e.deviceId+" "))]}),void 0)}),void 0),(0,s.jsx)(b.a,Object.assign({open:T,handleClose:_,handleConfirm:()=>O(void 0,void 0,void 0,(function*(){yield N.map((e=>{var i;i=e,E.some((e=>e.deviceId===i.deviceId))||D((0,p.iU)([e]))})),yield D((0,m.RK)()),D((0,p.xJ)()),S(!1)})),title:"sure you want to Syncronize",customise:!0},{children:(0,s.jsx)(u.Z,Object.assign({severity:"info"},{children:"Hytera trucks will be synchronized to the DTS system"}),void 0)}),void 0),1===A.length&&(0,s.jsx)(C,{openEditTruck:t,setOpenEditTruck:Z,truck:A[0]},void 0)]}),void 0)},void 0)};const T=()=>{const[e,i]=h.useState(!1),{truckListHytera:t}=(0,x.C)(p.qB),d=(0,x.T)(),[l,v]=(0,h.useState)(!1),[u,j]=(0,h.useState)([]);(0,h.useEffect)((()=>{d((0,p.D0)())}),[]),(0,h.useEffect)((()=>{j(t)}),[t]);const g=(0,h.useCallback)((e=>{if(e){const i=e.target?e.target.value.toUpperCase():"";j(t.filter((e=>e.deviceAlias.toUpperCase().includes(i))))}}),[t]),m=(0,h.useCallback)((()=>{j(t)}),[t]);return(0,s.jsx)(n.Z,{children:(0,s.jsxs)(o.Z,Object.assign({spacing:1,container:!0,direction:"column",style:{padding:"4px"}},{children:[(0,s.jsx)(o.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,s.jsx)(a.Z,Object.assign({variant:"subtitle1"},{children:"List Trucks Hytera"}),void 0)}),void 0),(0,s.jsx)(o.Z,Object.assign({item:!0,container:!0,alignItems:"center",style:{width:"100%"}},{children:(0,s.jsx)(f.V,{placeholder:"Buscar por id",functionFilter:g,functionCancel:m},void 0)}),void 0),(0,s.jsx)(o.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,s.jsx)(r.Z,Object.assign({dense:!0,style:{display:"flex",flexWrap:"wrap",backgroundColor:"rgb(250 250 250)"}},{children:u.map((e=>(0,s.jsx)(c.Z,Object.assign({button:!0,onClick:()=>{},style:{width:"8em",padding:"0px",margin:"0.1em",backgroundColor:"white"}},{children:(0,s.jsx)(y.Z,{unit:e,isTruck:!0,isItemHytera:!0},void 0)}),e.deviceId)))}),void 0)}),void 0),(0,s.jsx)(b.a,{open:e,handleClose:()=>{i(!1),d((0,p.xJ)())},handleConfirm:()=>{return e=void 0,t=void 0,n=function*(){i(!1)},new((s=void 0)||(s=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(e){o(e)}}function d(e){try{r(n.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,d)}r((n=n.apply(e,t||[])).next())}));var e,t,s,n},title:"sure you want to delete"},void 0)]}),void 0)},void 0)},S=()=>(0,s.jsx)(n.Z,{children:(0,s.jsxs)(o.Z,Object.assign({spacing:0,container:!0,direction:"row",style:{padding:"12px"}},{children:[(0,s.jsx)(o.Z,Object.assign({item:!0,xs:12,md:8,xl:8},{children:(0,s.jsx)(I,{},void 0)}),void 0),(0,s.jsx)(o.Z,Object.assign({item:!0,xs:12,md:4,xl:4},{children:(0,s.jsx)(T,{},void 0)}),void 0)]}),void 0)},void 0);var A=t(16281);const L=()=>(0,s.jsxs)("div",{children:[(0,s.jsx)(A.h,{title:"Setting Trucks",positionContainer:"relative",notificationPannel:!0},void 0),(0,s.jsx)(S,{},void 0)]},void 0)}}]);