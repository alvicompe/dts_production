"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[219],{63663:(e,t,n)=>{n.d(t,{F2:()=>r,xu:()=>g.I,zx:()=>c,iz:()=>p,T5:()=>m,P4:()=>h,hU:()=>u,Mi:()=>b,IB:()=>o.C});var i=n(85893),s=n(8286),a=n(96588);const r=e=>(0,i.jsx)(a.ZP,Object.assign({},Object.assign({},e.propsAutocomplete),{renderInput:e=>(0,i.jsx)(s.Z,Object.assign({},e,{label:"Seleccione una opción",variant:"outlined"}))}));var o=n(45287),l=n(282);const c=e=>(0,i.jsx)(l.Z,Object.assign({},Object.assign({},e.propsButton),{children:e.label}));var d=n(17812);const u=e=>(0,i.jsx)(d.Z,Object.assign({},Object.assign({},e),{children:e.children}));var g=n(47463),v=n(41749);const m=e=>(0,i.jsx)(v.Z,Object.assign({},Object.assign({},e),{container:!0},{children:e.children})),h=e=>(0,i.jsx)(v.Z,Object.assign({},Object.assign({},e),{item:!0},{children:e.children}));var j=n(55517);const p=e=>(0,i.jsx)(j.Z,Object.assign({},Object.assign({},e)));var x=n(82285);const b=e=>(0,i.jsx)(x.Z,Object.assign({},Object.assign({},e),{children:(0,i.jsx)(v.Z,{children:e.children})}))},45287:(e,t,n)=>{n.d(t,{C:()=>r});var i=n(85893),s=n(64436),a=n(8286);const r=e=>{const{propsTextField:t,propsForm:n}=e;return(0,i.jsx)(s.Z,Object.assign({},Object.assign({},n),{children:(0,i.jsx)(a.Z,Object.assign({},Object.assign({},t)))}))}},47463:(e,t,n)=>{n.d(t,{I:()=>a});var i=n(85893),s=n(60395);const a=({children:e,height:t,width:n})=>(0,i.jsx)(s.Z,Object.assign({height:t,width:n},{children:e}))},61242:(e,t,n)=>{n.d(t,{a:()=>v});var i=n(85893),s=n(41120),a=n(52663),r=n(66083),o=n(29525),l=n(66856),c=n(95477),d=n(282),u=n(93584);const g=(0,s.Z)({disabledPadding:{padding:0,textAlign:"center"}}),v=({open:e,handleClose:t,handleConfirm:n,title:s,children:v,maxWidth:m="lg",disabled:h=!1,loading:j})=>{const p=g();return(0,i.jsxs)(a.Z,Object.assign({open:e,onClose:t,maxWidth:m},{children:[(0,i.jsx)(r.Z,Object.assign({style:{color:"white",background:`${u.Jx}`,padding:"0.5rem"},className:p.disabledPadding},{children:s})),(0,i.jsx)(o.Z,{children:v}),(0,i.jsx)(l.Z,{children:j?(0,i.jsx)(c.Z,{style:{width:"30px",height:"30px"}}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,Object.assign({size:"small",color:"primary",onClick:t},{children:"Cancelar"})),n&&(0,i.jsx)(d.Z,Object.assign({disabled:h,variant:"outlined",size:"small",color:"secondary",onClick:n,autoFocus:!0},{children:"Confirmar"}))]})})]}))}},90582:(e,t,n)=>{n.d(t,{y:()=>g});var i=n(85893),s=n(96912),a=n(44562),r=n(37155),o=n(67294),l=n(41120),c=n(33681);const d=(0,l.Z)({root:{width:"100%"}});function u({time:e}){const t=d(),[n,s]=o.useState(100),a=10*e/100;return o.useEffect((()=>{s((e=>e-10));const e=setInterval((()=>{s((e=>e-10))}),a);return()=>{clearInterval(e)}}),[]),(0,i.jsx)("div",Object.assign({className:t.root},{children:(0,i.jsx)(c.Z,{variant:"determinate",value:n})}))}const g=({error:e,callBack:t,success:n,code:l=0})=>{const[c,d]=o.useState({open:!0,vertical:"top",horizontal:"right"}),{vertical:g,horizontal:v}=c,[m,h]=(0,o.useState)("success"),j=()=>{d(Object.assign(Object.assign({},c),{open:!1})),t()};return(0,o.useEffect)((()=>{const e=setTimeout((()=>{j()}),4e3);return console.log("AlertDts useEffect"),()=>{console.log("AlertDts clear timeout"),window.clearTimeout(e)}}),[]),(0,o.useEffect)((()=>(h(l>=500||2==l?"error":n?"success":"warning"),()=>{h("success")})),[n,l]),(0,i.jsx)(s.Z,Object.assign({open:c.open,anchorOrigin:{vertical:g,horizontal:v},onClose:j},{children:(0,i.jsxs)(a.Z,Object.assign({severity:m,onClose:j},{children:[(0,i.jsx)(r.Z,{children:n?"Exito":"advertencia"}),(0,i.jsx)("strong",{children:l>=500?"¡Ups! Algo salió mal, comuniquese con el administrador":e}),(0,i.jsx)(u,{time:4e3})]}))}))}},11818:(e,t,n)=>{n.d(t,{y:()=>a});var i=n(67294),s=n(49032);const a=e=>{const[t,n]=(0,i.useState)(!0),[a,r]=(0,i.useState)(!0),[o,l]=(0,i.useState)(!0),[c,d]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{const t=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===s.EnumEvent.NO_OPERATIONAL}))),i=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===s.EnumEvent.OPERATIONAL}))),a=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===s.EnumEvent.OPERATIONAL_DELAY}))),o=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===s.EnumEvent.MAINTENANCE}))),c=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===s.EnumEvent.UNKNOWN_STATE_EVENT})));n(!0),r(!0),l(!0),d(!0),i()&&(n(!1),r(!0),l(!1),d(!1)),c()&&(n(!1),r(!1),l(!1)),t()&&(n(!0),r(!1),l(!1),d(!1)),a()&&(n(!1),r(!1),l(!0)),o()&&(n(!1),r(!1),l(!0),d(!0)),0==c()&&0==t()&&0==a()&&0==i()&&0==o()&&(n(!0),r(!0),l(!0),d(!0))}),[e]),[t,a,o,c]}},23800:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(67294),s=n(49032);function a(e,t){const[n,a]=(0,i.useState)(0);return(0,i.useEffect)((()=>{var n,i,r,o,l;const c=new Date;c.setHours(Number.parseInt(e.split(":")[0])),c.setMinutes(Number.parseInt(e.split(":")[1]));const d=new Date(1e3*(null===(n=null==t?void 0:t.initialTime)||void 0===n?void 0:n.seconds));var u=(c.getTime()-d.getTime())/1e3;let g=1/60*Math.ceil(u/60);const v=(null==t?void 0:t.initialHourmeter)+Number.parseFloat(g);return(null===(r=null===(i=null==t?void 0:t.initialEventState)||void 0===i?void 0:i.event)||void 0===r?void 0:r.event)===s.EnumEvent.NO_OPERATIONAL||(null===(l=null===(o=null==t?void 0:t.initialEventState)||void 0===o?void 0:o.event)||void 0===l?void 0:l.event)===s.EnumEvent.MAINTENANCE?a(Number.parseFloat(null==t?void 0:t.initialHourmeter.toFixed(1))):a(Number.parseFloat(v.toFixed(1))),()=>{a(0)}}),[e,t]),[n]}},34326:(e,t,n)=>{n.d(t,{N:()=>l});var i=n(67294),s=n(73855),a=n(10646),r=n(56731),o=n(1754);const l=e=>{const{historyTimelineShift:t}=(0,s.C)(o.yV),[n]=(0,a.l)(new Date),[l]=(0,a.l)(new Date((new Date).getTime()-864e5)),[c,d]=(0,i.useState)(n);return(0,i.useEffect)((()=>{var i,s,a;(null===(i=t[0])||void 0===i?void 0:i.shift)===r.Shift.NIGHT&&new Date(1e3*(null===(a=null===(s=t[0])||void 0===s?void 0:s.shiftDate)||void 0===a?void 0:a.seconds)).toLocaleDateString()===(new Date).toLocaleDateString()?d(n):parseInt(e.split(":")[0])>=19&&parseInt(e.split(":")[0])<=23?d(l):d(n)}),[e]),[c]}},15635:(e,t,n)=>{n.d(t,{r:()=>a});var i=n(67294),s=n(95090);const a=e=>{const[t,n]=(0,i.useState)(!1);return(0,i.useEffect)((()=>(e===s.JD.DONE||e===s.JD.UNKNOWN||e===s.JD.ERROR?n(!1):n(!0),()=>{n(!1)})),[e]),[t]}},31379:(e,t,n)=>{n.r(t),n.d(t,{default:()=>qt});var i=n(85893),s=n(41749),a=n(868),r=n(17812),o=n(95757),l=n(50998),c=n(71267),d=n(282),u=n(62822),g=n(79895),v=n(55517),m=n(60395),h=n(43829),j=n(82200),p=n(59544),x=n(7654),b=n(78965),O=n(44562),f=n(30115),E=n(67294),y=n(59240),N=n(73727),C=n(93584),S=n(10980),L=n(73855),T=n(49032),Z=n(78721),k=n(53559),A=n(52672),I=n(52314),w=n(76796),D=n(89601),R=n(73250),P=n(5814),$=n(2780),F=n(90694),z=n(63663),M=n(61242),W=n(33681);const _=({loading:e})=>e?(0,i.jsx)(W.Z,{}):(0,i.jsx)(i.Fragment,{});var U=n(23800),H=n(34326),G=n(30433),K=n(52663),J=n(66083),V=n(29525),B=n(22318),Y=n(8286),X=n(66856),q=n(61920),Q=n(86072);const ee=({newOperation:e})=>{const t=(0,L.T)(),n=()=>{t((0,D.mg)())},o=(0,E.useMemo)((()=>e.uploadList.map(((e,t)=>{const s=e.type===q.WW.TAJO?`\n      ${e.nameProject}-${e.name}-${e.material?e.material.type:""}\n      `:e.name;return(0,i.jsx)(c.Z,{color:"secondary",label:s,onDelete:n},t)}))),[e.uploadList]);return 0===e.uploadList.length?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,i.jsx)(a.ZP,Object.assign({title:"Change Upload"},{children:(0,i.jsx)(r.Z,Object.assign({color:"primary",size:"small"},{children:(0,i.jsx)(Q.Z,{})}))})),o]}))}))},te=({newOperation:e})=>{const t=(0,L.T)(),n=(0,E.useMemo)((()=>e.downloadList.map(((e,n)=>(0,i.jsx)(c.Z,{color:"secondary",label:e.name,onDelete:()=>{return n=e.id,void t((0,D.$g)({id:n}));var n}},n)))),[e.downloadList]);return 0===e.downloadList.length?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,i.jsx)(a.ZP,Object.assign({title:"Change Download"},{children:(0,i.jsx)(r.Z,Object.assign({color:"primary",size:"small"},{children:(0,i.jsx)(Q.Z,{})}))})),n]}))}))},ne=({newOperation:e})=>{const t=(0,L.T)(),n=()=>{t((0,D.QW)())},o=(0,E.useMemo)((()=>e.excavatorList.map(((e,t)=>{const s=e.deviceAlias;return(0,i.jsx)(c.Z,{color:"secondary",label:s,onDelete:n},t)}))),[e.excavatorList]);return 0===e.excavatorList.length?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,i.jsx)(a.ZP,Object.assign({title:"Change Excavator"},{children:(0,i.jsx)(r.Z,Object.assign({color:"primary",size:"small"},{children:(0,i.jsx)(Q.Z,{})}))})),o]}))}))};var ie=n(96588),se=n(97111),ae=n(14125),re=n(50648);const oe=({open:e,operation:t,setOpen:n})=>{const[r,o]=(0,E.useState)([]),{excavatorInfoList:l}=(0,L.C)(ae.kW),u=(0,E.useRef)(),{dmeCellList:g,padCellList:h,stockCellList:j,polygonList:p}=(0,L.C)(F.WD),[x,b]=(0,E.useState)(se.f.CHANGE_NOTHING),[O,f]=(0,E.useState)(q.WW.DESCONOCIDO),[y,N]=(0,E.useState)(re.TypeDownload.UNKNOWN),C=(0,L.T)(),{newOperation:S}=(0,L.C)(F.e5),T=(e,t,n)=>{const i=t.find((t=>t.id===e));i&&C((0,D.qn)(Object.assign(Object.assign({},i),{type:n})))},Z=(e,t,n)=>{const i=t.find((t=>t.id===e));i&&C((0,D.Ru)(Object.assign(Object.assign({},i),{type:n})))},k=(0,E.useCallback)((()=>(0,se.BF)(x,O,p,j,y,g,h,l)),[x,O,p,j,y,g,h,l]);return(0,i.jsxs)(K.Z,Object.assign({open:e,onClose:n,title:"Migrate Operation"},{children:[(0,i.jsx)(J.Z,Object.assign({style:{paddingTop:8,paddingBottom:0}},{children:"Update Operation Attributes"})),(0,i.jsx)(V.Z,Object.assign({style:{minHeight:320}},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"column"},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,i.jsx)(B.Z,{children:"Upload:"}),(0,i.jsx)(G.g7,{operation:t,lineThrough:S.uploadList.length>0}),(0,i.jsx)(ee,Object.assign({},{operation:t,newOperation:S}))]}))})),(0,i.jsx)(m.Z,{width:"100%",height:8}),(0,i.jsxs)(s.Z,Object.assign({item:!0},{children:[(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,i.jsx)(B.Z,{children:"Download: "}),(0,i.jsx)(G.DQ,{operation:t,lineThrough:S.downloadList.length>0}),(0,i.jsx)(te,Object.assign({},{operation:t,newOperation:S}))]})),(0,i.jsx)(m.Z,{width:"100%",height:8}),(0,i.jsx)(v.Z,{orientation:"horizontal"}),(0,i.jsx)(a.ZP,Object.assign({title:"Puede agregar hasta 2 puntos de descarga"},{children:(0,i.jsx)(B.Z,Object.assign({style:{fontSize:11}},{children:"*You can add up to 2 download points, example 1 DME and 1 PAD or 1 STOCK"}))})),(0,i.jsx)(v.Z,{orientation:"horizontal"})]})),(0,i.jsx)(m.Z,{width:"100%",height:8}),(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,i.jsx)(B.Z,{children:"Excavator: "}),(0,i.jsx)(G.Ez,{operation:t,lineThrough:S.excavatorList.length>0}),(0,i.jsx)(ne,Object.assign({},{operation:t,newOperation:S}))]}))})),(0,i.jsx)(m.Z,{height:8}),(1!==S.excavatorList.length||2!==S.downloadList.length||1!==S.uploadList.length)&&(0,i.jsx)(s.Z,Object.assign({item:!0,style:{marginTop:8}},{children:(0,i.jsx)(ie.ZP,{size:"small",value:r,blurOnSelect:!0,onChange:(e,t)=>{switch(o(t),t.length){case 0:b(se.f.CHANGE_NOTHING),f(q.WW.DESCONOCIDO),N(re.TypeDownload.UNKNOWN);break;case 1:b(t[0].value),f(q.WW.DESCONOCIDO),N(re.TypeDownload.UNKNOWN);break;case 2:switch(x){case se.f.CHANGE_UPLOAD:f(Number(t[1].value));break;case se.f.CHANGE_DOWNLOAD:N(Number(t[1].value));break;case se.f.CHANGE_EXCAVATOR:((e,t)=>{const n=t.find((t=>t.id===e));n&&C((0,D.Zh)(n))})(t[1].value,l),o([]),b(se.f.CHANGE_NOTHING)}break;case 3:switch(x){case se.f.CHANGE_UPLOAD:switch(O){case q.WW.TAJO:T(t[2].id,p,q.WW.TAJO);break;case q.WW.STOCK:T(t[2].id,j,q.WW.STOCK)}break;case se.f.CHANGE_DOWNLOAD:switch(y){case re.TypeDownload.DME:Z(t[2].id,g,y);break;case re.TypeDownload.PAD:Z(t[2].id,h,y);break;case re.TypeDownload.STOCK:Z(t[2].id,j,y)}}f(q.WW.DESCONOCIDO),N(re.TypeDownload.UNKNOWN),b(se.f.CHANGE_NOTHING),o([])}setTimeout((()=>{var e,t;null===(e=u.current)||void 0===e||e.focus(),null===(t=u.current)||void 0===t||t.click()}),100)},options:k(),multiple:!0,renderTags:(e,t)=>e.map(((e,n)=>(0,i.jsx)(c.Z,Object.assign({variant:"outlined",label:e.label},t({index:n}))))),style:{minWidth:200},getOptionLabel:e=>e.label,openOnFocus:!0,disableClearable:!0,getOptionDisabled:e=>(0,se.HT)(e,S,y),filterSelectedOptions:!0,renderInput:e=>(0,i.jsx)(Y.Z,Object.assign({},e,{autoFocus:!0,inputRef:u,label:"Cómo puedo ayudarte?",variant:"outlined",fullWidth:!0}))})}))]}))})),(0,i.jsx)(X.Z,{children:(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(d.Z,Object.assign({onClick:n,size:"small",color:"primary"},{children:"Cancel"})),(0,i.jsx)(d.Z,Object.assign({variant:"outlined",size:"small",color:"secondary",onClick:()=>{C((0,D.db)({oldOperation:t,newOperation:S}))}},{children:"Save"}))]})})]}))};var le=n(48101),ce=n(6777),de=n(95090),ue=n(89613),ge=n(34344),ve=n(54150),me=n(40036);class he{constructor(e,t,n,i,s,a,r,o){this.circleList=e,this.map=t,this.idSource=n,this.radius=s,this.idLayer=i,this.fontSize=9,this.color=a,this.transparent=r,this.onClickElement=o}getInMap(){return this.map.getSource(this.idSource)}generateFeatures(){return this.circleList.map((e=>({type:"Feature",properties:{label:e.label},geometry:{type:"Point",coordinates:2===e.point.length?e.point:[0,0]}})))}addToMap(){var e,t;!this.getInMap()&&this.circleList.length>0&&(this.map.getSource(this.idSource)||this.map.addSource(this.idSource,{type:"geojson",data:{type:"FeatureCollection",features:this.generateFeatures()}}),this.map.getLayer(this.idLayer)||(this.map.addLayer({id:this.idLayer,type:"circle",source:this.idSource,paint:{"circle-radius":{stops:[[0,0],[20,(e=this.radius,t=this.circleList[0].point[1],e/.075/Math.cos(t*Math.PI/180))]],base:2},"circle-stroke-color":this.color,"circle-stroke-width":this.transparent?2:0,"circle-color":this.color,"circle-opacity":this.transparent?0:1}}),this.map.addLayer({id:this.idLayer+"LABEL",type:"symbol",source:this.idSource,layout:{"text-field":["get","label"],"text-variable-anchor":["top"],"text-radial-offset":.5,"text-justify":"auto","text-allow-overlap":!0}})),this.map.on("click",this.idLayer,(e=>{this.onClickElement&&this.onClickElement(e)})),this.map.on("mouseenter",this.idLayer,(()=>{this.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave",this.idLayer,(()=>{this.map.getCanvas().style.cursor=""})))}updateInMap(){const e=this.getInMap();e?e.setData({type:"FeatureCollection",features:this.generateFeatures()}):this.addToMap()}removeOfMap(){this.getInMap()&&(this.map.removeLayer(this.idLayer),this.map.removeLayer(this.idLayer+"LABEL")),this.map.removeSource(this.idSource)}}var je=n(78479),pe=n(45287),xe=n(73637),be=n(5200);const Oe="truck";var fe=n(75647),Ee=n(44824),ye=n(28231),Ne=n(715),Ce=n(95692),Se=n(41042),Le=n(67774),Te=n(56731),Ze=n(7258),ke=n(1754),Ae=n(57163),Ie=n(99302),we=n(60465);const De=(0,f.Z)({rootFilter:{flex:"0 0",margin:2,border:"1px dashed #7b81836e",cursor:"move",float:"left",width:"98%",background:C.sb},rootItem:{margin:2,border:"1px dashed #7b81836e",cursor:"move",float:"left",width:"98%",flex:"0 0"},rootItemTemporal:{flex:"0 0",margin:2,border:"1px dashed green",cursor:"move",float:"left",width:"98%",background:"#34d0ff6e"},rootItemTemporalRemove:{flex:"0 0",margin:2,border:"1px dashed red",background:"#ff60604a",cursor:"move",float:"left",width:"98%"},titleTruck:{fontSize:"1em",cursor:"move"},contentTruck:{margin:2,padding:0,width:"100%",position:"relative",height:"100%"},contentCycle:{height:16,minWidth:16,display:"flex",borderRadius:"50%",background:"#efecec",justifyContent:"center",alignItems:"center",justifyItems:"center"},stateTruck:{position:"absolute",fontSize:"0.5rem",top:0,left:0},containerMoreTruck:{position:"absolute",top:-6,right:2,cursor:"pointer"},moreTruck:{fontSize:"0.8rem",cursor:"pointer"},actions:{minWidth:36},labelCycleNumber:{fontSize:11,color:"#5a5757"},labelExcavator:{marginTop:4,background:"#424141",color:"#fff"},labelDistance:{marginTop:4,background:`${C.J$}20`}}),Re=({truck:e})=>{var t,n,s,o,l;let c="",d=null;switch(null===(t=e.eventState)||void 0===t?void 0:t.eventState){case Z.EnumEventState.UNKNOWN_STATE:d=(0,i.jsx)(fe.Z,{style:{fontSize:"1rem"},fontSize:"small"}),c=e.operationList&&e.operationList.length>0?"En camino":"Sin operación";break;case Z.EnumEventState.DOWNLOAD:d=(0,i.jsx)(Ee.Z,{style:{fontSize:"1rem"},fontSize:"small"}),c=null===(n=e.eventState)||void 0===n?void 0:n.name;break;case Z.EnumEventState.UPLOAD:d=(0,i.jsx)(ye.Z,{style:{fontSize:"1rem"},fontSize:"small"}),c=null===(s=e.eventState)||void 0===s?void 0:s.name;break;case Z.EnumEventState.TO_UPLOAD:d=(0,i.jsx)(Ne.Z,{style:{fontSize:"1rem",transform:"rotate(180deg)"},fontSize:"small"}),c=null===(o=e.eventState)||void 0===o?void 0:o.name;break;case Z.EnumEventState.TO_DOWNLOAD:d=(0,i.jsx)(Ne.Z,{style:{fontSize:"1rem"},fontSize:"small"}),c=null===(l=e.eventState)||void 0===l?void 0:l.name;break;default:d=(0,i.jsx)(Ce.Z,{style:{fontSize:"1rem"},fontSize:"small"}),c="Advertencia!!! en otro estado..."}return d&&(0,i.jsx)(a.ZP,Object.assign({title:c,placement:"top",TransitionComponent:xe.Z,TransitionProps:{timeout:600}},{children:(0,i.jsx)(r.Z,Object.assign({style:{margin:0,padding:0,zIndex:4},size:"small",onClick:()=>{}},{children:d}))}))},Pe=({truck:e,temporal:t,operation:n,temporalRemove:r,eventFrom:o,isFilter:c=!1,distanceToExcavator:d,excavator:u,id:v})=>{var m,h;const j=(0,L.T)(),{timeline:p}=(0,L.C)(P.h3),{loginResponse:{user:x}}=(0,L.C)(k.MR),[b,O]=(0,E.useState)(Number(null==p?void 0:p.initialHourmeter.toFixed(1))),{eventList:f}=(0,L.C)(F.yJ),[y,N]=(0,E.useState)(),{lostConnection:S}=(0,we.AT)(e),{statusCreateOperation:A}=(0,L.C)(ke.yV),w=De(),[{isDragging:D},$]=(0,be.c)((()=>({type:Oe,item:{truck:e},end:(t,i)=>{const s=i.getDropResult();i.canDrag(),null!==s&&(j((0,P.Qi)({truck:e,eventTo:null==s?void 0:s.eventTo,eventFrom:o})),j((0,Le.CB)(null==s?void 0:s.eventTo)),j((0,P.h1)(e)),(null==s?void 0:s.operation)&&j((0,R.UN)({operationId:s.operation.id,truck:e,operationOldId:n?n.id:""})))},collect:e=>({isDragging:e.isDragging(),handlerId:e.getHandlerId()})})),[r,n,e]),z=(0,E.useCallback)((()=>{var t;const n=null===(t=e.deviceAlias)||void 0===t?void 0:t.split("-");return n&&n.length>1?n[1]:""}),[e.deviceAlias]);return(0,i.jsx)(g.Z,Object.assign({id:v||`truck-${e.deviceId}`,style:{opacity:D?.5:1},className:c&&!r?w.rootFilter:t?w.rootItemTemporal:r?w.rootItemTemporalRemove:w.rootItem,ref:$,elevation:4},{children:(0,i.jsxs)(l.Z,Object.assign({disableGutters:!0,className:w.contentTruck},{children:[(0,i.jsx)(Se.Z,{className:w.stateTruck,style:{color:S||0==(null===(m=e.sensor)||void 0===m?void 0:m.latitude)||void 0===e.sensor?C.fQ:C.FD},fontSize:"small"}),(0,i.jsxs)(s.Z,Object.assign({container:!0,onMouseDown:()=>{return t=void 0,n=void 0,s=function*(){const t=f.find((e=>e.event===o));if(t){const n={id:"",deviceId:e.deviceId,deviceAlias:e.deviceAlias,initialHourmeter:0,finalHourmeter:0,initialEventState:{id:"",name:"",eventState:Z.EnumEventState.UNKNOWN_STATE,event:Object.assign({},t)},initialState:T.EnumEvent.UNKNOWN_STATE_EVENT,finalState:T.EnumEvent.UNKNOWN_STATE_EVENT,durationTime:0,shift:Te.Shift.UNKNOWN_SHIFT,stateRegister:0,adjustment:0,status:!1,assetType:0,guard:Ze.EnumGuard.UNKNOWN_GUARD,userId:null==x?void 0:x.id};yield j((0,P.f0)(n))}},new((i=void 0)||(i=Promise))((function(e,a){function r(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,o)}l((s=s.apply(t,n||[])).next())}));var t,n,i,s}},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0,style:{marginTop:4}},{children:(0,i.jsx)(a.ZP,{title:(()=>{var t,n;return(null===(n=null===(t=e.eventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.name)?e.eventState.event.name:""})(),placement:"top",TransitionComponent:xe.Z,TransitionProps:{timeout:600},children:(0,i.jsx)("label",Object.assign({className:w.titleTruck,style:{color:`${(e=>{var t;let n;switch(null===(t=null==e?void 0:e.event)||void 0===t?void 0:t.event){case T.EnumEvent.NO_OPERATIONAL:n=e.eventState===Z.EnumEventState.LACK_OF_OPERATOR?C.DM:C.oz;break;case T.EnumEvent.OPERATIONAL:n=C.Ez;break;case T.EnumEvent.OPERATIONAL_DELAY:n=C.Gj}return n})(e.eventState)}`}},{children:z()})),onClick:()=>{}})})),(0,i.jsxs)(s.Z,Object.assign({item:!0},{children:[(0,i.jsxs)(s.Z,Object.assign({container:!0,className:w.actions,alignItems:"center"},{children:[(0,i.jsx)(Re,{truck:e}),(0,i.jsx)("div",Object.assign({style:{display:"flex",flexDirection:"row",alignItems:"center"}},{children:(0,i.jsx)(a.ZP,Object.assign({placement:"top",TransitionComponent:xe.Z,TransitionProps:{timeout:600},title:(()=>{let t=!1;return null==n||n.truckList.find((n=>{n.deviceId===e.deviceId&&(t=!0)})),t})()?"Agregar Ciclo":"Número de ciclos"},{children:(0,i.jsx)("div",Object.assign({className:w.contentCycle},{children:(0,i.jsx)("label",Object.assign({className:w.labelCycleNumber,onClick:()=>{j((0,I.eh)(e))}},{children:void 0===e.cycleNumber?"0":e.cycleNumber}))}))}))}))]})),void 0!==d&&(0,i.jsx)(s.Z,Object.assign({item:!0,className:w.labelDistance},{children:(0,i.jsxs)("label",Object.assign({className:w.titleTruck},{children:[d.toFixed(2),"m"]}))})),void 0!==u&&(0,i.jsx)(s.Z,Object.assign({item:!0,className:w.labelExcavator},{children:(0,i.jsx)("label",Object.assign({className:w.titleTruck},{children:e.operationList&&e.operationList.length>0?null===(h=e.operationList[0].excavator)||void 0===h?void 0:h.deviceAlias:""}))}))]}))]}))]}))}))};var $e=n(34880);const Fe=(0,f.Z)({rootList:{flex:1,padding:2,margin:2,overflow:"auto"},rootMap:{borderRadius:16,position:"relative",right:0,left:0},mapBackground:{position:"absolute",right:0,left:0,top:0,bottom:0,zIndex:1}}),ze=({operation:e})=>{const t=(0,E.useRef)(null),[n,a]=((0,L.T)(),(0,je._)(`RADIOSEX${e.excavatorList&&e.excavatorList.length>0?e.excavatorList[0].deviceAlias:""}`,35)),r=Fe(),o=(0,E.useRef)(null),{excavator:l,truckInRange:c,truckListInOperation:d}=(({operation:e,radio:t})=>{const[n,i]=(0,E.useState)(S.kM),[s,a]=(0,E.useState)([]),[r,o]=(0,E.useState)([]),{initial:l,truckStream:c}=(0,L.C)(ge.dc),{initial:d,excavatorStream:u}=(0,L.C)(ue.oT);return(0,E.useEffect)((()=>{if(l===ce.Vj.INITIAL&&c.sensor&&c.sensor.latitude&&n.sensor&&n.sensor.latitude&&!s.some((e=>e.deviceId===c.deviceId))){const e=(0,ve.xmu)([c.sensor.longitude,c.sensor.latitude]),i=(0,ve.xmu)([n.sensor.longitude,n.sensor.latitude]),s=(0,ve.TE$)(e,i),a=r.findIndex((e=>e.truck.deviceId===c.deviceId)),l=[...r];if(1e3*s<=t){const e={truck:c,distance:1e3*s};if(console.log("distanceBettween",s,a),-1===a){let t="";switch(n.deviceAlias.slice(0,2)){case"EX":t="excavadora";break;case"CF":t="cargador frontal"}const i=Number(c.deviceAlias.slice(-2));(0,me.jQ)(`volquete ${i} en ${t} ${n.deviceAlias.slice(-2)}`),l.push(e)}else l[a]=e;o(l)}else-1!==a&&(l.splice(a,1),o(l))}}),[c,s,t]),(0,E.useEffect)((()=>{var e;n.deviceId&&d===de.JD.DONE&&u.deviceId===n.deviceId&&(!n.sensor&&u.sensor||u.sensor&&u.sensor.latitude!==(null===(e=n.sensor)||void 0===e?void 0:e.latitude))&&i(u)}),[u]),(0,E.useEffect)((()=>{e.excavatorList&&n.deviceId!=e.excavatorList[0].deviceId&&i(e.excavatorList[0]);let t=!1;const s=[...r];e.truckList.forEach((e=>{const n=r.findIndex((t=>t.truck.deviceId===e.deviceId));n>-1&&(s.splice(n,1),console.log("truckInRangeremommmmm",n),t=!0)})),t&&o(s),a(e.truckList)}),[e.truckList]),{truckListInOperation:s,truckInRange:r,excavator:n}})({operation:e,radio:n}),[u,g]=(0,E.useState)(!1);(0,E.useEffect)((()=>()=>{o.current=null,t.current=null}),[]),(0,E.useEffect)((()=>{let e,n;if(u&&l.deviceId&&l.sensor&&l.sensor.latitude){const i={point:[l.sensor.longitude,l.sensor.latitude],label:l.deviceAlias};e=new he([i],t.current,`ID_SOUCE_CIRCLE_${l.deviceAlias}`,`ID_LAYER_CIRCLE_${l.deviceAlias}`,$e.Xb,C.J$,!0),e.addToMap(),n=new he([i],t.current,`ID_SOUCE_EXCAVATOR_${l.deviceAlias}`,`ID_SOUCE_EXCAVATOR_${l.deviceAlias}`,1,C.sb,!1),e.addToMap(),n.addToMap(),setTimeout((()=>{var e;null===(e=t.current)||void 0===e||e.setCenter(i.point)}),100)}return()=>{e&&(e.removeOfMap(),n.removeOfMap())}}),[u,l]),(0,E.useEffect)((()=>{let e;if(u&&l.deviceId&&d.length>0){const n=d.map((e=>e.sensor?{point:[e.sensor.longitude,e.sensor.latitude],label:`C${e.deviceAlias.slice(-2)} /${e.sensor.speed.toFixed(0)}kh`}:{point:[0,0],label:""}));e=new he(n,t.current,`ID_SOUCE_TRUCKOPE_${l.deviceAlias}`,`ID_SOUCE_TRUCKOPE_${l.deviceAlias}`,1,"green",!1),e.addToMap()}return()=>{e&&e.removeOfMap()}}),[u,d]),(0,E.useEffect)((()=>{let e;if(u&&l.deviceId&&c.length>0){const n=c.map((e=>{var t,n;return{point:[e.truck.sensor?e.truck.sensor.longitude:0,e.truck.sensor?e.truck.sensor.latitude:0],label:`C${e.truck.deviceAlias.slice(-2)} /${null===(n=null===(t=e.truck)||void 0===t?void 0:t.sensor)||void 0===n?void 0:n.speed.toFixed(0)}kh`}}));e=new he(n,t.current,`ID_SOUCE_TRUCKRANGE_${l.deviceAlias}`,`ID_LAYER_TRUCKRANGE_${l.deviceAlias}`,1,C.J$,!1),e.addToMap()}return()=>{e&&e.removeOfMap()}}),[u,c]);const v=(0,E.useMemo)((()=>(0,i.jsx)(z.T5,Object.assign({style:{position:"absolute",top:0,zIndex:2}},{children:(0,i.jsx)(z.T5,Object.assign({container:!0,direction:"row"},{children:c.map((e=>{var t,n,s;const a=null===(s=null===(n=null===(t=e.truck)||void 0===t?void 0:t.eventState)||void 0===n?void 0:n.event)||void 0===s?void 0:s.event;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(Pe,{eventFrom:a,truck:e.truck,distanceToExcavator:e.distance,excavator:l},e.truck.deviceId)})}))}))}))),[c,l.deviceAlias]),m=(0,E.useMemo)((()=>(0,i.jsx)(z.P4,Object.assign({item:!0},{children:(0,i.jsx)(pe.C,{propsForm:{},propsTextField:{variant:"outlined",size:"small",label:"Radio de proximidad",style:{marginTop:8},onChange:e=>{const t=parseInt(e.target.value);t&&a(t)},value:n}})}))),[n]);return(0,i.jsxs)(s.Z,Object.assign({className:r.rootList},{children:[m,(0,i.jsxs)(z.P4,Object.assign({item:!0,className:r.rootMap},{children:[v,(0,i.jsxs)(z.T5,{children:[(0,i.jsx)(z.P4,{className:r.mapBackground}),(0,i.jsx)(le.Z,Object.assign({map:t,dragRotate:!1,style:"mapbox://styles/dispatchgat/ckqqsfc2y46bo17sf1y29zwnj",mapContainer:o,bearing:0,pitch:15},{lat:-7.6163,lng:-78.196,zoom:18,setLoad:g},{height:"300px",dragControls:!1}),"map2")]})]}))]}))};var Me=function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((i=i.apply(e,t||[])).next())}))};const We=(0,f.Z)({rootList:{flex:1,padding:2,margin:2,overflow:"auto"},rootNoDropItem:{padding:2,margin:2,width:32,height:"92vh"},rootListOver:{flex:1,padding:2,margin:2,overflow:"auto",background:"#80808045"},rootNotDropList:{width:300,padding:2,margin:2,overflow:"auto",zIndex:1,transform:"translateX(-50%) translateY(130px) rotate(-90deg)",msTransform:"translateX(-50%) translateY(130px) rotate(-90deg)",mozTransform:"translateX(-50%) translateY(130px) rotate(-90deg)",OTransform:"translateX(-50%) translateY(130px) rotate(-90deg)",position:"absolute",left:"50%",top:"0%"},rootNotOperation:{width:36,padding:2,margin:2,background:`${C.J$}10`,borderColor:C.J$,borderWidth:2,borderStyle:"dotted"},disabledPadding:{padding:0,paddingBottom:2,flex:1},labelExcavator:{fontSize:21,borderRadius:8,borderStyle:"dotted",padding:4,margin:2,background:"#424141",color:"#fff"}}),_e=({operation:e})=>{const t=We(),n=e.excavatorList.length>0?e.excavatorList[0]:null;return(0,i.jsxs)(z.T5,Object.assign({container:!0,className:t.disabledPadding,alignItems:"center",justifyContent:e.id?"flex-start":"flex-end"},{children:[(0,i.jsx)(z.P4,Object.assign({item:!0},{children:(0,i.jsx)(o.Z,{secondary:(0,i.jsx)("strong",Object.assign({className:t.labelExcavator},{children:null==n?void 0:n.deviceAlias}))})})),!e.id&&(0,i.jsx)(N.rU,Object.assign({style:{textDecoration:"none"},to:`/operation/create/${n?n.deviceId:""}/${n?n.id:""}`},{children:(0,i.jsx)(a.ZP,Object.assign({title:`Asignar operación a ${n?n.deviceAlias:""}`},{children:(0,i.jsx)(r.Z,Object.assign({size:"small",color:"secondary"},{children:(0,i.jsx)(h.Z,{fontSize:"small"})}))}))}))]}))},Ue=({operation:e,loading:t,setLoading:n,setRefresh:o})=>{const u=We(),[g,v]=(0,E.useState)(!1),[m,h]=(0,E.useState)(!1),{timeline:f,events:y}=(0,L.C)(P.h3),{eventList:N}=(0,L.C)(F.yJ),{operationDrop:C,openModal:S}=(0,L.C)(R.YL),{hours:z,minutes:W,seconds:_}=(()=>{const e=new Date;return{hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}})(),K=`${`00${z}`.slice(-2)}:${`00${W}`.slice(-2)}:${`00${_}`.slice(-2)}`,J=new Date,[V,B]=(0,E.useState)(Number(null==f?void 0:f.initialHourmeter.toFixed(1))),Y=`0${J.getHours()}`,X=`0${J.getMinutes()}`,[q,Q]=(0,E.useState)(`${Y.slice(-2)}:${X.slice(-2)}`),[ee]=(0,U.Z)(q,f),[te]=(0,H.N)(K);(0,E.useEffect)((()=>{setTimeout((()=>{B(ee)}),100)}),[ee]);const{loginResponse:{user:ne}}=(0,L.C)(k.MR),ie=()=>{h((e=>!e))},se=(0,L.T)(),{state:ae}=(0,L.C)(F.e5);(0,E.useEffect)((()=>{switch(ae){case D.m4.SAVING:n(!0);break;case D.m4.ERROR:n(!1);break;case D.m4.DONE:n(!1),h(!1)}}),[ae]);const re=()=>v((e=>!e)),le=e.excavatorList.length>0?e.excavatorList[0]:null;return e.id?(0,i.jsxs)(l.Z,Object.assign({disableGutters:!0,className:u.disabledPadding},{children:[(0,i.jsx)(M.a,Object.assign({open:g,handleClose:re,handleConfirm:()=>Me(void 0,void 0,void 0,(function*(){n(!0);const t=yield(0,$.wg)(e.id);se(t?(0,A.L8)({open:!0,msg:t,severity:"error"}):(0,A.Ui)()),n(!1),o((e=>!e)),v(!1)})),title:"Esta seguro?"},{children:(0,i.jsxs)(O.Z,Object.assign({severity:"warning"},{children:["Esta intentando finalizar la operacion ",e.excavatorList[0].deviceAlias,", si ocurre algun error se le informará"]}))})),(0,i.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,i.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,i.jsx)(_e,Object.assign({},{operation:e})),(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(a.ZP,Object.assign({title:"Cambiar Carga/Descarga/Cambiones/Excavadora"},{children:(0,i.jsx)(r.Z,Object.assign({color:"secondary",size:"small",onClick:ie},{children:(0,i.jsx)(j.Z,{fontSize:"small"})}))})),(0,i.jsx)(a.ZP,Object.assign({title:"Finalizar Operación"},{children:(0,i.jsx)(r.Z,Object.assign({color:"secondary",onClick:re,size:"small"},{children:(0,i.jsx)(p.Z,{fontSize:"small"})}))})),(0,i.jsx)(a.ZP,Object.assign({title:"Detalle Operación"},{children:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.Z,Object.assign({color:"secondary",size:"small",onClick:()=>{se((0,w.l4)(le.deviceId)),se((0,I.m1)(le))}},{children:(0,i.jsx)(x.Z,{fontSize:"small"})}))})}))]})]})),(0,i.jsxs)(s.Z,Object.assign({item:!0,md:12},{children:[(0,i.jsx)(G.g7,{operation:e}),(0,i.jsx)(G.DQ,{operation:e}),e.truckList.length>0?(0,i.jsx)(c.Z,{size:"small",label:`${e.truckList.length} camiones`}):(0,i.jsx)(i.Fragment,{})]})),(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(null==C?void 0:C.id)&&y.eventFrom===T.EnumEvent.MAINTENANCE?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(i.Fragment,{children:e.truckTemporalList&&e.truckTemporalList.length>0&&!t&&(0,i.jsx)(a.ZP,Object.assign({title:"Guardar cambios"},{children:(0,i.jsx)(d.Z,Object.assign({size:"small",variant:"outlined",color:"secondary",startIcon:(0,i.jsx)(b.Z,{color:"secondary",fontSize:"small"}),onClick:()=>Me(void 0,void 0,void 0,(function*(){(new Date).getSeconds();const t=N.find((e=>e.event===T.EnumEvent.OPERATIONAL));(null==t?void 0:t.event)&&e.truckTemporalList.map((n=>Me(void 0,void 0,void 0,(function*(){se((0,P.h1)(n));const i=V;if(console.log("initial: ",i),t.event){const n={event:t,eventState:{id:"",name:"",eventState:Z.EnumEventState.UNKNOWN_STATE,event:t},initialTime:`${K}`,date:te,initialHourometer:i};se((0,R.gI)({idDest:e.id,trucks:e.truckTemporalList,timeline:n}))}se((0,P.Go)())})))),se((0,R.hK)({operationId:e.id}))}))},{children:"GUARDAR"}))}))})})),(0,i.jsx)(oe,{open:m,operation:e,setOpen:ie})]}))]})):(0,i.jsx)(_e,Object.assign({},{operation:e}))},He=({operation:e,filterList:t})=>{const n=(0,E.useMemo)((()=>{var n;return null===(n=e.truckTemporalList)||void 0===n?void 0:n.map(((n,s)=>(0,i.jsx)(Pe,{operation:e,truck:n,eventFrom:T.EnumEvent.OPERATIONAL,temporal:!0,isFilter:t.some((e=>e.deviceId===n.deviceId))},s)))}),[e.truckTemporalList]);return(0,i.jsx)(i.Fragment,{children:n})},Ge=({operation:e,filterList:t})=>{const[n,s]=(0,E.useState)(e.truckList);(0,E.useEffect)((()=>{s((t=>e.truckList&&e.truckList.length!==n.length||n.some((t=>e.truckList.some((e=>e.deviceId==t.deviceId&&(t.sensor&&e.sensor?t.cycleNumber!==e.cycleNumber||t.state!==e.state||t.eventState!==e.eventState||t.sensor.latitude!=e.sensor.latitude:t.cycleNumber!==e.cycleNumber||t.state!==e.state||t.eventState!==e.eventState)))))?e.truckList:t))}),[e.truckList]);const a=(0,E.useMemo)((()=>e.truckList.map(((n,s)=>{var a;return(0,i.jsx)(Pe,{operation:e,isFilter:t.some((e=>e.deviceId===n.deviceId)),eventFrom:T.EnumEvent.OPERATIONAL,truck:n,temporalRemove:null===(a=e.truckTemporalRemoveList)||void 0===a?void 0:a.some((e=>e.deviceId===n.deviceId))},s)}))),[n,t]);return(0,i.jsx)(i.Fragment,{children:a})},Ke=({operation:e,setRefresh:t,filterList:n})=>{const[a,r]=(0,E.useState)(!1),[o,l]=(0,E.useState)(S.kM),c=(0,L.T)();(0,E.useEffect)((()=>{e&&e.truckList&&e.truckList.length>0?l((t=>o.deviceId!==e.excavatorList[0].deviceId?e.excavatorList[0]:t)):l(S.kM)}),[e]);const[{canDrop:d,isOver:h},j]=(0,y.L)((()=>({accept:Oe,drop:()=>({operation:e,eventTo:T.EnumEvent.OPERATIONAL}),collect:t=>({isOver:!!t.isOver(),canDrop:!!e.id})})),[e]);(0,E.useEffect)((()=>{h&&d&&c((0,R.Rr)(e))}),[h]);const p=We(),x=(0,E.useCallback)((()=>h&&d?p.rootListOver:h&&!d?p.rootNotDropList:p.rootList),[h,d]),b=(0,E.useMemo)((()=>(0,i.jsx)(i.Fragment,{children:o&&(0,i.jsx)(ze,{truckList:[],operation:e})})),[o,e]),O=(0,E.useMemo)((()=>(0,i.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,i.jsx)(Ge,{operation:e,filterList:n}),(0,i.jsx)(He,{operation:e,filterList:n})]}))),[e,n]);return d?(0,i.jsxs)(u.Z,Object.assign({ref:j,disablePadding:!0,component:g.Z,style:{display:"flex",flexDirection:"column"},className:x()},{children:[(0,i.jsxs)(z.P4,Object.assign({item:!0,style:{flex:1}},{children:[(0,i.jsx)(Ue,Object.assign({},{operation:e,setLoading:r,loading:a,setRefresh:t})),(0,i.jsx)(v.Z,{orientation:"horizontal"}),(0,i.jsx)(_,{loading:a}),(0,i.jsx)(m.Z,{height:4}),O]})),b]})):(0,i.jsx)(u.Z,Object.assign({disablePadding:!0,component:g.Z,className:p.rootNotOperation},{children:(0,i.jsx)("div",Object.assign({className:p.rootNotDropList},{children:(0,i.jsx)(Ue,Object.assign({},{operation:e,setLoading:r,loading:a,setRefresh:t}))}))}))};var Je=n(14129),Ve=n(57865);const Be=e=>{if(!e)return"";const t=q.PW[e.type];switch(e.type){case 1:return e.pit&&e.pit.projectList&&e.pit.projectList.length>0&&e.pit.projectList[0].polygonList&&e.pit.projectList[0].polygonList.length>0?`${e.pit.projectList[0].name} - ${e.pit.projectList[0].polygonList[0].name}`:"";case 3:return e[t]&&e[t].cellList&&e[t].cellList.length>0?e[t].cellList[0].name:"";default:return""}},Ye=e=>{if(!e&&1!==e.type)return"";const t=q.PW[e.type];return`${"dme"===t?"Desm.":"stock"===t?"STK":"Mine."} ${e[t]&&e[t].cellList&&e[t].cellList.length>0?e[t].cellList[0].name:""}`},Xe=()=>{const{operationList:e,status:t,truckAvailable:n,operationDrop:i}=(0,L.C)(R.YL),{truckInfoList:s}=(0,L.C)(Ie.ej),{initial:a}=(0,L.C)(ae.kW),r=(0,L.T)(),[o,l]=(0,E.useState)([]),[c,d]=(0,E.useState)();return(0,E.useEffect)((()=>{if(t===de.JD.DONE&&a!==ce.Vj.LOADING){const t=e.map((e=>{var t,n,i;return Object.assign(Object.assign({},e),{excavator:e.excavatorList.length>0?e.excavatorList[0]:{},typeUpload:q.WW[null===(t=e.upload)||void 0===t?void 0:t.type],labelUpload:`${q.WW[null===(n=e.upload)||void 0===n?void 0:n.type]} ${e.upload?Be(e.upload):""}`,labelDownload:e.download?`${Ye(e.download)}`:"",typeDownload:q.WW[null===(i=e.download)||void 0===i?void 0:i.type],labelstate:q.J8[e.state],cycles:e.cycleList.length,truckList:e.truckList.map((e=>{var t;return Object.assign(Object.assign({},e),{deviceAliasNumber:Number(null===(t=e.deviceAlias.match(/\d/g))||void 0===t?void 0:t.join(""))})})).sort(((e,t)=>e.deviceAliasNumber-t.deviceAliasNumber))})}));l(t)}else l([]);d(e.find((e=>e.id===(null==i?void 0:i.id))))}),[e]),(0,E.useEffect)((()=>{e.length>0&&s.length>0&&r((0,R.Vb)({truckList:s}))}),[s,t]),{operationsAll:o,status:t,truckAvailable:n,operationDropRes:c}},qe=()=>(0,i.jsx)(s.Z,Object.assign({container:!0,justifyContent:"center",alignItems:"center"},{children:(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsx)(B.Z,{children:"No data found"})}))}));var Qe=n(41120),et=n(58365);const tt=({height:e,width:t})=>(0,i.jsx)(s.Z,Object.assign({container:!0,justifyContent:"center",alignItems:"center"},{children:(0,i.jsx)(et.Z,{height:e,width:t,variant:"rect"})}));var nt=n(14741),it=n(17215),st=n(59693);const at=(0,Qe.Z)((e=>({search:{position:"relative",marginRight:2,borderRadius:e.shape.borderRadius,backgroundColor:(0,st.Fq)(e.palette.common.white,.15),"&:hover":{backgroundColor:(0,st.Fq)(e.palette.common.white,.25)},marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{width:"auto"}},searchIcon:{padding:e.spacing(0,0),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},cancelIcon:{padding:e.spacing(0,0),height:"100%",alignItems:"center",justifyContent:"center",display:"flex"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:`calc(1em + ${e.spacing(1)}px)`,paddingRight:`calc(1em + ${e.spacing(1)}px)`,transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:"40ch","&:focus":{width:"50ch"}}}}))),rt=({search:e,setSearch:t})=>{const n=at(),a=(0,E.useRef)();(0,E.useEffect)((()=>{document.onkeydown=r}),[]);const r=(0,E.useCallback)((e=>{"Escape"===e.key&&(l(),setTimeout((()=>{var e;console.log("Escape",a.current),null===(e=a.current)||void 0===e||e.focus()}),300))}),[]),o=(0,E.useCallback)((e=>{t(e.target.value)}),[]),l=(0,E.useCallback)((()=>{t("")}),[]);return(0,i.jsx)(g.Z,Object.assign({style:{marginTop:2,marginRight:2}},{children:(0,i.jsx)(s.Z,Object.assign({container:!0,alignItems:"center"},{children:(0,i.jsxs)("div",Object.assign({className:n.search},{children:[(0,i.jsx)("div",Object.assign({className:n.searchIcon},{children:(0,i.jsx)(it.Z,{color:"primary",fontSize:"small"})})),(0,i.jsx)(nt.Z,{color:"primary",value:e,autoFocus:!0,inputRef:a,onKeyDown:r,onChange:o,placeholder:"Buscar...",classes:{root:n.inputRoot,input:n.inputInput},inputProps:{"aria-label":"search"}})]}))}))}))};var ot=n(64436),lt=n(52541),ct=n(30553),dt=n(40074),ut=n(95477);function gt({open:e,setOpen:t,handleClickConfirm:n,children:s,loading:a,handleClose:r}){return(0,i.jsxs)(K.Z,Object.assign({fullWidth:!0,maxWidth:"lg",open:e,onClose:r||(()=>{t(!1)}),"aria-labelledby":"max-width-dialog-title"},{children:[(0,i.jsx)(V.Z,{children:s}),(0,i.jsx)(X.Z,{children:a?(0,i.jsx)(ut.Z,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,Object.assign({onClick:r,size:"small",color:"primary"},{children:"Cancel"})),(0,i.jsx)(d.Z,Object.assign({onClick:n,variant:"outlined",size:"small",color:"secondary"},{children:"Confirm"}))]})})]}))}var vt=n(76533),mt=n(10465),ht=n(13258);const jt=(0,Qe.Z)((e=>({disabledSpacing:{margin:0,padding:0,width:"auto"},checkbox:{"& .MuiCheckbox-root":{margin:0,padding:0,paddingLeft:8}}}))),pt=E.memo((({truck:e,checked:t,trucksSelect:n,setTrucksSelect:s,disableWithOperation:a,handleonchangeTruck:r})=>{var c;const d=jt(),u=e.state>=0||0!==(null===(c=e.sensor)||void 0===c?void 0:c.latitude)?e.state===Z.EnumEventState.UNKNOWN_STATE&&e.operationList&&e.operationList.length>0?"En camino":de.SS[e.state]:"Conexión perdida",g=e.operationList&&e.operationList.length>0&&e.operationList[0]&&e.operationList[0].excavator?e.operationList[0].excavator.deviceAlias:"";return(0,i.jsx)(l.Z,Object.assign({button:!0,dense:!0,className:d.disabledSpacing,disabled:!!a&&!!g},{children:(0,i.jsx)(ct.Z,{className:d.checkbox,onChange:()=>{const t=n.findIndex((t=>e.deviceId===t.deviceId));-1===t?n.push(e):n.splice(t,1),s(JSON.parse(JSON.stringify(n)))},control:(0,i.jsx)(ht.Z,{onClick:()=>r(e),size:"small",checked:t,inputProps:{style:{padding:0}}}),label:(0,i.jsx)(o.Z,{primary:`${e.deviceAlias} ${g?` ➜ ${g}`:""} (${u})`})})}))})),xt=(0,Qe.Z)({root:{paddingLeft:4,maxHeight:"60vh",overflowY:"scroll",boxShadow:"inset 0px -2px 10px 0px rgb(17 16 10 / 56%)",borderRadius:4},searchContainer:{marginRight:8}}),bt=E.memo((({trucksSelect:e,setTrucksSelect:t,handleonchangeTruck:n,disableWithOperation:a})=>{const{truckInfoList:r}=(0,L.C)(Ie.ej),o=xt(),[l,c]=(0,E.useState)([]),[d,g]=(0,E.useState)("");(0,E.useEffect)((()=>{c(r.filter((e=>e.deviceAlias.toLowerCase().includes(d.toLowerCase()))))}),[r]);const v=(0,E.useCallback)((e=>{if(e){const t=e.target?e.target.value.toUpperCase():"";c(r.filter((e=>e.deviceAlias.toUpperCase().includes(t)))),g(t)}}),[r]),m=(0,E.useCallback)((()=>{c(r),g("")}),[r]);return(0,i.jsxs)(u.Z,Object.assign({dense:!0,disablePadding:!0,style:{margin:4,paddingTop:4}},{children:[(0,i.jsx)(mt.V,{functionFilter:v,functionCancel:m}),(0,i.jsx)(s.Z,Object.assign({container:!0,className:o.root},{children:l.map((s=>{return(0,i.jsx)(E.Fragment,{children:(0,i.jsx)(pt,{handleonchangeTruck:n,disableWithOperation:a,checked:(r=s,!!e.find((e=>r.deviceId===e.deviceId))),trucksSelect:e,setTrucksSelect:t,truck:s})},s.deviceId);var r}))}))]}))}));const Ot=({open:e,setOpen:t,setRefresh:n,operations:r})=>{const c=(0,L.T)(),[d,v]=(0,E.useState)([]),[m,h]=(0,E.useState)(""),[j,p]=(0,E.useState)([]),[x,b]=(0,E.useState)(!1),[f,y]=E.useState(!1);(0,E.useEffect)((()=>{c(Ie.RK),c(ae.CE)}),[]);const N=e=>{h(e.target.value)};return(0,i.jsxs)(gt,Object.assign({},{loading:f},{open:e,handleClickConfirm:()=>{j.length<=0||m.length<=0?c((0,A.L8)({open:!0,msg:"Debe seleccionar almenos una excavadora y un camión",severity:"warning"})):b(!0)},handleClose:()=>{t(!1),p([]),h("")}},{children:[(0,i.jsx)(s.Z,Object.assign({container:!0},{children:(0,i.jsx)(s.Z,Object.assign({item:!0,xs:12},{children:(0,i.jsx)(B.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16}},{children:"Reasignación de camiones"}))}))})),(0,i.jsxs)(s.Z,Object.assign({container:!0,style:{paddingLeft:4}},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0,xs:6},{children:(0,i.jsx)(g.Z,Object.assign({elevation:4},{children:(0,i.jsx)(bt,{handleonchangeTruck:()=>{},setTrucksSelect:p,trucksSelect:j})}))})),(0,i.jsx)(s.Z,Object.assign({item:!0,xs:6},{children:(0,i.jsx)(g.Z,Object.assign({style:{margin:10}},{children:(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(l.Z,{children:(0,i.jsx)(o.Z,{secondary:"Excavadora de destino"})}),(0,i.jsx)(l.Z,{children:(0,i.jsx)(o.Z,{children:(0,i.jsx)(ot.Z,Object.assign({component:"fieldset"},{children:(0,i.jsx)(lt.Z,Object.assign({row:!0,"aria-label":"gender",name:"radio-buttons-group"},{children:r.map((e=>{var t;return(0,i.jsx)(a.ZP,Object.assign({title:e.state!==q.J8.Operando?"Excavadora sin operación":"Excavadora de destino"},{children:(0,i.jsx)(ct.Z,{value:e.id,disabled:e.state!==q.J8.Operando,control:(0,i.jsx)(dt.Z,{disabled:e.state!==q.J8.Operando}),onChange:N,label:`  ${null===(t=e.excavatorList[0])||void 0===t?void 0:t.deviceAlias}`})}),e.id)}))}))}))})})]})}))}))]})),(0,i.jsx)(M.a,Object.assign({open:x,handleClose:()=>{b(!1)},handleConfirm:()=>{b(!1),t(!1),p([]),h(""),((e,t,n,i,s)=>{var a,r,o,l;a=void 0,r=void 0,l=function*(){n(!0);const s=yield(0,vt.e1)(e,t,void 0);console.log("responseAssigment",s),n(!1),i((e=>!e));let a="";s.truckErrorList.length>0&&s.truckErrorList.forEach((e=>{const t=1===e.state?"CARGANDO":"A DESCARGA";a+=` ${e.truckError.deviceAlias}=> ${t},`})),""!==a&&alert(`Las siguientes unidades no han podido ser reasignadas: ${a}`)},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{s(l.next(e))}catch(e){t(e)}}function i(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){var s;t.done?e(t.value):(s=t.value,s instanceof o?s:new o((function(e){e(s)}))).then(n,i)}s((l=l.apply(a,r||[])).next())}))})(m,j,y,n)},title:"Area you sure?"},{children:(0,i.jsx)(O.Z,Object.assign({severity:"warning"},{children:"Intentaremos mover estos camiones, si ocurre algun error se le informará"}))}))]}))};var ft=n(73099),Et=n(31125);const yt=({enumEvent:e})=>{const{truck:t,events:n}=(0,L.C)(P.h3),{eventTo:s,eventFrom:a}=n;return(0,i.jsx)(i.Fragment,{children:s==T.EnumEvent.OPERATIONAL&&a==T.EnumEvent.MAINTENANCE&&e==a||s==e?(0,i.jsx)(Pe,{eventFrom:T.EnumEvent.UNKNOWN_STATE_EVENT,id:`truck-hormeter-${null==t?void 0:t.deviceId}`,truck:t,isFilter:!1},null==t?void 0:t.deviceId):(0,i.jsx)(i.Fragment,{})})};var Nt=n(11818);const Ct=(0,Qe.Z)({rootNoDropItem:{},rootListOver:{marginBottom:4,background:"#80808045"},root:{padding:2},rootList:{marginBottom:4},ListItem:{padding:0,margin:0},itemHeaderList:{flex:1,paddingLeft:2},textHeaderList:{margin:0},iconTextList:{padding:0,margin:0},chipText:{height:12,color:"#fff",fontWeight:"bold"}}),St=({items:e,filterList:t,title:n,useVisibleList:s,keyState:a,isAviable:r})=>{(0,L.T)();const d=Ct(),[{canDrop:v,isOver:m},h]=(0,y.L)((()=>({accept:Oe,drop:()=>({eventTo:a}),collect:e=>({isOver:e.isOver(),canDrop:!0})})),[]),j=(0,E.useCallback)((()=>m&&v?d.rootListOver:d.rootList),[m,v]),[p,x]=s,b=(0,E.useMemo)((()=>e.map((e=>(0,i.jsx)(Pe,{eventFrom:a,truck:e,isFilter:t.some((t=>t.deviceId===e.deviceId))},e.deviceId)))),[e,t]),[O,f]=(0,E.useState)(!1),N=(0,E.useCallback)((()=>{const e=p.findIndex((e=>e.value===a));if(e>-1){f((e=>!e));const t=JSON.parse(JSON.stringify(p));t[e].visible=!p[e].visible,x(t)}console.log("Visibility: ",p,a)}),[p]);return(0,i.jsxs)(u.Z,Object.assign({ref:!1===r?h:null,component:g.Z,disablePadding:!0,className:j()},{children:[(0,i.jsx)(l.Z,Object.assign({button:!0,disableGutters:!0,className:d.ListItem,onClick:N},{children:(0,i.jsxs)(z.T5,Object.assign({container:!0,justifyContent:"space-between",alignItems:"center"},{children:[(0,i.jsxs)(z.P4,Object.assign({className:d.itemHeaderList,container:!0,direction:"column",justifyContent:"center",alignContent:"flex-start"},{children:[(0,i.jsx)(o.Z,{className:d.textHeaderList,secondary:n}),(0,i.jsx)(c.Z,{size:"small",className:d.chipText,color:"primary",label:`(${e.length}) camiones`})]})),e.length?(0,i.jsx)(z.hU,Object.assign({size:"small",className:d.iconTextList},{children:O?(0,i.jsx)(ft.Z,{fontSize:"small"}):(0,i.jsx)(Et.Z,{fontSize:"small"})})):(0,i.jsx)(i.Fragment,{})]}))})),(0,i.jsx)(z.iz,{orientation:"horizontal"}),(0,i.jsx)(xe.Z,Object.assign({in:!O,mountOnEnter:!0,unmountOnExit:!0},{children:(0,i.jsxs)(z.T5,Object.assign({container:!0,justifyContent:"center"},{children:[b,(0,i.jsx)(yt,{enumEvent:a})]}))}))]}))},Lt=({truckAvailable:e,filterList:t})=>{const n=(0,L.T)(),{timelineObject:s}=(0,L.C)(P.h3),[a,r,o,l]=(0,Nt.y)(s),{mantoList:c,DOperativeList:d,NOperativeList:u}=(e=>{const{truck:t,events:n}=(0,L.C)(P.h3),[i,s]=(0,E.useState)([]),[a,r]=(0,E.useState)([]),[o,l]=(0,E.useState)([]),[c,d]=(0,E.useState)([]);return(0,E.useEffect)((()=>{r((t=>{const n=e.filter((e=>{var t,n;return e.eventState&&(null===(n=null===(t=e.eventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===T.EnumEvent.MAINTENANCE}));return t.length===n.length&&JSON.stringify(t)===JSON.stringify(n)?t:n})),l((t=>{const n=e.filter((e=>{var t,n;return e.eventState&&(null===(n=null===(t=e.eventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===T.EnumEvent.OPERATIONAL_DELAY}));return t.length===n.length&&JSON.stringify(t)===JSON.stringify(n)?t:n})),d((t=>{const n=e.filter((e=>{var t,n,i,s,a,r;return(null===(n=null===(t=e.eventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===T.EnumEvent.NO_OPERATIONAL||(null===(s=null===(i=e.eventState)||void 0===i?void 0:i.event)||void 0===s?void 0:s.event)===T.EnumEvent.OPERATIONAL&&0===e.operationList.length||(null===(r=null===(a=e.eventState)||void 0===a?void 0:a.event)||void 0===r?void 0:r.event)===T.EnumEvent.UNKNOWN_STATE_EVENT&&"UNKNOWN"!==e.eventState.name}));return t.length===n.length&&JSON.stringify(t)===JSON.stringify(n)?t:n}))}),[e]),{mantoList:a,DOperativeList:o,NOperativeList:c}})(e);(0,E.useEffect)((()=>{n((0,Le.TU)())}),[]);const g=Ct(),v=(0,je._)("VISIBLE_STATES_TABS",Object.keys(T.EnumEvent).map(((e,t)=>({value:T.EnumEvent[e],label:e,visible:!1})))),m=(0,E.useMemo)((()=>(0,i.jsx)(z.T5,Object.assign({className:g.root},{children:(0,i.jsx)(St,{items:u,filterList:t,title:"NOPERATIVO",useVisibleList:v,keyState:T.EnumEvent.NO_OPERATIONAL,isAviable:a})}))),[u,t,v]),h=(0,E.useMemo)((()=>(0,i.jsx)(z.T5,Object.assign({className:g.root},{children:(0,i.jsx)(St,{items:c,filterList:t,title:"MANTO",useVisibleList:v,keyState:T.EnumEvent.MAINTENANCE,isAviable:l})}))),[c,t,v]),j=(0,E.useMemo)((()=>(0,i.jsx)(z.T5,Object.assign({className:g.root},{children:(0,i.jsx)(St,{items:d,filterList:t,title:"DOPERATIVO",useVisibleList:v,keyState:T.EnumEvent.OPERATIONAL_DELAY,isAviable:o})}))),[d,t,v]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(z.T5,Object.assign({className:g.root},{children:[m,h,j]}))})};var Tt=n(89550),Zt=n(89452),kt=n(71308),At=n(15635),It=n(47463),wt=n(51034);const Dt=(0,Qe.Z)({paddingContainer:{padding:8}}),Rt=({timeline:e,truck:t,eventSelect:n,setRefresh:a})=>{var r,o;const l=Dt(),c=(0,E.useRef)(),u=(0,E.useRef)(),v=(0,E.useRef)(),m=(0,L.T)(),{stateCreateTimeline:h,statusCreateOperation:j}=(0,L.C)(ke.yV),{eventStateList:p}=((0,At.r)(j),(0,L.C)(F.eG)),[x,b]=(0,E.useState)([]),[O,f]=(0,E.useState)(Number(e.initialHourmeter.toFixed(1))),[y,N]=(0,E.useState)(null),[C,S]=(0,E.useState)(null),{hours:A,minutes:I,seconds:w}=(()=>{const e=new Date;return{hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}})(),D=`${`00${A}`.slice(-2)}:${`00${I}`.slice(-2)}`,[$]=(0,H.N)(D),{loginResponse:{user:M}}=(0,L.C)(k.MR),{events:W}=(0,L.C)(P.h3),{eventTo:_,eventFrom:G}=W,{eventList:K}=(0,L.C)(F.yJ),{operationDropRes:J}=Xe(),V=new Date,X=`0${V.getHours()}`,q=`0${V.getMinutes()}`,[Q,ee]=(0,E.useState)(`${X.slice(-2)}:${q.slice(-2)}`),[te]=(0,U.Z)(Q,e);(0,E.useEffect)((()=>{setTimeout((()=>{f(te)}),100)}),[te]),(0,E.useEffect)((()=>{m(Le.TU)}),[K]),(0,E.useEffect)((()=>{p.length>0&&(b(p),N(p[0]))}),[p,n]),(0,E.useEffect)((()=>{c&&c.current&&(c.current.focus(),c.current.setSelectionRange(c.current.value.length-2,c.current.value.length))}),[c]);const ne=e=>{if("Scape"===e.key)return N(null),void setTimeout((()=>{var e;S(null),null===(e=v.current)||void 0===e||e.focus()}),100);if(("Enter"===e.key||"Tab"===e.key)&&p.length>0){if(C)return N(C),void setTimeout((()=>{var e;S(null),null===(e=v.current)||void 0===e||e.focus()}),100);if(y)se();else{const e=x.filter((e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(v.current?v.current.value.toLocaleLowerCase():"")}));e.length>0&&(N(e[0]),setTimeout((()=>{S(null)}),100))}}else N(null)},se=()=>{return i=void 0,s=void 0,o=function*(){if(K.find((e=>e.event===n)),y){const i=e.finalState,s=e.shift,r=e.stateRegister,o=Object.assign({},y);n===T.EnumEvent.OPERATIONAL&&(o.eventState=Z.EnumEventState.UNKNOWN_STATE,o.id="",o.name="UNKNOWN");const l=Number(O);console.log("initialHorometer",l);let c=(new Date).getSeconds();if(l>=0){const e={id:"",deviceAlias:t.deviceAlias,deviceId:t.deviceId,initialHourmeter:l,adjustment:0,durationTime:0,finalHourmeter:0,initialTime:`${Q}:${c<10?`0${c}`:c}`,initialEventState:o,initialState:n,finalState:i,shift:s,status:!1,stateRegister:r,assetType:Ae.EnumAssetType.TRUCK,guard:Ze.EnumGuard.UNKNOWN_GUARD,userId:null==M?void 0:M.id};switch(n){case T.EnumEvent.MAINTENANCE:(0,P.hO)(e),m((0,ke.Zy)({timeline:e,hour:`${Q}:${c<10?`0${c}`:c}`})),m((0,R.uP)());break;case T.EnumEvent.NO_OPERATIONAL:o.eventState===Z.EnumEventState.LACK_OF_OPERATOR&&t.operationList.length>0?yield(0,vt.g$)([t],t.operationList[0].id,e,$):m((0,ke.Zy)({timeline:e,hour:`${Q}:${c<10?`0${c}`:c}`}));break;case T.EnumEvent.OPERATIONAL:const n={event:o.event,eventState:o,initialTime:`${Q}:${c<10?`0${c}`:c}`,date:$,initialHourometer:l},i=J;J&&(m((0,R.gI)({idDest:i.id,trucks:i.truckTemporalList,timeline:n})),m((0,R.hK)({operationId:i.id})),m((0,ke.bq)()));break;case T.EnumEvent.OPERATIONAL_DELAY:(0,P.hO)(e),m((0,ke.Zy)({timeline:e,hour:`${Q}:${c<10?`0${c}`:c}`})),m((0,R.uP)())}m((0,P.Go)()),a((e=>!e))}else{const e={code:0,message:"Ingrese un horometro correcto",success:!1};m((0,wt.Qx)(e))}}else{const e={code:0,message:"Seleccionar un evento",success:!1};m((0,wt.Qx)(e))}},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{l(o.next(e))}catch(e){t(e)}}function a(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(n,a)}l((o=o.apply(i,s||[])).next())}));var i,s,r,o};return(0,i.jsx)(g.Z,Object.assign({elevation:4},{children:(0,i.jsxs)(s.Z,Object.assign({className:l.paddingContainer},{children:[(0,i.jsxs)(B.Z,{children:["Camión ",t.deviceAlias]}),(0,i.jsxs)(s.Z,{children:[(0,i.jsx)("div",{children:`De: ${null===(o=null===(r=e.initialEventState)||void 0===r?void 0:r.event)||void 0===o?void 0:o.name} => ${(e=>{var t;return null===(t=K.find((t=>t.event===e)))||void 0===t?void 0:t.name})(_)}`}),(0,i.jsxs)("div",{children:["Horometro aprox: ",e.initialHourmeter.toFixed(1),"h"]}),(0,i.jsxs)(s.Z,Object.assign({style:{marginTop:8,minHeight:"25vh"}},{children:[(()=>{if(_===T.EnumEvent.MAINTENANCE||G===T.EnumEvent.MAINTENANCE)return!0})()&&(0,i.jsx)(pe.C,{propsForm:{},propsTextField:{variant:"outlined",autoFocus:!1,size:"small",label:"Horometro de ingreso",inputRef:c,onChange:e=>{e.target.value&&f(e.target.value)},value:O,inputProps:{onKeyDown:e=>{"Enter"===e.key&&u.current&&u.current.focus()}}}}),(0,i.jsx)(pe.C,{propsForm:{},propsTextField:{variant:"outlined",autoFocus:!1,size:"small",inputRef:u,type:"time",value:Q,onChange:e=>{ee(e.target.value)},inputProps:{onKeyDown:e=>{"Enter"===e.key&&v.current&&(console.log("eValue: ",e," autocomplete: ",v),v.current.focus(),v.current.setSelectionRange(0,v.current.value.length))}}}}),(0,i.jsx)(It.I,{height:8,width:"100%"}),(0,i.jsx)(z.T5,{children:G===T.EnumEvent.MAINTENANCE&&_===T.EnumEvent.OPERATIONAL?(0,i.jsx)(i.Fragment,{children:"CAMBIANDO A OPERATIVO"}):(0,i.jsx)(ie.ZP,{renderInput:e=>(0,i.jsx)(Y.Z,Object.assign({},e,{fullWidth:!0,variant:"outlined",onKeyDown:ne,inputRef:v})),options:x,fullWidth:!0,blurOnSelect:!0,onChange:(e,t)=>N(t),size:"small",value:y,onHighlightChange:(e,t)=>{S(t)},getOptionLabel:e=>e.name,openOnFocus:!0})})]})),(0,i.jsxs)(s.Z,Object.assign({container:!0,style:{marginTop:8,gap:4},justifyContent:"flex-end"},{children:[(0,i.jsx)(d.Z,Object.assign({onClick:()=>{m((0,P.Go)()),m((0,R.uP)())},size:"small",variant:"outlined",color:"primary"},{children:"CANCELAR"})),(0,i.jsx)(d.Z,Object.assign({disabled:h===de.JD.LOADING,size:"small",variant:"contained",color:"secondary",onClick:se},{children:"CONFIRMAR"}))]}))]})]}))}))},Pt=(0,Qe.Z)({modalStyle:{minWidth:"10%",minHeight:"10%",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,justifyContent:"center",textAlign:"center",alignItems:"center",outline:"none"}}),$t=({setRefresh:e})=>{const[t,n]=(0,E.useState)(null),{eventSelect:s}=(0,L.C)(F.yJ),{openModal:a,truck:r,loadingCurrentTimeline:o,timeline:l}=(0,L.C)(P.h3),c=(0,L.T)(),d=Pt();(0,E.useEffect)((()=>{if(r){const e=document.getElementById(`truck-hormeter-${r.deviceId}`);e&&n(e)}}),[r]);const u=()=>{c((0,P.Go)()),c((0,R.uP)()),n(null),c((0,R.f1)())};(0,E.useEffect)((()=>{a||(n(null),c((0,Ie.RK)()))}),[a]),(0,E.useEffect)((()=>{window.onkeydown=g}),[]),(0,E.useEffect)((()=>{c((0,Zt.Gy)(s))}),[s]);const g=e=>{"Escape"===e.key&&u()};return(0,i.jsx)(i.Fragment,{children:t&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(Tt.Z,Object.assign({open:a,onClose:u},{children:(0,i.jsx)("div",Object.assign({className:d.modalStyle},{children:!o&&r&&l?(0,i.jsx)(Rt,{timeline:l,truck:r,setRefresh:e,eventSelect:s}):(0,i.jsx)("div",{children:(0,i.jsx)(kt.g,{})})}))}))})})};var Ft=n(70164),zt=n(33901),Mt=n(10646);const Wt=({idTruck:e})=>{const t=(0,E.useRef)(),n=(0,E.useRef)(),[o,l]=(0,E.useState)([]),[u,g]=(0,E.useState)({label:"",id:"",value:""}),{truckInfoList:v}=(0,L.C)(Ie.ej),{excavatorInfoList:h}=(0,L.C)(ae.kW),{statusCycle:j}=(0,L.C)(I.XE),[p]=(0,At.r)(j),[x,b]=(0,E.useState)(!1),O=(0,L.T)(),[f,y]=(0,E.useState)(),[N,C]=(0,E.useState)(),[S]=(0,Mt.l)(new Date),[T]=(0,Mt.i)(new Date),[Z,k]=(0,E.useState)({date:`${S}T${T}`}),{truckSelect:A}=(0,L.C)(I.XE),D={id:"",centroid:void 0,pointList:void 0,name:"Desconocido",idDme:void 0,color:void 0},[R,P]=(0,E.useState)(D),[$,z]=(0,E.useState)(D),[M,W]=(0,E.useState)(D),{dmeCellList:_,padCellList:U,stockCellList:H,polygonList:G}=(0,L.C)(F.WD),[K,J]=(0,E.useState)([]),[V,X]=(0,E.useState)([]),[q,ee]=(0,E.useState)([]);(0,E.useEffect)((()=>{J([R,..._]),X([$,...U]),ee([M,...H])}),[_,U,H]);const[te,ne]=(0,E.useState)(se.f.CHANGE_NOTHING),[oe,le]=(0,E.useState)(re.TypeDownload.UNKNOWN),ce=(e,t,n)=>{const i=t.find((t=>t.id===e));i&&y(Object.assign(Object.assign({},i),{type:n}))},ue=(0,E.useCallback)((()=>(0,se.eq)(te,q,oe,K,V)),[te,G,q,oe,K,V]),ge=(0,E.useCallback)((()=>(0,se.M6)(h)),[h]);return(0,E.useEffect)((()=>{g(N?{label:`${null==N?void 0:N.deviceAlias}`,id:`${null==N?void 0:N.deviceId}`,value:`${null==N?void 0:N.deviceId}`}:{label:"",id:"",value:""})}),[N]),(0,E.useEffect)((()=>{b(!!f&&!!N&&!!Z.date)}),[f,N,Z]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16,color:"black"}},{children:`Agregar Ciclo al camión ${e}`})),(0,i.jsx)(m.Z,{width:"100%",height:8}),(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"column",style:{padding:"0.4rem",alignItems:"center"}},{children:[(0,i.jsx)(m.Z,{width:"100%",height:8}),(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,i.jsx)(B.Z,Object.assign({style:{color:"black"}},{children:"Descarga:"})),(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsx)(s.Z,Object.assign({container:!0},{children:f&&(0,i.jsx)(a.ZP,Object.assign({title:"Nueva Descarga"},{children:(0,i.jsx)(r.Z,Object.assign({color:"primary",size:"small"},{children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q.Z,{}),(0,i.jsx)(c.Z,{size:"small",color:"secondary",label:f.name,onDelete:()=>y("")})]})}))}))}))}))]}))})),(0,i.jsx)(m.Z,{width:"100%",height:8}),(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"row",justifyContent:"center"},{children:[(0,i.jsxs)(B.Z,Object.assign({style:{color:"black"}},{children:["Excavadora:"," "]})),N&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q.Z,{color:"primary"}),(0,i.jsx)(c.Z,{size:"small",color:"secondary",label:null==N?void 0:N.deviceAlias,onDelete:()=>{C(void 0),g({label:"",id:"",value:""})}})]})]}))})),j==de.JD.LOADING?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ut.Z,{})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.Z,{height:8}),(0,i.jsxs)(s.Z,Object.assign({item:!0,style:{marginTop:8}},{children:[(0,i.jsx)(Y.Z,{id:"date",label:"Fecha",type:"datetime-local",name:"date",value:Z.date,onChange:e=>{const t=e.target;k(Object.assign(Object.assign({},Z),{[t.name]:e.target.value}))},InputLabelProps:{shrink:!0,required:!0},error:void 0===Z}),(0,i.jsx)(m.Z,{height:12}),(0,i.jsxs)("div",Object.assign({style:{display:"flex",flexDirection:"row",height:"100px"}},{children:[(0,i.jsx)(ie.ZP,{size:"small",value:u,blurOnSelect:!0,onChange:(e,t)=>{((e,t)=>{const n=t.find((t=>t.deviceId===e));n&&C(n)})(null!=t?t.value:"",h)},options:ge(),renderTags:(e,t)=>e.map(((e,n)=>(0,i.jsx)(c.Z,Object.assign({variant:"outlined",label:e.label},t({index:n}))))),style:{width:150},getOptionLabel:e=>e.label,disableClearable:!0,filterSelectedOptions:!0,renderInput:e=>(0,i.jsx)(Y.Z,Object.assign({},e,{autoFocus:!0,inputRef:n,label:"Excavadora",variant:"outlined",fullWidth:!0,error:void 0===N}))}),(0,i.jsx)(m.Z,{width:4}),o.length<3&&(0,i.jsx)(ie.ZP,{size:"small",value:o,blurOnSelect:!0,onChange:(e,n)=>{switch(l(n),n.length){case 0:ne(se.f.CHANGE_DOWNLOAD),le(re.TypeDownload.UNKNOWN);break;case 1:ne(se.f.CHANGE_DOWNLOAD),le(Number(n[0].value)),te===se.f.CHANGE_DOWNLOAD&&le(Number(n[0].value));break;case 2:if(te===se.f.CHANGE_DOWNLOAD)switch(oe){case re.TypeDownload.DME:ce(n[1].id,K,oe);break;case re.TypeDownload.PAD:ce(n[1].id,V,oe);break;case re.TypeDownload.STOCK:ce(n[1].id,q,oe)}le(re.TypeDownload.UNKNOWN),ne(se.f.CHANGE_DOWNLOAD),l([])}setTimeout((()=>{var e,n;null===(e=t.current)||void 0===e||e.focus(),null===(n=t.current)||void 0===n||n.click()}),100)},options:ue(),multiple:!0,renderTags:(e,t)=>e.map(((e,n)=>(0,i.jsx)(c.Z,Object.assign({variant:"outlined",label:e.label},t({index:n}))))),style:{width:200},getOptionLabel:e=>e.label,openOnFocus:!0,disableClearable:!0,filterSelectedOptions:!0,renderInput:e=>(0,i.jsx)(Y.Z,Object.assign({},e,{autoFocus:!0,inputRef:t,label:"Agrega Descarga",variant:"outlined",fullWidth:!0,error:void 0===f}))})]}))]})),(0,i.jsx)(m.Z,{height:30}),(0,i.jsxs)(s.Z,Object.assign({item:!0,style:{display:"flex",flexDirection:"column",alignItems:"center"}},{children:[(0,i.jsx)(d.Z,Object.assign({variant:"outlined",size:"small",color:"secondary",onClick:()=>{return e=void 0,t=void 0,i=function*(){const e={date:Z.date,newDownload:f,excavator:N,truck:A};e.date&&e.newDownload&&e.excavator?(yield O((0,I.QM)(e)),yield O((0,w.l4)(A.deviceId)),y(""),C(void 0),b(!1),yield O((0,I.Jg)())):b(!0)},new((n=void 0)||(n=Promise))((function(s,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((i=i.apply(e,t||[])).next())}));var e,t,n,i},disabled:!x},{children:"Agregar Ciclo"})),(0,i.jsx)(m.Z,{height:10})]}))]})]}))]})},_t=n(69711),Ut=(0,Qe.Z)((e=>({container:{width:"100%",scrollBehavior:"auto"},item:{justifySelf:"center",justifyContent:"center",alignContent:"center",textAlign:"center"},title:{fontSize:14},header:{display:"flex",padding:4},body:{textAlign:"center",maxHeight:"650px"},cardNewCycle:{height:"100%",color:"white",borderRadius:0},paperNewCycle:{color:"white"}}))),Ht=()=>{const e=Ut(),t=(0,L.T)(),{cyclesList:n,truckSelect:a,statusCycle:r,statusGet:o}=(0,L.C)(I.XE);return(0,E.useEffect)((()=>{t((0,I.EC)(a.deviceId))}),[a]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,className:e.container,spacing:0,direction:"column",style:{}},{children:[(0,i.jsx)("div",Object.assign({style:{borderRadius:"4px",backgroundColor:C.Jx,textAlign:"center",padding:2}},{children:(0,i.jsx)(B.Z,Object.assign({style:{textAlign:"center",fontSize:16,color:"white"},variant:"button"},{children:(0,i.jsxs)("div",Object.assign({style:{display:"flex",alignItems:"center",textAlign:"center",justifyContent:"center"}},{children:[(0,i.jsx)(zt.Z,{style:{borderRadius:0,padding:4,marginRight:4},src:_t}),a?`CICLOS DEL CAMIÓN  ${null==a?void 0:a.deviceAlias}`:"CAMIÓN NO DISPONIBLE"]}))}))})),(0,i.jsx)(m.Z,{height:12}),a&&(0,i.jsxs)(s.Z,Object.assign({item:!0,container:!0,className:e.item,md:12,spacing:1},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0,md:6},{children:(0,i.jsx)(g.Z,Object.assign({elevation:2,className:e.body},{children:n&&n.length>0?(0,i.jsx)(Ft.a,{cycleList:n,isCycleTruck:!0}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(Ft.a,{cycleList:[],isCycleTruck:!0})})}))})),(0,i.jsx)(s.Z,Object.assign({item:!0,md:6},{children:(0,i.jsx)(g.Z,Object.assign({elevation:2,className:e.paperNewCycle},{children:(0,i.jsx)(Wt,{idTruck:a.deviceId})}))}))]}))]}))})};var Gt=n(90582);const Kt="92vh",Jt=(0,Qe.Z)((e=>({rootOperation:{display:"block",position:"relative",flexGrow:1,height:"96vh",margin:e.spacing(1,1,1,1)},rootAbsolute:{position:"absolute",top:0,bottom:0,right:0,left:0},operation:{overflow:"overlay",flex:11},containerOperation:{width:"100%",display:"flex",maxHeight:Kt,minHeight:Kt,alignContent:"center",justifyContent:"flex-start"},containerTrucks:{width:"100%",maxHeight:Kt,minHeight:Kt,margin:2,padding:2},rootTruck:{overflow:"auto",maxHeight:Kt},rootIconResize:{height:Kt,display:"flex",position:"relative",width:16,backgroundColor:C.Jx,paddingRight:7,paddingLeft:7,backgroundClip:"content-box",cursor:"col-resize"},rootLabel:{width:8,height:8,background:"green",borderRadius:4,padding:0,margin:0},withoutMP:{padding:0,margin:0}})));var Vt,Bt,Yt;const Xt=()=>{const{operationsAll:e,status:t,truckAvailable:n}=Xe(),{truckInfoList:o}=(0,L.C)(Ie.ej),{UnitOperation:l}=(0,L.C)(R.YL),c=(0,E.useRef)(),d=(0,E.useRef)(),u=(0,E.useRef)(),[g,v]=(0,E.useState)(!1),[m,p]=(0,E.useState)(!1),{state:x}=(0,L.C)(F.e5),[b,O]=(0,E.useState)(!1),[f,y]=(0,E.useState)(""),[S,T]=(0,E.useState)([]),{excavatorSelect:Z,truckSelect:k}=(0,L.C)(I.XE),{timelineError:A}=(0,L.C)(wt.a9);(({search:e,setSearch:t,items:n,setFilterList:i})=>{const[]=(0,E.useState)([]);(0,E.useEffect)((()=>{if(!e||0===n.length)return void i((e=>0===e.length?e:[]));const t=n.filter((t=>{var n;return null===(n=t.deviceAlias)||void 0===n?void 0:n.toUpperCase().includes(e.toUpperCase())}));i((e=>JSON.stringify(e.map((e=>e.deviceId)))===JSON.stringify(t.map((e=>e.deviceId)))?e:(console.log("LiminadodChange",t),t)))}),[e,n])})({search:f,setSearch:y,items:o,setFilterList:T});const P=(0,L.T)(),$=Jt();(0,E.useEffect)((()=>{}),[]),(0,E.useEffect)((()=>{Vt=document.querySelector("#wrapper"),Bt=null==Vt?void 0:Vt.querySelector("#listTruck"),Yt=null==Vt?void 0:Vt.querySelector("#listOperation");const e=localStorage.getItem("localStorajeTruck"),t=localStorage.getItem("localStorajeOperation");e&&(Bt.style.flex=Number(e)),t&&(Yt.style.flex=Number(t))}),[]),(0,E.useEffect)((()=>{P((0,Ie.RK)()),P((0,R.hS)())}),[b]);const M=(0,E.useMemo)((()=>(0,i.jsx)("div",Object.assign({className:$.containerOperation},{children:t!==de.JD.DONE?(0,i.jsx)(s.Z,Object.assign({container:!0,alignItems:"stretch",justifyContent:"center"},{children:(0,i.jsx)(tt,{height:"100%",width:"100%"})})):e.length>0?e.map(((e,t)=>(0,i.jsx)(Ke,{operation:e,setRefresh:O,filterList:S},t))):(0,i.jsx)(qe,{})}))),[e,S,t]);(0,E.useEffect)((()=>{x===D.m4.DONE&&O((e=>!e))}),[x]);const W=()=>p((e=>!e)),_=(0,E.useCallback)((e=>{var t;if(!(g&&Vt&&Bt&&Yt))return;const n=12*(e.clientX-Vt.offsetLeft-46)/(null===(t=c.current)||void 0===t?void 0:t.clientWidth),i=Number(d.current.style.flex)>0?d.current.style.flex:0,s=Math.abs(i-n)>.05?Math.max(n,1):i;Bt.style.flex=s,Yt.style.flex=12-s,localStorage.setItem("localStorajeTruck",`${s}`),localStorage.setItem("localStorajeOperation",""+(12-s))}),[g]),U=(0,E.useMemo)((()=>(0,i.jsx)(s.Z,Object.assign({item:!0,id:"listTruck",style:{margin:0,padding:0,flex:1},className:$.rootTruck,innerRef:d},{children:(0,i.jsx)(Lt,{truckAvailable:n,filterList:S})}))),[n,S]),H=(0,E.useMemo)((()=>(0,i.jsxs)(s.Z,Object.assign({container:!0,justifyContent:"flex-end",alignItems:"center"},{children:[(0,i.jsx)(a.ZP,Object.assign({title:"Nueva Operación"},{children:(0,i.jsx)(N.rU,Object.assign({to:"/operation/create/0/0"},{children:(0,i.jsx)(r.Z,Object.assign({color:"secondary",size:"small"},{children:(0,i.jsx)(h.Z,{fontSize:"small"})}))}))})),(0,i.jsx)(a.ZP,Object.assign({title:"Reasignación global de Camiones"},{children:(0,i.jsx)(r.Z,Object.assign({onClick:W,color:"secondary",size:"small"},{children:(0,i.jsx)(j.Z,{fontSize:"small"})}))})),(0,i.jsx)(rt,{search:f,setSearch:y})]}))),[f]),G=(0,E.useCallback)((e=>{e.target===u.current&&v(!0)}),[u]),K=(0,E.useCallback)((()=>v(!1)),[]),J=(0,E.useMemo)((()=>(0,i.jsx)($t,{setRefresh:O})),[]),V=()=>{P((0,I.kY)()),P((0,w.pJ)()),O((e=>!e))};return(0,i.jsxs)(Je.W,Object.assign({backend:Ve.PD},{children:[(0,i.jsxs)("div",Object.assign({className:$.rootOperation},{children:[(0,i.jsxs)("div",Object.assign({className:$.rootAbsolute},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0,innerRef:d},{children:H})),(0,i.jsxs)(s.Z,Object.assign({container:!0,innerRef:c,id:"wrapper",onMouseUp:K,onMouseMove:_,onMouseDown:G},{children:[U,(0,i.jsx)(z.P4,{className:$.rootIconResize,id:"handler",innerRef:u}),(0,i.jsx)(s.Z,Object.assign({item:!0,className:$.operation,id:"listOperation"},{children:(0,i.jsx)(s.Z,Object.assign({container:!0,direction:"column"},{children:(0,i.jsxs)(s.Z,Object.assign({item:!0},{children:[(0,i.jsx)("div",Object.assign({className:$.containerOperation},{children:t!==de.JD.DONE?(0,i.jsx)(s.Z,Object.assign({container:!0,alignItems:"stretch",justifyContent:"center"},{children:(0,i.jsx)(tt,{height:"100%",width:"100%"})})):e.length>0?M:(0,i.jsx)(qe,{})})),(0,i.jsxs)(z.T5,Object.assign({container:!0,direction:"row",style:{gap:8}},{children:[(0,i.jsx)(z.P4,{children:(0,i.jsxs)(z.T5,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,i.jsx)("p",{className:$.rootLabel}),(0,i.jsx)("p",Object.assign({style:{padding:0,margin:0}},{children:"Asignados"}))]}))}),(0,i.jsx)(z.P4,{children:(0,i.jsxs)(z.T5,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,i.jsx)("p",{style:{background:C.J$},className:$.rootLabel}),(0,i.jsx)("p",Object.assign({style:{padding:0,margin:0}},{children:"No asignados"}))]}))}),(0,i.jsx)(z.P4,{children:(0,i.jsxs)(z.T5,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,i.jsx)("p",{style:{background:C.sb},className:$.rootLabel}),(0,i.jsx)("p",Object.assign({style:{padding:0,margin:0}},{children:"Excavadora"}))]}))}),(0,i.jsx)(z.P4,{children:(0,i.jsxs)(z.T5,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,i.jsx)("p",{style:{borderColor:C.J$,background:"#00000000",borderStyle:"solid",borderWidth:2},className:$.rootLabel}),(0,i.jsxs)("p",Object.assign({style:{padding:0,margin:0}},{children:["Área de carguío (",$e.Xb,"mts)"]}))]}))})]}))]}))}))}))]}))]})),(0,i.jsx)(Ot,{open:m,setOpen:p,setRefresh:O,operations:e}),(0,i.jsx)(gt,{open:!!Z.deviceId,setOpen:V,children:(0,i.jsx)(Ft.S,{}),handleClose:V,handleClickConfirm:V}),(0,i.jsx)(gt,{open:!!k.deviceId,setOpen:V,children:(0,i.jsx)(Ht,{}),handleClose:V,handleClickConfirm:V}),J]})),!!A.message&&(0,i.jsx)(Gt.y,{error:A.message,success:A.success,code:A.code?A.code:0,callBack:()=>P((0,wt.OL)())})]}))};function qt(){return(0,i.jsx)(Xt,{})}}}]);