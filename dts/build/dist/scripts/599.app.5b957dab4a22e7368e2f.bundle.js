"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[599],{61242:(e,i,t)=>{t.d(i,{a:()=>u});var s=t(85893),n=t(41120),d=t(52663),o=t(66083),a=t(29525),r=t(66856),c=t(95477),l=t(282);const v=(0,n.Z)({disabledPadding:{padding:0,textAlign:"center"}}),u=({open:e,handleClose:i,handleConfirm:t,title:n,children:u,maxWidth:h="lg",disabled:x=!1,loading:j})=>{const p=v();return(0,s.jsxs)(d.Z,Object.assign({open:e,onClose:i,maxWidth:h},{children:[(0,s.jsx)(o.Z,Object.assign({className:p.disabledPadding},{children:n}),void 0),(0,s.jsx)(a.Z,{children:u},void 0),(0,s.jsx)(r.Z,{children:j?(0,s.jsx)(c.Z,{style:{width:"30px",height:"30px"}},void 0):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,Object.assign({size:"small",color:"primary",onClick:i},{children:"Cancel"}),void 0),t&&(0,s.jsx)(l.Z,Object.assign({disabled:x,variant:"outlined",size:"small",color:"secondary",onClick:t,autoFocus:!0},{children:"Confirm"}),void 0)]},void 0)},void 0)]}),void 0)}},53280:(e,i,t)=>{t.d(i,{Z:()=>u});var s=t(85893),n=t(13258),d=t(33901),o=t(10046),a=t(22318),r=t(18463),c=t(93584);const l=t(69711),v=t(53292),u=({unit:e,isSelect:i,isTruck:t,isItemHytera:u,inList:h})=>(0,s.jsxs)(r.Z,Object.assign({elevation:3,style:{width:u?"8em":"12em",height:u?"3em":"4em",padding:"2px",display:"flex",flexDirection:"row",alignItems:"center",borderRadius:"4pxv",backgroundColor:h&&u?"#E3E2E1":i?`${c.sb}`:"white"}},{children:[!u&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(n.Z,{size:"small",inputProps:{"aria-label":"secondary checkbox"},checked:i},void 0)},void 0),(0,s.jsx)(d.Z,{style:{width:u?"22px":"33px",height:u?"22px":"33px",marginLeft:"4px"},variant:"square",src:t?l:v},void 0),(0,s.jsxs)(o.Z,Object.assign({style:{textAlign:"center"}},{children:[(0,s.jsx)(a.Z,Object.assign({variant:"subtitle2",style:{marginLeft:"8px",color:i?"white":"black"}},{children:e.deviceAlias}),void 0),(0,s.jsx)(a.Z,Object.assign({variant:"body2",style:{marginLeft:"8px",fontSize:"12px",color:i?"white":"#676665"}},{children:e.deviceId}),void 0)]}),void 0)]}),void 0)},17813:(e,i,t)=>{t.d(i,{T:()=>a,e:()=>r});var s=t(67294),n=t(73855),d=t(99302),o=t(14125);const a=()=>{const[e,i]=(0,s.useState)(""),[t,o]=(0,s.useState)([]),{truckInfoList:a,initial:r}=(0,n.C)(d.ej);return(0,s.useEffect)((()=>{const i=a.filter((i=>{var t,s;return(null===(t=i.deviceAlias)||void 0===t?void 0:t.toUpperCase().includes(e.toUpperCase()))||(null===(s=i.deviceId)||void 0===s?void 0:s.toUpperCase().includes(e.toUpperCase()))}));o(i)}),[e,a]),{search:e,setSearch:i,filterList:t,setFilterList:o}},r=()=>{const[e,i]=(0,s.useState)(""),[t,d]=(0,s.useState)([]),{excavatorInfoList:a,initial:r}=(0,n.C)(o.kW);return(0,s.useEffect)((()=>{const i=a.filter((i=>{var t,s;return(null===(t=i.deviceAlias)||void 0===t?void 0:t.toUpperCase().includes(e.toUpperCase()))||(null===(s=i.deviceId)||void 0===s?void 0:s.toUpperCase().includes(e.toUpperCase()))}));d(i)}),[e,a]),{search:e,setSearch:i,filterList:t,setFilterList:d}}},990:(e,i,t)=>{t.d(i,{M:()=>n});var s=t(67294);const n=e=>{const[i,t]=(0,s.useState)(e);return[i,e=>{t(Object.assign(Object.assign({},i),{[e.target.name]:e.target.value}))},()=>{t(e)},t]}},15635:(e,i,t)=>{t.d(i,{r:()=>d});var s=t(67294),n=t(95090);const d=e=>{const[i,t]=(0,s.useState)(!1);return(0,s.useEffect)((()=>(e===n.JD.DONE||e===n.JD.UNKNOWN||e===n.JD.ERROR?t(!1):t(!0),()=>{t(!1)})),[e]),[i]}},16281:(e,i,t)=>{t.d(i,{h:()=>k});var s=t(85893),n=t(45258),d=t(28358),o=t(282),a=t(22318),r=t(43471),c=t(5977),l=t(55517),v=t(17812),u=t(96617),h=t(73637),x=t(79895),j=t(16575),p=t(51972),g=t(67294),m=t(73855),f=t(45855);const b=({title:e,content:i})=>(0,s.jsxs)("div",{children:[(0,s.jsxs)(a.Z,Object.assign({variant:"subtitle1"},{children:[(0,s.jsx)(j.Z,{style:{fontSize:"14px",marginRight:"4px"}},void 0),e]}),void 0),(0,s.jsx)(a.Z,Object.assign({variant:"body1"},{children:i}),void 0),(0,s.jsx)(l.Z,{},void 0)]},void 0),y=({})=>{var e,i,t;const[n,d]=(0,g.useState)(null),[o,r]=(0,g.useState)(!1),{notificationsHeader:c}=(0,m.C)(f.Af),l=(0,m.T)();(0,g.useEffect)((()=>{l((0,f.pK)())}),[]);const j=o&&Boolean(n)?"transition-popper":void 0;return console.log("notificationsHeader.notificationsList",c.notificationsList),(0,s.jsxs)("div",Object.assign({style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",width:"8%",marginRight:"4px"}},{children:[(0,s.jsx)(v.Z,Object.assign({color:(null===(e=c.notificationsList)||void 0===e?void 0:e.length)>0?"primary":"inherit",onClick:e=>{d(e.currentTarget),r((e=>!e))},size:"small"},{children:(0,s.jsxs)("div",Object.assign({style:{margin:"4px"}},{children:[(0,s.jsx)(a.Z,Object.assign({variant:"subtitle2",style:{color:"white",zIndex:1,position:"absolute",justifyContent:"right",marginLeft:"18px"}},{children:(null===(i=c.notificationsList)||void 0===i?void 0:i.length)>0?null===(t=c.notificationsList)||void 0===t?void 0:t.length:""}),void 0),(0,s.jsx)(p.Z,{},void 0)]}),void 0)}),void 0),(0,s.jsx)("div",Object.assign({style:{zIndex:1}},{children:(0,s.jsx)(u.Z,Object.assign({id:j,open:o,anchorEl:n,transition:!0,style:{zIndex:3}},{children:({TransitionProps:e})=>{var i,t,n;return(0,s.jsx)(h.Z,Object.assign({},e,{timeout:350},{children:(0,s.jsxs)(x.Z,Object.assign({elevation:3,style:{width:"300px",height:(null===(i=c.notificationsList)||void 0===i?void 0:i.length)>10?"87vh":"100%",padding:"8px",overflow:"scroll"}},{children:[(!c.notificationsList||0===(null===(t=c.notificationsList)||void 0===t?void 0:t.length))&&(0,s.jsx)(s.Fragment,{children:"Not Have a new Notification"},void 0),null===(n=c.notificationsList)||void 0===n?void 0:n.map(((e,i)=>(0,s.jsx)(b,{title:e.title,content:e.message},i)))]}),void 0)}),void 0)}}),void 0)}),void 0)]}),void 0)},k=({title:e,positionContainer:i,notificationPannel:t})=>{const l=i||"sticky",v=(0,c.k6)();return(0,s.jsx)(n.Z,Object.assign({position:l,color:"secondary",style:{display:"flex"},elevation:0},{children:(0,s.jsxs)("div",Object.assign({style:{display:"flex"}},{children:[(0,s.jsxs)(d.Z,Object.assign({variant:"dense",style:{width:"90%"}},{children:[(0,s.jsx)(o.Z,{size:"small",startIcon:(0,s.jsx)(r.Z,{color:"action",style:{color:"#fff"}},void 0),onClick:()=>{v.goBack()}},void 0),(0,s.jsx)(a.Z,Object.assign({variant:"h6"},{children:e}),void 0)]}),void 0),t&&(0,s.jsx)(y,{},void 0)]}),void 0)}),void 0)}},59599:(e,i,t)=>{t.r(i),t.d(i,{default:()=>N});var s=t(85893),n=t(10046),d=t(41749),o=t(50998),a=t(22318),r=t(18463),c=t(14741),l=t(17812),v=t(282),u=t(62822),h=t(17215),x=t(73430),j=t(30387),p=t(44562),g=t(67294),m=t(73855),f=t(17813),b=t(86282),y=t(15635),k=t(31940),Z=t(99302),C=t(61242),w=t(53280),O=t(8286),I=t(990);const T=({openEditTruck:e,setOpenEditTruck:i,truck:t})=>{const d=(0,m.T)(),{truckInfoList:o}=(0,b.Md)(),{truckSelects:a}=(0,m.C)(k.__),[r,c,l,v]=(0,I.M)(Object.assign({},t)),{deviceAlias:u,deviceId:h,id:x,deviceInterval:j,plate:p}=r,f=(0,g.useCallback)((e=>{let i=!1;if(e){const t=e.toUpperCase();return o.filter((e=>{e.deviceAlias.toUpperCase()===t&&(i=!0)})),i}}),[o]);return(0,s.jsx)(C.a,Object.assign({open:e,handleClose:()=>{i(!1),l()},handleConfirm:()=>{return e=void 0,t=void 0,n=function*(){u&&!f(r.deviceAlias)&&(yield d((0,k.xT)(r)),d((0,k.xJ)()),yield d((0,Z.RK)()),i(!1))},new((s=void 0)||(s=Promise))((function(i,d){function o(e){try{r(n.next(e))}catch(e){d(e)}}function a(e){try{r(n.throw(e))}catch(e){d(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}r((n=n.apply(e,t||[])).next())}));var e,t,s,n},title:"Edit Truck",customise:!0},{children:(0,s.jsxs)(n.Z,Object.assign({component:"form",style:{color:"dark"}},{children:[(0,s.jsx)(O.Z,{error:!!f(r.deviceAlias),variant:"outlined",required:!0,onChange:c,style:{width:"100%"},label:"Alias",size:"small",value:u,name:"deviceAlias",helperText:f(r.deviceAlias)?"There is already a truck with that same Device Alias":""},void 0),(0,s.jsx)(n.Z,{height:"12px"},void 0),(0,s.jsx)(O.Z,{error:!!f(r.deviceId),variant:"outlined",required:!0,onChange:c,style:{width:"100%"},label:"Id",size:"small",disabled:!0,value:r.deviceId,name:"deviceId",helperText:f(r.deviceId)?"There is already a truck with that same Device Id":""},void 0)]}),void 0)}),void 0)};const L=({openNewTruck:e,setOpenNewTruck:i,unit:t})=>{const{truckSelects:d,stateCreate:o}=(0,m.C)(k.__),a=(0,m.T)(),{truckInfoList:r}=(0,b.Md)(),[c,l,v,u]=(0,I.M)({deviceAlias:"",deviceId:"",id:"",plate:"",deviceInterval:0,description:"",horometer:0}),{deviceAlias:h,deviceId:x,horometer:j}=c,[f]=(0,y.r)(o),[w,T]=(0,g.useState)(!1);t&&(c.deviceAlias=null==t?void 0:t.deviceAlias,c.deviceId=null==t?void 0:t.deviceId);const L=(0,g.useCallback)((e=>{let i=!1;if(e){const t=e.toUpperCase();return r.filter((e=>{e.deviceAlias.toUpperCase()===t&&(i=!0),e.deviceId.toUpperCase()===t&&(i=!0)})),i}}),[r]);return(0,g.useEffect)((()=>{T(!!h&&!!x&&!!j&&j>0&&!L(c.deviceAlias)&&!L(c.deviceId))}),[c]),(0,s.jsx)(C.a,Object.assign({open:e,handleClose:()=>{a((0,Z.RK)()),i(!1),v()},handleConfirm:()=>{return e=void 0,t=void 0,n=function*(){w&&(yield a((0,k.gZ)(c)),yield a((0,Z.RK)()),i(!1),v())},new((s=void 0)||(s=Promise))((function(i,d){function o(e){try{r(n.next(e))}catch(e){d(e)}}function a(e){try{r(n.throw(e))}catch(e){d(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}r((n=n.apply(e,t||[])).next())}));var e,t,s,n},title:t?"Add New Truck":"Insert New Truck",customise:!0,loading:f,disabled:!w},{children:(0,s.jsxs)(n.Z,Object.assign({component:"form",style:{color:"dark"}},{children:[(0,s.jsx)(O.Z,{error:!!L(c.deviceAlias),variant:"outlined",required:!0,disabled:!!t,onChange:l,style:{width:"100%"},label:"Device Alias",size:"small",value:c.deviceAlias,name:"deviceAlias",helperText:L(c.deviceAlias)?"There is already a truck with that same Device Alias":""},void 0),(0,s.jsx)(n.Z,{height:"12px"},void 0),(0,s.jsx)(O.Z,{error:!!L(c.deviceId),variant:"outlined",required:!0,disabled:!!t,onChange:l,style:{width:"100%"},label:"Device Id",size:"small",value:c.deviceId,name:"deviceId",helperText:L(c.deviceId)?"There is already a truck with that same Device Id":"Insert Device Id"},void 0),(0,s.jsx)(O.Z,{error:j<0,variant:"outlined",required:!0,disabled:!!L(c.deviceId),type:"number",onChange:l,style:{width:"100%"},label:"Horometer",size:"small",value:j,name:"horometer",helperText:j<0?"Hourmeter needs to be > 0":"Insert Horometer"},void 0),t&&L(c.deviceId)&&(0,s.jsx)(p.Z,Object.assign({severity:"error"},{children:"the selected Truck already exists in the system"}),void 0)]}),void 0)}),void 0)};var S=function(e,i,t,s){return new(t||(t=Promise))((function(n,d){function o(e){try{r(s.next(e))}catch(e){d(e)}}function a(e){try{r(s.throw(e))}catch(e){d(e)}}function r(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(o,a)}r((s=s.apply(e,i||[])).next())}))};const A=()=>{const[e,i]=g.useState(!1),[t,O]=(0,g.useState)(!1),[I,A]=g.useState(!1),[z,E]=g.useState(!1),{truckSelects:D,stateCreate:U,statusDelete:N}=(0,m.C)(k.__),R=(0,m.T)(),H=(0,g.useRef)(),{truckInfoList:P}=(0,b.Md)(),{truckListHytera:q}=(0,m.C)(k.qB),{search:F,setSearch:J,filterList:K,setFilterList:M}=(0,f.T)(),[_]=(0,y.r)(N);(0,g.useEffect)((()=>{""===F&&M(P)}),[K]);const W=e=>{R((0,k.sq)(e))},B=()=>S(void 0,void 0,void 0,(function*(){i(!1),A(!1),E(!1),R((0,k.xJ)())})),V=e=>!!D.find((i=>e.deviceId===i.deviceId));return(0,g.useMemo)((()=>K.map((e=>(0,s.jsx)(o.Z,Object.assign({button:!0,onClick:()=>{W(e)},style:{width:"12em",padding:"0px",margin:"0.2em",backgroundColor:"white"}},{children:(0,s.jsx)(w.Z,{unit:e,isSelect:V(e),isTruck:!0},void 0)}),e.deviceId)))),[K]),(0,s.jsx)(n.Z,{children:(0,s.jsxs)(d.Z,Object.assign({spacing:1,container:!0,direction:"column",style:{padding:"12px"}},{children:[(0,s.jsx)(d.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,s.jsx)(a.Z,Object.assign({variant:"subtitle1"},{children:"List Trucks"}),void 0)}),void 0),(0,s.jsxs)(d.Z,Object.assign({item:!0,container:!0,alignItems:"center",style:{width:"100%"}},{children:[(0,s.jsxs)(r.Z,Object.assign({style:{paddingLeft:"8px"}},{children:[(0,s.jsx)(c.Z,{color:"primary",value:F,inputRef:H,onKeyDown:e=>{var i;"Escape"===e.key&&(J(""),null===(i=H.current)||void 0===i||i.blur(),M(P))},onChange:e=>J(e.target.value),placeholder:"Search Truck",inputProps:{"aria-label":"search"}},void 0),(0,s.jsx)(l.Z,Object.assign({style:{padding:4},size:"small",color:"primary","aria-label":"search"},{children:(0,s.jsx)(h.Z,{fontSize:"small"},void 0)}),void 0)]}),void 0),(0,s.jsx)(v.Z,Object.assign({startIcon:(0,s.jsx)(x.Z,{},void 0),onClick:()=>{A(!0)},size:"small",style:{background:"#1d4e89",marginLeft:"2em",color:"white"}},{children:"New Truck"}),void 0),D.length>0&&(0,s.jsx)(v.Z,Object.assign({onClick:()=>{i(!0)},size:"small",style:{background:"#1d4e89",marginLeft:"2em",color:"white"}},{children:"Disable Trucks"}),void 0),1===D.length&&(0,s.jsx)(v.Z,Object.assign({startIcon:(0,s.jsx)(j.Z,{},void 0),onClick:()=>{O(!0)},size:"small",style:{background:"#1d4e89",marginLeft:"2em",color:"white"}},{children:"Edit"}),void 0),(0,s.jsx)(d.Z,{item:!0,xs:12,md:6,xl:6},void 0),(0,s.jsx)(d.Z,{item:!0,xs:12,md:6,xl:6},void 0)]}),void 0),(0,s.jsx)(d.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,s.jsx)(u.Z,Object.assign({dense:!0,style:{display:"flex",flexWrap:"wrap",backgroundColor:"rgb(250 250 250)"}},{children:K.map((e=>(0,s.jsx)(o.Z,Object.assign({button:!0,onClick:()=>{W(e)},style:{width:"12em",padding:"0px",margin:"0.2em",backgroundColor:"white"}},{children:(0,s.jsx)(w.Z,{unit:e,isSelect:V(e),isTruck:!0},void 0)}),e.deviceId)))}),void 0)}),void 0),(0,s.jsx)(L,{openNewTruck:I,setOpenNewTruck:A},void 0),D.length>0&&(0,s.jsx)(C.a,Object.assign({open:e,handleClose:B,handleConfirm:()=>S(void 0,void 0,void 0,(function*(){yield i(!1),yield R((0,k.Fr)(D)),yield R((0,Z.RK)()),R((0,k.xJ)())})),title:"sure you want to Disable",customise:!0,loading:_},{children:(0,s.jsxs)(p.Z,Object.assign({severity:"warning"},{children:["Disable: ",D.map((e=>e.deviceId+" "))]}),void 0)}),void 0),(0,s.jsx)(C.a,Object.assign({open:z,handleClose:B,handleConfirm:()=>S(void 0,void 0,void 0,(function*(){yield q.map((e=>{var i;i=e,P.some((e=>e.deviceId===i.deviceId))||R((0,k.iU)([e]))})),yield R((0,Z.RK)()),R((0,k.xJ)()),E(!1)})),title:"sure you want to Syncronize",customise:!0},{children:(0,s.jsx)(p.Z,Object.assign({severity:"info"},{children:"Hytera trucks will be synchronized to the DTS system"}),void 0)}),void 0),1===D.length&&(0,s.jsx)(T,{openEditTruck:t,setOpenEditTruck:O,truck:D[0]},void 0)]}),void 0)},void 0)};var z=t(10465);const E=()=>{const[e,i]=g.useState(!1),{truckListHytera:t}=(0,m.C)(k.qB),r=(0,m.T)(),{truckInfoList:c}=(0,b.Md)(),[l,v]=(0,g.useState)(!1),[h,x]=(0,g.useState)([]),[j,p]=(0,g.useState)(!1),[f,y]=(0,g.useState)();(0,g.useEffect)((()=>{r((0,k.D0)())}),[]),(0,g.useEffect)((()=>{x(t)}),[t]);const Z=(0,g.useCallback)((e=>{if(e){const i=e.target?e.target.value.toUpperCase():"";x(t.filter((e=>e.deviceAlias.toUpperCase().includes(i))))}}),[t]),O=(0,g.useCallback)((()=>{x(t)}),[t]);return(0,s.jsx)(n.Z,{children:(0,s.jsxs)(d.Z,Object.assign({spacing:1,container:!0,direction:"column",style:{padding:"4px"}},{children:[(0,s.jsx)(d.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,s.jsx)(a.Z,Object.assign({variant:"subtitle1"},{children:"List Trucks Hytera"}),void 0)}),void 0),(0,s.jsx)(d.Z,Object.assign({item:!0,container:!0,alignItems:"center",style:{width:"100%"}},{children:(0,s.jsx)(z.V,{placeholder:"Search Truck",functionFilter:Z,functionCancel:O},void 0)}),void 0),(0,s.jsx)(d.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,s.jsx)(u.Z,Object.assign({dense:!0,style:{display:"flex",flexWrap:"wrap",backgroundColor:"rgb(250 250 250)"}},{children:h.map((e=>{return(0,s.jsx)(o.Z,Object.assign({button:!0,onClick:()=>{(e=>{p(!0),y(e),v(!l)})(e)},style:{width:"8em",padding:"0px",margin:"0.1em",backgroundColor:"white"}},{children:(0,s.jsx)(w.Z,{unit:e,isTruck:!0,isItemHytera:!0,inList:(i=e,c.some((e=>e.deviceId===i.deviceId)))},void 0)}),e.deviceId);var i}))}),void 0)}),void 0),j&&(0,s.jsx)(L,{openNewTruck:!0,setOpenNewTruck:p,unit:f},void 0),(0,s.jsx)(C.a,{open:e,handleClose:()=>{i(!1),r((0,k.xJ)())},handleConfirm:()=>{return e=void 0,t=void 0,n=function*(){i(!1)},new((s=void 0)||(s=Promise))((function(i,d){function o(e){try{r(n.next(e))}catch(e){d(e)}}function a(e){try{r(n.throw(e))}catch(e){d(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}r((n=n.apply(e,t||[])).next())}));var e,t,s,n},title:"sure you want to delete"},void 0)]}),void 0)},void 0)},D=()=>(0,s.jsx)(n.Z,{children:(0,s.jsxs)(d.Z,Object.assign({spacing:0,container:!0,direction:"row",style:{padding:"12px"}},{children:[(0,s.jsx)(d.Z,Object.assign({item:!0,xs:12,md:8,xl:8},{children:(0,s.jsx)(A,{},void 0)}),void 0),(0,s.jsx)(d.Z,Object.assign({item:!0,xs:12,md:4,xl:4},{children:(0,s.jsx)(E,{},void 0)}),void 0)]}),void 0)},void 0);var U=t(16281);const N=()=>(0,s.jsxs)("div",{children:[(0,s.jsx)(U.h,{title:"Setting Trucks",positionContainer:"relative",notificationPannel:!0},void 0),(0,s.jsx)(D,{},void 0)]},void 0)}}]);