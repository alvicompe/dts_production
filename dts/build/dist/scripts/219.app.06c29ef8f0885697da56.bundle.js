"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[219],{25947:(e,i,t)=>{t.d(i,{F2:()=>a,xu:()=>j,zx:()=>c,iz:()=>b,T5:()=>p,P4:()=>m,hU:()=>u,Mi:()=>f,IB:()=>r});var n=t(85893),o=t(8286),s=t(96588);const a=e=>(0,n.jsx)(s.ZP,Object.assign({},Object.assign({},e.propsAutocomplete),{renderInput:e=>(0,n.jsx)(o.Z,Object.assign({},e,{label:"Select an option",variant:"outlined"}),void 0)}),void 0);var l=t(64436);const r=e=>{const{propsTextField:i,propsForm:t}=e;return(0,n.jsx)(l.Z,Object.assign({},Object.assign({},t),{children:(0,n.jsx)(o.Z,Object.assign({},Object.assign({},i)),void 0)}),void 0)};var d=t(282);const c=e=>(0,n.jsx)(d.Z,Object.assign({},Object.assign({},e.propsButton),{children:e.label}),void 0);var v=t(17812);const u=e=>(0,n.jsx)(v.Z,Object.assign({},Object.assign({},e),{children:e.children}),void 0);var g=t(10046);const j=({children:e,height:i,width:t})=>(0,n.jsx)(g.Z,Object.assign({height:i,width:t},{children:e}),void 0);var h=t(41749);const p=e=>(0,n.jsx)(h.Z,Object.assign({},Object.assign({},e),{children:e.children}),void 0),m=e=>(0,n.jsx)(h.Z,Object.assign({},Object.assign({},e),{children:e.children}),void 0);var x=t(55517);const b=e=>(0,n.jsx)(x.Z,Object.assign({},Object.assign({},e)),void 0);var O=t(82285);const f=e=>(0,n.jsx)(O.Z,Object.assign({},Object.assign({},e),{children:(0,n.jsx)(h.Z,{children:e.children},void 0)}),void 0)},61242:(e,i,t)=>{t.d(i,{a:()=>v});var n=t(85893),o=t(41120),s=t(52663),a=t(66083),l=t(29525),r=t(66856),d=t(282);const c=(0,o.Z)({disabledPadding:{padding:0,textAlign:"center"}}),v=({open:e,handleClose:i,handleConfirm:t,title:o,children:v,maxWidth:u="lg",disabled:g=!1})=>{const j=c();return(0,n.jsxs)(s.Z,Object.assign({open:e,onClose:i,maxWidth:u},{children:[(0,n.jsx)(a.Z,Object.assign({className:j.disabledPadding},{children:o}),void 0),(0,n.jsx)(l.Z,{children:v},void 0),(0,n.jsxs)(r.Z,{children:[(0,n.jsx)(d.Z,Object.assign({size:"small",color:"primary",onClick:i},{children:"Cancel"}),void 0),t&&(0,n.jsx)(d.Z,Object.assign({disabled:g,variant:"outlined",size:"small",color:"secondary",onClick:t,autoFocus:!0},{children:"Confirm"}),void 0)]},void 0)]}),void 0)}},30433:(e,i,t)=>{t.d(i,{DQ:()=>u,Ez:()=>g,g7:()=>v});var n=t(85893),o=t(71267),s=t(12575),a=t(61920),l=t(99945),r=t(44326);const d=({value:e,operation:i,lineThrough:t=!1})=>{const s=e=>{var t,n,o,s,l,r,d,c,v,u,g,j;switch(e){case a.u6.DME:const e=(null===(n=null===(t=i.download)||void 0===t?void 0:t.dme)||void 0===n?void 0:n.cellList.length)>0?null===(s=null===(o=i.download)||void 0===o?void 0:o.dme)||void 0===s?void 0:s.cellList[0].name:"";return e.toUpperCase().includes("DME")?e:`DME-${e}`;case a.u6.PAD:const h=(null===(r=null===(l=i.download)||void 0===l?void 0:l.pad)||void 0===r?void 0:r.cellList.length)>0?null===(c=null===(d=i.download)||void 0===d?void 0:d.pad)||void 0===c?void 0:c.cellList[0].name:"";return h.toUpperCase().includes("PAD")?h:`PAD-${h}`;case a.u6.STOCK:const p=(null===(u=null===(v=i.download)||void 0===v?void 0:v.stock)||void 0===u?void 0:u.cellList.length)>0?null===(j=null===(g=i.download)||void 0===g?void 0:g.stock)||void 0===j?void 0:j.cellList[0].name:"";return p.toUpperCase().includes("STOCK")?p:`STK-${p}`;default:return""}};return(0,n.jsx)(n.Fragment,{children:e===a.u6.DME_PAD?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{color:t?"default":"secondary",icon:(0,n.jsx)(l.Z,{color:"secondary",fontSize:"small"},void 0),size:"small",label:(0,n.jsx)("p",Object.assign({style:{margin:0,padding:0,fontSize:"0.6rem",textDecoration:t?"line-through":"solid"}},{children:s("pad")}),void 0)},void 0),(0,n.jsx)(o.Z,{color:t?"default":"secondary",icon:(0,n.jsx)(l.Z,{color:"secondary",fontSize:"small"},void 0),size:"small",label:(0,n.jsx)("p",Object.assign({style:{margin:0,padding:0,fontSize:"0.6rem",textDecoration:t?"line-through":"solid"}},{children:s("dme")}),void 0)},void 0)]},void 0):(0,n.jsx)(o.Z,{icon:(0,n.jsx)(l.Z,{color:"secondary",fontSize:"small"},void 0),size:"small",color:t?"default":"secondary",label:(0,n.jsx)("p",Object.assign({style:{margin:0,padding:0,fontSize:"0.6rem",textDecoration:t?"line-through":"solid"}},{children:s(e)}),void 0)},void 0)},void 0)},c=({value:e,operation:i,lineThrough:t=!1})=>(0,n.jsx)(o.Z,{icon:(0,n.jsx)(r.Z,{color:"secondary",fontSize:"small"},void 0),size:"small",color:t?"default":"secondary",label:(0,n.jsx)("p",Object.assign({style:{margin:0,padding:0,fontSize:"0.6rem",textDecoration:t?"line-through":"solid"}},{children:(()=>{var t,n,o,s,l,r,d,c,v,u,g,j;switch(e){case a.u6.STOCK:const e=(null===(n=null===(t=i.upload)||void 0===t?void 0:t.stock)||void 0===n?void 0:n.cellList)&&(null===(s=null===(o=i.upload)||void 0===o?void 0:o.stock)||void 0===s?void 0:s.cellList.length)>0?null===(r=null===(l=i.upload)||void 0===l?void 0:l.stock)||void 0===r?void 0:r.cellList[0].name:"";return`${a.WW[i.upload.type]}  ${e}`;case a.u6.PIT:const h=null===(c=null===(d=i.upload)||void 0===d?void 0:d.pit)||void 0===c?void 0:c.name,p=(null===(v=i.upload.pit)||void 0===v?void 0:v.projectList.length)>0?`${null===(u=i.upload.pit)||void 0===u?void 0:u.projectList[0].name}`.substring(5):"",m=p&&(null===(g=i.upload.pit)||void 0===g?void 0:g.projectList[0].polygonList.length)>0?null===(j=i.upload.pit)||void 0===j?void 0:j.projectList[0].polygonList[0].name:"";return`${a.WW[i.upload.type]} ${h} ${p} ${m}`;default:return""}})()}),void 0)},void 0),v=({operation:e,lineThrough:i})=>{var t,o;let s="";return e?((null===(t=e.upload)||void 0===t?void 0:t.pit)&&(s="pit"),(null===(o=e.upload)||void 0===o?void 0:o.stock)&&(s="stock"),(0,n.jsx)(c,{value:s,operation:e,lineThrough:i},void 0)):(0,n.jsx)(n.Fragment,{},void 0)},u=({operation:e,lineThrough:i})=>{var t,o,s,a,l;let r="";return e?((null===(t=e.download)||void 0===t?void 0:t.dme)&&(r="dme"),(null===(o=e.download)||void 0===o?void 0:o.pad)&&(r="pad"),(null===(s=e.download)||void 0===s?void 0:s.stock)&&(r="stock"),(null===(a=e.download)||void 0===a?void 0:a.dme)&&(null===(l=e.download)||void 0===l?void 0:l.pad)&&(r="dme_pad"),(0,n.jsx)(d,{value:r,operation:e,lineThrough:i},void 0)):(0,n.jsx)(n.Fragment,{},void 0)},g=({operation:e,lineThrough:i})=>{const t=e&&e.excavatorList&&e.excavatorList.length>0?e.excavatorList[0].deviceAlias:"";return(0,n.jsx)(o.Z,{color:i?"default":"secondary",icon:(0,n.jsx)(s.Z,{fontSize:"small"},void 0),size:"small",style:{textDecoration:i?"line-through":"solid"},label:t},void 0)}},2780:(e,i,t)=>{t.d(i,{We:()=>s,wg:()=>a});var n=t(76533),o=function(e,i,t,n){return new(t||(t=Promise))((function(o,s){function a(e){try{r(n.next(e))}catch(e){s(e)}}function l(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){var i;e.done?o(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(a,l)}r((n=n.apply(e,i||[])).next())}))};const s=(e,i)=>o(void 0,void 0,void 0,(function*(){return yield(0,n.g$)(i,e)})),a=e=>o(void 0,void 0,void 0,(function*(){const i=yield(0,n.zY)(e);console.log("finalizeOperationEvent",i);let t="";return i.truckErrorList.length>0&&i.truckErrorList.forEach((e=>{const i=1===e.state?"CARGANDO":"A DESCARGA";t+=` ${e.truckError.deviceAlias} => ${i},`})),t}))},17883:(e,i,t)=>{t.r(i),t.d(i,{default:()=>vi});var n=t(85893),o=t(41749),s=t(868),a=t(17812),l=t(79895),r=t(14741),d=t(73914),c=t(59240),v=t(95757),u=t(50998),g=t(282),j=t(62822),h=t(55517),p=t(10046),m=t(33681);const x=({loading:e})=>e?(0,n.jsx)(m.Z,{},void 0):(0,n.jsx)(n.Fragment,{},void 0),b="truck";var O=t(5200),f=t(93584),Z=t(73855),L=t(73250),y=t(75647),C=t(44824),N=t(28231),E=t(715),A=t(95692),S=t(41042),k=t(67294),T=t(78721);const w=(0,d.Z)({rootFilter:{flex:"0 0",margin:2,border:"1px dashed #7b81836e",cursor:"move",float:"left",width:"98%",background:f.sb},rootItem:{margin:2,border:"1px dashed #7b81836e",cursor:"move",float:"left",width:"98%",flex:"0 0"},rootItemTemporal:{flex:"0 0",margin:2,border:"1px dashed green",cursor:"move",float:"left",width:"98%",background:"#34d0ff6e"},rootItemTemporalRemove:{flex:"0 0",margin:2,border:"1px dashed red",background:"#ff60604a",cursor:"move",float:"left",width:"98%"},titleTruck:{fontSize:"1em",cursor:"move"},contentTruck:{margin:2,padding:0,width:"100%",position:"relative",height:"100%"},contentCycle:{height:16,minWidth:16,display:"flex",borderRadius:"50%",background:"#efecec",justifyContent:"center",alignItems:"center",justifyItems:"center"},stateTruck:{position:"absolute",fontSize:"0.5rem",top:0,left:0},actions:{minWidth:36},labelCycleNumber:{fontSize:11,color:"#5a5757"}}),D=({truck:e})=>{let i="",t=null;switch(e.state){case T.EnumEventState.UNKNOWN_STATE:t=(0,n.jsx)(y.Z,{style:{fontSize:"1rem"},fontSize:"small"},void 0),i=e.operationList&&e.operationList.length>0?"In road":"Without operation/ sin operaciÃ³n";break;case T.EnumEventState.DOWNLOAD:t=(0,n.jsx)(C.Z,{style:{fontSize:"1rem"},fontSize:"small"},void 0),i="Downloading/Descargando";break;case T.EnumEventState.UPLOAD:t=(0,n.jsx)(N.Z,{style:{fontSize:"1rem"},fontSize:"small"},void 0),i="Uploading/Cargando";break;case T.EnumEventState.TO_UPLOAD:t=(0,n.jsx)(E.Z,{style:{fontSize:"1rem",transform:"rotate(180deg)"},fontSize:"small"},void 0),i="To Upload/Yendo a carga";break;case T.EnumEventState.TO_DOWNLOAD:t=(0,n.jsx)(E.Z,{style:{fontSize:"1rem"},fontSize:"small"},void 0),i="To download/Yendo a descarga";break;default:t=(0,n.jsx)(A.Z,{style:{fontSize:"1rem"},fontSize:"small"},void 0),i="Waiting.../Espeando..."}return t&&(0,n.jsx)(s.ZP,Object.assign({title:i},{children:(0,n.jsx)(a.Z,Object.assign({style:{margin:0,padding:0},size:"small"},{children:t}),void 0)}),void 0)},I=({truck:e,temporal:i,operation:t,temporalRemove:a,disabledDrag:r,isFilter:d=!1})=>{const c=w(),v=(0,Z.T)(),[{isDragging:g},j]=(0,O.c)((()=>({type:b,item:{truck:e},end:(i,n)=>{const o=n.getDropResult();r?confirm("NOT AVAILABLE, firt change to OPERATIVE in HOURMETER")&&window.open("/#/hourmeter"):i&&o&&!a&&v((0,L.UN)({operationId:o.operation.id,truck:e,operationOldId:t?t.id:""}))},collect:e=>({isDragging:e.isDragging(),handlerId:e.getHandlerId()})})),[a,t]),h=void 0!==e.sensor,p=(0,k.useCallback)((()=>{var i;const t=null===(i=e.deviceAlias)||void 0===i?void 0:i.split("-");return t&&t.length>1?t[1]:""}),[e.deviceAlias]);return(0,n.jsx)(l.Z,Object.assign({className:d&&!a?c.rootFilter:i?c.rootItemTemporal:a?c.rootItemTemporalRemove:c.rootItem,ref:j,elevation:4},{children:(0,n.jsxs)(u.Z,Object.assign({disableGutters:!0,className:c.contentTruck},{children:[(0,n.jsx)(S.Z,{className:c.stateTruck,style:{color:h?"#49df94":"#ff9090"},fontSize:"small"},void 0),(0,n.jsxs)(o.Z,Object.assign({container:!0},{children:[(0,n.jsx)(o.Z,Object.assign({item:!0,style:{marginTop:4}},{children:(0,n.jsx)("label",Object.assign({className:c.titleTruck},{children:p()}),void 0)}),void 0),(0,n.jsx)(o.Z,Object.assign({item:!0},{children:(0,n.jsxs)(o.Z,Object.assign({container:!0,className:c.actions,alignItems:"center"},{children:[(0,n.jsx)(D,{truck:e},void 0),(0,n.jsx)(s.ZP,Object.assign({title:"Number cycle/NÃºmero de ciclos"},{children:(0,n.jsx)("div",Object.assign({className:c.contentCycle},{children:(0,n.jsx)("label",Object.assign({className:c.labelCycleNumber},{children:void 0===e.cycleNumber?"0":e.cycleNumber}),void 0)}),void 0)}),void 0)]}),void 0)}),void 0)]}),void 0)]}),void 0)}),void 0)};var z=t(43829),W=t(82200),P=t(41396),R=t(7654),H=t(78965),_=t(22318),G=t(64436),$=t(67162),U=t(30553),M=t(40074),F=t(95477),K=t(52663),V=t(66856),J=t(29525);function Y({open:e,setOpen:i,handleClickConfirm:t,children:o,loading:s,handleClose:a}){return(0,n.jsxs)(K.Z,Object.assign({fullWidth:!0,maxWidth:"lg",open:e,onClose:a||(()=>{i(!1)}),"aria-labelledby":"max-width-dialog-title"},{children:[(0,n.jsx)(J.Z,{children:o},void 0),(0,n.jsx)(V.Z,{children:s?(0,n.jsx)(F.Z,{},void 0):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Z,Object.assign({onClick:a,size:"small",color:"primary"},{children:"Cancel"}),void 0),(0,n.jsx)(g.Z,Object.assign({onClick:t,variant:"outlined",size:"small",color:"secondary"},{children:"Confirm"}),void 0)]},void 0)},void 0)]}),void 0)}var X=t(61242),B=t(76533),q=t(11519),Q=t(52672),ee=t(19827),ie=t(41120),te=t(10465),ne=t(13258),oe=t(95090);const se=(0,ie.Z)((e=>({disabledSpacing:{margin:0,padding:0,width:"auto"},checkbox:{"& .MuiCheckbox-root":{margin:0,padding:0,paddingLeft:8}}}))),ae=k.memo((({truck:e,checked:i,trucksSelect:t,setTrucksSelect:o,disableWithOperation:s,handleonchangeTruck:a})=>{const l=se(),r=e.state>=0?e.state===oe.SS["Sin OperaciÃ³n"]&&e.operationList&&e.operationList.length>0?"En camino":oe.SS[e.state]:"Sin conex...",d=e.operationList&&e.operationList.length>0?e.operationList[0].excavator.deviceAlias:"";return(0,n.jsx)(u.Z,Object.assign({button:!0,dense:!0,className:l.disabledSpacing,disabled:!!s&&!!d},{children:(0,n.jsx)(U.Z,{className:l.checkbox,onChange:()=>{const i=t.findIndex((i=>e.deviceId===i.deviceId));-1===i?t.push(e):t.splice(i,1),o(JSON.parse(JSON.stringify(t)))},control:(0,n.jsx)(ne.Z,{onClick:()=>a(e),size:"small",checked:i,inputProps:{style:{padding:0}}},void 0),label:(0,n.jsx)(v.Z,{primary:`${e.deviceAlias} ${d?` â ${d}`:""} (${r})`},void 0)},void 0)}),void 0)})),le=(0,ie.Z)({root:{paddingLeft:4,maxHeight:"60vh",overflowY:"scroll",boxShadow:"inset 0px -2px 10px 0px rgb(17 16 10 / 56%)",borderRadius:4},searchContainer:{marginRight:8}}),re=k.memo((({trucksSelect:e,setTrucksSelect:i,handleonchangeTruck:t,disableWithOperation:s})=>{const{truckInfoList:a}=(0,Z.C)(q.ej),l=le(),[r,d]=(0,k.useState)([]),[c,v]=(0,k.useState)("");(0,k.useEffect)((()=>{d(a.filter((e=>e.deviceAlias.toLowerCase().includes(c.toLowerCase()))))}),[a]);const u=(0,k.useCallback)((e=>{if(e){const i=e.target?e.target.value.toUpperCase():"";d(a.filter((e=>e.deviceAlias.toUpperCase().includes(i)))),v(i)}}),[a]),g=(0,k.useCallback)((()=>{d(a),v("")}),[a]);return(0,n.jsxs)(j.Z,Object.assign({dense:!0,disablePadding:!0,style:{margin:4,paddingTop:4}},{children:[(0,n.jsx)(te.V,{functionFilter:u,functionCancel:g},void 0),(0,n.jsx)(o.Z,Object.assign({container:!0,className:l.root},{children:r.map((o=>{return(0,n.jsx)(k.Fragment,{children:(0,n.jsx)(ae,{handleonchangeTruck:t,disableWithOperation:s,checked:(a=o,!!e.find((e=>a.deviceId===e.deviceId))),trucksSelect:e,setTrucksSelect:i,truck:o},void 0)},o.deviceId);var a}))}),void 0)]}),void 0)}));var de=t(44562),ce=t(61920);const ve=(e,i,t,n)=>{return o=void 0,s=void 0,l=function*(){t(!0);const o=yield(0,B.e1)(e,i);console.log("responseAssigment",o),t(!1),n((e=>!e));let s="";o.truckErrorList.length>0&&o.truckErrorList.forEach((e=>{const i=1===e.state?"CARGANDO":"A DESCARGA";s+=` ${e.truckError.deviceAlias}=> ${i},`})),""!==s&&alert(`Las siguientes unidades no han podido ser reasignadas: ${s}`)},new((a=void 0)||(a=Promise))((function(e,i){function t(e){try{r(l.next(e))}catch(e){i(e)}}function n(e){try{r(l.throw(e))}catch(e){i(e)}}function r(i){var o;i.done?e(i.value):(o=i.value,o instanceof a?o:new a((function(e){e(o)}))).then(t,n)}r((l=l.apply(o,s||[])).next())}));var o,s,a,l},ue=({open:e,setOpen:i,setRefresh:t,operations:a})=>{const r=(0,Z.T)(),[d,c]=(0,k.useState)([]),[g,h]=(0,k.useState)(""),[p,m]=(0,k.useState)([]),[x,b]=(0,k.useState)(!1),[O,f]=k.useState(!1);(0,k.useEffect)((()=>{r(q.RK),r(ee.CE)}),[]);const L=e=>{h(e.target.value)};return(0,n.jsxs)(Y,Object.assign({},{loading:O},{open:e,handleClickConfirm:()=>{p.length<=0||g.length<=0?r((0,Q.L8)({open:!0,msg:"Debe seleccionar almenos una excavadora y un camiÃ³n",severity:"warning"})):b(!0)},handleClose:()=>{i(!1),m([]),h("")}},{children:[(0,n.jsx)(o.Z,Object.assign({container:!0},{children:(0,n.jsx)(o.Z,Object.assign({item:!0,xs:12},{children:(0,n.jsx)(_.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16}},{children:"Trucks reassignment"}),void 0)}),void 0)}),void 0),(0,n.jsxs)(o.Z,Object.assign({container:!0,style:{paddingLeft:4}},{children:[(0,n.jsx)(o.Z,Object.assign({item:!0,xs:6},{children:(0,n.jsx)(l.Z,Object.assign({elevation:4},{children:(0,n.jsx)(re,{handleonchangeTruck:()=>{},setTrucksSelect:m,trucksSelect:p},void 0)}),void 0)}),void 0),(0,n.jsx)(o.Z,Object.assign({item:!0,xs:6},{children:(0,n.jsx)(l.Z,Object.assign({style:{margin:10}},{children:(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(u.Z,{children:(0,n.jsx)(v.Z,{secondary:"Destination Excavator"},void 0)},void 0),(0,n.jsx)(u.Z,{children:(0,n.jsx)(v.Z,{children:(0,n.jsx)(G.Z,Object.assign({component:"fieldset"},{children:(0,n.jsx)($.Z,Object.assign({row:!0,"aria-label":"gender",name:"radio-buttons-group"},{children:a.map((e=>{var i;return(0,n.jsx)(s.ZP,Object.assign({title:e.state!==ce.J8.Operando?"Excavator whitout operation / Excavadora sin operaciÃ³n":"Destination Excavator"},{children:(0,n.jsx)(U.Z,{value:e.id,disabled:e.state!==ce.J8.Operando,control:(0,n.jsx)(M.Z,{disabled:e.state!==ce.J8.Operando},void 0),onChange:L,label:`  ${null===(i=e.excavatorList[0])||void 0===i?void 0:i.deviceAlias}`},void 0)}),e.id)}))}),void 0)}),void 0)},void 0)},void 0)]},void 0)}),void 0)}),void 0)]}),void 0),(0,n.jsx)(X.a,Object.assign({open:x,handleClose:()=>{b(!1)},handleConfirm:()=>{b(!1),i(!1),m([]),h(""),ve(g,p,f,t)},title:"Area you sure?"},{children:(0,n.jsx)(de.Z,Object.assign({severity:"warning"},{children:"Intentaremos mover estos camiones, si ocurre algun error se le informarÃ¡"}),void 0)}),void 0)]}),void 0)};var ge=t(30433),je=t(73727),he=t(2780),pe=t(66083),me=t(71267),xe=t(8286),be=t(86072),Oe=t(89601);const fe=({newOperation:e})=>{const i=(0,Z.T)(),t=()=>{i((0,Oe.mg)())},l=(0,k.useMemo)((()=>e.uploadList.map(((e,i)=>{const o=e.type===ce.WW.TAJO?`\n      ${e.nameProject}-${e.name}-${e.material?e.material.type:""}\n      `:e.name;return(0,n.jsx)(me.Z,{color:"secondary",label:o,onDelete:t},i)}))),[e.uploadList]);return 0===e.uploadList.length?(0,n.jsx)(n.Fragment,{},void 0):(0,n.jsx)(o.Z,Object.assign({item:!0},{children:(0,n.jsxs)(o.Z,Object.assign({container:!0},{children:[(0,n.jsx)(s.ZP,Object.assign({title:"Change Upload"},{children:(0,n.jsx)(a.Z,Object.assign({color:"primary",size:"small"},{children:(0,n.jsx)(be.Z,{},void 0)}),void 0)}),void 0),l]}),void 0)}),void 0)},Ze=({newOperation:e})=>{const i=(0,Z.T)(),t=(0,k.useMemo)((()=>e.downloadList.map(((e,t)=>(0,n.jsx)(me.Z,{color:"secondary",label:e.name,onDelete:()=>{return t=e.id,void i((0,Oe.$g)({id:t}));var t}},t)))),[e.downloadList]);return 0===e.downloadList.length?(0,n.jsx)(n.Fragment,{},void 0):(0,n.jsx)(o.Z,Object.assign({item:!0},{children:(0,n.jsxs)(o.Z,Object.assign({container:!0},{children:[(0,n.jsx)(s.ZP,Object.assign({title:"Change Download"},{children:(0,n.jsx)(a.Z,Object.assign({color:"primary",size:"small"},{children:(0,n.jsx)(be.Z,{},void 0)}),void 0)}),void 0),t]}),void 0)}),void 0)},Le=({newOperation:e})=>{const i=(0,Z.T)(),t=()=>{i((0,Oe.QW)())},l=(0,k.useMemo)((()=>e.excavatorList.map(((e,i)=>{const o=e.deviceAlias;return(0,n.jsx)(me.Z,{color:"secondary",label:o,onDelete:t},i)}))),[e.excavatorList]);return 0===e.excavatorList.length?(0,n.jsx)(n.Fragment,{},void 0):(0,n.jsx)(o.Z,Object.assign({item:!0},{children:(0,n.jsxs)(o.Z,Object.assign({container:!0},{children:[(0,n.jsx)(s.ZP,Object.assign({title:"Change Excavator"},{children:(0,n.jsx)(a.Z,Object.assign({color:"primary",size:"small"},{children:(0,n.jsx)(be.Z,{},void 0)}),void 0)}),void 0),l]}),void 0)}),void 0)};var ye,Ce=t(96588),Ne=t(18973),Ee=t(50648);!function(e){e.CHANGE_NOTHING="0",e.CHANGE_UPLOAD="1",e.CHANGE_DOWNLOAD="2",e.CHANGE_EXCAVATOR="3",e.CHANGE_TRUCKS="changetruck"}(ye||(ye={}));const Ae=[{label:"Change Upload",value:ye.CHANGE_UPLOAD,id:ye.CHANGE_UPLOAD},{label:"Change/Add Download",value:ye.CHANGE_DOWNLOAD,id:ye.CHANGE_DOWNLOAD},{label:"Change Excavator",value:ye.CHANGE_EXCAVATOR,id:ye.CHANGE_EXCAVATOR}],Se=[{label:"TAJO",value:ce.WW.TAJO.toString(),id:""},{label:"STOCK",value:ce.WW.STOCK.toString(),id:""}],ke=[{label:"DME",value:Ee.TypeDownload.DME.toString(),id:""},{label:"PAD",value:Ee.TypeDownload.PAD.toString(),id:""},{label:"STOCK",value:Ee.TypeDownload.STOCK.toString(),id:""}],Te=({open:e,operation:i,setOpen:t})=>{const[a,l]=(0,k.useState)([]),{excavatorInfoList:r}=(0,Z.C)(ee.kW),d=(0,k.useRef)(),{dmeCellList:c,padCellList:v,stockCellList:u,polygonList:j}=(0,Z.C)(Ne.WD),[m,x]=(0,k.useState)(ye.CHANGE_NOTHING),[b,O]=(0,k.useState)(ce.WW.DESCONOCIDO),[f,L]=(0,k.useState)(Ee.TypeDownload.UNKNOWN),y=(0,Z.T)(),{newOperation:C}=(0,Z.C)(Ne.e5),N=(e,i,t)=>{const n=i.find((i=>i.id===e));n&&y((0,Oe.qn)(Object.assign(Object.assign({},n),{type:t})))},E=(e,i,t)=>{const n=i.find((i=>i.id===e));n&&y((0,Oe.Ru)(Object.assign(Object.assign({},n),{type:t})))},A=(0,k.useCallback)((()=>((e,i,t,n,o,s,a,l)=>{let r=e===ye.CHANGE_NOTHING?Ae:e===ye.CHANGE_UPLOAD?Se:[];switch(e){case ye.CHANGE_NOTHING:r=Ae;break;case ye.CHANGE_UPLOAD:r=Se;break;case ye.CHANGE_DOWNLOAD:r=ke;break;case ye.CHANGE_EXCAVATOR:r=l.map((e=>({label:e.deviceAlias,id:e.id,value:e.id})));break;default:r=ke}switch(i){case ce.WW.TAJO:r=t.map((e=>({label:`${e.nameProject}-${e.name}-${e.material?e.material.type:""}`,value:e.id,id:e.id})));break;case ce.WW.STOCK:r=n.map((e=>({label:`${e.name}`,value:e.id,id:e.id})))}switch(o){case Ee.TypeDownload.DME:r=s.map((e=>({label:`${e.name}`,value:e.id,id:e.id})));break;case Ee.TypeDownload.PAD:r=a.map((e=>({label:`${e.name}`,value:e.id,id:e.id})));break;case Ee.TypeDownload.STOCK:r=n.map((e=>({label:`${e.name}`,value:e.id,id:e.id})))}return r})(m,b,j,u,f,c,v,r)),[m,b,j,u,f,c,v,r]);return(0,n.jsxs)(K.Z,Object.assign({open:e,onClose:t,title:"Migrate Operation"},{children:[(0,n.jsx)(pe.Z,Object.assign({style:{paddingTop:8,paddingBottom:0}},{children:"Update Operation Attributes"}),void 0),(0,n.jsx)(J.Z,Object.assign({style:{minHeight:320}},{children:(0,n.jsxs)(o.Z,Object.assign({container:!0,direction:"column"},{children:[(0,n.jsx)(o.Z,Object.assign({item:!0},{children:(0,n.jsxs)(o.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,n.jsx)(_.Z,{children:"Upload:"},void 0),(0,n.jsx)(ge.g7,{operation:i,lineThrough:C.uploadList.length>0},void 0),(0,n.jsx)(fe,Object.assign({},{operation:i,newOperation:C}),void 0)]}),void 0)}),void 0),(0,n.jsx)(p.Z,{width:"100%",height:8},void 0),(0,n.jsxs)(o.Z,Object.assign({item:!0},{children:[(0,n.jsxs)(o.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,n.jsx)(_.Z,{children:"Download: "},void 0),(0,n.jsx)(ge.DQ,{operation:i,lineThrough:C.downloadList.length>0},void 0),(0,n.jsx)(Ze,Object.assign({},{operation:i,newOperation:C}),void 0)]}),void 0),(0,n.jsx)(p.Z,{width:"100%",height:8},void 0),(0,n.jsx)(h.Z,{orientation:"horizontal"},void 0),(0,n.jsx)(s.ZP,Object.assign({title:"Puede agregar hasta 2 puntos de descarga"},{children:(0,n.jsx)(_.Z,Object.assign({style:{fontSize:11}},{children:"*You can add up to 2 download points, example 1 DME and 1 PAD or 1 STOCK"}),void 0)}),void 0),(0,n.jsx)(h.Z,{orientation:"horizontal"},void 0)]}),void 0),(0,n.jsx)(p.Z,{width:"100%",height:8},void 0),(0,n.jsx)(o.Z,Object.assign({item:!0},{children:(0,n.jsxs)(o.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,n.jsx)(_.Z,{children:"Excavator: "},void 0),(0,n.jsx)(ge.Ez,{operation:i,lineThrough:C.excavatorList.length>0},void 0),(0,n.jsx)(Le,Object.assign({},{operation:i,newOperation:C}),void 0)]}),void 0)}),void 0),(0,n.jsx)(p.Z,{height:8},void 0),(1!==C.excavatorList.length||2!==C.downloadList.length||1!==C.uploadList.length)&&(0,n.jsx)(o.Z,Object.assign({item:!0,style:{marginTop:8}},{children:(0,n.jsx)(Ce.ZP,{size:"small",value:a,blurOnSelect:!0,onChange:(e,i)=>{switch(l(i),i.length){case 0:x(ye.CHANGE_NOTHING),O(ce.WW.DESCONOCIDO),L(Ee.TypeDownload.UNKNOWN);break;case 1:x(i[0].value),O(ce.WW.DESCONOCIDO),L(Ee.TypeDownload.UNKNOWN);break;case 2:switch(console.log("typeHelp",m),m){case ye.CHANGE_UPLOAD:O(Number(i[1].value));break;case ye.CHANGE_DOWNLOAD:L(Number(i[1].value));break;case ye.CHANGE_EXCAVATOR:((e,i)=>{const t=i.find((i=>i.id===e));console.log("element",t),t&&y((0,Oe.Zh)(t))})(i[1].value,r),l([]),x(ye.CHANGE_NOTHING)}break;case 3:switch(m){case ye.CHANGE_UPLOAD:switch(b){case ce.WW.TAJO:N(i[2].id,j,ce.WW.TAJO);break;case ce.WW.STOCK:N(i[2].id,u,ce.WW.STOCK)}break;case ye.CHANGE_DOWNLOAD:switch(f){case Ee.TypeDownload.DME:E(i[2].id,c,f);break;case Ee.TypeDownload.PAD:E(i[2].id,v,f);break;case Ee.TypeDownload.STOCK:E(i[2].id,u,f)}}O(ce.WW.DESCONOCIDO),L(Ee.TypeDownload.UNKNOWN),x(ye.CHANGE_NOTHING),l([])}setTimeout((()=>{var e,i;null===(e=d.current)||void 0===e||e.focus(),null===(i=d.current)||void 0===i||i.click()}),100)},options:A(),multiple:!0,renderTags:(e,i)=>e.map(((e,t)=>(0,n.jsx)(me.Z,Object.assign({variant:"outlined",label:e.label},i({index:t})),void 0))),style:{minWidth:200},getOptionLabel:e=>e.label,openOnFocus:!0,disableClearable:!0,getOptionDisabled:e=>((e,i,t)=>{switch(e.id){case ye.CHANGE_UPLOAD:return i.uploadList.length>0;case ye.CHANGE_DOWNLOAD:return i.downloadList.length>1;case ye.CHANGE_EXCAVATOR:return i.excavatorList.length>0}return console.log("option",i.downloadList),i.downloadList.some((i=>i.type===Number(e.value)))})(e,C),filterSelectedOptions:!0,renderInput:e=>(0,n.jsx)(xe.Z,Object.assign({},e,{autoFocus:!0,inputRef:d,label:"How can I help you?",variant:"outlined",fullWidth:!0}),void 0)},void 0)}),void 0)]}),void 0)}),void 0),(0,n.jsx)(V.Z,{children:(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(g.Z,Object.assign({onClick:t,size:"small",color:"primary"},{children:"Cancel"}),void 0),(0,n.jsx)(g.Z,Object.assign({variant:"outlined",size:"small",color:"secondary",onClick:()=>{y((0,Oe.db)({oldOperation:i,newOperation:C}))}},{children:"Save"}),void 0)]},void 0)},void 0)]}),void 0)};var we=t(25947);const De=(0,d.Z)({rootList:{flex:1,padding:2,margin:2,overflow:"auto"},rootNoDropItem:{padding:2,margin:2,width:32,height:"92vh"},rootListOver:{flex:1,padding:2,margin:2,overflow:"auto",background:"#80808045"},rootNotDropList:{width:300,padding:2,margin:2,overflow:"auto",zIndex:1,transform:"translateX(-50%) translateY(130px) rotate(-90deg)",msTransform:"translateX(-50%) translateY(130px) rotate(-90deg)",mozTransform:"translateX(-50%) translateY(130px) rotate(-90deg)",OTransform:"translateX(-50%) translateY(130px) rotate(-90deg)",position:"absolute",left:"50%",top:"0%"},disabledPadding:{padding:0,paddingBottom:2,flex:1}}),Ie=({operation:e})=>{const i=De(),t=e.excavatorList.length>0?e.excavatorList[0]:null;return(0,n.jsxs)(we.T5,Object.assign({container:!0,className:i.disabledPadding,alignItems:"center",justifyContent:e.id?"flex-start":"flex-end"},{children:[(0,n.jsx)(we.P4,Object.assign({item:!0},{children:(0,n.jsx)(v.Z,{secondary:e.id?`Operation ${null==t?void 0:t.deviceAlias}`:`${null==t?void 0:t.deviceAlias}`},void 0)}),void 0),!e.id&&(0,n.jsx)(je.rU,Object.assign({style:{textDecoration:"none"},to:`/operation/create/${t?t.deviceId:""}/${t?t.id:""}`},{children:(0,n.jsx)(s.ZP,Object.assign({title:`Assigment operation to ${t?t.deviceAlias:""}`},{children:(0,n.jsx)(a.Z,Object.assign({size:"small",color:"secondary"},{children:(0,n.jsx)(z.Z,{fontSize:"small"},void 0)}),void 0)}),void 0)}),void 0)]}),void 0)},ze=({operation:e,loading:i,setLoading:t,setRefresh:l})=>{const r=De(),[d,c]=(0,k.useState)(!1),[v,j]=(0,k.useState)(!1),h=()=>{j((e=>!e))},p=(0,Z.T)(),{state:m}=(0,Z.C)(Ne.e5);if((0,k.useEffect)((()=>{switch(m){case Oe.m4.SAVING:t(!0);break;case Oe.m4.ERROR:t(!1);break;case Oe.m4.DONE:t(!1),j(!1)}}),[m]),!e.id)return(0,n.jsx)(Ie,Object.assign({},{operation:e}),void 0);const x=()=>c((e=>!e));return(0,n.jsxs)(u.Z,Object.assign({disableGutters:!0,className:r.disabledPadding},{children:[(0,n.jsx)(X.a,Object.assign({open:d,handleClose:x,handleConfirm:()=>{return i=void 0,n=void 0,s=function*(){t(!0);const i=yield(0,he.wg)(e.id);p(i?(0,Q.L8)({open:!0,msg:i,severity:"error"}):(0,Q.Ui)()),t(!1),l((e=>!e)),c(!1)},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{r(s.next(e))}catch(e){t(e)}}function l(e){try{r(s.throw(e))}catch(e){t(e)}}function r(i){var t;i.done?e(i.value):(t=i.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}r((s=s.apply(i,n||[])).next())}));var i,n,o,s},title:"Are you sure?"},{children:(0,n.jsxs)(de.Z,Object.assign({severity:"warning"},{children:["Esta intentando finalizar la operacion"," ",e.excavatorList[0].deviceAlias,", si ocurre algun error se le informarÃ¡"]}),void 0)}),void 0),(0,n.jsxs)(o.Z,Object.assign({container:!0},{children:[(0,n.jsxs)(o.Z,Object.assign({container:!0},{children:[(0,n.jsx)(Ie,Object.assign({},{operation:e}),void 0),(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(s.ZP,Object.assign({title:"Change Upload/Download/Trucks/Excavator"},{children:(0,n.jsx)(a.Z,Object.assign({color:"secondary",size:"small",onClick:h},{children:(0,n.jsx)(W.Z,{fontSize:"small"},void 0)}),void 0)}),void 0),(0,n.jsx)(s.ZP,Object.assign({title:"Finalize Operation"},{children:(0,n.jsx)(a.Z,Object.assign({color:"secondary",onClick:x,size:"small"},{children:(0,n.jsx)(P.Z,{fontSize:"small"},void 0)}),void 0)}),void 0),(0,n.jsx)(s.ZP,Object.assign({title:"Detail Operation"},{children:(0,n.jsx)(je.rU,Object.assign({target:"_blank",to:`/operation/detail/${e.id}`},{children:(0,n.jsx)(a.Z,Object.assign({color:"secondary",size:"small"},{children:(0,n.jsx)(R.Z,{fontSize:"small"},void 0)}),void 0)}),void 0)}),void 0)]},void 0)]}),void 0),(0,n.jsxs)(o.Z,Object.assign({item:!0,md:12},{children:[(0,n.jsx)(ge.g7,{operation:e},void 0),(0,n.jsx)(ge.DQ,{operation:e},void 0)]}),void 0),(0,n.jsx)(o.Z,Object.assign({item:!0},{children:e.truckTemporalList&&e.truckTemporalList.length>0&&!i&&(0,n.jsx)(s.ZP,Object.assign({title:"Save changes"},{children:(0,n.jsx)(g.Z,Object.assign({size:"small",variant:"outlined",color:"secondary",startIcon:(0,n.jsx)(H.Z,{color:"secondary",fontSize:"small"},void 0),onClick:()=>{p((0,L.hK)({operationId:e.id})),ve(e.id,e.truckTemporalList,t,l)}},{children:"GUARDAR"}),void 0)}),void 0)}),void 0),(0,n.jsx)(Te,{open:v,operation:e,setOpen:h},void 0)]}),void 0)]}),void 0)},We=({operation:e,filterList:i})=>{const t=(0,k.useMemo)((()=>{var t;return null===(t=e.truckTemporalList)||void 0===t?void 0:t.map(((t,o)=>(0,n.jsx)(I,{operation:e,truck:t,temporal:!0,isFilter:i.some((e=>e.deviceId===t.deviceId))},o)))}),[e.truckTemporalList]);return(0,n.jsx)(n.Fragment,{children:t},void 0)},Pe=({operation:e,filterList:i})=>{const t=(0,k.useMemo)((()=>e.truckList.map(((t,o)=>{var s;return(0,n.jsx)(I,{operation:e,isFilter:i.some((e=>e.deviceId===t.deviceId)),truck:t,temporalRemove:null===(s=e.truckTemporalRemoveList)||void 0===s?void 0:s.some((e=>e.deviceId===t.deviceId))},o)}))),[e.truckList,i]);return(0,n.jsx)(n.Fragment,{children:t},void 0)},Re=({operation:e,setRefresh:i,filterList:t})=>{const[s,a]=(0,k.useState)(!1),[{canDrop:r,isOver:d},v]=(0,c.L)((()=>({accept:b,drop:()=>({operation:e}),collect:i=>({isOver:i.isOver(),canDrop:!!e.id})})),[e]),u=De();if(!r)return(0,n.jsx)(j.Z,Object.assign({disablePadding:!0,component:l.Z,style:{width:36,padding:2,margin:2}},{children:(0,n.jsx)("div",Object.assign({className:u.rootNotDropList},{children:(0,n.jsx)(ze,Object.assign({},{operation:e,setLoading:a,loading:s,setRefresh:i}),void 0)}),void 0)}),void 0);const g=d&&r?u.rootListOver:d&&!r?u.rootNotDropList:u.rootList;return(0,n.jsxs)(j.Z,Object.assign({ref:v,disablePadding:!0,component:l.Z,className:g},{children:[(0,n.jsx)(ze,Object.assign({},{operation:e,setLoading:a,loading:s,setRefresh:i}),void 0),(0,n.jsx)(h.Z,{orientation:"horizontal"},void 0),(0,n.jsx)(x,{loading:s},void 0),(0,n.jsx)(p.Z,{height:4},void 0),(0,n.jsxs)(o.Z,Object.assign({container:!0},{children:[(0,n.jsx)(Pe,{operation:e,filterList:t},void 0),(0,n.jsx)(We,{operation:e,filterList:t},void 0)]}),void 0)]}),void 0)};var He=t(43192),_e=t(57865),Ge=t(6777);const $e=e=>{if(!e)return"";const i=ce.PW[e.type];switch(e.type){case 1:return e.pit&&e.pit.projectList&&e.pit.projectList.length>0&&e.pit.projectList[0].polygonList&&e.pit.projectList[0].polygonList.length>0?`${e.pit.projectList[0].name} - ${e.pit.projectList[0].polygonList[0].name}`:"";case 3:return e[i]&&e[i].cellList&&e[i].cellList.length>0?e[i].cellList[0].name:"";default:return""}},Ue=e=>{if(!e&&1!==e.type)return"";const i=ce.PW[e.type];return console.log("labelDownload",e,i),`${"dme"===i?"Desm.":"stock"===i?"STK":"Mine."} ${e[i]&&e[i].cellList&&e[i].cellList.length>0?e[i].cellList[0].name:""}`},Me=()=>{const{operationList:e,status:i,truckAvailable:t}=(0,Z.C)(L.YL),{truckInfoList:n}=(0,Z.C)(q.ej),{excavatorInfoList:o,initial:s}=(0,Z.C)(ee.kW),a=(0,Z.T)(),[l,r]=(0,k.useState)([]);return(0,k.useEffect)((()=>{if(console.log("status === FETCH_ENUM.DONE",oe.JD.DONE),console.log("status === FETCH_ENUM.DONE",Ge.Vj.LOADING),i===oe.JD.DONE&&s!==Ge.Vj.LOADING){const i=e.map((e=>{var i,t,n;return Object.assign(Object.assign({},e),{excavator:e.excavatorList.length>0?e.excavatorList[0]:{},typeUpload:ce.WW[null===(i=e.upload)||void 0===i?void 0:i.type],labelUpload:`${ce.WW[null===(t=e.upload)||void 0===t?void 0:t.type]} ${e.upload?$e(e.upload):""}`,labelDownload:e.download?`${Ue(e.download)}`:"",typeDownload:ce.WW[null===(n=e.download)||void 0===n?void 0:n.type],labelstate:ce.J8[e.state],cycles:e.cycleList.length,truckList:e.truckList.map((e=>{var i;return Object.assign(Object.assign({},e),{deviceAliasNumber:Number(null===(i=e.deviceAlias.match(/\d/g))||void 0===i?void 0:i.join(""))})})).sort(((e,i)=>e.deviceAliasNumber-i.deviceAliasNumber))})}));console.log("operationNewList",e,o),r(i)}else r([])}),[e]),(0,k.useEffect)((()=>{e.length>0&&n.length>0&&a((0,L.Vb)({truckList:n}))}),[n,i]),{operationsAll:l,status:i,truckAvailable:t}},Fe=()=>(0,n.jsx)(o.Z,Object.assign({container:!0,justifyContent:"center",alignItems:"center"},{children:(0,n.jsx)(o.Z,Object.assign({item:!0},{children:(0,n.jsx)(_.Z,{children:"No data found"},void 0)}),void 0)}),void 0);var Ke=t(59693),Ve=t(17215),Je=t(91050),Ye=t(58365);const Xe=({height:e,width:i})=>(0,n.jsx)(o.Z,Object.assign({container:!0,justifyContent:"center",alignItems:"center"},{children:(0,n.jsx)(Ye.Z,{height:e,width:i,variant:"rect"},void 0)}),void 0),Be=()=>{const[e,i]=(0,k.useState)(""),[t,n]=(0,k.useState)([]),{truckInfoList:o,initial:s}=(0,Z.C)(q.ej);return(0,k.useEffect)((()=>{if(console.log("StateTruckStreamReducer",s),!e||0===o.length)return void n([]);const i=o.filter((i=>{var t,n;return(null===(t=i.deviceAlias)||void 0===t?void 0:t.toUpperCase().includes(e.toUpperCase()))||(null===(n=i.deviceId)||void 0===n?void 0:n.toUpperCase().includes(e.toUpperCase()))}));n(i)}),[e,s,o]),{search:e,setSearch:i,filterList:t}};var qe=t(49032),Qe=t(78479),ei=t(31125),ii=t(73099);const ti=(0,ie.Z)({root:{padding:2},rootList:{marginBottom:4},ListItem:{padding:0,margin:0},itemHeaderList:{flex:1,paddingLeft:2},textHeaderList:{margin:0},iconTextList:{padding:0,margin:0},chipText:{height:12,color:"#fff",fontWeight:"bold"}}),ni=({items:e,filterList:i,title:t,useVisibleList:o,keyState:s,disabledDrag:a})=>{const r=ti(),[d,c]=o,g=(0,k.useMemo)((()=>e.map((e=>(0,n.jsx)(I,{disabledDrag:s!==qe.EnumEvent.OPERATIONAL,truck:e,isFilter:i.some((i=>i.deviceId===e.deviceId))},e.deviceId)))),[e,i]),h=(0,k.useCallback)((()=>{const e=d.find((e=>e.value===s));return e&&e.visible}),[d]),p=(0,k.useCallback)((()=>{const e=d.findIndex((e=>e.value===s));if(e>-1){const i=JSON.parse(JSON.stringify(d));i[e].visible=!i[e].visible,c(i)}}),[d]),m=h();return(0,n.jsxs)(j.Z,Object.assign({component:l.Z,disablePadding:!0,className:r.rootList},{children:[(0,n.jsx)(u.Z,Object.assign({button:!0,disableGutters:!0,className:r.ListItem,onClick:p},{children:(0,n.jsxs)(we.T5,Object.assign({container:!0,justifyContent:"space-between",alignItems:"center"},{children:[(0,n.jsxs)(we.P4,Object.assign({className:r.itemHeaderList,container:!0,direction:"column",justifyContent:"center",alignContent:"flex-start"},{children:[(0,n.jsx)(v.Z,{className:r.textHeaderList,secondary:t},void 0),(0,n.jsx)(me.Z,{size:"small",className:r.chipText,color:"primary",label:`(${e.length}) trucks`},void 0)]}),void 0),e.length?(0,n.jsx)(we.hU,Object.assign({size:"small",className:r.iconTextList},{children:m?(0,n.jsx)(ei.Z,{fontSize:"small"},void 0):(0,n.jsx)(ii.Z,{fontSize:"small"},void 0)}),void 0):(0,n.jsx)(n.Fragment,{},void 0)]}),void 0)}),void 0),(0,n.jsx)(we.iz,{orientation:"horizontal"},void 0),(0,n.jsx)(we.Mi,Object.assign({direction:"left",in:m,mountOnEnter:!0,unmountOnExit:!0},{children:(0,n.jsx)(we.T5,Object.assign({container:!0,justifyContent:"center"},{children:g}),void 0)}),void 0)]}),void 0)},oi=()=>{const{truckAvailable:e}=Me(),{filterList:i}=Be(),t=ti(),o=(0,Qe._)("VISIBLE_STATES_TABS",Object.keys(qe.EnumEvent).map(((e,i)=>({value:qe.EnumEvent[e],label:e,visible:!1}))));return(0,n.jsxs)(we.T5,Object.assign({className:t.root},{children:[(0,n.jsx)(ni,{items:e.filter((e=>e.state===qe.EnumEvent.UNKNOWN_STATE_EVENT&&e.eventState&&e.eventState.event.event===qe.EnumEvent.UNKNOWN_STATE_EVENT||e.eventState&&e.eventState.event.event===qe.EnumEvent.OPERATIONAL)),filterList:i,title:"Available",useVisibleList:o,keyState:qe.EnumEvent.OPERATIONAL},void 0),(0,n.jsx)(ni,{items:e.filter((e=>e.eventState&&e.eventState.event.event===qe.EnumEvent.MAINTENANCE)),filterList:i,title:"Maintenance",disabledDrag:!0,useVisibleList:o,keyState:qe.EnumEvent.MAINTENANCE},void 0),(0,n.jsx)(ni,{items:e.filter((e=>e.eventState&&e.eventState.event.event===qe.EnumEvent.OPERATIONAL_DELAY)),filterList:i,title:"DOperative",useVisibleList:o,keyState:qe.EnumEvent.OPERATIONAL_DELAY},void 0),(0,n.jsx)(ni,{items:e.filter((e=>e.eventState&&e.eventState.event.event===qe.EnumEvent.NO_OPERATIONAL)),filterList:i,title:"NOperative",useVisibleList:o,keyState:qe.EnumEvent.NO_OPERATIONAL},void 0)]}),void 0)},si="92vh",ai=(0,ie.Z)((e=>({rootOperation:{display:"block",position:"relative",flexGrow:1,height:"96vh",margin:e.spacing(1,1,1,1)},rootAbsolute:{position:"absolute",top:0,bottom:0,right:0,left:0},operation:{overflow:"overlay",flex:11},containerOperation:{width:"100%",display:"flex",maxHeight:si,minHeight:si,alignContent:"center",justifyContent:"flex-start"},containerTrucks:{width:"100%",maxHeight:si,minHeight:si,margin:2,padding:2},search:{position:"relative",marginRight:2,borderRadius:e.shape.borderRadius,backgroundColor:(0,Ke.Fq)(e.palette.common.white,.15),"&:hover":{backgroundColor:(0,Ke.Fq)(e.palette.common.white,.25)},marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{width:"auto"}},searchIcon:{padding:e.spacing(0,0),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},cancelIcon:{padding:e.spacing(0,0),height:"100%",alignItems:"center",justifyContent:"center",display:"flex"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:`calc(1em + ${e.spacing(1)}px)`,paddingRight:`calc(1em + ${e.spacing(1)}px)`,transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:"8ch","&:focus":{width:"20ch"}}},rootTruck:{overflow:"auto",maxHeight:si},rootIconResize:{height:si,display:"flex",position:"relative",width:16,backgroundColor:f.Jx,paddingRight:7,paddingLeft:7,backgroundClip:"content-box",cursor:"col-resize"}})));var li,ri,di;const ci=()=>{const{operationsAll:e,status:i}=Me(),t=(0,k.useRef)(),d=(0,k.useRef)(),c=(0,k.useRef)(),[v,u]=(0,k.useState)(!1),[g,j]=(0,k.useState)(!1),[h,p]=(0,k.useState)(!1),m=(0,k.useRef)(),{search:x,setSearch:b,filterList:O}=Be(),f=(0,Z.T)(),y=ai();(0,k.useEffect)((()=>{document.querySelector("#handler"),li=document.querySelector("#wrapper"),ri=null==li?void 0:li.querySelector("#listTruck"),di=null==li?void 0:li.querySelector("#listOperation");const e=localStorage.getItem("localStorajeTruck"),i=localStorage.getItem("localStorajeOperation");e&&(ri.style.flex=Number(e)),i&&(di.style.flex=Number(i))}),[]),(0,k.useEffect)((()=>{f((0,L.hS)())}),[h]);const C=(0,k.useMemo)((()=>e.map(((e,i)=>(0,n.jsx)(Re,{operation:e,setRefresh:p,filterList:O},i)))),[e,O]),{state:N}=(0,Z.C)(Ne.e5);(0,k.useEffect)((()=>{N===Oe.m4.DONE&&p((e=>!e))}),[N]);const E=(0,k.useCallback)((e=>{var i;if(!(v&&li&&ri&&di))return;const n=12*(e.clientX-li.offsetLeft-46)/(null===(i=t.current)||void 0===i?void 0:i.clientWidth),o=Number(d.current.style.flex)>0?d.current.style.flex:0,s=Math.abs(o-n)>.05?Math.max(n,1):o;ri.style.flex=s,di.style.flex=12-s,localStorage.setItem("localStorajeTruck",`${s}`),localStorage.setItem("localStorajeOperation",""+(12-s))}),[v]);return(0,n.jsx)(He.W,Object.assign({backend:_e.PD},{children:(0,n.jsxs)("div",Object.assign({className:y.rootOperation},{children:[(0,n.jsxs)("div",Object.assign({className:y.rootAbsolute},{children:[(0,n.jsx)(o.Z,Object.assign({item:!0,innerRef:d},{children:(0,n.jsxs)(o.Z,Object.assign({container:!0,justifyContent:"flex-end",alignItems:"center"},{children:[(0,n.jsx)(s.ZP,Object.assign({title:"New Operation"},{children:(0,n.jsx)(je.rU,Object.assign({to:"/operation/create/0/0"},{children:(0,n.jsx)(a.Z,Object.assign({color:"secondary",size:"small"},{children:(0,n.jsx)(z.Z,{fontSize:"small"},void 0)}),void 0)}),void 0)}),void 0),(0,n.jsx)(s.ZP,Object.assign({title:"Reassigment global Trucks"},{children:(0,n.jsx)(a.Z,Object.assign({onClick:()=>j((e=>!e)),color:"secondary",size:"small"},{children:(0,n.jsx)(W.Z,{fontSize:"small"},void 0)}),void 0)}),void 0),(0,n.jsx)(l.Z,Object.assign({style:{marginTop:2,marginRight:2}},{children:(0,n.jsxs)(o.Z,Object.assign({container:!0,alignItems:"center"},{children:[(0,n.jsxs)("div",Object.assign({className:y.search},{children:[(0,n.jsx)("div",Object.assign({className:y.searchIcon},{children:(0,n.jsx)(Ve.Z,{color:"primary",fontSize:"small"},void 0)}),void 0),(0,n.jsx)(s.ZP,Object.assign({title:"Search Trucks: Device Id, Device Alias"},{children:(0,n.jsx)(r.Z,{color:"primary",value:x,inputRef:m,onKeyDown:e=>{var i;"Escape"===e.key&&(b(""),null===(i=m.current)||void 0===i||i.blur())},onChange:e=>b(e.target.value),placeholder:"Search...",classes:{root:y.inputRoot,input:y.inputInput},inputProps:{"aria-label":"search"}},void 0)}),void 0)]}),void 0),x&&(0,n.jsx)("div",Object.assign({className:y.cancelIcon},{children:(0,n.jsx)(a.Z,Object.assign({size:"small",onClick:()=>b("")},{children:(0,n.jsx)(Je.Z,{color:"inherit",fontSize:"small"},void 0)}),void 0)}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0),(0,n.jsxs)(o.Z,Object.assign({container:!0,innerRef:t,id:"wrapper",onMouseUp:()=>u(!1),onMouseMove:E,onMouseDown:e=>{e.target===c.current&&u(!0)}},{children:[(0,n.jsx)(o.Z,Object.assign({item:!0,id:"listTruck",style:{margin:0,padding:0,flex:1},className:y.rootTruck,innerRef:d},{children:(0,n.jsx)(oi,{},void 0)}),void 0),(0,n.jsx)(we.P4,{className:y.rootIconResize,id:"handler",innerRef:c},void 0),(0,n.jsx)(o.Z,Object.assign({item:!0,className:y.operation,id:"listOperation"},{children:(0,n.jsx)(o.Z,Object.assign({container:!0,direction:"column"},{children:(0,n.jsx)(o.Z,Object.assign({item:!0},{children:(0,n.jsx)("div",Object.assign({className:y.containerOperation},{children:i===oe.JD.LOADING?(0,n.jsx)(o.Z,Object.assign({container:!0,alignItems:"stretch",justifyContent:"center"},{children:(0,n.jsx)(Xe,{height:"100%",width:"100%"},void 0)}),void 0):e.length>0?C:(0,n.jsx)(Fe,{},void 0)}),void 0)}),void 0)}),void 0)}),void 0)]}),void 0)]}),void 0),(0,n.jsx)(ue,{open:g,setOpen:j,setRefresh:p,operations:e},void 0)]}),void 0)}),void 0)};function vi(){return(0,n.jsx)(ci,{},void 0)}}}]);