(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[408],{96019:(e,i,t)=>{"use strict";t.d(i,{Z:()=>v});var o=t(45987),n=t(87462),s=t(67294),a=(t(45697),t(86010)),r=t(89345),d=t(22601),l=t(93871),c=t(14670),u=s.forwardRef((function(e,i){var t=e.children,c=e.classes,u=e.className,v=(e.color,e.component),p=void 0===v?"label":v,g=(e.disabled,e.error,e.filled,e.focused,e.required,(0,o.Z)(e,["children","classes","className","color","component","disabled","error","filled","focused","required"])),h=(0,d.Z)(),m=(0,r.Z)({props:e,muiFormControl:h,states:["color","required","focused","disabled","error","filled"]});return s.createElement(p,(0,n.Z)({className:(0,a.Z)(c.root,c["color".concat((0,l.Z)(m.color||"primary"))],u,m.disabled&&c.disabled,m.error&&c.error,m.filled&&c.filled,m.focused&&c.focused,m.required&&c.required),ref:i},g),t,m.required&&s.createElement("span",{"aria-hidden":!0,className:(0,a.Z)(c.asterisk,m.error&&c.error)}," ","*"))}));const v=(0,c.Z)((function(e){return{root:(0,n.Z)({color:e.palette.text.secondary},e.typography.body1,{lineHeight:1,padding:0,"&$focused":{color:e.palette.primary.main},"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),colorSecondary:{"&$focused":{color:e.palette.secondary.main}},focused:{},disabled:{},error:{},filled:{},required:{},asterisk:{"&$error":{color:e.palette.error.main}}}}),{name:"MuiFormLabel"})(u)},96837:(e,i,t)=>{"use strict";t.d(i,{Z:()=>c});var o=t(87462),n=t(45987),s=t(67294),a=(t(45697),t(86010)),r=t(14670),d=t(93871),l=s.forwardRef((function(e,i){var t=e.classes,r=e.className,l=e.color,c=void 0===l?"default":l,u=e.component,v=void 0===u?"li":u,p=e.disableGutters,g=void 0!==p&&p,h=e.disableSticky,m=void 0!==h&&h,j=e.inset,x=void 0!==j&&j,b=(0,n.Z)(e,["classes","className","color","component","disableGutters","disableSticky","inset"]);return s.createElement(v,(0,o.Z)({className:(0,a.Z)(t.root,r,"default"!==c&&t["color".concat((0,d.Z)(c))],x&&t.inset,!m&&t.sticky,!g&&t.gutters),ref:i},b))}));const c=(0,r.Z)((function(e){return{root:{boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:e.palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},colorPrimary:{color:e.palette.primary.main},colorInherit:{color:"inherit"},gutters:{paddingLeft:16,paddingRight:16},inset:{paddingLeft:72},sticky:{position:"sticky",top:0,zIndex:1,backgroundColor:"inherit"}}}),{name:"MuiListSubheader"})(l)},99945:(e,i,t)=>{"use strict";t.d(i,{Z:()=>n});var o=t(67294);const n=(0,t(63786).Z)(o.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward")},44326:(e,i,t)=>{"use strict";t.d(i,{Z:()=>n});var o=t(67294);const n=(0,t(63786).Z)(o.createElement("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward")},12575:(e,i,t)=>{"use strict";t.d(i,{Z:()=>n});var o=t(67294);const n=(0,t(63786).Z)(o.createElement("path",{d:"M4 18v3h3v-3h10v3h3v-6H4v3zm15-8h3v3h-3v-3zM2 10h3v3H2v-3zm15 3H7V5c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2v8z"}),"EventSeat")},78965:(e,i,t)=>{"use strict";t.d(i,{Z:()=>n});var o=t(67294);const n=(0,t(63786).Z)(o.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save")},86905:(e,i,t)=>{e.exports=t.p+"322f531ddb14529b83bd73182d28de44.png"},77501:(e,i,t)=>{e.exports=t.p+"89f059a2790e391b484a369a3b9f92fb.png"},51790:(e,i,t)=>{e.exports=t.p+"20557549695e4a02b8f5e299c9687642.png"},79800:(e,i,t)=>{"use strict";t.d(i,{H:()=>o});const o=e=>{e.current.loadImage(t(51790),(function(i,t){if(i)throw i;e.current.addImage("truck_nav",t)})),e.current.loadImage(t(86905),(function(i,t){if(i)throw i;e.current.addImage("excavator_nav",t)})),e.current.loadImage(t(77501),(function(i,t){if(i)throw i;e.current.addImage("pickup_nav",t)}))}},16886:(e,i,t)=>{"use strict";t.d(i,{N:()=>s});var o=t(85893),n=t(67294);const s=({excavatorListClass:e,excavatorList:i})=>((0,n.useEffect)((()=>{e.addToMap()}),[]),(0,n.useEffect)((()=>{e.updateInMap()}),[i]),(0,o.jsx)(o.Fragment,{},void 0))},26271:(e,i,t)=>{"use strict";t.d(i,{b:()=>a});var o=t(85893),n=t(67294),s=t(6777);const a=({truckListClass:e,truckList:i})=>(s.ET,(0,n.useEffect)((()=>{e.addToMap()}),[]),(0,n.useEffect)((()=>{e.updateInMap()}),[i]),(0,o.jsx)(o.Fragment,{},void 0))},74248:(e,i,t)=>{"use strict";t.d(i,{f:()=>s});var o=t(67294),n=t(52573);const s=({polygonList:e,idSource:i,idLayer:t,idSourceCentroid:s,idLayerCentroid:a,map:r,haveCentroid:d,onClickFeature:l})=>((0,o.useEffect)((()=>{const o=new n.z(e,r,i,t,s,a,l,d);return o.addToMap(),()=>{o.removeOfMap()}}),[e]),null)},61242:(e,i,t)=>{"use strict";t.d(i,{a:()=>v});var o=t(85893),n=t(41120),s=t(52663),a=t(66083),r=t(29525),d=t(66856),l=t(95477),c=t(282);const u=(0,n.Z)({disabledPadding:{padding:0,textAlign:"center"}}),v=({open:e,handleClose:i,handleConfirm:t,title:n,children:v,maxWidth:p="lg",disabled:g=!1,loading:h})=>{const m=u();return(0,o.jsxs)(s.Z,Object.assign({open:e,onClose:i,maxWidth:p},{children:[(0,o.jsx)(a.Z,Object.assign({className:m.disabledPadding},{children:n}),void 0),(0,o.jsx)(r.Z,{children:v},void 0),(0,o.jsx)(d.Z,{children:h?(0,o.jsx)(l.Z,{style:{width:"30px",height:"30px"}},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.Z,Object.assign({size:"small",color:"primary",onClick:i},{children:"Cancelar"}),void 0),t&&(0,o.jsx)(c.Z,Object.assign({disabled:g,variant:"outlined",size:"small",color:"secondary",onClick:t,autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)},void 0)]}),void 0)}},34250:(e,i,t)=>{"use strict";t.d(i,{Z:()=>u});var o=t(85893),n=t(67294),s=t(41120),a=t(35117),r=t(8920),d=t(76211),l=t(33758);const c=(0,s.Z)((e=>(0,a.Z)({fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2),zIndex:2}})));function u({actionClick:e,Icon:i,visible:t,disabled:s,right:a,color:u,keyAction:v}){const p=c(),g=(0,r.Z)();(0,n.useEffect)((()=>{const i=i=>{console.log(i.key),i.key!==(null==v?void 0:v.toUpperCase())&&i.key!==(null==v?void 0:v.toLocaleLowerCase())&&i.key!==v||e()};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}}),[]);const h={enter:g.transitions.duration.enteringScreen,exit:g.transitions.duration.leavingScreen};return(0,o.jsx)(d.Z,Object.assign({in:t,timeout:h,unmountOnExit:!0},{children:(0,o.jsx)(l.Z,Object.assign({disabled:s,onClick:e,className:p.fab,style:{right:a},size:"small",color:u||"primary"},{children:(0,o.jsx)(i,{},void 0)}),void 0)}),void 0)}},48101:(e,i,t)=>{"use strict";t.d(i,{Z:()=>r});var o=t(85893),n=t(67294),s=t(34880);const a=t(6158);a.accessToken=s.c3;const r=({dragRotate:e,map:i,pitch:t,bearing:s,mapContainer:r,lng:d,lat:l,zoom:c,setLoad:u,style:v,height:p,dragControls:g=!0})=>((0,n.useEffect)((()=>{i.current||r&&(i.current=new a.Map({container:r.current,style:v,center:[d,l],pitch:t,bearing:s,zoom:c,antialias:!0,dragRotate:e}))}),[i,r]),(0,n.useEffect)((()=>{i.current&&(g&&(i.current.addControl(new a.FullscreenControl,"bottom-left"),i.current.addControl(new a.NavigationControl,"bottom-left")),i.current.on("move",(()=>{})),i.current.on("click",(e=>{console.log(e.lngLat)})),i.current.on("load",(()=>{i.current&&u(!0)})))}),[i]),(0,n.useEffect)((()=>{i.current&&i.current.setBearing(s)}),[s]),(0,o.jsx)("div",{ref:r,style:{flex:1,height:p||"100vh",width:"100%"},className:"map-container"},void 0))},30433:(e,i,t)=>{"use strict";t.d(i,{DQ:()=>v,Ez:()=>p,g7:()=>u});var o=t(85893),n=t(71267),s=t(12575),a=t(61920),r=t(99945),d=t(44326);const l=({value:e,operation:i,lineThrough:t=!1})=>{const s=e=>{var t,o,n,s,r,d,l,c,u,v,p,g;switch(e){case a.u6.DME:const e=(null===(o=null===(t=i.download)||void 0===t?void 0:t.dme)||void 0===o?void 0:o.cellList.length)>0?null===(s=null===(n=i.download)||void 0===n?void 0:n.dme)||void 0===s?void 0:s.cellList[0].name:"";return e.toUpperCase().includes("DME")?e:`DME-${e}`;case a.u6.PAD:const h=(null===(d=null===(r=i.download)||void 0===r?void 0:r.pad)||void 0===d?void 0:d.cellList.length)>0?null===(c=null===(l=i.download)||void 0===l?void 0:l.pad)||void 0===c?void 0:c.cellList[0].name:"";return h.toUpperCase().includes("PAD")?h:`PAD-${h}`;case a.u6.STOCK:const m=(null===(v=null===(u=i.download)||void 0===u?void 0:u.stock)||void 0===v?void 0:v.cellList.length)>0?null===(g=null===(p=i.download)||void 0===p?void 0:p.stock)||void 0===g?void 0:g.cellList[0].name:"";return m.toUpperCase().includes("STOCK")?m:`STK-${m}`;default:return""}};return(0,o.jsx)(o.Fragment,{children:e===a.u6.DME_PAD?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.Z,{color:t?"default":"secondary",icon:(0,o.jsx)(r.Z,{color:"secondary",fontSize:"small"},void 0),size:"small",label:(0,o.jsx)("p",Object.assign({style:{margin:0,padding:0,fontSize:"0.6rem",textDecoration:t?"line-through":"solid"}},{children:s("pad")}),void 0)},void 0),(0,o.jsx)(n.Z,{color:t?"default":"secondary",icon:(0,o.jsx)(r.Z,{color:"secondary",fontSize:"small"},void 0),size:"small",label:(0,o.jsx)("p",Object.assign({style:{margin:0,padding:0,fontSize:"0.6rem",textDecoration:t?"line-through":"solid"}},{children:s("dme")}),void 0)},void 0)]},void 0):(0,o.jsx)(n.Z,{icon:(0,o.jsx)(r.Z,{color:"secondary",fontSize:"small"},void 0),size:"small",color:t?"default":"secondary",label:(0,o.jsx)("p",Object.assign({style:{margin:0,padding:0,fontSize:"0.6rem",textDecoration:t?"line-through":"solid"}},{children:s(e)}),void 0)},void 0)},void 0)},c=({value:e,operation:i,lineThrough:t=!1})=>(0,o.jsx)(n.Z,{icon:(0,o.jsx)(d.Z,{color:"secondary",fontSize:"small"},void 0),size:"small",color:t?"default":"secondary",label:(0,o.jsx)("p",Object.assign({style:{margin:0,padding:0,fontSize:"0.6rem",textDecoration:t?"line-through":"solid"}},{children:(()=>{var t,o,n,s,r,d,l,c,u,v,p,g;switch(e){case a.u6.STOCK:const e=(null===(o=null===(t=i.upload)||void 0===t?void 0:t.stock)||void 0===o?void 0:o.cellList)&&(null===(s=null===(n=i.upload)||void 0===n?void 0:n.stock)||void 0===s?void 0:s.cellList.length)>0?null===(d=null===(r=i.upload)||void 0===r?void 0:r.stock)||void 0===d?void 0:d.cellList[0].name:"";return`${a.WW[i.upload.type]}  ${e}`;case a.u6.PIT:const h=null===(c=null===(l=i.upload)||void 0===l?void 0:l.pit)||void 0===c?void 0:c.name,m=(null===(u=i.upload.pit)||void 0===u?void 0:u.projectList.length)>0?`${null===(v=i.upload.pit)||void 0===v?void 0:v.projectList[0].name}`.substring(5):"",j=m&&(null===(p=i.upload.pit)||void 0===p?void 0:p.projectList[0].polygonList.length)>0?null===(g=i.upload.pit)||void 0===g?void 0:g.projectList[0].polygonList[0].name:"";return`${a.WW[i.upload.type]} ${h} ${m} ${j}`;default:return""}})()}),void 0)},void 0),u=({operation:e,lineThrough:i})=>{var t,n;let s="";return e?((null===(t=e.upload)||void 0===t?void 0:t.pit)&&(s="pit"),(null===(n=e.upload)||void 0===n?void 0:n.stock)&&(s="stock"),(0,o.jsx)(c,{value:s,operation:e,lineThrough:i},void 0)):(0,o.jsx)(o.Fragment,{},void 0)},v=({operation:e,lineThrough:i})=>{var t,n,s,a,r;let d="";return e?((null===(t=e.download)||void 0===t?void 0:t.dme)&&(d="dme"),(null===(n=e.download)||void 0===n?void 0:n.pad)&&(d="pad"),(null===(s=e.download)||void 0===s?void 0:s.stock)&&(d="stock"),(null===(a=e.download)||void 0===a?void 0:a.dme)&&(null===(r=e.download)||void 0===r?void 0:r.pad)&&(d="dme_pad"),(0,o.jsx)(l,{value:d,operation:e,lineThrough:i},void 0)):(0,o.jsx)(o.Fragment,{},void 0)},p=({operation:e,lineThrough:i})=>{const t=e&&e.excavatorList&&e.excavatorList.length>0?e.excavatorList[0].deviceAlias:"";return(0,o.jsx)(n.Z,{color:i?"default":"secondary",icon:(0,o.jsx)(s.Z,{fontSize:"small"},void 0),size:"small",style:{textDecoration:i?"line-through":"solid"},label:t},void 0)}},14276:(e,i,t)=>{"use strict";t.d(i,{c:()=>o});class o{constructor(e,i,t,o,n,s){this.unitsList=e,this.map=i,this.idSource=t,this.idLayer=o,this.iconImagen=n,this.offsetY=-2.1,this.fontSize=9,this.onClickElement=s}getInMap(){return this.map.getSource(this.idSource)}generateFeatures(){return this.unitsList.map((e=>{const{latitude:i,longitude:t,direction:o}=e.sensor,n=e.deviceAlias.split("-"),s=n.length>1&&""!==n[1].trim()?`${n[0].substr(0,1)}${n[1].substr(-2)}`:e.deviceAlias;return{type:"Feature",geometry:{type:"Point",coordinates:[t,i]},properties:{deviceId:e.deviceId,rotate:o,name:`${s}`,rotation:-180+o,offsetdata:[0,0]}}}))}addToMap(){!this.getInMap()&&this.unitsList.length>0&&(this.map.addSource(this.idSource,{type:"geojson",data:{type:"FeatureCollection",features:this.generateFeatures()}}),this.map.addLayer({id:this.idLayer,type:"symbol",source:this.idSource,layout:{"icon-image":this.iconImagen,"icon-size":.08,"icon-ignore-placement":!0,"icon-allow-overlap":!0,"icon-rotate":["get","rotate"]}}),this.map.addLayer({id:`LABEL_${this.idLayer}`,type:"symbol",source:this.idSource,layout:{"text-field":["get","name"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":this.fontSize,"text-rotate":["get","rotation"],"text-offset":["get","offsetdata"],"text-allow-overlap":!0},paint:{"text-color":"#fff","text-halo-color":"#00296b","text-halo-width":4}}),this.map.on("click",this.idLayer,(e=>{this.onClickElement&&this.onClickElement(e)})),this.map.on("mouseenter",this.idLayer,(()=>{this.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave",this.idLayer,(()=>{this.map.getCanvas().style.cursor=""})))}updateInMap(){const e=this.getInMap();e?e.setData({type:"FeatureCollection",features:this.generateFeatures()}):this.addToMap()}removeOfMap(){this.getInMap()&&(this.map.removeLayer(this.idLayer),this.map.removeLayer(`LABEL_${this.idLayer}`),this.map.removeSource(this.idSource))}}},52573:(e,i,t)=>{"use strict";t.d(i,{z:()=>n});var o=t(35573);class n{constructor(e,i,t,o,n,s,a,r){this.polygonList=e,this.map=i,this.idSource=t,this.idLayer=o,this.idSourceCentroid=n,this.idLayerCentroid=s,this.fontSize=9,this.onClickElement=a,this.haveCentroid=r}getInMap(){return this.map.getSource(this.idSource)}getCenterInMap(){return this.map.getSource(this.idSourceCentroid)}generateCentroids(){return this.polygonList.map((e=>{var i,t,o;if(!e.centroid)return{type:"Feature",geometry:{type:"Point",coordinates:[0,0]},properties:{}};const{latitude:n,longitude:s}=e.centroid;return{type:"Feature",geometry:{type:"Point",coordinates:[s,n]},properties:{name:`${e.name}${e.material?`-${e.material.type}`:""}`,points_polygonTajo:e.pointList.map((e=>[e.longitude,e.latitude])),name_polygon:e.name,name_material:null===(i=e.material)||void 0===i?void 0:i.type,id_polygonTajo:e.id,agTajo:e.ag,agcnTajo:e.agcn,alteTajo:e.alte,asTajo:e.as,auTajo:e.au,auchTajo:e.auch,altitudeTajo:e.altitude,descripcionTajo:"",heightTajo:e.height,litoTajo:e.litio,materialTajo:null===(t=e.material)||void 0===t?void 0:t.type,namePolTajo:e.name,nameProjectTajo:e.nameProject,onzasTajo:e.onzas,orezonetTajo:e.orezonet,ptaucnTajo:e.ptaucn,sTajo:e.s,tonnesTajo:e.tonnes,volumeTajo:e.volume,nameDme:`${e.name}`,points_polygonDme:e.pointList.map((e=>[e.longitude,e.latitude])),id_polygonDme:e.id,tonnesDme:e.tonnes,volumeDme:e.volume,namePad:`${e.name}`,id_Pad:`${e.id}_pad`,points_Pad:e.pointList.map((e=>[e.longitude,e.latitude])),tonnesPad:e.tonnes,volumePad:e.volume,nameStock:`${e.name}`,id_polygonStock:e.id,points_polygonStock:e.pointList.map((e=>[e.longitude,e.latitude])),materialStock:null===(o=e.material)||void 0===o?void 0:o.type,altitudeStock:e.altitude,volumeStock:e.volume}}}))}generateFeatures(){return this.polygonList.map((e=>({type:"Feature",properties:{color:o.O[e.color]?o.O[e.color].hex:e.color,out_color:"blue",opacity:this.haveCentroid?1:.2,opacity_border:1},geometry:{type:"Polygon",coordinates:[e.pointList.map((e=>[e.longitude,e.latitude,e.altitude]))]}})))}addToMap(){!this.getInMap()&&this.polygonList.length>0?(this.map.getSource(this.idSource)||this.map.addSource(this.idSource,{type:"geojson",data:{type:"FeatureCollection",features:this.generateFeatures()}}),this.map.getLayer(this.idLayer)||this.map.addLayer({id:this.idLayer,type:"fill",source:this.idSource,paint:{"fill-color":["get","color"],"fill-outline-color":["get","out_color"],"fill-opacity":["get","opacity"]}}),this.map.getLayer(`BORDER_${this.idLayer}`)||this.map.addLayer({id:`BORDER_${this.idLayer}`,type:"line",source:this.idSource,paint:{"line-color":["get","out_color"],"line-width":2,"line-opacity":["get","opacity_border"]},filter:["==","$type","Polygon"]}),this.haveCentroid&&(this.map.getSource(this.idSourceCentroid)||this.map.addSource(this.idSourceCentroid,{type:"geojson",data:{type:"FeatureCollection",features:this.generateCentroids()}}),this.map.getLayer(this.idLayerCentroid)||this.map.addLayer({id:this.idLayerCentroid,type:"symbol",source:this.idSourceCentroid,layout:{"text-field":["get","name"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":this.fontSize},paint:{"text-color":"#00296b","text-halo-color":"#f8f7ff","text-halo-width":2}})),this.map.on("click",this.idLayerCentroid,(e=>{this.onClickElement&&this.onClickElement(e)})),this.map.on("mouseenter",this.idLayerCentroid,(()=>{this.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave",this.idLayerCentroid,(()=>{this.map.getCanvas().style.cursor=""}))):this.getInMap()&&this.updateInMap()}updateInMap(){const e=this.getInMap();e?e.setData({type:"FeatureCollection",features:this.generateFeatures()}):this.addToMap()}removeOfMap(){this.getInMap()&&(this.map.removeLayer(this.idLayer),this.map.removeLayer(`BORDER_${this.idLayer}`),this.map.removeSource(this.idSource),this.getCenterInMap()&&(this.map.removeLayer(this.idLayerCentroid),this.map.removeSource(this.idSourceCentroid)))}}},2780:(e,i,t)=>{"use strict";t.d(i,{We:()=>s,wg:()=>a});var o=t(76533),n=function(e,i,t,o){return new(t||(t=Promise))((function(n,s){function a(e){try{d(o.next(e))}catch(e){s(e)}}function r(e){try{d(o.throw(e))}catch(e){s(e)}}function d(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(a,r)}d((o=o.apply(e,i||[])).next())}))};const s=(e,i)=>n(void 0,void 0,void 0,(function*(){return yield(0,o.g$)(i,e)})),a=e=>n(void 0,void 0,void 0,(function*(){const i=yield(0,o.zY)(e);let t="";return i.truckErrorList.length>0&&i.truckErrorList.forEach((e=>{const i=1===e.state?"CARGANDO":"A DESCARGA";t+=` ${e.truckError.deviceAlias} => ${i},`})),t}))},16281:(e,i,t)=>{"use strict";t.d(i,{h:()=>O});var o=t(85893),n=t(45258),s=t(28358),a=t(282),r=t(22318),d=t(43471),l=t(5977),c=t(55517),u=t(17812),v=t(96617),p=t(73637),g=t(79895),h=t(16575),m=t(51972),j=t(67294),x=t(73855),b=t(45855);const f=({title:e,content:i})=>(0,o.jsxs)("div",{children:[(0,o.jsxs)(r.Z,Object.assign({variant:"subtitle1"},{children:[(0,o.jsx)(h.Z,{style:{fontSize:"14px",marginRight:"4px"}},void 0),e]}),void 0),(0,o.jsx)(r.Z,Object.assign({variant:"body1"},{children:i}),void 0),(0,o.jsx)(c.Z,{},void 0)]},void 0),y=({})=>{var e,i,t;const[n,s]=(0,j.useState)(null),[a,d]=(0,j.useState)(!1),{notificationsHeader:l}=(0,x.C)(b.Af),c=(0,x.T)();(0,j.useEffect)((()=>{c((0,b.pK)())}),[]);const h=a&&Boolean(n)?"transition-popper":void 0;return console.log("notificationsHeader.notificationsList",l.notificationsList),(0,o.jsxs)("div",Object.assign({style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",width:"8%",marginRight:"4px"}},{children:[(0,o.jsx)(u.Z,Object.assign({color:(null===(e=l.notificationsList)||void 0===e?void 0:e.length)>0?"primary":"inherit",onClick:e=>{s(e.currentTarget),d((e=>!e))},size:"small"},{children:(0,o.jsxs)("div",Object.assign({style:{margin:"4px"}},{children:[(0,o.jsx)(r.Z,Object.assign({variant:"subtitle2",style:{color:"white",zIndex:1,position:"absolute",justifyContent:"right",marginLeft:"18px"}},{children:(null===(i=l.notificationsList)||void 0===i?void 0:i.length)>0?null===(t=l.notificationsList)||void 0===t?void 0:t.length:""}),void 0),(0,o.jsx)(m.Z,{},void 0)]}),void 0)}),void 0),(0,o.jsx)("div",Object.assign({style:{zIndex:1}},{children:(0,o.jsx)(v.Z,Object.assign({id:h,open:a,anchorEl:n,transition:!0,style:{zIndex:3}},{children:({TransitionProps:e})=>{var i,t,n;return(0,o.jsx)(p.Z,Object.assign({},e,{timeout:350},{children:(0,o.jsxs)(g.Z,Object.assign({elevation:3,style:{width:"300px",height:(null===(i=l.notificationsList)||void 0===i?void 0:i.length)>10?"87vh":"100%",padding:"8px",overflow:"scroll"}},{children:[(!l.notificationsList||0===(null===(t=l.notificationsList)||void 0===t?void 0:t.length))&&(0,o.jsx)(o.Fragment,{children:"No tiene notificaciones Nuevas"},void 0),null===(n=l.notificationsList)||void 0===n?void 0:n.map(((e,i)=>(0,o.jsx)(f,{title:e.title,content:e.message},i)))]}),void 0)}),void 0)}}),void 0)}),void 0)]}),void 0)},O=({title:e,positionContainer:i,notificationPannel:t})=>{const c=i||"sticky",u=(0,l.k6)();return(0,o.jsx)(n.Z,Object.assign({position:c,color:"secondary",style:{display:"flex"},elevation:0},{children:(0,o.jsxs)("div",Object.assign({style:{display:"flex"}},{children:[(0,o.jsxs)(s.Z,Object.assign({variant:"dense",style:{width:"90%"}},{children:[(0,o.jsx)(a.Z,{size:"small",startIcon:(0,o.jsx)(d.Z,{color:"action",style:{color:"#fff"}},void 0),onClick:()=>{u.goBack()}},void 0),(0,o.jsx)(r.Z,Object.assign({variant:"h6"},{children:e}),void 0)]}),void 0),t&&(0,o.jsx)(y,{},void 0)]}),void 0)}),void 0)}},95393:(e,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>be});var o=t(85893),n=t(67294),s=t(10046),a=t(41749),r=t(95477),d=t(282),l=t(79895),c=t(41120),u=t(41423),v=t(22318),p=t(18463),g=t(79912),h=t(71267),m=t(14096),j=t(62822),x=t(17812),b=t(96837),f=t(59544),y=t(17215);const O=(0,t(73914).Z)((()=>({subHeader:{lineHeight:0,background:"#fff",paddingLeft:0,display:"flex",marginTop:8,borderRadius:4,borderBottomStyle:"groove"}}))),Z=({useOpen:e,title:i})=>{const t=O(),[n,s]=e,a=(0,o.jsx)(x.Z,Object.assign({size:"small"},{children:n?(0,o.jsx)(f.Z,{fontSize:"small"},void 0):(0,o.jsx)(y.Z,{fontSize:"small"},void 0)}),void 0);return(0,o.jsx)(b.Z,Object.assign({disableGutters:!0,onClick:()=>{s((e=>!e))},component:"span",className:t.subHeader},{children:(0,o.jsxs)("div",Object.assign({style:{display:"flex",alignItems:"center"}},{children:[(0,o.jsx)("span",Object.assign({style:{marginLeft:4}},{children:i}),void 0),(0,o.jsx)("div",Object.assign({style:{marginLeft:8}},{children:a}),void 0)]}),void 0)}),void 0)};var L=t(50998),C=t(95757);const S=(0,c.Z)((e=>({disablePadding:{padding:0,margin:0,flex:1},nested:{margin:0,padding:0,marginLeft:e.spacing(2.5),flex:1}}))),k=({primary:e,Icon:i,isSubItem:t,isSelect:s,onClick:a})=>{(0,n.useEffect)((()=>()=>{}),[]);const r=S();return(0,o.jsxs)(L.Z,Object.assign({selected:s,onClick:a,dense:!0,button:!0,className:t?r.nested:r.disablePadding},{children:[i&&(0,o.jsx)(i,{fontSize:"small"},void 0),(0,o.jsx)(C.Z,{className:r.disablePadding,primary:e},void 0)]}),void 0)};var w=t(10465),T=t(73855),E=t(97700),I=t(95090),D=t(66217);const z=({p:e})=>{const{selectedDownloadList:i}=(0,T.C)(E.nx),t=(0,T.T)(),s=(0,n.useCallback)((e=>!!i.find((i=>i.id===e.id))),[i]);return(0,o.jsx)(k,{primary:`Celda - ${e.name?e.name:"SIN NOM"}`,onClick:()=>{return i=e,t((0,D.BG)(Object.assign(Object.assign({},i),{type:I.NZ.PAD}))),void t((0,D.Ru)());var i},isSelect:s(e)},void 0)},$=({padCells:e})=>{const i=(0,n.useState)(!1),[t]=i,s=e.map((e=>(0,o.jsx)(z,Object.assign({},{p:e}),e.id)));return(0,o.jsxs)(j.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,o.jsx)(Z,{title:"Descarga",useOpen:i},void 0)},{children:[t&&(0,o.jsx)(w.V,{functionCancel:()=>{},functionFilter:()=>{}},void 0),s]}),void 0)},N=({p:e})=>{const{selectedDownloadList:i}=(0,T.C)(E.nx),t=(0,T.T)(),s=(0,n.useCallback)((e=>!!i.find((i=>i.id===e.id))),[i]);return(0,o.jsx)(k,{primary:`Celda - ${e.name?e.name:"SIN NOM"}`,onClick:()=>{return i=e,t((0,D.Fc)(Object.assign(Object.assign({},i),{type:I.NZ.STOCK}))),void t((0,D.Ru)());var i},isSelect:s(e)},void 0)},_=({stockCells:e})=>{const i=(0,n.useState)(!1),[t]=i,s=e.map((e=>(0,o.jsx)(N,Object.assign({},{p:e}),e.id)));return(0,o.jsxs)(j.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,o.jsx)(Z,{title:"Descarga",useOpen:i},void 0)},{children:[t&&(0,o.jsx)(w.V,{functionCancel:()=>{},functionFilter:()=>{}},void 0),s]}),void 0)};var A=t(78479);const M=({p:e})=>{const{selectedDownloadList:i}=(0,T.C)(E.nx),t=(0,T.T)(),s=(0,n.useCallback)((e=>!!i.find((i=>i.id===e.id))),[i]);return(0,o.jsx)(k,{primary:`${e.name?e.name:"SIN NOM"}`,onClick:()=>{return i=e,t((0,D.dI)(Object.assign(Object.assign({},i),{type:I.NZ.DME}))),void t((0,D.Ru)());var i},isSelect:s(e)},void 0)},R=({dmeCells:e})=>{const i=(0,n.useState)(!1),[t]=i,s=e.map((e=>(0,o.jsx)(M,Object.assign({},{p:e}),e.id)));return(0,o.jsxs)(j.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,o.jsx)(Z,{title:"Descarga",useOpen:i},void 0)},{children:[t&&(0,o.jsx)(w.V,{functionCancel:()=>{},functionFilter:()=>{}},void 0),s]}),void 0)};const F=(0,c.Z)((e=>({nested:{marginLeft:e.spacing(1),marginBottom:0},root_unload:{display:"flex"},tabs:{borderRight:`1px solid ${e.palette.divider}`},tab:{minWidth:10,padding:1,paddingTop:8,paddingBottom:8},buttonTab:{writingMode:"vertical-rl"}})));function P(e){const{children:i,value:t,index:n}=e,s=function(e,i){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&i.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)i.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(t[o[n]]=e[o[n]])}return t}(e,["children","value","index"]);return(0,o.jsx)("div",Object.assign({role:"tabpanel",hidden:t!==n,id:`vertical-tabpanel-${n}`,"aria-labelledby":`vertical-tab-${n}`,style:{flex:1}},s,{children:t===n&&i}),void 0)}function W(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const U=({value:e,handleChange:i})=>{const t=F();return(0,o.jsxs)(m.Z,Object.assign({orientation:"vertical",variant:"scrollable",value:e,indicatorColor:"primary",textColor:"primary",onChange:i,"aria-label":"Vertical tabs",className:t.tabs},{children:[(0,o.jsx)(u.Z,Object.assign({className:t.tab,label:(0,o.jsx)(v.Z,Object.assign({variant:"caption",className:t.buttonTab},{children:"PAD"}),void 0)},W(0)),void 0),(0,o.jsx)(u.Z,Object.assign({className:t.tab,label:(0,o.jsx)(v.Z,Object.assign({variant:"caption",className:t.buttonTab},{children:"DME"}),void 0)},W(1)),void 0),(0,o.jsx)(u.Z,Object.assign({className:t.tab,label:(0,o.jsx)(v.Z,Object.assign({variant:"caption",className:t.buttonTab},{children:"STOCKs"}),void 0)},W(2)),void 0)]}),void 0)},H=()=>{const{padCellList:e,dmeCellList:i,stockCellList:t}=(0,T.C)(E.WD),{selectedDownloadList:n}=(0,T.C)(E.nx),s=F(),[r,d]=(0,A._)("index_tab_unload_operation",0);return(0,o.jsxs)(l.Z,Object.assign({elevation:4,style:{width:"100%"}},{children:[(0,o.jsxs)(a.Z,Object.assign({container:!0,className:s.root_unload},{children:[(0,o.jsx)(U,Object.assign({},{value:r,handleChange:(e,i)=>{d(i)}}),void 0),(0,o.jsx)(P,Object.assign({value:r,index:0},{children:(0,o.jsx)($,{padCells:e.filter((e=>e.state!==I.p$.FINISHED))},void 0)}),void 0),(0,o.jsx)(P,Object.assign({value:r,index:1},{children:(0,o.jsx)(R,{dmeCells:i.filter((e=>e.state!==I.p$.FINISHED))},void 0)}),void 0),(0,o.jsx)(P,Object.assign({value:r,index:2},{children:(0,o.jsx)(_,{stockCells:t.filter((e=>e.state!==I.p$.FINISHED))},void 0)}),void 0)]}),void 0),(0,o.jsx)(p.Z,{children:(0,o.jsx)(g.Z,{children:n.map((e=>(0,o.jsx)(h.Z,{label:4===e.type?e.name:`Celda - ${e.name}`},e.id)))},void 0)},void 0)]}),void 0)};var B=t(55517);const V=(0,c.Z)((e=>({root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{marginLeft:e.spacing(1),marginBottom:0},root_unload:{display:"flex"},tabs:{borderRight:`1px solid ${e.palette.divider}`},tab:{minWidth:10,padding:1,paddingTop:8,paddingBottom:8},buttonTab:{writingMode:"vertical-rl"}})));function G(e){const{children:i,value:t,index:n}=e,s=function(e,i){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&i.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)i.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(t[o[n]]=e[o[n]])}return t}(e,["children","value","index"]);return(0,o.jsx)("div",Object.assign({role:"tabpanel",hidden:t!==n,id:`vertical-tabpanel-${n}`,"aria-labelledby":`vertical-tab-${n}`,style:{flex:1,height:"auto",boxShadow:"inset 0px -2px 10px 0px rgb(17 16 10 / 56%)",margin:8,borderRadius:4}},s,{children:t===n&&i}),void 0)}function K(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const Y=()=>{const{selectedUploadList:e}=(0,T.C)(E.nx),{polygonList:i,stockCellList:t,state:s}=(0,T.C)(E.WD),r=(0,T.T)(),d=V(),[c,p]=(0,n.useState)([]),[g,h]=(0,n.useState)([]),[x,b]=(0,A._)("index_tab_load_operation",0),f=(0,n.useState)(!1);(0,n.useEffect)((()=>{s===I.JD.DONE&&(p(i.filter((e=>e.state!==I.p$.FINISHED))),h(t.filter((e=>e.state!==I.p$.FINISHED))))}),[s]);const y=(0,n.useCallback)((e=>{if(e){const{value:t}=e.target,o=t?t.toUpperCase():"";p(i.filter((e=>{const i=e.material?e.material.type:"";return e.name.toUpperCase().includes(o)||e.nameProject.toUpperCase().includes(o)||i.includes(o)})))}}),[i]),O=(0,n.useCallback)((e=>{if(e){const{value:i}=e.target,o=i?i.toUpperCase():"";h(t.filter((e=>e.name.toUpperCase().includes(o))))}}),[t]),S=(0,n.useCallback)((()=>{p(i)}),[i]),k=(0,n.useCallback)((()=>{h(t)}),[t]),z=(0,n.useCallback)((i=>!!e.find((e=>e.id===i.id))),[e]);return(0,o.jsx)(l.Z,Object.assign({elevation:4,style:{flex:1}},{children:(0,o.jsxs)(a.Z,Object.assign({container:!0},{children:[(0,o.jsxs)(m.Z,Object.assign({orientation:"vertical",variant:"scrollable",value:x,indicatorColor:"primary",textColor:"primary",onChange:(e,i)=>{b(i)},"aria-label":"Vertical tabs",className:d.tabs},{children:[(0,o.jsx)(u.Z,Object.assign({className:d.tab,label:(0,o.jsx)(v.Z,Object.assign({variant:"caption",className:d.buttonTab},{children:"TAJO"}),void 0)},K(0)),void 0),(0,o.jsx)(u.Z,Object.assign({className:d.tab,label:(0,o.jsx)(v.Z,Object.assign({variant:"caption",className:d.buttonTab},{children:"STOCKs"}),void 0)},K(1)),void 0)]}),void 0),(0,o.jsx)(G,Object.assign({value:x,index:0},{children:(0,o.jsxs)(j.Z,Object.assign({dense:!0,disablePadding:!0,style:{width:"100%",paddingLeft:4,overflowY:"scroll",paddingBottom:32,height:"80vh"},subheader:(0,o.jsx)(Z,{title:"Carguío",useOpen:f},void 0)},{children:[f[0]&&(0,o.jsx)(w.V,{functionFilter:y,functionCancel:S,placeholder:"Buscar por polígono"},void 0),c.map((e=>(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(L.Z,Object.assign({selected:z(e),button:!0,dense:!0,onClick:()=>{return i=e,void r((0,D.qn)(Object.assign(Object.assign({},i),{type:I.NZ.PIT})));var i}},{children:(0,o.jsx)(C.Z,{primary:`${e.nameProject} - ${e.name} `,secondary:e.material?`Material ${e.material.type}`:"Material not found"},void 0)}),void 0),(0,o.jsx)(B.Z,{},void 0)]},e.id)))]}),void 0)}),void 0),(0,o.jsx)(G,Object.assign({value:x,index:1},{children:(0,o.jsxs)(j.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,overflowY:"scroll"},subheader:(0,o.jsx)(Z,{title:"Carguío",useOpen:f},void 0)},{children:[f[0]&&(0,o.jsx)(w.V,{functionFilter:O,functionCancel:k},void 0),g.map((e=>(0,o.jsx)(L.Z,Object.assign({selected:z(e),button:!0,dense:!0,onClick:()=>{return i=e,void r((0,D.qn)(Object.assign(Object.assign({},i),{type:I.NZ.STOCK})));var i}},{children:(0,o.jsx)(C.Z,{primary:e.name},void 0)}),e.id)))]}),void 0)}),void 0)]}),void 0)}),void 0)};var q=t(64436),J=t(67162),Q=t(30553),X=t(40074),ee=t(14125),ie=t(5977);const te=(0,c.Z)((e=>({root:{flex:1},list:{maxHeight:"75vh",paddingLeft:e.spacing(1),marginLeft:e.spacing(1),overflowY:"scroll",marginBottom:e.spacing(2)}}))),oe=()=>{const e=(0,n.useState)(!1),{idEx:i,deviceIdEx:t}=(0,ie.UO)(),{selectedExcavator:s}=(0,T.C)(E.nx),{excavatorInfoList:a}=(0,T.C)(ee.kW),r=(0,T.T)(),[d,c]=(0,n.useState)([]);(0,n.useEffect)((()=>{c(a)}),[a]);const u=te();return(0,n.useEffect)((()=>{const e={id:i,deviceId:t};i&&"0"!==i&&t&&r((0,D.Zh)(e))}),[i]),(0,o.jsx)(l.Z,Object.assign({elevation:4,style:{width:"100%"}},{children:(0,o.jsx)(j.Z,Object.assign({className:u.list,dense:!0,disablePadding:!0,subheader:(0,o.jsx)(Z,{title:"Palas",useOpen:e},void 0)},{children:(0,o.jsx)(L.Z,Object.assign({dense:!0,disableGutters:!0},{children:(0,o.jsx)(q.Z,Object.assign({size:"small",fullWidth:!0,component:"fieldset"},{children:(0,o.jsx)(J.Z,Object.assign({"aria-label":"gender",name:"radio-buttons-group"},{children:d.map((e=>{var i,t,a;return(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(Q.Z,{value:e,disabled:Number(null===(i=e.operationList)||void 0===i?void 0:i.length)>0,checked:s.length>0&&e.deviceId===s[0].deviceId,control:(0,o.jsx)(X.Z,{disabled:Number(null===(t=e.operationList)||void 0===t?void 0:t.length)>0,checked:s.length>0&&e.deviceId===s[0].deviceId,size:"small"},void 0),onClick:Number(null===(a=e.operationList)||void 0===a?void 0:a.length)>0?()=>{}:()=>(e=>{r((0,D.Zh)(e))})(e),label:(0,o.jsx)(v.Z,Object.assign({component:"span",variant:"body2"},{children:e.deviceAlias}),void 0)},void 0),(0,o.jsx)(B.Z,{},void 0)]},e.deviceId)}))}),void 0)}),void 0)}),void 0)}),void 0)}),void 0)};var ne=t(76533),se=t(48101),ae=t(74248),re=t(14276),de=t(99302),le=t(26271),ce=t(16886),ue=t(79800);const ve=({map:e})=>{const{excavatorInfoList:i}=(0,T.C)(ee.kW),{truckInfoList:t}=(0,T.C)(de.ej),s=(0,n.useMemo)((()=>{const i=t.filter((e=>e.sensor)),n=new re.c(i,e.current,"TRUCK_LIST_SOURCE","TRUCK_LIST_LAYER","truck_nav");return(0,o.jsx)(le.b,{truckList:i,truckListClass:n},void 0)}),[t]),a=(0,n.useMemo)((()=>{const t=i.filter((e=>e.sensor)),n=new re.c(t,e.current,"EXCAVATOR_LIST_SOURCE","EXCAVATOR_LIST_LAYER","excavator_nav");return(0,o.jsx)(ce.N,{excavatorList:t,excavatorListClass:n},void 0)}),[i]);return(0,o.jsxs)(o.Fragment,{children:[s,a]},void 0)},pe=()=>{const e=(0,n.useRef)(null),i=(0,n.useRef)(null),{selectedUploadList:t,selectedDownloadList:s}=(0,T.C)(E.nx);(0,n.useEffect)((()=>()=>{e.current=null}),[]);const[a,r]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{a&&(0,ue.H)(e)}),[a]),(0,o.jsxs)(o.Fragment,{children:[a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ae.f,Object.assign({},{polygonList:t,map:e.current,idSource:"UPLOAD_SOURCE",idLayer:"UPLOAD_LAYER",idSourceCentroid:"CENTROID_UPLOAD_SOURCE",idLayerCentroid:"CENTROID_UPLOAD_LAYER",haveCentroid:!0}),void 0),(0,o.jsx)(ae.f,Object.assign({},{polygonList:s,map:e.current,idSource:"DOWNLOAD_SOURCE",idLayer:"DOWNLOAD_LAYER",idSourceCentroid:"CENTROID_DOWNLOAD_SOURCE",idLayerCentroid:"CENTROID_DOWNLOAD_LAYER",haveCentroid:!0,onClickFeature:()=>{}}),void 0),(0,o.jsx)(ve,{map:e},void 0)]},void 0),(0,o.jsx)(se.Z,Object.assign({map:e,dragRotate:!1,style:"mapbox://styles/dispatchgat/ckqqsfc2y46bo17sf1y29zwnj",mapContainer:i,bearing:0,pitch:15,height:"90vh"},{lat:-7.6163,lng:-78.196,zoom:14,setLoad:r}),void 0)]},void 0)};var ge=t(78965),he=t(52672);const me=()=>{const[e,i]=(0,n.useState)(!1),t=(0,ie.k6)(),l=(0,T.T)(),{selectedExcavator:c,selectedTruckList:u,selectedUploadList:v,selectedDownloadList:p}=(0,T.C)(E.nx);return(0,n.useEffect)((()=>()=>{l((0,D.nw)())}),[]),(0,o.jsx)(s.Z,Object.assign({padding:1},{children:(0,o.jsx)(a.Z,Object.assign({container:!0,justifyContent:"flex-end",alignItems:"center",alignContent:"center"},{children:e?(0,o.jsx)(r.Z,{},void 0):(0,o.jsx)(d.Z,Object.assign({variant:"outlined",onClick:()=>{c.length<=0?l((0,he.L8)({msg:"Debe seleccionar una excavadora",open:!0,severity:"warning"})):v.length>0&&p.length>0?(i(!0),(0,ne.pg)(v,p,u,c,[]).then((e=>{(0,he.L8)({msg:"Done!!",open:!0,severity:"success"}),l((0,D.nw)()),i(!1),t.replace("/operation")})).catch((e=>{console.log(e),i(!1),l((0,he.L8)({msg:`Error al guardar: posiblemente las unidades ya estan en otra operación: ${e.message}`,open:!0,severity:"warning"}))}))):l((0,he.L8)({msg:"Debe seleccionar un Carguío y descarga",open:!0,severity:"warning"}))},color:"primary",size:"small",startIcon:(0,o.jsx)(ge.Z,{fontSize:"small"},void 0)},{children:"Guardar"}),void 0)}),void 0)}),void 0)},je=()=>(0,o.jsxs)(a.Z,Object.assign({container:!0},{children:[(0,o.jsxs)(l.Z,{children:[(0,o.jsxs)(a.Z,Object.assign({container:!0,style:{padding:4,flex:1}},{children:[(0,o.jsx)(Y,{},void 0),(0,o.jsxs)(a.Z,Object.assign({container:!0,alignContent:"flex-start",style:{flex:1,marginLeft:8,marginRight:8,gap:8}},{children:[(0,o.jsx)(H,{},void 0),(0,o.jsx)(oe,{},void 0)]}),void 0)]}),void 0),(0,o.jsx)(me,{},void 0)]},void 0),(0,o.jsx)(pe,{},void 0)]}),void 0);var xe=t(16281);function be(){return(0,o.jsxs)("div",{children:[(0,o.jsx)(xe.h,{title:"Crear Operación"},void 0),(0,o.jsx)(je,{},void 0)]},void 0)}},34051:(e,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>J});var o=t(85893),n=t(67294),s=t(5977),a=t(79895),r=t(50998),d=t(41749),l=t(95757),c=t(81860),u=t(66037),v=t(62822),p=t(31125),g=t(73099),h=t(61920);const m=({value:e,cy:i})=>{var t,n,s,a;switch(e){case h.u6.PAD:return(0,o.jsx)(l.Z,{primary:`Descarga: ${h.WW[i.download.type]} -  ${null===(t=i.download.pad.cellList[0])||void 0===t?void 0:t.name}`},void 0);case h.u6.DME:return(0,o.jsx)(l.Z,{primary:`Descarga: ${h.WW[i.download.type]} -  ${null===(n=i.download.dme.cellList[0])||void 0===n?void 0:n.name}`},void 0);case h.u6.PIT:return(0,o.jsx)(l.Z,{primary:`Descarga: ${h.WW[i.download.type]} -  ${null===(s=i.download.pit.cellList[0])||void 0===s?void 0:s.name}`},void 0);case h.u6.STOCK:return(0,o.jsx)(l.Z,{primary:`Descarga: ${h.WW[i.download.type]} -  ${null===(a=i.download.stock.cellList[0])||void 0===a?void 0:a.name}`},void 0);default:return(0,o.jsx)(o.Fragment,{},void 0)}},j=({value:e,cy:i})=>{switch(e){case h.u6.PIT:return(0,o.jsx)(l.Z,{primary:`Carga: ${h.WW[i.upload.type]} -  ${i.upload.pit.projectList[0].name}- ${i.upload.pit.projectList[0].polygonList[0].name}`},void 0);case h.u6.STOCK:return(0,o.jsx)(l.Z,{primary:`Carga: ${h.WW[i.upload.type]} -  ${i.upload.stock.cellList[0].name}}`},void 0);default:return(0,o.jsx)(o.Fragment,{children:"node"},void 0)}},x=()=>(0,o.jsx)(a.Z,Object.assign({elevation:1,style:{marginBottom:4}},{children:(0,o.jsx)(r.Z,Object.assign({dense:!0,disableGutters:!0,selected:!0,button:!0},{children:(0,o.jsxs)(d.Z,Object.assign({justifyContent:"space-between",container:!0},{children:[(0,o.jsx)(l.Z,{primary:"TRUCK"},void 0),(0,o.jsx)(l.Z,{primary:"INICIO"},void 0),(0,o.jsx)(l.Z,{primary:"DESCARGA"},void 0),(0,o.jsx)(l.Z,{primary:"FIN"},void 0)]}),void 0)}),void 0)}),void 0),b=n.memo((({cy:e,index:i})=>{var t,s,h;const[x,b]=(0,n.useState)(!1),f=()=>{b(!x)},y=e.startTime?new Date(1e3*(null===(t=e.startTime)||void 0===t?void 0:t.seconds)).toLocaleString():"NO REG",O=e.downloadArrivalTime?new Date(1e3*(null===(s=e.downloadArrivalTime)||void 0===s?void 0:s.seconds)).toLocaleString():"NO REG. ",Z=e.endTime?new Date(1e3*(null===(h=e.endTime)||void 0===h?void 0:h.seconds)).toLocaleString():"NO REG. ";return(0,o.jsxs)(a.Z,Object.assign({elevation:1,style:{marginBottom:4},id:e.id},{children:[(0,o.jsxs)(r.Z,Object.assign({dense:!0,disableGutters:!0,selected:!0,button:!0,onClick:f},{children:[(0,o.jsxs)(d.Z,Object.assign({justifyContent:"space-between",container:!0},{children:[(0,o.jsx)(l.Z,{primary:`${i}.${e.truck.deviceAlias} `},void 0),(0,o.jsx)(l.Z,{primary:y},void 0),(0,o.jsx)(l.Z,{primary:O},void 0),(0,o.jsx)(l.Z,{primary:Z},void 0)]}),void 0),(0,o.jsx)(c.Z,Object.assign({onClick:f},{children:(0,o.jsx)(d.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:x?(0,o.jsx)(p.Z,{fontSize:"small",onClick:f},void 0):(0,o.jsx)(g.Z,{fontSize:"small",onClick:f},void 0)}),void 0)}),void 0)]}),void 0),(0,o.jsx)(u.Z,Object.assign({in:x,style:{paddingLeft:10}},{children:(0,o.jsxs)(v.Z,Object.assign({dense:!0,disablePadding:!0},{children:[(0,o.jsx)(r.Z,{children:(0,o.jsx)((()=>{let i="";return e.upload.pit&&(i="pit"),e.upload.stock&&(i="stock"),(0,o.jsx)(j,{value:i,cy:e},void 0)}),{},void 0)},void 0),(0,o.jsx)(r.Z,{children:(0,o.jsx)((()=>{var i,t,n;let s="";return(null===(i=e.download)||void 0===i?void 0:i.dme)&&(s="dme"),(null===(t=e.download)||void 0===t?void 0:t.pad)&&(s="pad"),(null===(n=e.download)||void 0===n?void 0:n.stock)&&(s="stock"),(0,o.jsx)(m,{value:s,cy:e},void 0)}),{},void 0)},void 0),(0,o.jsx)(r.Z,{children:(0,o.jsx)(l.Z,{primary:`Pala: ${e.excavator.deviceAlias} `},void 0)},void 0),(0,o.jsx)(r.Z,{children:(0,o.jsx)(l.Z,{primary:`Camion: ${e.truck.deviceAlias} `},void 0)},void 0)]}),void 0)}),void 0)]}),e.id)}));var f=t(96019),y=t(26209),O=t(71267),Z=t(85639),L=t(13258),C=t(10046),S=t(82285),k=t(22318),w=t(282),T=t(41120),E=t(30553);const I=(0,T.Z)((e=>({disabledSpacing:{},checkbox:{"& .MuiCheckbox-root":{margin:0,padding:0,paddingLeft:8}}}))),D=({truck:e,checked:i,useTrucksSelect:t})=>{const n=I(),[s,a]=t;return(0,o.jsx)(r.Z,Object.assign({button:!0,dense:!0,className:n.disabledSpacing},{children:(0,o.jsx)(E.Z,{className:n.checkbox,onChange:()=>{const i=s.findIndex((i=>e.deviceId===i.deviceId));-1===i?s.push(e):s.splice(i,1),a(JSON.parse(JSON.stringify(s)))},control:(0,o.jsx)(L.Z,{size:"small",checked:i,inputProps:{style:{padding:0}}},void 0),label:`${e.deviceAlias} `},void 0)}),void 0)};var z=t(95090),$=t(34250),N=t(2780),_=t(63786);const A=(0,_.Z)(n.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");var M=t(90179),R=t(61242);const F=(0,_.Z)(n.createElement("path",{fillRule:"evenodd",d:"M14 6V4h-4v2h4zM4 8v11h16V8H4zm16-2c1.11 0 2 .89 2 2v11c0 1.11-.89 2-2 2H4c-1.11 0-2-.89-2-2l.01-11c0-1.11.88-2 1.99-2h4V4c0-1.11.89-2 2-2h4c1.11 0 2 .89 2 2v2h4z"}),"WorkOutline");var P=t(73855),W=t(52672),U=t(44562),H=t(30433);const B=e=>{const{operation:i}=e,[t,a]=n.useState(!1),r=(0,P.T)(),l=(0,s.k6)(),c=i&&i.excavatorList&&i.excavatorList.length>0?i.excavatorList[0]:{};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(d.Z,Object.assign({container:!0,style:{paddingLeft:2},alignItems:"center"},{children:[(0,o.jsx)(d.Z,Object.assign({item:!0},{children:(0,o.jsxs)(k.Z,Object.assign({variant:"button",style:{paddingLeft:4,paddingTop:16}},{children:["Detalle de operación",(0,o.jsx)(O.Z,{style:{marginLeft:4},icon:(0,o.jsx)(F,{},void 0),size:"small",label:c.deviceAlias},void 0)]}),void 0)}),void 0),(0,o.jsx)(d.Z,Object.assign({item:!0},{children:(0,o.jsx)(O.Z,{style:{marginLeft:4},icon:(0,o.jsx)(F,{},void 0),size:"small",label:`Camiones: ${i?i.truckList.length:0}`},void 0)}),void 0),(0,o.jsx)(d.Z,Object.assign({item:!0},{children:(0,o.jsx)(O.Z,{style:{marginLeft:4},icon:(0,o.jsx)(F,{},void 0),size:"small",label:`Ciclos: ${i?i.cycleList.length:0}`},void 0)}),void 0),(0,o.jsx)(d.Z,Object.assign({item:!0},{children:(0,o.jsx)(H.g7,{operation:i},void 0)}),void 0),(0,o.jsx)(d.Z,Object.assign({item:!0},{children:(0,o.jsx)(H.DQ,{operation:i},void 0)}),void 0),i&&i.state===h.J8.Operando&&(0,o.jsxs)(C.Z,Object.assign({m:.5},{children:[(0,o.jsx)(w.Z,Object.assign({variant:"outlined",color:"primary",onClick:()=>{a(!0)},size:"small"},{children:"Finalizar Operación"}),void 0),(0,o.jsx)(R.a,Object.assign({open:t,handleClose:()=>{a(!1)},handleConfirm:()=>{return e=void 0,t=void 0,n=function*(){const e=yield(0,N.wg)(i.id);e?r((0,W.L8)({open:!0,msg:e,severity:"error"})):(r((0,W.Ui)()),l.replace("/operation")),a(!1)},new((o=void 0)||(o=Promise))((function(i,s){function a(e){try{d(n.next(e))}catch(e){s(e)}}function r(e){try{d(n.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}d((n=n.apply(e,t||[])).next())}));var e,t,o,n},title:"Area you sure?"},{children:(0,o.jsxs)(U.Z,Object.assign({severity:"warning"},{children:["Esta intentando finalizar la operacion"," ",i.excavatorList[0].deviceAlias,", si ocurre algun error se le informará"]}),void 0)}),void 0)]}),void 0)]}),void 0)},void 0)};var V=t(76796);function G(e,i){return(0,o.jsx)(b,{cy:e,index:i+1},e.id)}const K=function({cycles:e}){const[i,t]=(0,n.useState)([]),[s,a]=(0,n.useState)([]);return(0,n.useEffect)((()=>{const i=e.map((e=>e.truck)),o=[...new Set(i.map((e=>e.deviceId)))];t(o.map((e=>i.find((i=>i.deviceId===e)))))}),[e.length]),(0,o.jsxs)(v.Z,Object.assign({dense:!0,style:{margin:"0px 8px"}},{children:[(0,o.jsx)(f.Z,Object.assign({id:"id-label"},{children:"Filtro por Camión"}),void 0),(0,o.jsx)(y.Z,Object.assign({labelId:"id-label",style:{width:"100%"},multiple:!0,value:s,onChange:e=>{const i=e.target.value;a(i)},renderValue:e=>(0,o.jsx)("div",{children:e.map((e=>(0,o.jsx)(O.Z,{label:i.find((i=>i.deviceId===e)).deviceAlias,clickable:!0,deleteIcon:(0,o.jsx)(A,{onMouseDown:e=>e.stopPropagation()},void 0),onDelete:i=>(e=>{const i=s.findIndex((i=>i===e));i>=0&&s.splice(i,1),a(JSON.parse(JSON.stringify(s)))})(e)},e)))},void 0)},{children:i.map((e=>(0,o.jsxs)(Z.Z,Object.assign({value:e.deviceId},{children:[(0,o.jsx)(L.Z,{checked:!!s.find((i=>i===e.deviceId))},void 0),(0,o.jsx)(l.Z,{primary:e.deviceAlias},void 0)]}),e.deviceId)))}),void 0),(0,o.jsx)(C.Z,{height:4},void 0),(0,o.jsx)(x,{},void 0),0===s.length?e.map(G):e.filter((e=>s.find((i=>i===e.truck.deviceId)))).map(G)]}),void 0)},Y=()=>{const e=(0,n.useState)([]),{id:i}=(0,s.UO)(),t=e[0],c=(0,P.T)(),u=(0,s.k6)(),{operationDetail:p,status:g}=(0,P.C)(V.tl),h=p&&p.cycleList;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(d.Z,Object.assign({container:!0},{children:[(0,o.jsx)(B,{operation:p},void 0),(0,o.jsxs)(d.Z,Object.assign({container:!0},{children:[h&&(0,o.jsx)(d.Z,Object.assign({item:!0,md:6},{children:(0,o.jsx)(S.Z,Object.assign({direction:"left",in:!!p,mountOnEnter:!0,unmountOnExit:!0},{children:(0,o.jsxs)(a.Z,Object.assign({elevation:4},{children:[(0,o.jsx)(k.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16}},{children:"Ciclos"}),void 0),(0,o.jsx)(K,{cycles:p.cycleList},void 0)]}),void 0)}),void 0)}),void 0),(0,o.jsx)(d.Z,Object.assign({item:!0,md:3,style:{paddingLeft:4}},{children:(0,o.jsx)(S.Z,Object.assign({in:!!p,mountOnEnter:!0,unmountOnExit:!0},{children:(0,o.jsxs)(a.Z,Object.assign({elevation:4},{children:[(0,o.jsx)(k.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16}},{children:"Camiones"}),void 0),(0,o.jsxs)(v.Z,Object.assign({dense:!0},{children:[h&&p.truckList.map((i=>{return(0,o.jsx)(D,{checked:(n=i,!!t.find((e=>n.id===e.id))),useTrucksSelect:e,truck:i},i.id);var n})),(0,o.jsx)(r.Z,{children:(0,o.jsx)(w.Z,Object.assign({onClick:()=>{return e=void 0,i=void 0,n=function*(){(yield(0,N.We)(p.id,t))?(c((0,W.Ui)()),u.replace("/operation")):(c((0,W.Ui)()),c((0,W.L8)({open:!0,msg:"Ocurrió un error",severity:"error"})))},new((o=void 0)||(o=Promise))((function(t,s){function a(e){try{d(n.next(e))}catch(e){s(e)}}function r(e){try{d(n.throw(e))}catch(e){s(e)}}function d(e){var i;e.done?t(e.value):(i=e.value,i instanceof o?i:new o((function(e){e(i)}))).then(a,r)}d((n=n.apply(e,i||[])).next())}));var e,i,o,n},color:"secondary",variant:"contained",size:"small",disabled:0===t.length},{children:"Liberar Camiones"}),void 0)},void 0)]}),void 0)]}),void 0)}),void 0)}),void 0),(0,o.jsxs)(d.Z,Object.assign({item:!0,md:3,style:{paddingLeft:4}},{children:[(0,o.jsx)(S.Z,Object.assign({in:!!p,mountOnEnter:!0,unmountOnExit:!0},{children:(0,o.jsxs)(a.Z,Object.assign({elevation:4},{children:[(0,o.jsx)(k.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16}},{children:"Rutas"}),void 0),(0,o.jsx)(v.Z,Object.assign({dense:!0},{children:h&&p.roadList.map((e=>(0,o.jsx)(r.Z,{children:(0,o.jsx)(l.Z,{primary:`${e.name}`},void 0)},e.id)))}),void 0)]}),void 0)}),void 0),(0,o.jsx)($.Z,{visible:!0,actionClick:()=>{c((0,V.l4)(i))},Icon:M.Z,disabled:g==z.JD.LOADING,color:"secondary",right:16,keyAction:"R"},void 0)]}),void 0)]}),void 0)]}),void 0)},void 0)};var q=t(16281);function J(){const{id:e}=(0,s.UO)(),i=(0,P.T)();return(0,n.useEffect)((()=>{i((0,V.l4)(e))}),[e]),(0,o.jsxs)("div",{children:[(0,o.jsx)(q.h,{title:"Detalle de Operación"},void 0),(0,o.jsx)(Y,{},void 0)]},void 0)}}}]);