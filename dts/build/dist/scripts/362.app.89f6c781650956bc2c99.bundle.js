(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[362],{69711:(e,t,s)=>{e.exports=s.p+"fcc811ae2297d46be106267335e25c28.svg"},34250:(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var i=s(85893),n=s(67294),a=s(41120),o=s(87623),r=s(8920),l=s(76211),c=s(33758);const d=(0,a.Z)((e=>(0,o.Z)({fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2),zIndex:2}})));function h({actionClick:e,Icon:t,visible:s,disabled:a,right:o,color:h,keyAction:g}){const m=d(),u=(0,r.Z)();(0,n.useEffect)((()=>{const t=t=>{console.log(t.key),t.key!==(null==g?void 0:g.toUpperCase())&&t.key!==(null==g?void 0:g.toLocaleLowerCase())&&t.key!==g||e()};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}),[]);const x={enter:u.transitions.duration.enteringScreen,exit:u.transitions.duration.leavingScreen};return(0,i.jsx)(l.Z,Object.assign({in:s,timeout:x,unmountOnExit:!0},{children:(0,i.jsx)(c.Z,Object.assign({disabled:a,onClick:e,className:m.fab,style:{right:o},size:"small",color:h||"primary"},{children:(0,i.jsx)(t,{},void 0)}),void 0)}),void 0)}},10646:(e,t,s)=>{"use strict";s.d(t,{l:()=>i});const i=e=>[`${e.getFullYear()}-${`0${e.getMonth()+1}`.substr(-2)}-${`0${e.getDate()}`.substr(-2)}`]},88093:(e,t,s)=>{"use strict";s.d(t,{R:()=>i});const i=()=>{var e=new Date;return e.getHours(),{dateShift:e.getHours()>=0&&e.getHours()<7?new Date(e.getTime()-864e5):e}}},40903:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>W});var i=s(85893),n=s(41749),a=s(10046),o=s(67294),r=s(18463),l=s(94697),c=s(33901),d=s(79912);const h=({title:e,icon:t,subheader:s,children:n})=>(0,i.jsxs)(r.Z,{children:[(0,i.jsx)(l.Z,{style:{color:"#0069AA"},avatar:(0,i.jsx)(c.Z,{variant:"square",src:t},void 0),title:e,subheader:s},void 0),(0,i.jsx)(d.Z,{children:n},void 0)]},void 0);var g=s(47229),m=s(73855),u=s(98808);const x=()=>{const{reportPerformancePerHour:e,isSelectDay:t,isSelectNight:s}=(0,m.C)(u.Ig),[n,a]=(0,o.useState)([]),[r,l]=(0,o.useState)([]),[c,d]=(0,o.useState)([]),[h,x]=(0,o.useState)([]),[v,p]=(0,o.useState)([]);(0,o.useEffect)((()=>{(new Date).getHours(),t&&(a(e.day.hourList),l(e.day.padList),d(e.day.stockList),x(e.day.dmeList),p(e.day.lenTruckList)),s&&(a(e.night.hourList),l(e.night.padList),d(e.night.stockList),x(e.night.dmeList),p(e.night.lenTruckList))}),[e,t,s]);const b=(e=>{const{categorie:t,pad:s,stock:i,dme:n,trucks:a,op:o}=e,{id:r,padName:l,stockName:c,dmeName:d,trucksName:h}=o;return{stateChart:{series:[{name:l,type:"column",data:s},{name:c,type:"column",data:i},{name:d,type:"column",data:n},{name:h,type:"line",data:a}],options:{colors:["#FF0808","#F1C012","#069B15","#191970"],dataLabels:{enabled:!0},chart:{id:"bar-"+r,stacked:!0,toolbar:{show:!0},zoom:{enabled:!0}},labels:t,xaxis:{title:{text:"Horas"}},yaxis:[{title:{text:"Toneladas"}}],legend:{position:"top",offsetY:10}},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}}}})({categorie:n,pad:r,stock:c,dme:h,trucks:v,op:{id:"Toneladas",padName:"MINERAL",stockName:"STOCK",dmeName:"DESMONTE",trucksName:"CAMIONES"}});return(0,i.jsx)("div",{children:(0,i.jsx)(g.Z,{options:b.stateChart.options,series:b.stateChart.series,type:"line",height:"413"},void 0)},void 0)};var v=s(90179),p=s(43856);const b=()=>{const{reportPerformancePerHour:e,isSelectDay:t,isSelectNight:s}=(0,m.C)(u.Ig),[n,a]=(0,o.useState)([]),[r,l]=(0,o.useState)([]);(0,o.useEffect)((()=>{t&&(a(e.day.hourList),l(e.day.excavatorValueCycleList.map((e=>({name:e.deviceAlias,data:e.valueList}))))),s&&(a(e.night.hourList),l(e.night.excavatorValueCycleList.map((e=>({name:e.deviceAlias,data:e.valueList})))))}),[e,t,s]);const c=(e=>{const{categorie:t,op:s,seriesEx:i}=e,{id:n}=s;return{stateChart:{series:i,options:{colors:["#DB0A5B","#FF6322","#FFBB04","#2ECC71","#00B0FF","#BC50FA","#68E1FF","#754B10","#003F63","#FFA700","#64732F","#D94625"],chart:{id:"bar-"+n,height:350},plotOptions:{bar:{horizontal:!1}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:t,title:{text:"Horas"}},yaxis:[{title:{text:"Toneladas"}}],tooltip:{shared:!1,y:{formatter:function(e){return e+" Toneladas"}}},fill:{opacity:1},legend:{position:"top",offsetY:10}},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}}}})({categorie:n,seriesEx:r,op:{id:"excavator"}});return(0,i.jsx)("div",{children:(0,i.jsx)(g.Z,{options:c.stateChart.options,series:c.stateChart.series,type:"bar",height:"413"},void 0)},void 0)},j=()=>{const{reportPerformancePerHour:e}=(0,m.C)(u.Ig),{tonnePerTruck:t}=e.day,s=(e=>{const{pad:t,stock:s,dme:i,goalPad:n,goalStock:a,goalDme:o,op:r}=e,{id:l,padName:c,stockName:d,dmeName:h}=r;return{stateChart:{series:[{name:"Actual",data:[{x:c,y:t,goals:[{name:d,value:n,strokeWidth:5,strokeColor:"#008000"}]},{x:d,y:s,goals:[{name:"META",value:a,strokeWidth:5,strokeColor:"#008000"}]},{x:h,y:i,goals:[{name:"META",value:o,strokeWidth:5,strokeColor:"#008000"}]}]}],options:{chart:{id:"bar-"+l,height:350},plotOptions:{bar:{columnWidth:"60%",horizontal:!0}},colors:["#000"],dataLabels:{enabled:!0,formatter:function(e,t){const s=t.w.config.series[t.seriesIndex].data[t.dataPointIndex].goals;return s&&s.length?`${e} / ${s[0].value}`:e}},legend:{show:!0,showForSingleSeries:!0,customLegendItems:["PRODUCCION","META"],markers:{fillColors:["#000","#008000"]}}}}}})({pad:e.day.lenCyclePad*t+e.night.lenCyclePad*t,stock:e.day.lenCycleStock*t+e.night.lenCycleStock*t,dme:e.day.lenCycleDme*t+e.night.lenCycleDme*t,goalPad:0,goalStock:0,goalDme:0,op:{id:"producction",padName:"MINERAL",stockName:"STOCK",dmeName:"DESMONTE"}});return(0,i.jsx)("div",{children:(0,i.jsx)(g.Z,{options:s.stateChart.options,series:s.stateChart.series,type:"bar",height:"282"},void 0)},void 0)};var y=s(22318),f=s(2357);const k=({shift:e,lenCycleDme:t,lenCyclePad:s,lenCycleStock:a,label:l,onClick:c,isSelect:d})=>{const[h,g]=(0,o.useState)(""),[m,u]=(0,o.useState)(0),x=(new Date).getHours();return(0,o.useEffect)((()=>{e!=f.Shift.DAY&&x>=7&&x<19&&g("rgb(75 75 75 / 20%)"),e!=f.Shift.NIGHT&&x>=18&&g("rgb(75 75 75 / 20%)"),u(1==d?5:0)}),[c]),(0,i.jsx)(r.Z,Object.assign({onClick:c,style:{flex:"auto"},elevation:m},{children:(0,i.jsxs)(n.Z,Object.assign({container:!0,direction:"column",alignItems:"center"},{children:[(0,i.jsx)(n.Z,Object.assign({item:!0},{children:(0,i.jsxs)(y.Z,Object.assign({style:{color:"#0069AA"},gutterBottom:!0,variant:"h6",component:"h2"},{children:[l," "]}),void 0)}),void 0),(0,i.jsxs)(n.Z,Object.assign({container:!0,item:!0,spacing:2,justifyContent:"space-around"},{children:[(0,i.jsxs)(n.Z,Object.assign({item:!0},{children:[(0,i.jsx)(y.Z,Object.assign({style:{color:"#069B15"},gutterBottom:!0,variant:"h6",component:"h2"},{children:"Desmonte"}),void 0),(0,i.jsx)(y.Z,Object.assign({gutterBottom:!0,variant:"h6",component:"h2"},{children:t}),void 0)]}),void 0),(0,i.jsxs)(n.Z,Object.assign({item:!0},{children:[(0,i.jsx)(y.Z,Object.assign({style:{color:"#F1C012"},gutterBottom:!0,variant:"h6",component:"h2"},{children:"Stock"}),void 0),(0,i.jsx)(y.Z,Object.assign({gutterBottom:!0,variant:"h6",component:"h2"},{children:a}),void 0)]}),void 0),(0,i.jsxs)(n.Z,Object.assign({item:!0},{children:[(0,i.jsx)(y.Z,Object.assign({style:{color:"#FF0808"},gutterBottom:!0,variant:"h6",component:"h2"},{children:"Mineral"}),void 0),(0,i.jsx)(y.Z,Object.assign({gutterBottom:!0,variant:"h6",component:"h2"},{children:s}),void 0)]}),void 0)]}),void 0)]}),void 0)}),void 0)};var C=s(77349),Z=s(42799),O=s(36233),S=s(43703),D=s(11640),I=s(66598),N=s(8230),E=s(41120),L=s(87623);const T=(0,E.Z)((()=>(0,L.Z)({container:{display:"flex",width:"100%",background:"inherit",justifyContent:"center"},buttonWrapper:{display:"flex",alignItems:"flexEnd",background:"inherit"},button:{border:"none",textDecoration:"none",cursor:"pointer",borderRadius:"50%",width:"40px",height:"40px",color:"white",fontSize:"20px",fontWeight:"bold",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",padding:0,marginBottom:"13px"},dateListScrollable:{display:"flex",overflowX:"hidden",scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},monthContainer:{display:"flex",flexDirection:"column",cursor:"pointer",padding:" 2px",margin:"2px"},monthYearLabel:{alignSelf:"flex-start",zIndex:3,fontSize:"15px",fontWeight:"bold",position:"sticky",top:" 10px",left:"0",margin:"0 10px"},dateDayItem:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",margin:"0 0 0 5px",width:"32px",flexShrink:0},dateDayItemMarked:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",margin:" 0 0 0 10px",width:" 32px",height:"100%",flexShrink:0},daysContainer:{display:"flex",zIndex:3,marginTop:"10px"},dayLabel:{fontSize:"12px",margin:"4px 0 0 0"},dateLabel:{fontSize:"18px"},markedLabel:{marginTop:"10px"}}))),w=({startDate:e,lastDate:t,selectDate:s,getSelectedDay:n,primaryColor:a,labelFormat:r,marked:l})=>{const[c,d]=(0,o.useState)(null);var h={fontWeight:"bold",width:"45px",height:"45px",borderRadius:"50%",border:`2px solid ${a}`,color:a};const g={color:a},m={color:"#8c3737",padding:"2px",fontSize:12},u=e=>(0,Z.Z)(e,c)?h:null,x=e=>{var t;const s=T();let n=l.find((t=>(0,Z.Z)(t.date,e)));if(n){if(!(null==n?void 0:n.marked))return;return(0,i.jsx)("div",Object.assign({style:Object.assign({},null!==(t=null==n?void 0:n.style)&&void 0!==t?t:m),className:s.markedLabel},{children:n.text}),void 0)}return""},v=e=>{d(e),n&&n(e)};return(0,o.useEffect)((()=>{n&&n(s||e)}),[]),(0,o.useEffect)((()=>{s&&((0,Z.Z)(c,s)||(d(s),setTimeout((()=>{let e=document.getElementById("selected");e&&e.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}),20)))}),[s]),(0,i.jsx)(o.Fragment,{children:(()=>{const s=T(),n=[];let a=[];for(let d=0;d<=(0,O.Z)(t,e);d++){let h,m;const p=(0,S.Z)((0,D.Z)(e,d));h=0===d?Number((0,I.Z)(e,"d"))-1:0,m=d===(0,O.Z)(t,e)?Number((0,I.Z)(t,"d")):Number((0,I.Z)((0,N.Z)(p),"d"));for(let e=h;e<m;e++){let t=(0,C.Z)(p,e);console.log(),a.push((0,i.jsxs)("div",Object.assign({id:(o=t,(0,Z.Z)(o,c)?"selected":""),className:l?s.dateDayItemMarked:s.dateDayItem,style:u(t),onClick:()=>v(t)},{children:[(0,i.jsx)("div",Object.assign({className:s.dayLabel},{children:(0,I.Z)(t,"E")}),void 0),(0,i.jsx)("div",Object.assign({className:s.dateLabel},{children:(0,I.Z)(t,"d")}),void 0),x(t)]}),t.getTime()))}n.push((0,i.jsxs)("div",Object.assign({className:s.monthContainer},{children:[(0,i.jsx)("span",Object.assign({className:s.monthYearLabel,style:g},{children:(0,I.Z)(p,r||"MMMM yyyy")}),void 0),(0,i.jsx)("div",Object.assign({className:s.daysContainer},{children:a}),void 0)]}),p.getTime())),a=[]}var o;return(0,i.jsx)("div",Object.assign({id:"container",className:s.dateListScrollable},{children:n}),void 0)})()},void 0)},A=({startDate:e,lastDate:t,selectDate:s,getSelectedDay:n,primaryColor:a,labelFormat:r})=>{const[l,c]=(0,o.useState)(null),d=a.replace(/[^\d,]/g,"").split(","),h={borderRadius:"0.7rem",background:`${a}`,color:Math.round((299*parseInt(d[0])+587*parseInt(d[1])+114*parseInt(d[2]))/1e3)>125?"black":"white"},g=e=>(0,Z.Z)(e,l)?h:null,m=T(),u=e=>{c(e),n&&n(e)};return(0,o.useEffect)((()=>{n&&n(s||e)}),[]),(0,o.useEffect)((()=>{s&&((0,Z.Z)(l,s)||(c(s),setTimeout((()=>{let e=document.getElementById("selected");e&&e.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}),20)))}),[s]),(0,i.jsx)(o.Fragment,{children:(()=>{const s=[];for(let a=0;a<=(0,O.Z)(t,e);a++){const t=(0,S.Z)((0,D.Z)(e,a));s.push((0,i.jsx)("div",Object.assign({id:(n=t,(0,Z.Z)(n,l)?"selected":""),className:m.monthContainer,style:g(t),onClick:()=>u(t)},{children:(0,i.jsx)("span",Object.assign({className:m.monthYearLabel},{children:(0,I.Z)(t,r||"MMMM yyyy")}),void 0)}),t.getTime()))}var n;return(0,i.jsx)("div",Object.assign({id:"container",className:m.dateListScrollable},{children:s}),void 0)})()},void 0)},F=e=>{const t=e.color?e.color.indexOf("rgb")>0?e.color:(s=e.color,(n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s))?"rgb("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+")":null):"rgb(54, 105, 238)";var s,n;const a=e.startDate||new Date,o=(0,C.Z)(a,e.days||90);let r={zIndex:2},l={background:t},c=w;"month"===e.type&&({zIndex:5},c=A,l={background:t});const d=T();return(0,i.jsx)("div",Object.assign({className:d.container},{children:(0,i.jsx)(c,Object.assign({},e,{primaryColor:t,startDate:a,lastDate:o}),void 0)}),void 0)};var P=s(34250),M=s(10646),B=s(88093);const H=s(53292),R=s(69711),z=()=>{const e=(0,m.T)(),{statusReportPerformancePerHour:t,reportPerformancePerHour:s}=(0,m.C)(u.Ig),{isSelectDay:r,isSelectNight:l}=(0,m.C)(u.Ig),{lenCycleDme:c,lenCyclePad:d,lenCycleStock:g,tonnePerTruck:y}=s.day;var C=new Date,Z=new Date(C.getTime()-2592e6);const{dateShift:O}=(0,B.R)(),[S,D]=(0,o.useState)(O),[I]=(0,M.l)(S);function N(){const t={dateStart:`${I}T00:00`,dateEnd:`${I}T00:00`};e((0,u.D2)(t))}(0,o.useEffect)((()=>{N()}),[S]),(0,o.useEffect)((()=>{O.getHours()>=7&&O.getHours()<19?e((0,u.Sv)(!0)):e((0,u.kQ)(!0))}),[]);const E=e=>{D(e)};return(0,o.useEffect)((()=>(setInterval((()=>{const e=new Date;0===e.getMinutes()&&(N(),E(e),console.log("set time"))}),3e4),()=>{})),[]),(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)(n.Z,Object.assign({container:!0},{children:(0,i.jsx)(F,{startDate:Z,days:30,marked:[{}],selectDate:S,getSelectedDay:E,color:"#024e8c"},void 0)}),void 0),(0,i.jsxs)(n.Z,Object.assign({container:!0,direction:"row"},{children:[(0,i.jsx)(n.Z,Object.assign({item:!0,lg:6},{children:(0,i.jsx)(a.Z,Object.assign({p:3},{children:(0,i.jsx)(h,Object.assign({title:"TONELAJE POR HORA (Tn/Hr)",icon:R},{children:(0,i.jsx)(x,{},void 0)}),void 0)}),void 0)}),void 0),(0,i.jsx)(n.Z,Object.assign({item:!0,lg:6},{children:(0,i.jsx)(a.Z,Object.assign({p:3},{children:(0,i.jsxs)(n.Z,Object.assign({container:!0,spacing:2},{children:[(0,i.jsxs)(n.Z,Object.assign({item:!0,container:!0,spacing:2,justifyContent:"space-between"},{children:[(0,i.jsx)(n.Z,Object.assign({item:!0,lg:6},{children:(0,i.jsx)(k,{onClick:function(){e((0,u.Sv)(!0)),e((0,u.kQ)(!1))},isSelect:r,shift:f.Shift.DAY,label:"DIA",lenCycleDme:c*y,lenCyclePad:d*y,lenCycleStock:g*y},void 0)}),void 0),(0,i.jsx)(n.Z,Object.assign({item:!0,lg:6},{children:(0,i.jsx)(k,{isSelect:l,onClick:function(){e((0,u.Sv)(!1)),e((0,u.kQ)(!0))},shift:f.Shift.NIGHT,label:"NOCHE",lenCycleDme:s.night.lenCycleDme*y,lenCyclePad:s.night.lenCyclePad*y,lenCycleStock:s.night.lenCycleStock*y},void 0)}),void 0)]}),void 0),(0,i.jsx)(n.Z,Object.assign({item:!0,lg:12},{children:(0,i.jsx)(h,Object.assign({title:"PRODUCCIÃ“N TOTAL POR DIA",icon:""},{children:(0,i.jsx)(j,{},void 0)}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0),(0,i.jsx)(n.Z,Object.assign({item:!0,lg:12},{children:(0,i.jsx)(a.Z,Object.assign({p:3},{children:(0,i.jsx)(h,Object.assign({title:"RENDIMIENTO POR EXCAVADORA (Tn/Hr)",icon:H},{children:(0,i.jsx)(b,{},void 0)}),void 0)}),void 0)}),void 0)]}),void 0),(0,i.jsx)(P.Z,{visible:"done"===t,actionClick:N,Icon:v.Z,disabled:"done"!=t,color:"secondary",right:8,keyAction:"R"},void 0),(0,i.jsx)(P.Z,{visible:"done"===t,actionClick:function(){const t={dateStart:`${I}T00:00`,dateEnd:`${I}T00:00`};e((0,u.BF)(t))},Icon:p.Z,disabled:"done"!=t,color:"secondary",right:70},void 0)]},void 0)};var $=s(8850);function W(){return(0,i.jsxs)("div",{children:[(0,i.jsx)($.h,{title:"Dashboard"},void 0),(0,i.jsx)(z,{},void 0)]},void 0)}},8850:(e,t,s)=>{"use strict";s.d(t,{h:()=>d});var i=s(85893),n=s(45258),a=s(28358),o=s(282),r=s(22318),l=s(43471),c=s(5977);const d=({title:e,positionContainer:t})=>{const s=t||"sticky",d=(0,c.k6)();return(0,i.jsx)(n.Z,Object.assign({position:s,color:"secondary"},{children:(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(o.Z,{size:"small",startIcon:(0,i.jsx)(l.Z,{color:"action",style:{color:"#fff"}},void 0),onClick:()=>{d.goBack()}},void 0),(0,i.jsx)(r.Z,Object.assign({variant:"h6"},{children:e}),void 0)]},void 0)}),void 0)}}}]);