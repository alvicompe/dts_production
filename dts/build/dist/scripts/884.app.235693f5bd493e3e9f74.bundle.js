"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[884],{61242:(e,i,t)=>{t.d(i,{a:()=>x});var s=t(85893),n=t(41120),a=t(52663),o=t(66083),d=t(29525),r=t(66856),c=t(95477),l=t(282);const v=(0,n.Z)({disabledPadding:{padding:0,textAlign:"center"}}),x=({open:e,handleClose:i,handleConfirm:t,title:n,children:x,maxWidth:h="lg",disabled:u=!1,loading:j})=>{const p=v();return(0,s.jsxs)(a.Z,Object.assign({open:e,onClose:i,maxWidth:h},{children:[(0,s.jsx)(o.Z,Object.assign({className:p.disabledPadding},{children:n}),void 0),(0,s.jsx)(d.Z,{children:x},void 0),(0,s.jsx)(r.Z,{children:j?(0,s.jsx)(c.Z,{style:{width:"30px",height:"30px"}},void 0):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,Object.assign({size:"small",color:"primary",onClick:i},{children:"Cancel"}),void 0),t&&(0,s.jsx)(l.Z,Object.assign({disabled:u,variant:"outlined",size:"small",color:"secondary",onClick:t,autoFocus:!0},{children:"Confirm"}),void 0)]},void 0)},void 0)]}),void 0)}},53280:(e,i,t)=>{t.d(i,{Z:()=>x});var s=t(85893),n=t(13258),a=t(33901),o=t(10046),d=t(22318),r=t(18463),c=t(93584);const l=t(69711),v=t(53292),x=({unit:e,isSelect:i,isTruck:t,isItemHytera:x,inList:h})=>(0,s.jsxs)(r.Z,Object.assign({elevation:3,style:{width:x?"8em":"12em",height:x?"3em":"4em",padding:"2px",display:"flex",flexDirection:"row",alignItems:"center",borderRadius:"4pxv",backgroundColor:h&&x?"#E3E2E1":i?`${c.sb}`:"white"}},{children:[!x&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(n.Z,{size:"small",inputProps:{"aria-label":"secondary checkbox"},checked:i},void 0)},void 0),(0,s.jsx)(a.Z,{style:{width:x?"22px":"33px",height:x?"22px":"33px",marginLeft:"4px"},variant:"square",src:t?l:v},void 0),(0,s.jsxs)(o.Z,Object.assign({style:{textAlign:"center"}},{children:[(0,s.jsx)(d.Z,Object.assign({variant:"subtitle2",style:{marginLeft:"8px",color:i?"white":"black"}},{children:e.deviceAlias}),void 0),(0,s.jsx)(d.Z,Object.assign({variant:"body2",style:{marginLeft:"8px",fontSize:"12px",color:i?"white":"#676665"}},{children:e.deviceId}),void 0)]}),void 0)]}),void 0)},17813:(e,i,t)=>{t.d(i,{T:()=>d,e:()=>r});var s=t(67294),n=t(73855),a=t(99302),o=t(14125);const d=()=>{const[e,i]=(0,s.useState)(""),[t,o]=(0,s.useState)([]),{truckInfoList:d,initial:r}=(0,n.C)(a.ej);return(0,s.useEffect)((()=>{const i=d.filter((i=>{var t,s;return(null===(t=i.deviceAlias)||void 0===t?void 0:t.toUpperCase().includes(e.toUpperCase()))||(null===(s=i.deviceId)||void 0===s?void 0:s.toUpperCase().includes(e.toUpperCase()))}));o(i)}),[e,d]),{search:e,setSearch:i,filterList:t,setFilterList:o}},r=()=>{const[e,i]=(0,s.useState)(""),[t,a]=(0,s.useState)([]),{excavatorInfoList:d,initial:r}=(0,n.C)(o.kW);return(0,s.useEffect)((()=>{const i=d.filter((i=>{var t,s;return(null===(t=i.deviceAlias)||void 0===t?void 0:t.toUpperCase().includes(e.toUpperCase()))||(null===(s=i.deviceId)||void 0===s?void 0:s.toUpperCase().includes(e.toUpperCase()))}));a(i)}),[e,d]),{search:e,setSearch:i,filterList:t,setFilterList:a}}},990:(e,i,t)=>{t.d(i,{M:()=>n});var s=t(67294);const n=e=>{const[i,t]=(0,s.useState)(e);return[i,e=>{t(Object.assign(Object.assign({},i),{[e.target.name]:e.target.value}))},()=>{t(e)},t]}},15635:(e,i,t)=>{t.d(i,{r:()=>a});var s=t(67294),n=t(95090);const a=e=>{const[i,t]=(0,s.useState)(!1);return(0,s.useEffect)((()=>(e===n.JD.DONE||e===n.JD.UNKNOWN||e===n.JD.ERROR?t(!1):t(!0),()=>{t(!1)})),[e]),[i]}},16281:(e,i,t)=>{t.d(i,{h:()=>C});var s=t(85893),n=t(45258),a=t(28358),o=t(282),d=t(22318),r=t(43471),c=t(5977),l=t(55517),v=t(17812),x=t(96617),h=t(73637),u=t(79895),j=t(16575),p=t(51972),g=t(67294),f=t(73855),m=t(45855);const b=({title:e,content:i})=>(0,s.jsxs)("div",{children:[(0,s.jsxs)(d.Z,Object.assign({variant:"subtitle1"},{children:[(0,s.jsx)(j.Z,{style:{fontSize:"14px",marginRight:"4px"}},void 0),e]}),void 0),(0,s.jsx)(d.Z,Object.assign({variant:"body1"},{children:i}),void 0),(0,s.jsx)(l.Z,{},void 0)]},void 0),y=({})=>{var e,i,t;const[n,a]=(0,g.useState)(null),[o,r]=(0,g.useState)(!1),{notificationsHeader:c}=(0,f.C)(m.Af),l=(0,f.T)();(0,g.useEffect)((()=>{l((0,m.pK)())}),[]);const j=o&&Boolean(n)?"transition-popper":void 0;return console.log("notificationsHeader.notificationsList",c.notificationsList),(0,s.jsxs)("div",Object.assign({style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",width:"8%",marginRight:"4px"}},{children:[(0,s.jsx)(v.Z,Object.assign({color:(null===(e=c.notificationsList)||void 0===e?void 0:e.length)>0?"primary":"inherit",onClick:e=>{a(e.currentTarget),r((e=>!e))},size:"small"},{children:(0,s.jsxs)("div",Object.assign({style:{margin:"4px"}},{children:[(0,s.jsx)(d.Z,Object.assign({variant:"subtitle2",style:{color:"white",zIndex:1,position:"absolute",justifyContent:"right",marginLeft:"18px"}},{children:(null===(i=c.notificationsList)||void 0===i?void 0:i.length)>0?null===(t=c.notificationsList)||void 0===t?void 0:t.length:""}),void 0),(0,s.jsx)(p.Z,{},void 0)]}),void 0)}),void 0),(0,s.jsx)("div",Object.assign({style:{zIndex:1}},{children:(0,s.jsx)(x.Z,Object.assign({id:j,open:o,anchorEl:n,transition:!0,style:{zIndex:3}},{children:({TransitionProps:e})=>{var i,t,n;return(0,s.jsx)(h.Z,Object.assign({},e,{timeout:350},{children:(0,s.jsxs)(u.Z,Object.assign({elevation:3,style:{width:"300px",height:(null===(i=c.notificationsList)||void 0===i?void 0:i.length)>10?"87vh":"100%",padding:"8px",overflow:"scroll"}},{children:[(!c.notificationsList||0===(null===(t=c.notificationsList)||void 0===t?void 0:t.length))&&(0,s.jsx)(s.Fragment,{children:"Not Have a new Notification"},void 0),null===(n=c.notificationsList)||void 0===n?void 0:n.map(((e,i)=>(0,s.jsx)(b,{title:e.title,content:e.message},i)))]}),void 0)}),void 0)}}),void 0)}),void 0)]}),void 0)},C=({title:e,positionContainer:i,notificationPannel:t})=>{const l=i||"sticky",v=(0,c.k6)();return(0,s.jsx)(n.Z,Object.assign({position:l,color:"secondary",style:{display:"flex"},elevation:0},{children:(0,s.jsxs)("div",Object.assign({style:{display:"flex"}},{children:[(0,s.jsxs)(a.Z,Object.assign({variant:"dense",style:{width:"90%"}},{children:[(0,s.jsx)(o.Z,{size:"small",startIcon:(0,s.jsx)(r.Z,{color:"action",style:{color:"#fff"}},void 0),onClick:()=>{v.goBack()}},void 0),(0,s.jsx)(d.Z,Object.assign({variant:"h6"},{children:e}),void 0)]}),void 0),t&&(0,s.jsx)(y,{},void 0)]}),void 0)}),void 0)}},71884:(e,i,t)=>{t.r(i),t.d(i,{default:()=>D});var s=t(85893),n=t(10046),a=t(41749),o=t(22318),d=t(18463),r=t(14741),c=t(282),l=t(62822),v=t(50998),x=t(73430),h=t(30387),u=t(44562),j=t(67294),p=t(73855),g=t(14125),f=t(61242),m=t(8286),b=t(990),y=t(57886),C=t(31940);const Z=({openEditExcavator:e,setOpenEditExcavator:i,excavator:t})=>{const a=(0,p.T)(),{excavatorInfoList:o}=(0,p.C)(g.kW),{truckSelects:d}=(0,p.C)(C.__),[r,c,l,v]=(0,b.M)(Object.assign({},t)),{deviceAlias:x,deviceId:h,id:u,deviceInterval:Z,plate:w}=r,O=(0,j.useCallback)((e=>{let i=!1;if(e){const t=e.toUpperCase();return o.filter((e=>{e.deviceAlias.toUpperCase()===t&&(i=!0)})),i}}),[o]);return(0,s.jsx)(f.a,Object.assign({open:e,handleClose:()=>{i(!1),l()},handleConfirm:()=>{return e=void 0,t=void 0,n=function*(){x&&!O(r.deviceAlias)&&(yield a((0,y.hH)(r)),a((0,y.Jl)()),yield a((0,g.CE)()),i(!1))},new((s=void 0)||(s=Promise))((function(i,a){function o(e){try{r(n.next(e))}catch(e){a(e)}}function d(e){try{r(n.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,d)}r((n=n.apply(e,t||[])).next())}));var e,t,s,n},title:"Edit Excavator",customise:!0},{children:(0,s.jsxs)(n.Z,Object.assign({component:"form",style:{color:"dark"}},{children:[(0,s.jsx)(m.Z,{error:!!O(r.deviceAlias),variant:"outlined",required:!0,onChange:c,style:{width:"100%"},label:"Alias",size:"small",value:x,name:"deviceAlias",helperText:O(r.deviceAlias)?"There is already a excavator with that same Device Alias":""},void 0),(0,s.jsx)(n.Z,{height:"12px"},void 0),(0,s.jsx)(m.Z,{error:!!O(r.deviceId),variant:"outlined",required:!0,onChange:c,style:{width:"100%"},label:"Id",size:"small",disabled:!0,value:r.deviceId,name:"deviceId",helperText:O(r.deviceId)?"There is already a excavator with that same Device Id":""},void 0)]}),void 0)}),void 0)};var w=t(15635);const O=({openNewExcavator:e,setOpenNewExcavator:i,unit:t})=>{const a=(0,p.T)(),{excavatorInfoList:o}=(0,p.C)(g.kW),{stateCreate:d}=(0,p.C)(y.$I),[r,c,l,v]=(0,b.M)({deviceAlias:"",deviceId:"",id:"",plate:"",deviceInterval:0,description:"",horometer:0}),{deviceAlias:x,deviceId:h,horometer:C}=r,[Z]=(0,w.r)(d),[O,I]=(0,j.useState)(!1);t&&(r.deviceAlias=null==t?void 0:t.deviceAlias,r.deviceId=null==t?void 0:t.deviceId);const E=(0,j.useCallback)((e=>{let i=!1;if(e){const t=e.toUpperCase();return o.filter((e=>{e.deviceAlias.toUpperCase()===t&&(i=!0),e.deviceId.toUpperCase()===t&&(i=!0)})),i}}),[o]);return(0,j.useEffect)((()=>{I(!!x&&!!h&&!!C&&C>0&&!E(r.deviceAlias)&&!E(r.deviceId))}),[r]),(0,s.jsx)(f.a,Object.assign({open:e,handleClose:()=>{a((0,g.CE)()),i(!1),l()},handleConfirm:()=>{return e=void 0,t=void 0,n=function*(){O&&(yield a((0,y.Li)(r)),yield a((0,g.CE)()),i(!1),l())},new((s=void 0)||(s=Promise))((function(i,a){function o(e){try{r(n.next(e))}catch(e){a(e)}}function d(e){try{r(n.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,d)}r((n=n.apply(e,t||[])).next())}));var e,t,s,n},title:"Insert New Excavator",customise:!0,loading:Z,disabled:!O},{children:(0,s.jsxs)(n.Z,Object.assign({component:"form",style:{color:"dark"}},{children:[(0,s.jsx)(m.Z,{error:!!E(r.deviceAlias),variant:"outlined",required:!0,disabled:!!t,onChange:c,style:{width:"100%"},label:"Device Alias",size:"small",value:r.deviceAlias,name:"deviceAlias",helperText:E(r.deviceAlias)?"There is already a excavator with that same Device Alias":""},void 0),(0,s.jsx)(n.Z,{height:"12px"},void 0),(0,s.jsx)(m.Z,{error:!!E(r.deviceId),variant:"outlined",required:!0,disabled:!!t,onChange:c,style:{width:"100%"},label:"Device Id",size:"small",value:r.deviceId,name:"deviceId",helperText:E(r.deviceId)?"There is already a excavator with that same Device Id":"Insert Device Id"},void 0),(0,s.jsx)(m.Z,{error:C<0,variant:"outlined",required:!0,disabled:!!E(r.deviceId),onChange:c,style:{width:"100%"},label:"Horometer",size:"small",type:"number",value:C,name:"horometer",helperText:C<0?"Hourmeter needs to be > 0":"Insert Horometer"},void 0),t&&E(r.deviceId)&&(0,s.jsx)(u.Z,Object.assign({severity:"error"},{children:"the selected excavator already exists in the system"}),void 0)]}),void 0)}),void 0)};var I=t(53280),E=t(17813),k=function(e,i,t,s){return new(t||(t=Promise))((function(n,a){function o(e){try{r(s.next(e))}catch(e){a(e)}}function d(e){try{r(s.throw(e))}catch(e){a(e)}}function r(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(o,d)}r((s=s.apply(e,i||[])).next())}))};const L=()=>{const[e,i]=j.useState(!1),[t,m]=(0,j.useState)(!1),[b,C]=j.useState(!1),[L,S]=j.useState(!1),{excavatorsSelects:A,statusDelete:z}=(0,p.C)(y.$I),T=(0,p.T)(),{excavatorInfoList:D}=(0,p.C)(g.kW),{search:U,setSearch:N,filterList:H,setFilterList:P}=(0,E.e)(),{ExcavatorListHytera:W}=(0,p.C)(y._$),F=(0,j.useRef)(),[J]=(0,w.r)(z);(0,j.useEffect)((()=>{""===U&&P(D)}),[H]);const R=()=>{i(!1),C(!1),S(!1),T((0,g.CE)()),T((0,y.Jl)())};return(0,s.jsx)(n.Z,{children:(0,s.jsxs)(a.Z,Object.assign({spacing:1,container:!0,direction:"column",style:{padding:"12px"}},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,s.jsx)(o.Z,Object.assign({variant:"subtitle1"},{children:"List Excavators"}),void 0)}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0,container:!0,alignItems:"center",style:{width:"100%"}},{children:[(0,s.jsx)(d.Z,Object.assign({style:{paddingLeft:"8px"}},{children:(0,s.jsx)(r.Z,{color:"primary",value:U,inputRef:F,onKeyDown:e=>{var i;"Escape"===e.key&&(N(""),null===(i=F.current)||void 0===i||i.blur(),P(D))},onChange:e=>{N(e.target.value)},placeholder:"Search Excavator",inputProps:{"aria-label":"search"}},void 0)}),void 0),(0,s.jsx)(c.Z,Object.assign({startIcon:(0,s.jsx)(x.Z,{},void 0),onClick:()=>{C(!0)},size:"small",style:{marginLeft:"2em",color:"white",background:"#1d4e89"}},{children:"New Excavator"}),void 0),A.length>0&&(0,s.jsx)(c.Z,Object.assign({onClick:()=>{i(!0)},color:"primary",size:"small",style:{marginLeft:"2em",color:"white",background:"#1d4e89"}},{children:"Disable Excavator"}),void 0),1===A.length&&(0,s.jsx)(c.Z,Object.assign({startIcon:(0,s.jsx)(h.Z,{},void 0),onClick:()=>{m(!0)},color:"primary",size:"small",style:{marginLeft:"2em",color:"white",background:"#1d4e89"}},{children:"Edit"}),void 0),(0,s.jsx)(a.Z,{item:!0,xs:12,md:6,xl:6},void 0),(0,s.jsx)(a.Z,{item:!0,xs:12,md:6,xl:6},void 0)]}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,s.jsx)(l.Z,Object.assign({dense:!0,style:{display:"flex",flexWrap:"wrap",backgroundColor:"rgb(250 250 250)"}},{children:H.map((e=>{return(0,s.jsx)(v.Z,Object.assign({button:!0,onClick:()=>{(e=>{T((0,y.m1)(e))})(e)},style:{width:"12em",padding:"0px",margin:"0.2em",backgroundColor:"white"}},{children:(0,s.jsx)(I.Z,{unit:e,isSelect:(i=e,!!A.find((e=>i.deviceId===e.deviceId))),isTruck:!1},void 0)}),e.deviceId);var i}))}),void 0)}),void 0),(0,s.jsx)(O,{openNewExcavator:b,setOpenNewExcavator:C},void 0),A.length>0&&(0,s.jsx)(f.a,Object.assign({open:e,handleClose:R,handleConfirm:()=>k(void 0,void 0,void 0,(function*(){yield T((0,y._7)(A)),yield T((0,g.CE)()),T((0,y.Jl)()),i(!1)})),title:"sure you want to Disable",customise:!0,loading:J},{children:(0,s.jsxs)(u.Z,Object.assign({severity:"warning"},{children:["Disable:"," ",A.map((e=>e.deviceId+" "))]}),void 0)}),void 0),(0,s.jsx)(f.a,Object.assign({open:L,handleClose:R,handleConfirm:()=>k(void 0,void 0,void 0,(function*(){yield W.map((e=>{var i;i=e,D.some((e=>e.deviceId===i.deviceId))||T((0,y.vW)([e]))})),yield T((0,g.CE)()),T((0,y.Jl)()),S(!1)})),title:"sure you want to Syncronize",customise:!0},{children:(0,s.jsx)(u.Z,Object.assign({severity:"info"},{children:"Hytera Excavators will be synchronized to the DTS system"}),void 0)}),void 0),1===A.length&&(0,s.jsx)(Z,{openEditExcavator:t,setOpenEditExcavator:m,excavator:A[0]},void 0)]}),void 0)},void 0)};var S=t(10465);const A=()=>{const[e,i]=j.useState(!1),{ExcavatorListHytera:t}=(0,p.C)(y._$),d=(0,p.T)(),[r,c]=(0,j.useState)(!1),[x,h]=(0,j.useState)([]),[u,m]=(0,j.useState)(!1),[b,C]=(0,j.useState)(),{excavatorInfoList:Z}=(0,p.C)(g.kW);(0,j.useEffect)((()=>{d((0,y.Xo)())}),[]),(0,j.useEffect)((()=>{h(t)}),[t]);const w=(0,j.useCallback)((e=>{if(e){const i=e.target?e.target.value.toUpperCase():"";h(t.filter((e=>e.deviceAlias.toUpperCase().includes(i))))}}),[t]),E=(0,j.useCallback)((()=>{h(t)}),[t]);return(0,s.jsx)(n.Z,{children:(0,s.jsxs)(a.Z,Object.assign({spacing:1,container:!0,direction:"column",style:{padding:"4px"}},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,s.jsx)(o.Z,Object.assign({variant:"subtitle1"},{children:"List Excavators Hytera"}),void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,container:!0,alignItems:"center",style:{width:"100%"}},{children:(0,s.jsx)(S.V,{placeholder:"Search Excavator",functionFilter:w,functionCancel:E},void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,s.jsx)(l.Z,Object.assign({dense:!0,style:{display:"flex",flexWrap:"wrap",backgroundColor:"rgb(250 250 250)"}},{children:x.map((e=>{return(0,s.jsx)(v.Z,Object.assign({button:!0,onClick:()=>{(e=>{m(!0),C(e),c(!r)})(e)},style:{width:"8em",padding:"0px",margin:"0.1em",backgroundColor:"white"}},{children:(0,s.jsx)(I.Z,{unit:e,isItemHytera:!0,inList:(i=e,Z.some((e=>i.deviceId===e.deviceId)))},void 0)}),e.deviceId);var i}))}),void 0)}),void 0),u&&(0,s.jsx)(O,{openNewExcavator:!0,setOpenNewExcavator:m,unit:b},void 0),(0,s.jsx)(f.a,{open:e,handleClose:()=>{i(!1),d((0,y.Jl)())},handleConfirm:()=>{return e=void 0,t=void 0,n=function*(){i(!1)},new((s=void 0)||(s=Promise))((function(i,a){function o(e){try{r(n.next(e))}catch(e){a(e)}}function d(e){try{r(n.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,d)}r((n=n.apply(e,t||[])).next())}));var e,t,s,n},title:"sure you want to delete"},void 0)]}),void 0)},void 0)},z=()=>(0,s.jsx)(n.Z,{children:(0,s.jsxs)(a.Z,Object.assign({spacing:0,container:!0,direction:"row",style:{padding:"12px"}},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,xs:12,md:8,xl:8},{children:(0,s.jsx)(L,{},void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,xs:12,md:4,xl:4},{children:(0,s.jsx)(A,{},void 0)}),void 0)]}),void 0)},void 0);var T=t(16281);const D=()=>(0,s.jsxs)("div",{children:[(0,s.jsx)(T.h,{title:"Setting Excavators",positionContainer:"relative",notificationPannel:!0},void 0),(0,s.jsx)(z,{},void 0)]},void 0)}}]);