"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[219],{63663:(e,t,n)=>{n.d(t,{F2:()=>o,xu:()=>v.I,zx:()=>c,iz:()=>p,T5:()=>m,P4:()=>h,hU:()=>u,Mi:()=>b,IB:()=>r.C});var i=n(85893),s=n(8286),a=n(96588);const o=e=>(0,i.jsx)(a.ZP,Object.assign({},Object.assign({},e.propsAutocomplete),{renderInput:e=>(0,i.jsx)(s.Z,Object.assign({},e,{label:"Seleccione una opción",variant:"outlined"}))}));var r=n(45287),l=n(282);const c=e=>(0,i.jsx)(l.Z,Object.assign({},Object.assign({},e.propsButton),{children:e.label}));var d=n(17812);const u=e=>(0,i.jsx)(d.Z,Object.assign({},Object.assign({},e),{children:e.children}));var v=n(47463),g=n(41749);const m=e=>(0,i.jsx)(g.Z,Object.assign({},Object.assign({},e),{container:!0},{children:e.children})),h=e=>(0,i.jsx)(g.Z,Object.assign({},Object.assign({},e),{item:!0},{children:e.children}));var j=n(55517);const p=e=>(0,i.jsx)(j.Z,Object.assign({},Object.assign({},e)));var x=n(82285);const b=e=>(0,i.jsx)(x.Z,Object.assign({},Object.assign({},e),{children:(0,i.jsx)(g.Z,{children:e.children})}))},45287:(e,t,n)=>{n.d(t,{C:()=>o});var i=n(85893),s=n(64436),a=n(8286);const o=e=>{const{propsTextField:t,propsForm:n}=e;return(0,i.jsx)(s.Z,Object.assign({},Object.assign({},n),{children:(0,i.jsx)(a.Z,Object.assign({},Object.assign({},t)))}))}},47463:(e,t,n)=>{n.d(t,{I:()=>a});var i=n(85893),s=n(60395);const a=({children:e,height:t,width:n})=>(0,i.jsx)(s.Z,Object.assign({height:t,width:n},{children:e}))},61242:(e,t,n)=>{n.d(t,{a:()=>g});var i=n(85893),s=n(41120),a=n(52663),o=n(66083),r=n(29525),l=n(66856),c=n(95477),d=n(282),u=n(93584);const v=(0,s.Z)({disabledPadding:{padding:0,textAlign:"center"}}),g=({open:e,handleClose:t,handleConfirm:n,title:s,children:g,maxWidth:m="lg",disabled:h=!1,loading:j})=>{const p=v();return(0,i.jsxs)(a.Z,Object.assign({open:e,onClose:t,maxWidth:m},{children:[(0,i.jsx)(o.Z,Object.assign({style:{color:"white",background:`${u.Jx}`,padding:"0.5rem"},className:p.disabledPadding},{children:s})),(0,i.jsx)(r.Z,{children:g}),(0,i.jsx)(l.Z,{children:j?(0,i.jsx)(c.Z,{style:{width:"30px",height:"30px"}}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,Object.assign({size:"small",color:"primary",onClick:t},{children:"Cancelar"})),n&&(0,i.jsx)(d.Z,Object.assign({disabled:h,variant:"outlined",size:"small",color:"secondary",onClick:n,autoFocus:!0},{children:"Confirmar"}))]})})]}))}},90582:(e,t,n)=>{n.d(t,{y:()=>v});var i=n(85893),s=n(96912),a=n(44562),o=n(37155),r=n(67294),l=n(41120),c=n(33681);const d=(0,l.Z)({root:{width:"100%"}});function u({time:e}){const t=d(),[n,s]=r.useState(100),a=10*e/100;return r.useEffect((()=>{s((e=>e-10));const e=setInterval((()=>{s((e=>e-10))}),a);return()=>{clearInterval(e)}}),[]),(0,i.jsx)("div",Object.assign({className:t.root},{children:(0,i.jsx)(c.Z,{variant:"determinate",value:n})}))}const v=({error:e,callBack:t,success:n,code:l=0})=>{const[c,d]=r.useState({open:!0,vertical:"top",horizontal:"right"}),{vertical:v,horizontal:g}=c,[m,h]=(0,r.useState)("success"),j=()=>{d(Object.assign(Object.assign({},c),{open:!1})),t()};return(0,r.useEffect)((()=>{const e=setTimeout((()=>{j()}),4e3);return()=>{window.clearTimeout(e)}}),[]),(0,r.useEffect)((()=>(h(l>=500||2==l?"error":n?"success":"warning"),()=>{h("success")})),[n,l]),(0,i.jsx)(s.Z,Object.assign({open:c.open,anchorOrigin:{vertical:v,horizontal:g},onClose:j},{children:(0,i.jsxs)(a.Z,Object.assign({severity:m,onClose:j},{children:[(0,i.jsx)(o.Z,{children:n?"Exito":"advertencia"}),(0,i.jsx)("strong",{children:l>=500?"¡Ups! Algo salió mal, comuniquese con el administrador":e}),(0,i.jsx)(u,{time:4e3})]}))}))}},11818:(e,t,n)=>{n.d(t,{y:()=>a});var i=n(67294),s=n(49032);const a=e=>{const[t,n]=(0,i.useState)(!0),[a,o]=(0,i.useState)(!0),[r,l]=(0,i.useState)(!0),[c,d]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{const t=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===s.EnumEvent.NO_OPERATIONAL}))),i=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===s.EnumEvent.OPERATIONAL}))),a=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===s.EnumEvent.OPERATIONAL_DELAY}))),r=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===s.EnumEvent.MAINTENANCE}))),c=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===s.EnumEvent.UNKNOWN_STATE_EVENT})));n(!0),o(!0),l(!0),d(!0),i()&&(n(!1),o(!0),l(!1),d(!1)),c()&&(n(!1),o(!1),l(!1)),t()&&(n(!0),o(!1),l(!1),d(!1)),a()&&(n(!1),o(!1),l(!0)),r()&&(n(!1),o(!1),l(!0),d(!0)),0==c()&&0==t()&&0==a()&&0==i()&&0==r()&&(n(!0),o(!0),l(!0),d(!0))}),[e]),[t,a,r,c]}},23800:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(67294),s=n(49032),a=n(34326);function o(e,t){const[n,o]=(0,i.useState)(0),[r]=(0,a.N)(e);return(0,i.useEffect)((()=>{var n,i,a,l,c;let d=new Date(`${r}T00:00:00`);d.setHours(Number.parseInt(e.split(":")[0])),d.setMinutes(Number.parseInt(e.split(":")[1]));const u=new Date(1e3*(null===(n=null==t?void 0:t.initialTime)||void 0===n?void 0:n.seconds));var v=(d.getTime()-u.getTime())/1e3;let g=1/60*Math.ceil(v/60);const m=(null==t?void 0:t.initialHourmeter)+Number.parseFloat(g);return(null===(a=null===(i=null==t?void 0:t.initialEventState)||void 0===i?void 0:i.event)||void 0===a?void 0:a.event)===s.EnumEvent.NO_OPERATIONAL||(null===(c=null===(l=null==t?void 0:t.initialEventState)||void 0===l?void 0:l.event)||void 0===c?void 0:c.event)===s.EnumEvent.MAINTENANCE?o(Number.parseFloat(null==t?void 0:t.initialHourmeter.toFixed(1))):o(Number.parseFloat(m.toFixed(1))),()=>{o(0)}}),[e,t,r]),[n]}},34326:(e,t,n)=>{n.d(t,{N:()=>l});var i=n(67294),s=n(73855),a=n(10646),o=n(56731),r=n(30168);const l=e=>{const{historyTimelineShift:t}=(0,s.C)(r.yV),[n]=(0,a.l)(new Date),[l]=(0,a.l)(new Date((new Date).getTime()-864e5)),[c,d]=(0,i.useState)(n);return(0,i.useEffect)((()=>{var i,s,a;(null===(i=t[0])||void 0===i?void 0:i.shift)===o.Shift.NIGHT&&new Date(1e3*(null===(a=null===(s=t[0])||void 0===s?void 0:s.shiftDate)||void 0===a?void 0:a.seconds)).toLocaleDateString()===(new Date).toLocaleDateString()?d(n):parseInt(e.split(":")[0])>=19&&parseInt(e.split(":")[0])<=23?d(l):d(n)}),[e]),[c]}},15635:(e,t,n)=>{n.d(t,{r:()=>a});var i=n(67294),s=n(95090);const a=e=>{const[t,n]=(0,i.useState)(!1);return(0,i.useEffect)((()=>(e===s.JD.DONE||e===s.JD.UNKNOWN||e===s.JD.ERROR?n(!1):n(!0),()=>{n(!1)})),[e]),[t]}},31379:(e,t,n)=>{n.r(t),n.d(t,{default:()=>qt});var i=n(85893),s=n(41749),a=n(868),o=n(17812),r=n(95757),l=n(50998),c=n(71267),d=n(282),u=n(62822),v=n(79895),g=n(55517),m=n(60395),h=n(43829),j=n(82200),p=n(59544),x=n(7654),b=n(78965),O=n(44562),f=n(30115),E=n(67294),y=n(59240),N=n(73727),C=n(93584),S=n(10980),L=n(73855),T=n(49032),Z=n(78721),k=n(53559),I=n(52672),A=n(52314),w=n(76796),D=n(89601),R=n(73250),P=n(5814),$=n(26666),F=n(2780),z=n(90694),M=n(63663),W=n(61242),_=n(33681);const U=({loading:e})=>e?(0,i.jsx)(_.Z,{}):(0,i.jsx)(i.Fragment,{});var H=n(23800),G=n(34326),K=n(30433),J=n(52663),V=n(66083),B=n(29525),Y=n(22318),X=n(8286),q=n(66856),Q=n(61920),ee=n(86072);const te=({newOperation:e})=>{const t=(0,L.T)(),n=()=>{t((0,D.mg)())},r=(0,E.useMemo)((()=>e.uploadList.map(((e,t)=>{const s=e.type===Q.WW.TAJO?`\n      ${e.nameProject}-${e.name}-${e.material?e.material.type:""}\n      `:e.name;return(0,i.jsx)(c.Z,{color:"secondary",label:s,onDelete:n},t)}))),[e.uploadList]);return 0===e.uploadList.length?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,i.jsx)(a.ZP,Object.assign({title:"Change Upload"},{children:(0,i.jsx)(o.Z,Object.assign({color:"primary",size:"small"},{children:(0,i.jsx)(ee.Z,{})}))})),r]}))}))},ne=({newOperation:e})=>{const t=(0,L.T)(),n=(0,E.useMemo)((()=>e.downloadList.map(((e,n)=>(0,i.jsx)(c.Z,{color:"secondary",label:e.name,onDelete:()=>{return n=e.id,void t((0,D.$g)({id:n}));var n}},n)))),[e.downloadList]);return 0===e.downloadList.length?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,i.jsx)(a.ZP,Object.assign({title:"Change Download"},{children:(0,i.jsx)(o.Z,Object.assign({color:"primary",size:"small"},{children:(0,i.jsx)(ee.Z,{})}))})),n]}))}))},ie=({newOperation:e})=>{const t=(0,L.T)(),n=()=>{t((0,D.QW)())},r=(0,E.useMemo)((()=>e.excavatorList.map(((e,t)=>{const s=e.deviceAlias;return(0,i.jsx)(c.Z,{color:"secondary",label:s,onDelete:n},t)}))),[e.excavatorList]);return 0===e.excavatorList.length?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,i.jsx)(a.ZP,Object.assign({title:"Change Excavator"},{children:(0,i.jsx)(o.Z,Object.assign({color:"primary",size:"small"},{children:(0,i.jsx)(ee.Z,{})}))})),r]}))}))};var se=n(96588),ae=n(97111),oe=n(14125),re=n(50648);const le=({open:e,operation:t,setOpen:n})=>{const[o,r]=(0,E.useState)([]),{excavatorInfoList:l}=(0,L.C)(oe.kW),u=(0,E.useRef)(),{dmeCellList:v,padCellList:h,stockCellList:j,polygonList:p}=(0,L.C)(z.WD),[x,b]=(0,E.useState)(ae.f.CHANGE_NOTHING),[O,f]=(0,E.useState)(Q.WW.DESCONOCIDO),[y,N]=(0,E.useState)(re.TypeDownload.UNKNOWN),C=(0,L.T)(),{newOperation:S}=(0,L.C)(z.e5),T=(e,t,n)=>{const i=t.find((t=>t.id===e));i&&C((0,D.qn)(Object.assign(Object.assign({},i),{type:n})))},Z=(e,t,n)=>{const i=t.find((t=>t.id===e));i&&C((0,D.Ru)(Object.assign(Object.assign({},i),{type:n})))},k=(0,E.useCallback)((()=>(0,ae.BF)(x,O,p,j,y,v,h,l)),[x,O,p,j,y,v,h,l]);return(0,i.jsxs)(J.Z,Object.assign({open:e,onClose:n,title:"Migrate Operation"},{children:[(0,i.jsx)(V.Z,Object.assign({style:{paddingTop:8,paddingBottom:0}},{children:"Update Operation Attributes"})),(0,i.jsx)(B.Z,Object.assign({style:{minHeight:320}},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"column"},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,i.jsx)(Y.Z,{children:"Upload:"}),(0,i.jsx)(K.g7,{operation:t,lineThrough:S.uploadList.length>0}),(0,i.jsx)(te,Object.assign({},{operation:t,newOperation:S}))]}))})),(0,i.jsx)(m.Z,{width:"100%",height:8}),(0,i.jsxs)(s.Z,Object.assign({item:!0},{children:[(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,i.jsx)(Y.Z,{children:"Download: "}),(0,i.jsx)(K.DQ,{operation:t,lineThrough:S.downloadList.length>0}),(0,i.jsx)(ne,Object.assign({},{operation:t,newOperation:S}))]})),(0,i.jsx)(m.Z,{width:"100%",height:8}),(0,i.jsx)(g.Z,{orientation:"horizontal"}),(0,i.jsx)(a.ZP,Object.assign({title:"Puede agregar hasta 2 puntos de descarga"},{children:(0,i.jsx)(Y.Z,Object.assign({style:{fontSize:11}},{children:"*You can add up to 2 download points, example 1 DME and 1 PAD or 1 STOCK"}))})),(0,i.jsx)(g.Z,{orientation:"horizontal"})]})),(0,i.jsx)(m.Z,{width:"100%",height:8}),(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,i.jsx)(Y.Z,{children:"Excavator: "}),(0,i.jsx)(K.Ez,{operation:t,lineThrough:S.excavatorList.length>0}),(0,i.jsx)(ie,Object.assign({},{operation:t,newOperation:S}))]}))})),(0,i.jsx)(m.Z,{height:8}),(1!==S.excavatorList.length||2!==S.downloadList.length||1!==S.uploadList.length)&&(0,i.jsx)(s.Z,Object.assign({item:!0,style:{marginTop:8}},{children:(0,i.jsx)(se.ZP,{size:"small",value:o,blurOnSelect:!0,onChange:(e,t)=>{switch(r(t),t.length){case 0:b(ae.f.CHANGE_NOTHING),f(Q.WW.DESCONOCIDO),N(re.TypeDownload.UNKNOWN);break;case 1:b(t[0].value),f(Q.WW.DESCONOCIDO),N(re.TypeDownload.UNKNOWN);break;case 2:switch(x){case ae.f.CHANGE_UPLOAD:f(Number(t[1].value));break;case ae.f.CHANGE_DOWNLOAD:N(Number(t[1].value));break;case ae.f.CHANGE_EXCAVATOR:((e,t)=>{const n=t.find((t=>t.id===e));n&&C((0,D.Zh)(n))})(t[1].value,l),r([]),b(ae.f.CHANGE_NOTHING)}break;case 3:switch(x){case ae.f.CHANGE_UPLOAD:switch(O){case Q.WW.TAJO:T(t[2].id,p,Q.WW.TAJO);break;case Q.WW.STOCK:T(t[2].id,j,Q.WW.STOCK)}break;case ae.f.CHANGE_DOWNLOAD:switch(y){case re.TypeDownload.DME:Z(t[2].id,v,y);break;case re.TypeDownload.PAD:Z(t[2].id,h,y);break;case re.TypeDownload.STOCK:Z(t[2].id,j,y)}}f(Q.WW.DESCONOCIDO),N(re.TypeDownload.UNKNOWN),b(ae.f.CHANGE_NOTHING),r([])}setTimeout((()=>{var e,t;null===(e=u.current)||void 0===e||e.focus(),null===(t=u.current)||void 0===t||t.click()}),100)},options:k(),multiple:!0,renderTags:(e,t)=>e.map(((e,n)=>(0,i.jsx)(c.Z,Object.assign({variant:"outlined",label:e.label},t({index:n}))))),style:{minWidth:200},getOptionLabel:e=>e.label,openOnFocus:!0,disableClearable:!0,getOptionDisabled:e=>(0,ae.HT)(e,S,y),filterSelectedOptions:!0,renderInput:e=>(0,i.jsx)(X.Z,Object.assign({},e,{autoFocus:!0,inputRef:u,label:"Cómo puedo ayudarte?",variant:"outlined",fullWidth:!0}))})}))]}))})),(0,i.jsx)(q.Z,{children:(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(d.Z,Object.assign({onClick:n,size:"small",color:"primary"},{children:"Cancel"})),(0,i.jsx)(d.Z,Object.assign({variant:"outlined",size:"small",color:"secondary",onClick:()=>{C((0,D.db)({oldOperation:t,newOperation:S}))}},{children:"Save"}))]})})]}))};var ce=n(48101),de=n(6777),ue=n(95090),ve=n(89613),ge=n(34344),me=n(54150),he=n(40036);class je{constructor(e,t,n,i,s,a,o,r){this.circleList=e,this.map=t,this.idSource=n,this.radius=s,this.idLayer=i,this.fontSize=9,this.color=a,this.transparent=o,this.onClickElement=r}getInMap(){return this.map.getSource(this.idSource)}generateFeatures(){return this.circleList.map((e=>({type:"Feature",properties:{label:e.label},geometry:{type:"Point",coordinates:2===e.point.length?e.point:[0,0]}})))}addToMap(){var e,t;!this.getInMap()&&this.circleList.length>0&&(this.map.getSource(this.idSource)||this.map.addSource(this.idSource,{type:"geojson",data:{type:"FeatureCollection",features:this.generateFeatures()}}),this.map.getLayer(this.idLayer)||(this.map.addLayer({id:this.idLayer,type:"circle",source:this.idSource,paint:{"circle-radius":{stops:[[0,0],[20,(e=this.radius,t=this.circleList[0].point[1],e/.075/Math.cos(t*Math.PI/180))]],base:2},"circle-stroke-color":this.color,"circle-stroke-width":this.transparent?2:0,"circle-color":this.color,"circle-opacity":this.transparent?0:1}}),this.map.addLayer({id:this.idLayer+"LABEL",type:"symbol",source:this.idSource,layout:{"text-field":["get","label"],"text-variable-anchor":["top"],"text-radial-offset":.5,"text-justify":"auto","text-allow-overlap":!0}})),this.map.on("click",this.idLayer,(e=>{this.onClickElement&&this.onClickElement(e)})),this.map.on("mouseenter",this.idLayer,(()=>{this.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave",this.idLayer,(()=>{this.map.getCanvas().style.cursor=""})))}updateInMap(){const e=this.getInMap();e?e.setData({type:"FeatureCollection",features:this.generateFeatures()}):this.addToMap()}removeOfMap(){this.getInMap()&&(this.map.removeLayer(this.idLayer),this.map.removeLayer(this.idLayer+"LABEL")),this.map.removeSource(this.idSource)}}var pe=n(78479),xe=n(45287),be=n(73637),Oe=n(5200);const fe="truck";var Ee=n(75647),ye=n(44824),Ne=n(28231),Ce=n(715),Se=n(95692),Le=n(41042),Te=n(67774),Ze=n(56731),ke=n(7258),Ie=n(30168),Ae=n(57163),we=n(60465);const De=(0,f.Z)({rootFilter:{flex:"0 0",margin:2,border:"1px dashed #7b81836e",cursor:"move",float:"left",width:"98%",background:C.sb},rootItem:{margin:2,border:"1px dashed #7b81836e",cursor:"move",float:"left",width:"98%",flex:"0 0"},rootItemTemporal:{flex:"0 0",margin:2,border:"1px dashed green",cursor:"move",float:"left",width:"98%",background:"#34d0ff6e"},rootItemTemporalRemove:{flex:"0 0",margin:2,border:"1px dashed red",background:"#ff60604a",cursor:"move",float:"left",width:"98%"},titleTruck:{fontSize:"1em",cursor:"move"},contentTruck:{margin:2,padding:0,width:"100%",position:"relative",height:"100%"},contentCycle:{height:16,minWidth:16,display:"flex",borderRadius:"50%",background:"#efecec",justifyContent:"center",alignItems:"center",justifyItems:"center"},stateTruck:{position:"absolute",fontSize:"0.5rem",top:0,left:0},containerMoreTruck:{position:"absolute",top:-6,right:2,cursor:"pointer"},moreTruck:{fontSize:"0.8rem",cursor:"pointer"},actions:{minWidth:36},labelCycleNumber:{fontSize:11,color:"#5a5757"},labelExcavator:{marginTop:4,background:"#424141",color:"#fff"},labelDistance:{marginTop:4,background:`${C.J$}20`}}),Re=({truck:e})=>{var t,n,s,r,l;let c="",d=null;switch(null===(t=e.eventState)||void 0===t?void 0:t.eventState){case Z.EnumEventState.UNKNOWN_STATE:d=(0,i.jsx)(Ee.Z,{style:{fontSize:"1rem"},fontSize:"small"}),c=e.operationList&&e.operationList.length>0?"En camino":"Sin operación";break;case Z.EnumEventState.DOWNLOAD:d=(0,i.jsx)(ye.Z,{style:{fontSize:"1rem"},fontSize:"small"}),c=null===(n=e.eventState)||void 0===n?void 0:n.name;break;case Z.EnumEventState.UPLOAD:d=(0,i.jsx)(Ne.Z,{style:{fontSize:"1rem"},fontSize:"small"}),c=null===(s=e.eventState)||void 0===s?void 0:s.name;break;case Z.EnumEventState.TO_UPLOAD:d=(0,i.jsx)(Ce.Z,{style:{fontSize:"1rem",transform:"rotate(180deg)"},fontSize:"small"}),c=null===(r=e.eventState)||void 0===r?void 0:r.name;break;case Z.EnumEventState.TO_DOWNLOAD:d=(0,i.jsx)(Ce.Z,{style:{fontSize:"1rem"},fontSize:"small"}),c=null===(l=e.eventState)||void 0===l?void 0:l.name;break;default:d=(0,i.jsx)(Se.Z,{style:{fontSize:"1rem"},fontSize:"small"}),c="Advertencia!!! en otro estado..."}return d&&(0,i.jsx)(a.ZP,Object.assign({title:c,placement:"top",TransitionComponent:be.Z,TransitionProps:{timeout:600}},{children:(0,i.jsx)(o.Z,Object.assign({style:{margin:0,padding:0,zIndex:4},size:"small",onClick:()=>{}},{children:d}))}))},Pe=({truck:e,temporal:t,operation:n,temporalRemove:o,eventFrom:r,isFilter:c=!1,distanceToExcavator:d,excavator:u,id:g})=>{var m,h,j;const p=(0,L.T)(),{timeline:x}=(0,L.C)(P.h3),{loginResponse:{user:b}}=(0,L.C)(k.MR),[O,f]=(0,E.useState)(Number(null==x?void 0:x.initialHourmeter.toFixed(1))),{eventList:y}=(0,L.C)(z.yJ),[N,S]=(0,E.useState)(),{lostConnection:I}=(0,we.AT)(e),{statusCreateOperation:w}=(0,L.C)(Ie.yV),D=De(),[{isDragging:$},F]=(0,Oe.c)((()=>({type:fe,item:{truck:e},end:(t,i)=>{const s=i.getDropResult();i.canDrag(),null!==s&&(p((0,P.Qi)({truck:e,eventTo:null==s?void 0:s.eventTo,eventFrom:r})),p((0,Te.CB)(null==s?void 0:s.eventTo)),p((0,P.h1)(e)),(null==s?void 0:s.operation)&&p((0,R.UN)({operationId:s.operation.id,truck:e,operationOldId:n?n.id:""})))},collect:e=>({isDragging:e.isDragging(),handlerId:e.getHandlerId()})})),[o,n,e]),M=(0,E.useCallback)((()=>{var t;const n=null===(t=e.deviceAlias)||void 0===t?void 0:t.split("-");return n&&n.length>1?n[1]:""}),[e.deviceAlias]),W=(0,E.useCallback)((e=>{var t;let n;switch(null===(t=null==e?void 0:e.event)||void 0===t?void 0:t.event){case T.EnumEvent.NO_OPERATIONAL:n=e.eventState===Z.EnumEventState.LACK_OF_OPERATOR?C.DM:C.oz;break;case T.EnumEvent.OPERATIONAL:n=C.Ez;break;case T.EnumEvent.OPERATIONAL_DELAY:n=C.Gj}return n}),[null===(m=e.eventState)||void 0===m?void 0:m.event]);return(0,i.jsx)(v.Z,Object.assign({id:g||`truck-${e.deviceId}`,style:{opacity:$?.5:1},className:c&&!o?D.rootFilter:t?D.rootItemTemporal:o?D.rootItemTemporalRemove:D.rootItem,ref:F,elevation:4},{children:(0,i.jsxs)(l.Z,Object.assign({disableGutters:!0,className:D.contentTruck},{children:[(0,i.jsx)(Le.Z,{className:D.stateTruck,style:{color:I||0==(null===(h=e.sensor)||void 0===h?void 0:h.latitude)||void 0===e.sensor?C.fQ:C.FD},fontSize:"small"}),(0,i.jsxs)(s.Z,Object.assign({container:!0,onMouseDown:()=>{return t=void 0,n=void 0,s=function*(){const t=y.find((e=>e.event===r));if(t){const n={id:"",deviceId:e.deviceId,deviceAlias:e.deviceAlias,initialHourmeter:0,finalHourmeter:0,initialEventState:{id:"",name:"",eventState:Z.EnumEventState.UNKNOWN_STATE,event:Object.assign({},t)},initialState:T.EnumEvent.UNKNOWN_STATE_EVENT,finalState:T.EnumEvent.UNKNOWN_STATE_EVENT,durationTime:0,shift:Ze.Shift.UNKNOWN_SHIFT,stateRegister:0,adjustment:0,status:!1,assetType:0,guard:ke.EnumGuard.UNKNOWN_GUARD,userId:null==b?void 0:b.id};yield p((0,P.f0)(n))}},new((i=void 0)||(i=Promise))((function(e,a){function o(e){try{l(s.next(e))}catch(e){a(e)}}function r(e){try{l(s.throw(e))}catch(e){a(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,r)}l((s=s.apply(t,n||[])).next())}));var t,n,i,s}},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0,style:{marginTop:4}},{children:(0,i.jsx)(a.ZP,{title:(()=>{var t,n;return(null===(n=null===(t=e.eventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.name)?e.eventState.event.name:""})(),placement:"top",TransitionComponent:be.Z,TransitionProps:{timeout:600},children:(0,i.jsx)("label",Object.assign({className:D.titleTruck,style:{color:`${W(e.eventState)}`}},{children:M()})),onClick:()=>{}})})),(0,i.jsxs)(s.Z,Object.assign({item:!0},{children:[(0,i.jsxs)(s.Z,Object.assign({container:!0,className:D.actions,alignItems:"center"},{children:[(0,i.jsx)(Re,{truck:e}),(0,i.jsx)("div",Object.assign({style:{display:"flex",flexDirection:"row",alignItems:"center"}},{children:(0,i.jsx)(a.ZP,Object.assign({placement:"top",TransitionComponent:be.Z,TransitionProps:{timeout:600},title:(()=>{let t=!1;return null==n||n.truckList.find((n=>{n.deviceId===e.deviceId&&(t=!0)})),t})()?"Agregar Ciclo":"Número de ciclos"},{children:(0,i.jsx)("div",Object.assign({className:D.contentCycle},{children:(0,i.jsx)("label",Object.assign({className:D.labelCycleNumber,onClick:()=>{p((0,A.eh)(e))}},{children:void 0===e.cycleNumber?"0":e.cycleNumber}))}))}))}))]})),void 0!==d&&(0,i.jsx)(s.Z,Object.assign({item:!0,className:D.labelDistance},{children:(0,i.jsxs)("label",Object.assign({className:D.titleTruck},{children:[d.toFixed(2),"m"]}))})),void 0!==u&&(0,i.jsx)(s.Z,Object.assign({item:!0,className:D.labelExcavator},{children:(0,i.jsx)("label",Object.assign({className:D.titleTruck},{children:e.operationList&&e.operationList.length>0?null===(j=e.operationList[0].excavator)||void 0===j?void 0:j.deviceAlias:""}))}))]}))]}))]}))}))};var $e=n(34880);const Fe=(0,f.Z)({rootList:{flex:1,padding:2,margin:2,overflow:"auto"},rootMap:{borderRadius:16,position:"relative",right:0,left:0},mapBackground:{position:"absolute",right:0,left:0,top:0,bottom:0,zIndex:1}}),ze=({operation:e})=>{const t=(0,E.useRef)(null),[n,a]=((0,L.T)(),(0,pe._)(`RADIOSEX${e.excavatorList&&e.excavatorList.length>0?e.excavatorList[0].deviceAlias:""}`,35)),o=Fe(),r=(0,E.useRef)(null),{excavator:l,truckInRange:c,truckListInOperation:d}=(({operation:e,radio:t})=>{const[n,i]=(0,E.useState)(S.kM),[s,a]=(0,E.useState)([]),[o,r]=(0,E.useState)([]),{initial:l,truckStream:c}=(0,L.C)(ge.dc),{initial:d,excavatorStream:u}=(0,L.C)(ve.oT);return(0,E.useEffect)((()=>{if(l===de.Vj.INITIAL&&c.sensor&&c.sensor.latitude&&n.sensor&&n.sensor.latitude&&!s.some((e=>e.deviceId===c.deviceId))){const e=(0,me.xmu)([c.sensor.longitude,c.sensor.latitude]),i=(0,me.xmu)([n.sensor.longitude,n.sensor.latitude]),s=(0,me.TE$)(e,i),a=o.findIndex((e=>e.truck.deviceId===c.deviceId)),l=[...o];if(1e3*s<=t){const e={truck:c,distance:1e3*s};if(console.log("distanceBettween",s,a),-1===a){let t="";switch(n.deviceAlias.slice(0,2)){case"EX":t="excavadora";break;case"CF":t="cargador frontal"}const i=Number(c.deviceAlias.slice(-2));(0,he.jQ)(`volquete ${i} en ${t} ${n.deviceAlias.slice(-2)}`),l.push(e)}else l[a]=e;r(l)}else-1!==a&&(l.splice(a,1),r(l))}}),[c,s,t]),(0,E.useEffect)((()=>{var e;n.deviceId&&d===ue.JD.DONE&&u.deviceId===n.deviceId&&(!n.sensor&&u.sensor||u.sensor&&u.sensor.latitude!==(null===(e=n.sensor)||void 0===e?void 0:e.latitude))&&i(u)}),[u]),(0,E.useEffect)((()=>{e.excavatorList&&n.deviceId!=e.excavatorList[0].deviceId&&i(e.excavatorList[0]);let t=!1;const s=[...o];e.truckList.forEach((e=>{const n=o.findIndex((t=>t.truck.deviceId===e.deviceId));n>-1&&(s.splice(n,1),console.log("truckInRangeremommmmm",n),t=!0)})),t&&r(s),a(e.truckList)}),[e.truckList]),{truckListInOperation:s,truckInRange:o,excavator:n}})({operation:e,radio:n}),[u,v]=(0,E.useState)(!1);(0,E.useEffect)((()=>()=>{r.current=null,t.current=null}),[]),(0,E.useEffect)((()=>{let e,n;if(u&&l.deviceId&&l.sensor&&l.sensor.latitude){const i={point:[l.sensor.longitude,l.sensor.latitude],label:l.deviceAlias};e=new je([i],t.current,`ID_SOUCE_CIRCLE_${l.deviceAlias}`,`ID_LAYER_CIRCLE_${l.deviceAlias}`,$e.Xb,C.J$,!0),e.addToMap(),n=new je([i],t.current,`ID_SOUCE_EXCAVATOR_${l.deviceAlias}`,`ID_SOUCE_EXCAVATOR_${l.deviceAlias}`,1,C.sb,!1),e.addToMap(),n.addToMap(),setTimeout((()=>{var e;null===(e=t.current)||void 0===e||e.setCenter(i.point)}),100)}return()=>{e&&(e.removeOfMap(),n.removeOfMap())}}),[u,l]),(0,E.useEffect)((()=>{let e;if(u&&l.deviceId&&d.length>0){const n=d.map((e=>e.sensor?{point:[e.sensor.longitude,e.sensor.latitude],label:`C${e.deviceAlias.slice(-2)} /${e.sensor.speed.toFixed(0)}kh`}:{point:[0,0],label:""}));e=new je(n,t.current,`ID_SOUCE_TRUCKOPE_${l.deviceAlias}`,`ID_SOUCE_TRUCKOPE_${l.deviceAlias}`,1,"green",!1),e.addToMap()}return()=>{e&&e.removeOfMap()}}),[u,d]),(0,E.useEffect)((()=>{let e;if(u&&l.deviceId&&c.length>0){const n=c.map((e=>{var t,n;return{point:[e.truck.sensor?e.truck.sensor.longitude:0,e.truck.sensor?e.truck.sensor.latitude:0],label:`C${e.truck.deviceAlias.slice(-2)} /${null===(n=null===(t=e.truck)||void 0===t?void 0:t.sensor)||void 0===n?void 0:n.speed.toFixed(0)}kh`}}));e=new je(n,t.current,`ID_SOUCE_TRUCKRANGE_${l.deviceAlias}`,`ID_LAYER_TRUCKRANGE_${l.deviceAlias}`,1,C.J$,!1),e.addToMap()}return()=>{e&&e.removeOfMap()}}),[u,c]);const g=(0,E.useMemo)((()=>(0,i.jsx)(M.T5,Object.assign({style:{position:"absolute",top:0,zIndex:2}},{children:(0,i.jsx)(M.T5,Object.assign({container:!0,direction:"row"},{children:c.map((e=>{var t,n,s;const a=null===(s=null===(n=null===(t=e.truck)||void 0===t?void 0:t.eventState)||void 0===n?void 0:n.event)||void 0===s?void 0:s.event;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(Pe,{eventFrom:a,truck:e.truck,distanceToExcavator:e.distance,excavator:l},e.truck.deviceId)})}))}))}))),[c,l.deviceAlias]),m=(0,E.useMemo)((()=>(0,i.jsx)(M.P4,Object.assign({item:!0},{children:(0,i.jsx)(xe.C,{propsForm:{},propsTextField:{variant:"outlined",size:"small",label:"Radio de proximidad",style:{marginTop:8},onChange:e=>{const t=parseInt(e.target.value);t&&a(t)},value:n}})}))),[n]);return(0,i.jsxs)(s.Z,Object.assign({className:o.rootList},{children:[m,(0,i.jsxs)(M.P4,Object.assign({item:!0,className:o.rootMap},{children:[g,(0,i.jsxs)(M.T5,{children:[(0,i.jsx)(M.P4,{className:o.mapBackground}),(0,i.jsx)(ce.Z,Object.assign({map:t,dragRotate:!1,style:"mapbox://styles/dispatchgat/ckqqsfc2y46bo17sf1y29zwnj",mapContainer:r,bearing:0,pitch:15},{lat:-7.6163,lng:-78.196,zoom:18,setLoad:v},{height:"300px",dragControls:!1}),"map2")]})]}))]}))};var Me=function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};const We=(0,f.Z)({rootList:{flex:1,padding:2,margin:2,overflow:"auto"},rootNoDropItem:{padding:2,margin:2,width:32,height:"92vh"},rootListOver:{flex:1,padding:2,margin:2,overflow:"auto",background:"#80808045"},rootNotDropList:{width:300,padding:2,margin:2,overflow:"auto",zIndex:1,transform:"translateX(-50%) translateY(130px) rotate(-90deg)",msTransform:"translateX(-50%) translateY(130px) rotate(-90deg)",mozTransform:"translateX(-50%) translateY(130px) rotate(-90deg)",OTransform:"translateX(-50%) translateY(130px) rotate(-90deg)",position:"absolute",left:"50%",top:"0%"},rootNotOperation:{width:36,padding:2,margin:2,background:`${C.J$}10`,borderColor:C.J$,borderWidth:2,borderStyle:"dotted"},disabledPadding:{padding:0,paddingBottom:2,flex:1},labelExcavator:{fontSize:21,borderRadius:8,borderStyle:"dotted",padding:4,margin:2,background:"#424141",color:"#fff"}}),_e=({operation:e})=>{const t=We(),n=e.excavatorList.length>0?e.excavatorList[0]:null;return(0,i.jsxs)(M.T5,Object.assign({container:!0,className:t.disabledPadding,alignItems:"center",justifyContent:e.id?"flex-start":"flex-end"},{children:[(0,i.jsx)(M.P4,Object.assign({item:!0},{children:(0,i.jsx)(r.Z,{secondary:(0,i.jsx)("strong",Object.assign({className:t.labelExcavator},{children:null==n?void 0:n.deviceAlias}))})})),!e.id&&(0,i.jsx)(N.rU,Object.assign({style:{textDecoration:"none"},to:`/operation/create/${n?n.deviceId:""}/${n?n.id:""}`},{children:(0,i.jsx)(a.ZP,Object.assign({title:`Asignar operación a ${n?n.deviceAlias:""}`},{children:(0,i.jsx)(o.Z,Object.assign({size:"small",color:"secondary"},{children:(0,i.jsx)(h.Z,{fontSize:"small"})}))}))}))]}))},Ue=({operation:e,loading:t,setLoading:n,setRefresh:r})=>{const u=We(),[v,g]=(0,E.useState)(!1),[m,h]=(0,E.useState)(!1),{timeline:f,events:y}=(0,L.C)(P.h3),{eventList:N}=(0,L.C)(z.yJ),{operationDrop:C,openModal:S}=(0,L.C)(R.YL),{hours:M,minutes:_,seconds:U}=(()=>{const e=new Date;return{hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}})(),J=`${`00${M}`.slice(-2)}:${`00${_}`.slice(-2)}:${`00${U}`.slice(-2)}`,V=new Date,[B,Y]=(0,E.useState)(Number(null==f?void 0:f.initialHourmeter.toFixed(1))),X=`0${V.getHours()}`,q=`0${V.getMinutes()}`,[Q,ee]=(0,E.useState)(`${X.slice(-2)}:${q.slice(-2)}`),[te]=(0,H.Z)(Q,f),[ne]=(0,G.N)(J);(0,E.useEffect)((()=>{setTimeout((()=>{Y(te)}),100)}),[te]);const{loginResponse:{user:ie}}=(0,L.C)(k.MR),se=()=>{h((e=>!e))},ae=(0,L.T)(),{state:oe}=(0,L.C)(z.e5);(0,E.useEffect)((()=>{switch(oe){case D.m4.SAVING:n(!0);break;case D.m4.ERROR:n(!1);break;case D.m4.DONE:n(!1),h(!1)}}),[oe]);const re=()=>g((e=>!e)),ce=e.excavatorList.length>0?e.excavatorList[0]:null;return e.id?(0,i.jsxs)(l.Z,Object.assign({disableGutters:!0,className:u.disabledPadding},{children:[(0,i.jsx)(W.a,Object.assign({open:v,handleClose:re,handleConfirm:()=>Me(void 0,void 0,void 0,(function*(){n(!0);const t=yield(0,F.wg)(e.id);ae(t?(0,I.L8)({open:!0,msg:t,severity:"error"}):(0,I.Ui)()),n(!1),r((e=>!e)),g(!1)})),title:"Esta seguro?"},{children:(0,i.jsxs)(O.Z,Object.assign({severity:"warning"},{children:["Esta intentando finalizar la operacion ",e.excavatorList[0].deviceAlias,", si ocurre algun error se le informará"]}))})),(0,i.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,i.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,i.jsx)(_e,Object.assign({},{operation:e})),(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(a.ZP,Object.assign({title:"Cambiar Carga/Descarga/Cambiones/Excavadora"},{children:(0,i.jsx)(o.Z,Object.assign({color:"secondary",size:"small",onClick:se},{children:(0,i.jsx)(j.Z,{fontSize:"small"})}))})),(0,i.jsx)(a.ZP,Object.assign({title:"Finalizar Operación"},{children:(0,i.jsx)(o.Z,Object.assign({color:"secondary",onClick:re,size:"small"},{children:(0,i.jsx)(p.Z,{fontSize:"small"})}))})),(0,i.jsx)(a.ZP,Object.assign({title:"Detalle Operación"},{children:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(o.Z,Object.assign({color:"secondary",size:"small",onClick:()=>{ae((0,w.l4)(ce.deviceId)),ae((0,A.m1)(ce))}},{children:(0,i.jsx)(x.Z,{fontSize:"small"})}))})}))]})]})),(0,i.jsxs)(s.Z,Object.assign({item:!0,md:12},{children:[(0,i.jsx)(K.g7,{operation:e}),(0,i.jsx)(K.DQ,{operation:e}),e.truckList.length>0?(0,i.jsx)(c.Z,{size:"small",label:`${e.truckList.length} camiones`}):(0,i.jsx)(i.Fragment,{})]})),(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(null==C?void 0:C.id)&&y.eventFrom===T.EnumEvent.MAINTENANCE?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(i.Fragment,{children:e.truckTemporalList&&e.truckTemporalList.length>0&&!t&&(0,i.jsx)(a.ZP,Object.assign({title:"Guardar cambios"},{children:(0,i.jsx)(d.Z,Object.assign({size:"small",variant:"outlined",color:"secondary",startIcon:(0,i.jsx)(b.Z,{color:"secondary",fontSize:"small"}),onClick:()=>Me(void 0,void 0,void 0,(function*(){(new Date).getSeconds();const t=N.find((e=>e.event===T.EnumEvent.OPERATIONAL));(null==t?void 0:t.event)&&e.truckTemporalList.map((n=>Me(void 0,void 0,void 0,(function*(){ae((0,P.h1)(n));const i=B;if(console.log("initial: ",i),t.event){const n={event:t,eventState:{id:"",name:"",eventState:Z.EnumEventState.UNKNOWN_STATE,event:t},initialTime:`${J}`,date:ne,initialHourometer:i};ae((0,R.gI)({idDest:e.id,trucks:e.truckTemporalList,timeline:n}))}ae((0,P.Go)())})))),ae((0,R.hK)({operationId:e.id})),yield ae((0,$.RK)()),yield ae((0,R.hS)())}))},{children:"GUARDAR"}))}))})})),(0,i.jsx)(le,{open:m,operation:e,setOpen:se})]}))]})):(0,i.jsx)(_e,Object.assign({},{operation:e}))},He=({operation:e,filterList:t})=>{const n=(0,E.useMemo)((()=>{var n;return null===(n=e.truckTemporalList)||void 0===n?void 0:n.map(((n,s)=>(0,i.jsx)(Pe,{operation:e,truck:n,eventFrom:T.EnumEvent.OPERATIONAL,temporal:!0,isFilter:t.some((e=>e.deviceId===n.deviceId))},s)))}),[e.truckTemporalList]);return(0,i.jsx)(i.Fragment,{children:n})},Ge=({operation:e,filterList:t})=>{const[n,s]=(0,E.useState)(e.truckList);(0,E.useEffect)((()=>{s((t=>e.truckList&&e.truckList.length!==n.length||n.some((t=>e.truckList.some((e=>e.deviceId==t.deviceId&&(t.sensor&&e.sensor?t.cycleNumber!==e.cycleNumber||t.state!==e.state||t.eventState!==e.eventState||t.sensor.latitude!=e.sensor.latitude:t.cycleNumber!==e.cycleNumber||t.state!==e.state||t.eventState!==e.eventState)))))?e.truckList:t))}),[e.truckList]);const a=(0,E.useMemo)((()=>e.truckList.map(((n,s)=>{var a;return(0,i.jsx)(Pe,{operation:e,isFilter:t.some((e=>e.deviceId===n.deviceId)),eventFrom:T.EnumEvent.OPERATIONAL,truck:n,temporalRemove:null===(a=e.truckTemporalRemoveList)||void 0===a?void 0:a.some((e=>e.deviceId===n.deviceId))},s)}))),[n,t]);return(0,i.jsx)(i.Fragment,{children:a})},Ke=({operation:e,setRefresh:t,filterList:n})=>{const[a,o]=(0,E.useState)(!1),[r,l]=(0,E.useState)(S.kM),c=(0,L.T)();(0,E.useEffect)((()=>{e&&e.truckList&&e.truckList.length>0?l((t=>r.deviceId!==e.excavatorList[0].deviceId?e.excavatorList[0]:t)):l(S.kM)}),[e]);const[{canDrop:d,isOver:h},j]=(0,y.L)((()=>({accept:fe,drop:()=>({operation:e,eventTo:T.EnumEvent.OPERATIONAL}),collect:t=>({isOver:!!t.isOver(),canDrop:!!e.id})})),[e]);(0,E.useEffect)((()=>{h&&d&&c((0,R.Rr)(e))}),[h]);const p=We(),x=(0,E.useCallback)((()=>h&&d?p.rootListOver:h&&!d?p.rootNotDropList:p.rootList),[h,d]),b=(0,E.useMemo)((()=>(0,i.jsx)(i.Fragment,{children:r&&(0,i.jsx)(ze,{truckList:[],operation:e})})),[r,e]),O=(0,E.useMemo)((()=>(0,i.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,i.jsx)(Ge,{operation:e,filterList:n}),(0,i.jsx)(He,{operation:e,filterList:n})]}))),[e,n]);return d?(0,i.jsxs)(u.Z,Object.assign({ref:j,disablePadding:!0,component:v.Z,style:{display:"flex",flexDirection:"column"},className:x()},{children:[(0,i.jsxs)(M.P4,Object.assign({item:!0,style:{flex:1}},{children:[(0,i.jsx)(Ue,Object.assign({},{operation:e,setLoading:o,loading:a,setRefresh:t})),(0,i.jsx)(g.Z,{orientation:"horizontal"}),(0,i.jsx)(U,{loading:a}),(0,i.jsx)(m.Z,{height:4}),O]})),b]})):(0,i.jsx)(u.Z,Object.assign({disablePadding:!0,component:v.Z,className:p.rootNotOperation},{children:(0,i.jsx)("div",Object.assign({className:p.rootNotDropList},{children:(0,i.jsx)(Ue,Object.assign({},{operation:e,setLoading:o,loading:a,setRefresh:t}))}))}))};var Je=n(14129),Ve=n(57865);const Be=e=>{if(!e)return"";const t=Q.PW[e.type];switch(e.type){case 1:return e.pit&&e.pit.projectList&&e.pit.projectList.length>0&&e.pit.projectList[0].polygonList&&e.pit.projectList[0].polygonList.length>0?`${e.pit.projectList[0].name} - ${e.pit.projectList[0].polygonList[0].name}`:"";case 3:return e[t]&&e[t].cellList&&e[t].cellList.length>0?e[t].cellList[0].name:"";default:return""}},Ye=e=>{if(!e&&1!==e.type)return"";const t=Q.PW[e.type];return`${"dme"===t?"Desm.":"stock"===t?"STK":"Mine."} ${e[t]&&e[t].cellList&&e[t].cellList.length>0?e[t].cellList[0].name:""}`},Xe=()=>{const{operationList:e,status:t,operationDrop:n}=(0,L.C)(R.YL),{truckInfoList:i}=(0,L.C)($.ej),{initial:s}=(0,L.C)(oe.kW),a=(0,L.T)(),[o,r]=(0,E.useState)([]),[l,c]=(0,E.useState)();return(0,E.useEffect)((()=>{if(t===ue.JD.DONE&&s!==de.Vj.LOADING){const t=null==e?void 0:e.map((e=>{var t,n,i;return Object.assign(Object.assign({},e),{excavator:e.excavatorList.length>0?e.excavatorList[0]:{},typeUpload:Q.WW[null===(t=e.upload)||void 0===t?void 0:t.type],labelUpload:`${Q.WW[null===(n=e.upload)||void 0===n?void 0:n.type]} ${e.upload?Be(e.upload):""}`,labelDownload:e.download?`${Ye(e.download)}`:"",typeDownload:Q.WW[null===(i=e.download)||void 0===i?void 0:i.type],labelstate:Q.J8[e.state],cycles:e.cycleList.length,truckList:e.truckList.map((e=>{var t;return Object.assign(Object.assign({},e),{deviceAliasNumber:Number(null===(t=e.deviceAlias.match(/\d/g))||void 0===t?void 0:t.join(""))})})).sort(((e,t)=>e.deviceAliasNumber-t.deviceAliasNumber))})}));r(t)}else r([]);c(null==e?void 0:e.find((e=>e.id===(null==n?void 0:n.id))))}),[e]),(0,E.useEffect)((()=>{(null==e?void 0:e.length)>0&&(null==i?void 0:i.length)>0&&a((0,R.Vb)({truckList:i}))}),[i,t]),{operationsAll:o,status:t,operationDropRes:l}},qe=()=>(0,i.jsx)(s.Z,Object.assign({container:!0,justifyContent:"center",alignItems:"center"},{children:(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsx)(Y.Z,{children:"No data found"})}))}));var Qe=n(41120),et=n(58365);const tt=({height:e,width:t})=>(0,i.jsx)(s.Z,Object.assign({container:!0,justifyContent:"center",alignItems:"center"},{children:(0,i.jsx)(et.Z,{height:e,width:t,variant:"rect"})}));var nt=n(14741),it=n(17215),st=n(59693);const at=(0,Qe.Z)((e=>({search:{position:"relative",marginRight:2,borderRadius:e.shape.borderRadius,backgroundColor:(0,st.Fq)(e.palette.common.white,.15),"&:hover":{backgroundColor:(0,st.Fq)(e.palette.common.white,.25)},marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{width:"auto"}},searchIcon:{padding:e.spacing(0,0),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},cancelIcon:{padding:e.spacing(0,0),height:"100%",alignItems:"center",justifyContent:"center",display:"flex"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:`calc(1em + ${e.spacing(1)}px)`,paddingRight:`calc(1em + ${e.spacing(1)}px)`,transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:"40ch","&:focus":{width:"50ch"}}}}))),ot=({search:e,setSearch:t})=>{const n=at(),a=(0,E.useRef)();(0,E.useEffect)((()=>{document.onkeydown=o}),[]);const o=(0,E.useCallback)((e=>{"Escape"===e.key&&(l(),setTimeout((()=>{var e;console.log("Escape",a.current),null===(e=a.current)||void 0===e||e.focus()}),300))}),[]),r=(0,E.useCallback)((e=>{t(e.target.value)}),[]),l=(0,E.useCallback)((()=>{t("")}),[]);return(0,i.jsx)(v.Z,Object.assign({style:{marginTop:2,marginRight:2}},{children:(0,i.jsx)(s.Z,Object.assign({container:!0,alignItems:"center"},{children:(0,i.jsxs)("div",Object.assign({className:n.search},{children:[(0,i.jsx)("div",Object.assign({className:n.searchIcon},{children:(0,i.jsx)(it.Z,{color:"primary",fontSize:"small"})})),(0,i.jsx)(nt.Z,{color:"primary",value:e,autoFocus:!0,inputRef:a,onKeyDown:o,onChange:r,placeholder:"Buscar...",classes:{root:n.inputRoot,input:n.inputInput},inputProps:{"aria-label":"search"}})]}))}))}))};var rt=n(64436),lt=n(52541),ct=n(30553),dt=n(40074),ut=n(95477);function vt({open:e,setOpen:t,handleClickConfirm:n,children:s,loading:a,handleClose:o}){return(0,i.jsxs)(J.Z,Object.assign({fullWidth:!0,maxWidth:"lg",open:e,onClose:o||(()=>{t(!1)}),"aria-labelledby":"max-width-dialog-title"},{children:[(0,i.jsx)(B.Z,{children:s}),(0,i.jsx)(q.Z,{children:a?(0,i.jsx)(ut.Z,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,Object.assign({onClick:o,size:"small",color:"primary"},{children:"Cancel"})),(0,i.jsx)(d.Z,Object.assign({onClick:n,variant:"outlined",size:"small",color:"secondary"},{children:"Confirm"}))]})})]}))}var gt=n(76533),mt=n(10465),ht=n(13258);const jt=(0,Qe.Z)((e=>({disabledSpacing:{margin:0,padding:0,width:"auto"},checkbox:{"& .MuiCheckbox-root":{margin:0,padding:0,paddingLeft:8}}}))),pt=E.memo((({truck:e,checked:t,trucksSelect:n,setTrucksSelect:s,disableWithOperation:a,handleonchangeTruck:o})=>{var c;const d=jt(),u=e.state>=0||0!==(null===(c=e.sensor)||void 0===c?void 0:c.latitude)?e.state===Z.EnumEventState.UNKNOWN_STATE&&e.operationList&&e.operationList.length>0?"En camino":ue.SS[e.state]:"Conexión perdida",v=e.operationList&&e.operationList.length>0&&e.operationList[0]&&e.operationList[0].excavator?e.operationList[0].excavator.deviceAlias:"";return(0,i.jsx)(l.Z,Object.assign({button:!0,dense:!0,className:d.disabledSpacing,disabled:!!a&&!!v},{children:(0,i.jsx)(ct.Z,{className:d.checkbox,onChange:()=>{const t=n.findIndex((t=>e.deviceId===t.deviceId));-1===t?n.push(e):n.splice(t,1),s(JSON.parse(JSON.stringify(n)))},control:(0,i.jsx)(ht.Z,{onClick:()=>o(e),size:"small",checked:t,inputProps:{style:{padding:0}}}),label:(0,i.jsx)(r.Z,{primary:`${e.deviceAlias} ${v?` ➜ ${v}`:""} (${u})`})})}))})),xt=(0,Qe.Z)({root:{paddingLeft:4,maxHeight:"60vh",overflowY:"scroll",boxShadow:"inset 0px -2px 10px 0px rgb(17 16 10 / 56%)",borderRadius:4},searchContainer:{marginRight:8}}),bt=E.memo((({trucksSelect:e,setTrucksSelect:t,handleonchangeTruck:n,disableWithOperation:a})=>{const{truckInfoList:o}=(0,L.C)($.ej),r=xt(),[l,c]=(0,E.useState)([]),[d,v]=(0,E.useState)("");(0,E.useEffect)((()=>{c(o.filter((e=>e.deviceAlias.toLowerCase().includes(d.toLowerCase()))))}),[o]);const g=(0,E.useCallback)((e=>{if(e){const t=e.target?e.target.value.toUpperCase():"";c(o.filter((e=>e.deviceAlias.toUpperCase().includes(t)))),v(t)}}),[o]),m=(0,E.useCallback)((()=>{c(o),v("")}),[o]);return(0,i.jsxs)(u.Z,Object.assign({dense:!0,disablePadding:!0,style:{margin:4,paddingTop:4}},{children:[(0,i.jsx)(mt.V,{functionFilter:g,functionCancel:m}),(0,i.jsx)(s.Z,Object.assign({container:!0,className:r.root},{children:l.map((s=>{return(0,i.jsx)(E.Fragment,{children:(0,i.jsx)(pt,{handleonchangeTruck:n,disableWithOperation:a,checked:(o=s,!!e.find((e=>o.deviceId===e.deviceId))),trucksSelect:e,setTrucksSelect:t,truck:s})},s.deviceId);var o}))}))]}))}));const Ot=({open:e,setOpen:t,setRefresh:n,operations:o})=>{const c=(0,L.T)(),[d,g]=(0,E.useState)([]),[m,h]=(0,E.useState)(""),[j,p]=(0,E.useState)([]),[x,b]=(0,E.useState)(!1),[f,y]=E.useState(!1);(0,E.useEffect)((()=>{c($.RK),c(oe.CE)}),[]);const N=e=>{h(e.target.value)};return(0,i.jsxs)(vt,Object.assign({},{loading:f},{open:e,handleClickConfirm:()=>{j.length<=0||m.length<=0?c((0,I.L8)({open:!0,msg:"Debe seleccionar almenos una excavadora y un camión",severity:"warning"})):b(!0)},handleClose:()=>{t(!1),p([]),h("")}},{children:[(0,i.jsx)(s.Z,Object.assign({container:!0},{children:(0,i.jsx)(s.Z,Object.assign({item:!0,xs:12},{children:(0,i.jsx)(Y.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16}},{children:"Reasignación de camiones"}))}))})),(0,i.jsxs)(s.Z,Object.assign({container:!0,style:{paddingLeft:4}},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0,xs:6},{children:(0,i.jsx)(v.Z,Object.assign({elevation:4},{children:(0,i.jsx)(bt,{handleonchangeTruck:()=>{},setTrucksSelect:p,trucksSelect:j})}))})),(0,i.jsx)(s.Z,Object.assign({item:!0,xs:6},{children:(0,i.jsx)(v.Z,Object.assign({style:{margin:10}},{children:(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(l.Z,{children:(0,i.jsx)(r.Z,{secondary:"Excavadora de destino"})}),(0,i.jsx)(l.Z,{children:(0,i.jsx)(r.Z,{children:(0,i.jsx)(rt.Z,Object.assign({component:"fieldset"},{children:(0,i.jsx)(lt.Z,Object.assign({row:!0,"aria-label":"gender",name:"radio-buttons-group"},{children:o.map((e=>{var t;return(0,i.jsx)(a.ZP,Object.assign({title:e.state!==Q.J8.Operando?"Excavadora sin operación":"Excavadora de destino"},{children:(0,i.jsx)(ct.Z,{value:e.id,disabled:e.state!==Q.J8.Operando,control:(0,i.jsx)(dt.Z,{disabled:e.state!==Q.J8.Operando}),onChange:N,label:`  ${null===(t=e.excavatorList[0])||void 0===t?void 0:t.deviceAlias}`})}),e.id)}))}))}))})})]})}))}))]})),(0,i.jsx)(W.a,Object.assign({open:x,handleClose:()=>{b(!1)},handleConfirm:()=>{b(!1),t(!1),p([]),h(""),((e,t,n,i,s)=>{var a,o,r,l;a=void 0,o=void 0,l=function*(){n(!0);const s=yield(0,gt.e1)(e,t,void 0);console.log("responseAssigment",s),n(!1),i((e=>!e));let a="";s.truckErrorList.length>0&&s.truckErrorList.forEach((e=>{const t=1===e.state?"CARGANDO":"A DESCARGA";a+=` ${e.truckError.deviceAlias}=> ${t},`})),""!==a&&alert(`Las siguientes unidades no han podido ser reasignadas: ${a}`)},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{s(l.next(e))}catch(e){t(e)}}function i(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){var s;t.done?e(t.value):(s=t.value,s instanceof r?s:new r((function(e){e(s)}))).then(n,i)}s((l=l.apply(a,o||[])).next())}))})(m,j,y,n)},title:"Area you sure?"},{children:(0,i.jsx)(O.Z,Object.assign({severity:"warning"},{children:"Intentaremos mover estos camiones, si ocurre algun error se le informará"}))}))]}))};var ft=n(73099),Et=n(31125);const yt=({enumEvent:e})=>{const{truck:t,events:n}=(0,L.C)(P.h3),{eventTo:s,eventFrom:a}=n;return(0,i.jsx)(i.Fragment,{children:s==T.EnumEvent.OPERATIONAL&&a==T.EnumEvent.MAINTENANCE&&e==a||s==e?(0,i.jsx)(Pe,{eventFrom:T.EnumEvent.UNKNOWN_STATE_EVENT,id:`truck-hormeter-${null==t?void 0:t.deviceId}`,truck:t,isFilter:!1},null==t?void 0:t.deviceId):(0,i.jsx)(i.Fragment,{})})};var Nt=n(11818);const Ct=(0,Qe.Z)({rootNoDropItem:{},rootListOver:{marginBottom:4,background:"#80808045"},root:{padding:2},rootList:{marginBottom:4},ListItem:{padding:0,margin:0},itemHeaderList:{flex:1,paddingLeft:2},textHeaderList:{margin:0},iconTextList:{padding:0,margin:0},chipText:{height:12,color:"#fff",fontWeight:"bold"}}),St=({items:e,filterList:t,title:n,useVisibleList:s,keyState:a,isAviable:o})=>{(0,L.T)();const d=Ct(),[{canDrop:g,isOver:m},h]=(0,y.L)((()=>({accept:fe,drop:()=>({eventTo:a}),collect:e=>({isOver:e.isOver(),canDrop:!0})})),[]),j=(0,E.useCallback)((()=>m&&g?d.rootListOver:d.rootList),[m,g]),[p,x]=s,b=(0,E.useMemo)((()=>e.map((e=>(0,i.jsx)(Pe,{eventFrom:a,truck:e,isFilter:t.some((t=>t.deviceId===e.deviceId))},e.deviceId)))),[e,t]),[O,f]=(0,E.useState)(!1),N=(0,E.useCallback)((()=>{const e=p.findIndex((e=>e.value===a));if(e>-1){f((e=>!e));const t=JSON.parse(JSON.stringify(p));t[e].visible=!p[e].visible,x(t)}console.log("Visibility: ",p,a)}),[p]);return(0,i.jsxs)(u.Z,Object.assign({ref:!1===o?h:null,component:v.Z,disablePadding:!0,className:j()},{children:[(0,i.jsx)(l.Z,Object.assign({button:!0,disableGutters:!0,className:d.ListItem,onClick:N},{children:(0,i.jsxs)(M.T5,Object.assign({container:!0,justifyContent:"space-between",alignItems:"center"},{children:[(0,i.jsxs)(M.P4,Object.assign({className:d.itemHeaderList,container:!0,direction:"column",justifyContent:"center",alignContent:"flex-start"},{children:[(0,i.jsx)(r.Z,{className:d.textHeaderList,secondary:n}),(0,i.jsx)(c.Z,{size:"small",className:d.chipText,color:"primary",label:`(${e.length}) camiones`})]})),e.length?(0,i.jsx)(M.hU,Object.assign({size:"small",className:d.iconTextList},{children:O?(0,i.jsx)(ft.Z,{fontSize:"small"}):(0,i.jsx)(Et.Z,{fontSize:"small"})})):(0,i.jsx)(i.Fragment,{})]}))})),(0,i.jsx)(M.iz,{orientation:"horizontal"}),(0,i.jsx)(be.Z,Object.assign({in:!O,mountOnEnter:!0,unmountOnExit:!0},{children:(0,i.jsxs)(M.T5,Object.assign({container:!0,justifyContent:"center"},{children:[b,(0,i.jsx)(yt,{enumEvent:a})]}))}))]}))},Lt=({filterList:e})=>{const t=(0,L.T)(),{timelineObject:n}=(0,L.C)(P.h3),[s,a,o,r]=(0,Nt.y)(n),{mantoList:l,DOperativeList:c,NOperativeList:d}=(()=>{const{truckAvailable:e}=(0,L.C)(R.YL),[t,n]=(0,E.useState)([]),[i,s]=(0,E.useState)([]),[a,o]=(0,E.useState)([]);return(0,E.useEffect)((()=>{n((t=>{const n=e.filter((e=>{var t,n;return e.eventState&&(null===(n=null===(t=e.eventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===T.EnumEvent.MAINTENANCE}));return t.length===n.length&&JSON.stringify(t)===JSON.stringify(n)?t:n})),s((t=>{const n=e.filter((e=>{var t,n;return e.eventState&&(null===(n=null===(t=e.eventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===T.EnumEvent.OPERATIONAL_DELAY}));return t.length===n.length&&JSON.stringify(t)===JSON.stringify(n)?t:n})),o((t=>{const n=e.filter((e=>{var t,n,i,s,a,o;return(null===(n=null===(t=e.eventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===T.EnumEvent.NO_OPERATIONAL||(null===(s=null===(i=e.eventState)||void 0===i?void 0:i.event)||void 0===s?void 0:s.event)===T.EnumEvent.OPERATIONAL&&0===e.operationList.length||(null===(o=null===(a=e.eventState)||void 0===a?void 0:a.event)||void 0===o?void 0:o.event)===T.EnumEvent.UNKNOWN_STATE_EVENT&&"UNKNOWN"!==e.eventState.name}));return t.length===n.length&&JSON.stringify(t)===JSON.stringify(n)?t:n}))}),[e]),{mantoList:t,DOperativeList:i,NOperativeList:a}})();(0,E.useEffect)((()=>{t((0,Te.TU)())}),[]);const u=Ct(),v=(0,pe._)("VISIBLE_STATES_TABS",Object.keys(T.EnumEvent).map(((e,t)=>({value:T.EnumEvent[e],label:e,visible:!1})))),g=(0,E.useMemo)((()=>(0,i.jsx)(M.T5,Object.assign({className:u.root},{children:(0,i.jsx)(St,{items:d,filterList:e,title:"NOPERATIVO",useVisibleList:v,keyState:T.EnumEvent.NO_OPERATIONAL,isAviable:s})}))),[d,e,v]),m=(0,E.useMemo)((()=>(0,i.jsx)(M.T5,Object.assign({className:u.root},{children:(0,i.jsx)(St,{items:l,filterList:e,title:"MANTO",useVisibleList:v,keyState:T.EnumEvent.MAINTENANCE,isAviable:r})}))),[l,e,v]),h=(0,E.useMemo)((()=>(0,i.jsx)(M.T5,Object.assign({className:u.root},{children:(0,i.jsx)(St,{items:c,filterList:e,title:"DOPERATIVO",useVisibleList:v,keyState:T.EnumEvent.OPERATIONAL_DELAY,isAviable:o})}))),[c,e,v]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(M.T5,Object.assign({className:u.root},{children:[g,m,h]}))})};var Tt=n(89550),Zt=n(89452),kt=n(71308),It=n(15635),At=n(47463),wt=n(51034);const Dt=(0,Qe.Z)({paddingContainer:{padding:8}}),Rt=({timeline:e,truck:t,eventSelect:n,setRefresh:a})=>{var o,r;const l=Dt(),c=(0,E.useRef)(),u=(0,E.useRef)(),g=(0,E.useRef)(),m=(0,L.T)(),{stateCreateTimeline:h,statusCreateOperation:j}=(0,L.C)(Ie.yV),{eventStateList:p}=((0,It.r)(j),(0,L.C)(z.eG)),[x,b]=(0,E.useState)([]),[O,f]=(0,E.useState)(Number(e.initialHourmeter.toFixed(1))),[y,N]=(0,E.useState)(null),[C,S]=(0,E.useState)(null),{hours:I,minutes:A,seconds:w}=(()=>{const e=new Date;return{hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}})(),D=`${`00${I}`.slice(-2)}:${`00${A}`.slice(-2)}`,[F]=(0,G.N)(D),{loginResponse:{user:W}}=(0,L.C)(k.MR),{events:_}=(0,L.C)(P.h3),{eventTo:U,eventFrom:K}=_,{eventList:J}=(0,L.C)(z.yJ),{operationDropRes:V}=Xe(),B=new Date,q=`0${B.getHours()}`,Q=`0${B.getMinutes()}`,[ee,te]=(0,E.useState)(`${q.slice(-2)}:${Q.slice(-2)}`),[ne]=(0,H.Z)(ee,e);(0,E.useEffect)((()=>{setTimeout((()=>{f(ne)}),100)}),[ne]),(0,E.useEffect)((()=>{m(Te.TU)}),[J]),(0,E.useEffect)((()=>{p.length>0&&(b(p),N(p[0]))}),[p,n]),(0,E.useEffect)((()=>{c&&c.current&&(c.current.focus(),c.current.setSelectionRange(c.current.value.length-2,c.current.value.length))}),[c]);const ie=e=>{if("Scape"===e.key)return N(null),void setTimeout((()=>{var e;S(null),null===(e=g.current)||void 0===e||e.focus()}),100);if(("Enter"===e.key||"Tab"===e.key)&&p.length>0){if(C)return N(C),void setTimeout((()=>{var e;S(null),null===(e=g.current)||void 0===e||e.focus()}),100);if(y)ae();else{const e=x.filter((e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(g.current?g.current.value.toLocaleLowerCase():"")}));e.length>0&&(N(e[0]),setTimeout((()=>{S(null)}),100))}}else N(null)},ae=()=>{return i=void 0,s=void 0,o=function*(){if(J.find((e=>e.event===n)),y){const i=e.finalState,s=e.shift,a=e.stateRegister,o=Object.assign({},y);n===T.EnumEvent.OPERATIONAL&&(o.eventState=Z.EnumEventState.UNKNOWN_STATE,o.id="",o.name="UNKNOWN");const r=Number(O);console.log("initialHorometer",r);let l=(new Date).getSeconds();if(r>=0){const e={id:"",deviceAlias:t.deviceAlias,deviceId:t.deviceId,initialHourmeter:r,adjustment:0,durationTime:0,finalHourmeter:0,initialTime:`${ee}:${l<10?`0${l}`:l}`,initialEventState:o,initialState:n,finalState:i,shift:s,status:!1,stateRegister:a,assetType:Ae.EnumAssetType.TRUCK,guard:ke.EnumGuard.UNKNOWN_GUARD,userId:null==W?void 0:W.id};switch(n){case T.EnumEvent.MAINTENANCE:(0,P.hO)(e),m((0,Ie.Zy)({timeline:e,hour:`${ee}:${l<10?`0${l}`:l}`})),m((0,R.uP)());break;case T.EnumEvent.NO_OPERATIONAL:o.eventState===Z.EnumEventState.LACK_OF_OPERATOR&&t.operationList.length>0?yield(0,gt.g$)([t],t.operationList[0].id,e,F):(yield m((0,Ie.Zy)({timeline:e,hour:`${ee}:${l<10?`0${l}`:l}`})),m((0,P.Go)()));break;case T.EnumEvent.OPERATIONAL:const n={event:o.event,eventState:o,initialTime:`${ee}:${l<10?`0${l}`:l}`,date:F,initialHourometer:r},i=V;V&&(m((0,R.gI)({idDest:i.id,trucks:i.truckTemporalList,timeline:n})),m((0,R.hK)({operationId:i.id})),m((0,Ie.bq)()));break;case T.EnumEvent.OPERATIONAL_DELAY:(0,P.hO)(e),yield m((0,Ie.Zy)({timeline:e,hour:`${ee}:${l<10?`0${l}`:l}`})),m((0,R.uP)())}}else{const e={code:0,message:"Ingrese un horometro correcto",success:!1};m((0,wt.Qx)(e))}}else{const e={code:0,message:"Seleccionar un evento",success:!1};m((0,wt.Qx)(e))}m((0,P.Go)()),yield m((0,$.RK)()),yield m((0,R.hS)())},new((a=void 0)||(a=Promise))((function(e,t){function n(e){try{l(o.next(e))}catch(e){t(e)}}function r(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof a?i:new a((function(e){e(i)}))).then(n,r)}l((o=o.apply(i,s||[])).next())}));var i,s,a,o};return(0,i.jsx)(v.Z,Object.assign({elevation:4},{children:(0,i.jsxs)(s.Z,Object.assign({className:l.paddingContainer},{children:[(0,i.jsxs)(Y.Z,{children:["Camión ",t.deviceAlias]}),(0,i.jsxs)(s.Z,{children:[(0,i.jsx)("div",{children:`De: ${null===(r=null===(o=e.initialEventState)||void 0===o?void 0:o.event)||void 0===r?void 0:r.name} => ${(e=>{var t;return null===(t=J.find((t=>t.event===e)))||void 0===t?void 0:t.name})(U)}`}),(0,i.jsxs)("div",{children:["Horometro aprox: ",e.initialHourmeter.toFixed(1),"h"]}),(0,i.jsxs)(s.Z,Object.assign({style:{marginTop:8,minHeight:"25vh"}},{children:[(()=>{if(U===T.EnumEvent.MAINTENANCE||K===T.EnumEvent.MAINTENANCE)return!0})()&&(0,i.jsx)(xe.C,{propsForm:{},propsTextField:{variant:"outlined",autoFocus:!1,size:"small",label:"Horometro de ingreso",inputRef:c,onChange:e=>{e.target.value&&f(e.target.value)},value:O,inputProps:{onKeyDown:e=>{"Enter"===e.key&&u.current&&u.current.focus()}}}}),(0,i.jsx)(xe.C,{propsForm:{},propsTextField:{variant:"outlined",autoFocus:!1,size:"small",inputRef:u,type:"time",value:ee,onChange:e=>{te(e.target.value)},inputProps:{onKeyDown:e=>{"Enter"===e.key&&g.current&&(console.log("eValue: ",e," autocomplete: ",g),g.current.focus(),g.current.setSelectionRange(0,g.current.value.length))}}}}),(0,i.jsx)(At.I,{height:8,width:"100%"}),(0,i.jsx)(M.T5,{children:K===T.EnumEvent.MAINTENANCE&&U===T.EnumEvent.OPERATIONAL?(0,i.jsx)(i.Fragment,{children:"CAMBIANDO A OPERATIVO"}):(0,i.jsx)(se.ZP,{renderInput:e=>(0,i.jsx)(X.Z,Object.assign({},e,{fullWidth:!0,variant:"outlined",onKeyDown:ie,inputRef:g})),options:x,fullWidth:!0,blurOnSelect:!0,onChange:(e,t)=>N(t),size:"small",value:y,onHighlightChange:(e,t)=>{S(t)},getOptionLabel:e=>e.name,openOnFocus:!0})})]})),(0,i.jsxs)(s.Z,Object.assign({container:!0,style:{marginTop:8,gap:4},justifyContent:"flex-end"},{children:[(0,i.jsx)(d.Z,Object.assign({onClick:()=>{m((0,P.Go)()),m((0,R.uP)())},size:"small",variant:"outlined",color:"primary"},{children:"CANCELAR"})),(0,i.jsx)(d.Z,Object.assign({disabled:h===ue.JD.LOADING,size:"small",variant:"contained",color:"secondary",onClick:ae},{children:"CONFIRMAR"}))]}))]})]}))}))},Pt=(0,Qe.Z)({modalStyle:{minWidth:"10%",minHeight:"10%",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,justifyContent:"center",textAlign:"center",alignItems:"center",outline:"none"}}),$t=({setRefresh:e})=>{const[t,n]=(0,E.useState)(null),{eventSelect:s}=(0,L.C)(z.yJ),{openModal:a,truck:o,loadingCurrentTimeline:r,timeline:l}=(0,L.C)(P.h3),c=(0,L.T)(),d=Pt();(0,E.useEffect)((()=>{if(o){const e=document.getElementById(`truck-hormeter-${o.deviceId}`);e&&n(e)}}),[o]);const u=()=>{c((0,P.Go)()),c((0,R.uP)()),n(null),c((0,R.f1)()),c((0,$.RK)())};(0,E.useEffect)((()=>{a||n(null)}),[a]),(0,E.useEffect)((()=>{window.onkeydown=v}),[]),(0,E.useEffect)((()=>{c((0,Zt.Gy)(s))}),[s]);const v=e=>{"Escape"===e.key&&u()};return(0,i.jsx)(i.Fragment,{children:t&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(Tt.Z,Object.assign({open:a,onClose:u},{children:(0,i.jsx)("div",Object.assign({className:d.modalStyle},{children:!r&&o&&l?(0,i.jsx)(Rt,{timeline:l,truck:o,setRefresh:e,eventSelect:s}):(0,i.jsx)("div",{children:(0,i.jsx)(kt.g,{})})}))}))})})};var Ft=n(70164),zt=n(33901),Mt=n(10646);const Wt=({idTruck:e})=>{const t=(0,E.useRef)(),n=(0,E.useRef)(),[r,l]=(0,E.useState)([]),[u,v]=(0,E.useState)({label:"",id:"",value:""}),{truckInfoList:g}=(0,L.C)($.ej),{excavatorInfoList:h}=(0,L.C)(oe.kW),{statusCycle:j}=(0,L.C)(A.XE),[p]=(0,It.r)(j),[x,b]=(0,E.useState)(!1),O=(0,L.T)(),[f,y]=(0,E.useState)(),[N,C]=(0,E.useState)(),[S]=(0,Mt.l)(new Date),[T]=(0,Mt.i)(new Date),[Z,k]=(0,E.useState)({date:`${S}T${T}`}),{truckSelect:I}=(0,L.C)(A.XE),D={id:"",centroid:void 0,pointList:void 0,name:"Desconocido",idDme:void 0,color:void 0},[R,P]=(0,E.useState)(D),[F,M]=(0,E.useState)(D),[W,_]=(0,E.useState)(D),{dmeCellList:U,padCellList:H,stockCellList:G,polygonList:K}=(0,L.C)(z.WD),[J,V]=(0,E.useState)([]),[B,q]=(0,E.useState)([]),[Q,te]=(0,E.useState)([]);(0,E.useEffect)((()=>{V([R,...U]),q([F,...H]),te([W,...G])}),[U,H,G]);const[ne,ie]=(0,E.useState)(ae.f.CHANGE_NOTHING),[le,ce]=(0,E.useState)(re.TypeDownload.UNKNOWN),de=(e,t,n)=>{const i=t.find((t=>t.id===e));i&&y(Object.assign(Object.assign({},i),{type:n}))},ve=(0,E.useCallback)((()=>(0,ae.eq)(ne,Q,le,J,B)),[ne,K,Q,le,J,B]),ge=(0,E.useCallback)((()=>(0,ae.M6)(h)),[h]);return(0,E.useEffect)((()=>{v(N?{label:`${null==N?void 0:N.deviceAlias}`,id:`${null==N?void 0:N.deviceId}`,value:`${null==N?void 0:N.deviceId}`}:{label:"",id:"",value:""})}),[N]),(0,E.useEffect)((()=>{b(!!f&&!!N&&!!Z.date)}),[f,N,Z]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Y.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16,color:"black"}},{children:`Agregar Ciclo al camión ${e}`})),(0,i.jsx)(m.Z,{width:"100%",height:8}),(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"column",style:{padding:"0.4rem",alignItems:"center"}},{children:[(0,i.jsx)(m.Z,{width:"100%",height:8}),(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,i.jsx)(Y.Z,Object.assign({style:{color:"black"}},{children:"Descarga:"})),(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsx)(s.Z,Object.assign({container:!0},{children:f&&(0,i.jsx)(a.ZP,Object.assign({title:"Nueva Descarga"},{children:(0,i.jsx)(o.Z,Object.assign({color:"primary",size:"small"},{children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ee.Z,{}),(0,i.jsx)(c.Z,{size:"small",color:"secondary",label:f.name,onDelete:()=>y("")})]})}))}))}))}))]}))})),(0,i.jsx)(m.Z,{width:"100%",height:8}),(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"row",justifyContent:"center"},{children:[(0,i.jsxs)(Y.Z,Object.assign({style:{color:"black"}},{children:["Excavadora:"," "]})),N&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ee.Z,{color:"primary"}),(0,i.jsx)(c.Z,{size:"small",color:"secondary",label:null==N?void 0:N.deviceAlias,onDelete:()=>{C(void 0),v({label:"",id:"",value:""})}})]})]}))})),j==ue.JD.LOADING?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ut.Z,{})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.Z,{height:8}),(0,i.jsxs)(s.Z,Object.assign({item:!0,style:{marginTop:8}},{children:[(0,i.jsx)(X.Z,{id:"date",label:"Fecha",type:"datetime-local",name:"date",value:Z.date,onChange:e=>{const t=e.target;k(Object.assign(Object.assign({},Z),{[t.name]:e.target.value}))},InputLabelProps:{shrink:!0,required:!0},error:void 0===Z}),(0,i.jsx)(m.Z,{height:12}),(0,i.jsxs)("div",Object.assign({style:{display:"flex",flexDirection:"row",height:"100px"}},{children:[(0,i.jsx)(se.ZP,{size:"small",value:u,blurOnSelect:!0,onChange:(e,t)=>{((e,t)=>{const n=t.find((t=>t.deviceId===e));n&&C(n)})(null!=t?t.value:"",h)},options:ge(),renderTags:(e,t)=>e.map(((e,n)=>(0,i.jsx)(c.Z,Object.assign({variant:"outlined",label:e.label},t({index:n}))))),style:{width:150},getOptionLabel:e=>e.label,disableClearable:!0,filterSelectedOptions:!0,renderInput:e=>(0,i.jsx)(X.Z,Object.assign({},e,{autoFocus:!0,inputRef:n,label:"Excavadora",variant:"outlined",fullWidth:!0,error:void 0===N}))}),(0,i.jsx)(m.Z,{width:4}),r.length<3&&(0,i.jsx)(se.ZP,{size:"small",value:r,blurOnSelect:!0,onChange:(e,n)=>{switch(l(n),n.length){case 0:ie(ae.f.CHANGE_DOWNLOAD),ce(re.TypeDownload.UNKNOWN);break;case 1:ie(ae.f.CHANGE_DOWNLOAD),ce(Number(n[0].value)),ne===ae.f.CHANGE_DOWNLOAD&&ce(Number(n[0].value));break;case 2:if(ne===ae.f.CHANGE_DOWNLOAD)switch(le){case re.TypeDownload.DME:de(n[1].id,J,le);break;case re.TypeDownload.PAD:de(n[1].id,B,le);break;case re.TypeDownload.STOCK:de(n[1].id,Q,le)}ce(re.TypeDownload.UNKNOWN),ie(ae.f.CHANGE_DOWNLOAD),l([])}setTimeout((()=>{var e,n;null===(e=t.current)||void 0===e||e.focus(),null===(n=t.current)||void 0===n||n.click()}),100)},options:ve(),multiple:!0,renderTags:(e,t)=>e.map(((e,n)=>(0,i.jsx)(c.Z,Object.assign({variant:"outlined",label:e.label},t({index:n}))))),style:{width:200},getOptionLabel:e=>e.label,openOnFocus:!0,disableClearable:!0,filterSelectedOptions:!0,renderInput:e=>(0,i.jsx)(X.Z,Object.assign({},e,{autoFocus:!0,inputRef:t,label:"Agrega Descarga",variant:"outlined",fullWidth:!0,error:void 0===f}))})]}))]})),(0,i.jsx)(m.Z,{height:30}),(0,i.jsxs)(s.Z,Object.assign({item:!0,style:{display:"flex",flexDirection:"column",alignItems:"center"}},{children:[(0,i.jsx)(d.Z,Object.assign({variant:"outlined",size:"small",color:"secondary",onClick:()=>{return e=void 0,t=void 0,i=function*(){const e={date:Z.date,newDownload:f,excavator:N,truck:I};e.date&&e.newDownload&&e.excavator?(yield O((0,A.QM)(e)),yield O((0,w.l4)(I.deviceId)),y(""),C(void 0),b(!1),yield O((0,A.Jg)())):b(!0)},new((n=void 0)||(n=Promise))((function(s,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}));var e,t,n,i},disabled:!x},{children:"Agregar Ciclo"})),(0,i.jsx)(m.Z,{height:10})]}))]})]}))]})},_t=n(69711),Ut=(0,Qe.Z)((e=>({container:{width:"100%",scrollBehavior:"auto"},item:{justifySelf:"center",justifyContent:"center",alignContent:"center",textAlign:"center"},title:{fontSize:14},header:{display:"flex",padding:4},body:{textAlign:"center",maxHeight:"650px"},cardNewCycle:{height:"100%",color:"white",borderRadius:0},paperNewCycle:{color:"white"}}))),Ht=()=>{const e=Ut(),t=(0,L.T)(),{cyclesList:n,truckSelect:a,statusCycle:o,statusGet:r}=(0,L.C)(A.XE);return(0,E.useEffect)((()=>{t((0,A.EC)(a.deviceId))}),[a]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,className:e.container,spacing:0,direction:"column",style:{}},{children:[(0,i.jsx)("div",Object.assign({style:{borderRadius:"4px",backgroundColor:C.Jx,textAlign:"center",padding:2}},{children:(0,i.jsx)(Y.Z,Object.assign({style:{textAlign:"center",fontSize:16,color:"white"},variant:"button"},{children:(0,i.jsxs)("div",Object.assign({style:{display:"flex",alignItems:"center",textAlign:"center",justifyContent:"center"}},{children:[(0,i.jsx)(zt.Z,{style:{borderRadius:0,padding:4,marginRight:4},src:_t}),a?`CICLOS DEL CAMIÓN  ${null==a?void 0:a.deviceAlias}`:"CAMIÓN NO DISPONIBLE"]}))}))})),(0,i.jsx)(m.Z,{height:12}),a&&(0,i.jsxs)(s.Z,Object.assign({item:!0,container:!0,className:e.item,md:12,spacing:1},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0,md:6},{children:(0,i.jsx)(v.Z,Object.assign({elevation:2,className:e.body},{children:n&&n.length>0?(0,i.jsx)(Ft.a,{cycleList:n,isCycleTruck:!0}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(Ft.a,{cycleList:[],isCycleTruck:!0})})}))})),(0,i.jsx)(s.Z,Object.assign({item:!0,md:6},{children:(0,i.jsx)(v.Z,Object.assign({elevation:2,className:e.paperNewCycle},{children:(0,i.jsx)(Wt,{idTruck:a.deviceId})}))}))]}))]}))})};var Gt=n(90582);const Kt="92vh",Jt=(0,Qe.Z)((e=>({rootOperation:{display:"block",position:"relative",flexGrow:1,height:"96vh",margin:e.spacing(1,1,1,1)},rootAbsolute:{position:"absolute",top:0,bottom:0,right:0,left:0},operation:{overflow:"overlay",flex:11},containerOperation:{width:"100%",display:"flex",maxHeight:Kt,minHeight:Kt,alignContent:"center",justifyContent:"flex-start"},containerTrucks:{width:"100%",maxHeight:Kt,minHeight:Kt,margin:2,padding:2},rootTruck:{overflow:"auto",maxHeight:Kt},rootIconResize:{height:Kt,display:"flex",position:"relative",width:16,backgroundColor:C.Jx,paddingRight:7,paddingLeft:7,backgroundClip:"content-box",cursor:"col-resize"},rootLabel:{width:8,height:8,background:"green",borderRadius:4,padding:0,margin:0},withoutMP:{padding:0,margin:0}})));var Vt,Bt,Yt;const Xt=()=>{const{operationsAll:e,status:t}=Xe(),{truckInfoList:n}=(0,L.C)($.ej),{UnitOperation:r}=(0,L.C)(R.YL),l=(0,E.useRef)(),c=(0,E.useRef)(),d=(0,E.useRef)(),[u,v]=(0,E.useState)(!1),[g,m]=(0,E.useState)(!1),{state:p}=(0,L.C)(z.e5),[x,b]=(0,E.useState)(!1),[O,f]=(0,E.useState)(""),[y,S]=(0,E.useState)([]),{excavatorSelect:T,truckSelect:Z}=(0,L.C)(A.XE),{timelineError:k}=(0,L.C)(wt.a9);(({search:e,setSearch:t,items:n,setFilterList:i})=>{const[]=(0,E.useState)([]);(0,E.useEffect)((()=>{if(!e||0===n.length)return void i((e=>0===e.length?e:[]));const t=n.filter((t=>{var n;return null===(n=t.deviceAlias)||void 0===n?void 0:n.toUpperCase().includes(e.toUpperCase())}));i((e=>JSON.stringify(e.map((e=>e.deviceId)))===JSON.stringify(t.map((e=>e.deviceId)))?e:(console.log("LiminadodChange",t),t)))}),[e,n])})({search:O,setSearch:f,items:n,setFilterList:S});const I=(0,L.T)(),P=Jt();(0,E.useEffect)((()=>{}),[]),(0,E.useEffect)((()=>{Vt=document.querySelector("#wrapper"),Bt=null==Vt?void 0:Vt.querySelector("#listTruck"),Yt=null==Vt?void 0:Vt.querySelector("#listOperation");const e=localStorage.getItem("localStorajeTruck"),t=localStorage.getItem("localStorajeOperation");e&&(Bt.style.flex=Number(e)),t&&(Yt.style.flex=Number(t))}),[]),(0,E.useEffect)((()=>{I((0,$.RK)()),I((0,R.hS)())}),[x]);const F=(0,E.useMemo)((()=>(0,i.jsx)("div",Object.assign({className:P.containerOperation},{children:t!==ue.JD.DONE?(0,i.jsx)(s.Z,Object.assign({container:!0,alignItems:"stretch",justifyContent:"center"},{children:(0,i.jsx)(tt,{height:"100%",width:"100%"})})):(null==e?void 0:e.length)>0?null==e?void 0:e.map(((e,t)=>(0,i.jsx)(Ke,{operation:e,setRefresh:b,filterList:y},t))):(0,i.jsx)(qe,{})}))),[e,y,t]);(0,E.useEffect)((()=>{p===D.m4.DONE&&b((e=>!e))}),[p]);const W=()=>m((e=>!e)),_=(0,E.useCallback)((e=>{var t;if(!(u&&Vt&&Bt&&Yt))return;const n=12*(e.clientX-Vt.offsetLeft-46)/(null===(t=l.current)||void 0===t?void 0:t.clientWidth),i=Number(c.current.style.flex)>0?c.current.style.flex:0,s=Math.abs(i-n)>.05?Math.max(n,1):i;Bt.style.flex=s,Yt.style.flex=12-s,localStorage.setItem("localStorajeTruck",`${s}`),localStorage.setItem("localStorajeOperation",""+(12-s))}),[u]),U=(0,E.useMemo)((()=>(0,i.jsx)(s.Z,Object.assign({item:!0,id:"listTruck",style:{margin:0,padding:0,flex:1},className:P.rootTruck,innerRef:c},{children:(0,i.jsx)(Lt,{filterList:y})}))),[y]),H=(0,E.useMemo)((()=>(0,i.jsxs)(s.Z,Object.assign({container:!0,justifyContent:"flex-end",alignItems:"center"},{children:[(0,i.jsx)(a.ZP,Object.assign({title:"Nueva Operación"},{children:(0,i.jsx)(N.rU,Object.assign({to:"/operation/create/0/0"},{children:(0,i.jsx)(o.Z,Object.assign({color:"secondary",size:"small"},{children:(0,i.jsx)(h.Z,{fontSize:"small"})}))}))})),(0,i.jsx)(a.ZP,Object.assign({title:"Reasignación global de Camiones"},{children:(0,i.jsx)(o.Z,Object.assign({onClick:W,color:"secondary",size:"small"},{children:(0,i.jsx)(j.Z,{fontSize:"small"})}))})),(0,i.jsx)(ot,{search:O,setSearch:f})]}))),[O]),G=(0,E.useCallback)((e=>{e.target===d.current&&v(!0)}),[d]),K=(0,E.useCallback)((()=>v(!1)),[]),J=(0,E.useMemo)((()=>(0,i.jsx)($t,{setRefresh:b})),[]),V=()=>{I((0,A.kY)()),I((0,w.pJ)()),b((e=>!e))};return(0,i.jsxs)(Je.W,Object.assign({backend:Ve.PD},{children:[(0,i.jsxs)("div",Object.assign({className:P.rootOperation},{children:[(0,i.jsxs)("div",Object.assign({className:P.rootAbsolute},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0,innerRef:c},{children:H})),(0,i.jsxs)(s.Z,Object.assign({container:!0,innerRef:l,id:"wrapper",onMouseUp:K,onMouseMove:_,onMouseDown:G},{children:[U,(0,i.jsx)(M.P4,{className:P.rootIconResize,id:"handler",innerRef:d}),(0,i.jsx)(s.Z,Object.assign({item:!0,className:P.operation,id:"listOperation"},{children:(0,i.jsx)(s.Z,Object.assign({container:!0,direction:"column"},{children:(0,i.jsxs)(s.Z,Object.assign({item:!0},{children:[(0,i.jsx)("div",Object.assign({className:P.containerOperation},{children:t!==ue.JD.DONE?(0,i.jsx)(s.Z,Object.assign({container:!0,alignItems:"stretch",justifyContent:"center"},{children:(0,i.jsx)(tt,{height:"100%",width:"100%"})})):(null==e?void 0:e.length)>0?F:(0,i.jsx)(qe,{})})),(0,i.jsxs)(M.T5,Object.assign({container:!0,direction:"row",style:{gap:8}},{children:[(0,i.jsx)(M.P4,{children:(0,i.jsxs)(M.T5,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,i.jsx)("p",{className:P.rootLabel}),(0,i.jsx)("p",Object.assign({style:{padding:0,margin:0}},{children:"Asignados"}))]}))}),(0,i.jsx)(M.P4,{children:(0,i.jsxs)(M.T5,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,i.jsx)("p",{style:{background:C.J$},className:P.rootLabel}),(0,i.jsx)("p",Object.assign({style:{padding:0,margin:0}},{children:"No asignados"}))]}))}),(0,i.jsx)(M.P4,{children:(0,i.jsxs)(M.T5,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,i.jsx)("p",{style:{background:C.sb},className:P.rootLabel}),(0,i.jsx)("p",Object.assign({style:{padding:0,margin:0}},{children:"Excavadora"}))]}))}),(0,i.jsx)(M.P4,{children:(0,i.jsxs)(M.T5,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,i.jsx)("p",{style:{borderColor:C.J$,background:"#00000000",borderStyle:"solid",borderWidth:2},className:P.rootLabel}),(0,i.jsxs)("p",Object.assign({style:{padding:0,margin:0}},{children:["Área de carguío (",$e.Xb,"mts)"]}))]}))})]}))]}))}))}))]}))]})),(0,i.jsx)(Ot,{open:g,setOpen:m,setRefresh:b,operations:e}),(0,i.jsx)(vt,{open:!!T.deviceId,setOpen:V,children:(0,i.jsx)(Ft.S,{}),handleClose:V,handleClickConfirm:V}),(0,i.jsx)(vt,{open:!!Z.deviceId,setOpen:V,children:(0,i.jsx)(Ht,{}),handleClose:V,handleClickConfirm:V}),J]})),!!k.message&&(0,i.jsx)(Gt.y,{error:k.message,success:k.success,code:k.code?k.code:0,callBack:()=>I((0,wt.OL)())})]}))};function qt(){return(0,i.jsx)(Xt,{})}}}]);