"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[951],{2834:(e,i,s)=>{s.d(i,{d:()=>o});var t=s(85893),r=s(282),a=s(95477);const o=e=>{var{loading:i,text:s}=e,o=function(e,i){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.indexOf(t)<0&&(s[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(t=Object.getOwnPropertySymbols(e);r<t.length;r++)i.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(s[t[r]]=e[t[r]])}return s}(e,["loading","text"]);return(0,t.jsx)(r.Z,Object.assign({},o,{disabled:i},{children:i?(0,t.jsx)(a.Z,{style:{width:"20px",height:"20px"}},void 0):s}),void 0)}},31366:(e,i,s)=>{s.d(i,{Z:()=>m});var t=s(85893),r=s(67294),a=s(41120),o=s(35117),n=s(85639),l=s(64436),d=s(26209);const c=(0,a.Z)((e=>(0,o.Z)({formControl:{margin:e.spacing(1),minWidth:"100%"},selectEmpty:{marginTop:e.spacing(2)}})));function m(e){var{placeholder:i,iteams:s,selectValue:a,value:o}=e,m=function(e,i){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.indexOf(t)<0&&(s[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(t=Object.getOwnPropertySymbols(e);r<t.length;r++)i.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(s[t[r]]=e[t[r]])}return s}(e,["placeholder","iteams","selectValue","value"]);const u=c(),[v,h]=r.useState("");return(0,r.useEffect)((()=>{h(o||"")}),[o]),(0,r.useEffect)((()=>{a(v)}),[v]),(0,t.jsx)("div",{children:(0,t.jsx)(l.Z,Object.assign({className:u.formControl},{children:(0,t.jsxs)(d.Z,Object.assign({},m,{value:v,onChange:e=>{h(e.target.value)},displayEmpty:!0,className:u.selectEmpty,inputProps:{"aria-label":`${i}`}},{children:[(0,t.jsx)(n.Z,Object.assign({value:"",disabled:!0},{children:i}),void 0),null==s?void 0:s.map((e=>(0,t.jsx)(n.Z,Object.assign({value:null==e?void 0:e.value},{children:null==e?void 0:e.tittle}),e.value)))]}),void 0)}),void 0)},void 0)}},86080:(e,i,s)=>{s.d(i,{e:()=>G});var t=s(85893),r=s(41749),a=s(10046),o=s(2050),n=s(67294),l=s(73855),d=s(65529),c=s(73914),m=s(57850),u=s(59693),v=s(93584);function h(e){return e.type||e.mode}const j=(0,m.Z)(),p=(0,c.Z)((e=>{h(e.palette);const i=i=>"dark"===h(e.palette)?(0,u._j)(i,.1):(0,u.$n)(i,.1);return{root:{"& .super-app-theme--cell":{backgroundColor:"rgb(26,62,114,0.1)",color:"#1a3e72",fontWeight:"600"},"& .Mui-error.negative":{backgroundColor:"#CCFFFF",color:"#1a3e72",fontWeight:"600"},"& .Mui-error.positive":{backgroundColor:"rgba(157, 255, 118, 0.49)",color:"#1a3e72",fontWeight:"600"},"& .super-app-theme--false":{backgroundColor:(s="rgb(255, 48, 83)","dark"===h(e.palette)?(0,u._j)(s,.1):(0,u.$n)(s,.5)),"&:hover":{backgroundColor:i(e.palette.error.main)}},"& .MuiDataGrid-row":{"&:hover":{backgroundColor:i(`${v.sb}`)},"& .Mui-selected":{"&:hover":{backgroundColor:i(`${v.sb}`)}}}}};var s}),{defaultTheme:j});var g=s(868),b=s(42403),x=s(59943),f=s(282),O=s(38396),Z=s(85639),C=s(78513),y=s(59067),w=s(28428),k=s(2834),N=s(15635);function A({handleUserCurrent:e,row:i}){const[s,r]=n.useState(null),a=(0,l.T)(),{statusDeleteUser:o}=(0,l.C)(d.mz),[c]=(0,N.r)(o),m=e=>{r(e.currentTarget)},u=()=>{r(null)};return(0,t.jsxs)("div",{children:[(0,t.jsx)(f.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:m,endIcon:(0,t.jsx)(C.Z,{},void 0)},void 0),(0,t.jsxs)(O.Z,Object.assign({id:"simple-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:u},{children:[(0,t.jsx)(Z.Z,Object.assign({onClick:()=>{e(),u()}},{children:(0,t.jsx)(f.Z,Object.assign({"aria-controls":"simple-menu","aria-haspopup":"true",onClick:m,startIcon:(0,t.jsx)(y.Z,{color:"primary",fontSize:"small"},void 0)},{children:"editar"}),void 0)}),void 0),(0,t.jsx)(Z.Z,Object.assign({onClick:()=>{a((0,d.Bz)(i)),a((0,d.TY)({})),!c&&u()}},{children:(0,t.jsx)(k.d,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:m,startIcon:(0,t.jsx)(w.Z,{htmlColor:"red",fontSize:"small"},void 0),text:"Eliminar",loading:c},void 0)}),void 0)]}),void 0)]},void 0)}var S=s(95090);const E=()=>{const e=(0,l.T)(),{user:i}=(0,l.C)(d.mz),s=p(),[r,c]=(0,n.useState)(),[m,u]=(()=>{const[e,i]=(0,n.useState)([]),{statusRetriveUser:s,userList:t}=(0,l.C)(d.mz);return(0,n.useEffect)((()=>{s===S.JD.DONE?i(null==t?void 0:t.map(((e,i)=>Object.assign({},e)))):i([])}),[s,s]),[e,i]})();return(0,n.useEffect)((()=>{e((0,d.yE)())}),[]),(0,n.useEffect)((()=>{e((0,d.TY)(r))}),[r]),(0,n.useEffect)((()=>{var e;e=Object.assign({},i);const s=m.findIndex((i=>i.id===e.id)),t=[...m];e.dni?s>=0?t[s]=e:t.push(e):s>=0&&t.splice(s,1),u([...t])}),[i]),(0,t.jsx)(a.Z,Object.assign({sx:{mx:4,display:"flex",flexDirection:"column"}},{children:(0,t.jsx)("div",Object.assign({style:{minHeight:"80vh",overflowY:"scroll",display:"flex",flexDirection:"column"}},{children:(0,t.jsx)(o._$r,{className:s.root,rows:m,columns:(v=c,[{field:"id",hide:!0,hideSortIcons:!0},{field:"username",headerName:"Usuario"},{field:"dni",headerName:"dni"},{field:"firstName",headerName:"Nombre"},{field:"lastName",headerName:"Apellidos",renderCell:({row:e})=>(0,t.jsx)(g.ZP,Object.assign({title:e.lastName},{children:(0,t.jsx)("p",{children:e.lastName},void 0)}),void 0)},{field:"role",headerName:"rol",hideSortIcons:!0,renderCell:({row:e})=>(0,t.jsx)(g.ZP,Object.assign({title:e.role},{children:(0,t.jsx)("p",{children:e.role===x.Role.DISPATCH?"Despachador":e.role===x.Role.ADMIN?"Administrador":e.role},void 0)}),void 0)},{field:"email",headerName:"email",renderCell:({row:e})=>(0,t.jsx)(g.ZP,Object.assign({title:e.email},{children:(0,t.jsx)("p",{children:e.email},void 0)}),void 0)},{field:"isActive",headerName:"Estado",renderCell:({row:e})=>(0,t.jsx)(b.D,{isActive:!e||e.isActive},void 0)},{field:"Opciones",headerName:"Opc",hideSortIcons:!0,renderCell:({row:e})=>(0,t.jsx)(A,{handleUserCurrent:()=>{var i=Object.assign({},e);v(i)},row:e},void 0)}]),density:"comfortable",disableSelectionOnClick:!0,disableColumnMenu:!0},void 0)}),void 0)}),void 0);var v};var I=s(41120),D=s(13457),P=s(75834),$=s(33901),T=s(22318),V=s(17812),z=s(8286),W=s(44562),M=s(5977),q=s(47298),U=s(990),R=s(31366),F=s(9570);function L({isActive:e,setValue:i}){const s=(0,m.Z)({overrides:{MuiSwitch:{switchBase:{color:"rgb(183, 33, 54)"},colorSecondary:{"&$checked":{color:"rgb(34, 154, 22)"}},track:{opacity:.2,backgroundColor:"rgb(34, 154, 22)","$checked$checked + &":{opacity:.7,backgroundColor:"rgb(34, 154, 22)"}}}}}),[r,a]=n.useState({checkedA:e});return(0,n.useEffect)((()=>{i(r.checkedA)}),[r]),(0,t.jsx)(D.Z,Object.assign({theme:s},{children:(0,t.jsx)(F.Z,{checked:r.checkedA,onChange:e=>{a(Object.assign(Object.assign({},r),{[e.target.name]:e.target.checked}))},name:"checkedA"},void 0)}),void 0)}var Y=s(59431);const _=(0,m.Z)(),B=(0,I.Z)((e=>({marginSmall:{margin:".5rem 0 .5rem 0"},margin:{margin:"1rem 0 1rem 0"},sx:{[e.breakpoints.down("xs")]:{visibility:"hidden"},[e.breakpoints.down("sm")]:{visibility:"hidden"}}}))),H=()=>{const e=B(),i=(0,l.T)(),{statusCreateUser:s,userCurrent:o,userError:c}=(0,l.C)(d.mz),[m]=(0,N.r)(s),[u,h]=((0,M.k6)(),n.useState()),[j,p]=n.useState(),[g,f,O,Z]=(0,U.M)({id:void 0,role:j,password:"",password2:"",dni:"",email:"",firstName:"",lastName:""});n.useEffect((()=>{o&&Z({id:o.id,role:o.role,password:"",password2:"",dni:o.dni,email:o.email,firstName:o.firstName,lastName:o.lastName,isActive:o.isActive})}),[o]);const{id:C,password:y,password2:w,dni:A,email:S,firstName:E,lastName:I}=g;return n.useEffect((()=>{Z(Object.assign(Object.assign({},g),{role:j}))}),[j]),n.useEffect((()=>{Z(Object.assign(Object.assign({},g),{isActive:u}))}),[u]),(0,t.jsx)(D.Z,Object.assign({theme:_},{children:(0,t.jsxs)(r.Z,Object.assign({container:!0},{children:[(0,t.jsx)(P.ZP,{},void 0),(0,t.jsx)(r.Z,{children:(0,t.jsxs)(a.Z,Object.assign({sx:{mx:4,display:"flex",flexDirection:"column",alignItems:"center"}},{children:[(0,t.jsx)($.Z,{style:{width:"50px",height:"50px"},alt:"logo dts",src:"../../src\\assets\\img\\logodts.png"},void 0),(0,t.jsxs)(r.Z,Object.assign({container:!0,justifyContent:"center",alignItems:"center"},{children:[(0,t.jsx)(T.Z,Object.assign({component:"h1",variant:"h5"},{children:g.firstName?`${g.firstName} ${g.lastName}`:"Usuario Dts"}),void 0),g.id?(0,t.jsx)(V.Z,Object.assign({onClick:()=>{new Y.User,i((0,d.TY)({})),O()}},{children:(0,t.jsx)(q.Z,{htmlColor:"rgb(183, 33, 54)"},void 0)}),void 0):null]}),void 0),(0,t.jsx)(b.D,{isActive:!o||g.isActive},void 0),(0,t.jsx)(a.Z,Object.assign({component:"form",onSubmit:e=>{e.preventDefault(),C?(i((0,d.q0)(g)),O(),i((0,d.TY)({}))):w===y&&(i((0,d.hR)(g)),O())},sx:{mt:1}},{children:(0,t.jsxs)(r.Z,Object.assign({container:!0,spacing:2,justifyContent:"space-between"},{children:[(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,t.jsx)(z.Z,{variant:"outlined",onChange:f,value:E,margin:"normal",required:!0,fullWidth:!0,id:"firstName",type:"text",label:"Nombre",name:"firstName",autoFocus:!0},void 0)}),void 0),(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,t.jsx)(z.Z,{variant:"outlined",onInvalid:e=>e.target.setCustomValidity("Los campos no pueden estar vacios"),onInput:e=>e.target.setCustomValidity(""),onChange:f,value:I,margin:"normal",required:!0,fullWidth:!0,id:"lastName",type:"text",label:"Apellidos",name:"lastName",autoFocus:!0},void 0)}),void 0),(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:(0,t.jsx)(z.Z,{variant:"outlined",onChange:f,onInvalid:e=>e.target.setCustomValidity("La contraseña debe tener al menos 6 caracteres"),onInput:e=>e.target.setCustomValidity(""),value:y,margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",disabled:!!C,id:"password",inputProps:{pattern:"^[0-9A-Za-z]{6,15}$"},autoComplete:"current-password",error:y!=w,helperText:y!=w?"Las contraseñas no coinciden":null},void 0)}),void 0),(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:(0,t.jsx)(z.Z,{variant:"outlined",onChange:f,onInvalid:e=>e.target.setCustomValidity("La contraseña debe tener al menos 6 caracteres"),onInput:e=>e.target.setCustomValidity(""),value:w,margin:"normal",required:!0,fullWidth:!0,disabled:!!C,inputProps:{pattern:"^[0-9A-Za-z]{6,15}$"},name:"password2",label:"Password",type:"password",id:"password2",autoComplete:"current-password",error:y!=w},void 0)}),void 0),(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:(0,t.jsx)(z.Z,{variant:"outlined",onChange:f,value:S,margin:"normal",required:!0,fullWidth:!0,name:"email",label:"Email",type:"email",id:"email",autoComplete:"current-email"},void 0)}),void 0),(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,t.jsx)(z.Z,{variant:"outlined",onChange:f,value:A,margin:"normal",required:!0,fullWidth:!0,name:"dni",label:"Dni",inputProps:{pattern:"^[0-9]{8}"},id:"dni",autoComplete:"current-dni"},void 0)}),void 0),(0,t.jsxs)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:[(0,t.jsx)(R.Z,{required:!0,value:o?o.role:"",placeholder:"Rol",iteams:[{value:x.Role.ADMIN,tittle:"Administrador"},{value:x.Role.DISPATCH,tittle:"Despachador"}],selectValue:p},void 0)," "]}),void 0),C&&(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:(0,t.jsx)(J,{setSwitchValue:h},void 0)}),void 0),c&&(0,t.jsxs)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:[(0,t.jsx)(W.Z,Object.assign({variant:"standard",severity:"error",style:{color:"red",textAlign:"center"}},{children:c}),void 0)," "]}),void 0),(0,t.jsx)(k.d,{className:e.marginSmall,type:"submit",fullWidth:!0,variant:"contained",style:{background:`${v.Jx}`,color:"white"},text:"Enviar",loading:m},void 0)]}),void 0)}),void 0)]}),void 0)},void 0)]}),void 0)}),void 0)},J=({setSwitchValue:e})=>{const{userCurrent:i}=(0,l.C)(d.mz),[s,a]=n.useState();return n.useEffect((()=>{e(s)}),[s]),(0,t.jsxs)(r.Z,Object.assign({container:!0,direction:"row",justifyContent:"space-between"},{children:[(0,t.jsxs)(r.Z,Object.assign({item:!0},{children:[(0,t.jsx)(T.Z,{children:"Prohibido"},void 0),(0,t.jsx)(T.Z,Object.assign({style:{fontSize:"0.875rem",color:"rgb(99, 115, 129)"},variant:"subtitle1"},{children:"Aplicar deshabilitar cuenta"}),void 0)]}),void 0),(0,t.jsx)(r.Z,Object.assign({item:!0},{children:(0,t.jsx)(L,{isActive:!i||i.isActive,setValue:a},void 0)}),void 0)]}),void 0)},G=()=>(0,t.jsxs)(r.Z,Object.assign({container:!0},{children:[(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:4,md:5},{children:(0,t.jsx)(H,{},void 0)}),void 0),(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:8,md:7},{children:(0,t.jsx)(E,{},void 0)}),void 0)]}),void 0)},42403:(e,i,s)=>{s.d(i,{D:()=>o});var t=s(85893),r=s(71267),a=s(73914);const o=({isActive:e=!0})=>{const i=(0,a.Z)((i=>({color:{background:e?"rgb(34, 154, 22,0.2)":"rgb(183, 33, 54,0.2)",color:e?"rgb(34, 154, 22)":"rgb(183, 33, 54)",fontSize:"0.875rem"}})))();return(0,t.jsx)(r.Z,{className:i.color,label:e?"Activo ":"Deshabilitado"},void 0)}}}]);