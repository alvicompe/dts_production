"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[167],{63663:(e,t,n)=>{n.d(t,{F2:()=>a,xu:()=>v.I,zx:()=>c,iz:()=>x,T5:()=>h,P4:()=>g,hU:()=>u,Mi:()=>b,IB:()=>o.C});var i=n(85893),s=n(8286),l=n(96588);const a=e=>(0,i.jsx)(l.ZP,Object.assign({},Object.assign({},e.propsAutocomplete),{renderInput:e=>(0,i.jsx)(s.Z,Object.assign({},e,{label:"Seleccione una opción",variant:"outlined"}))}));var o=n(45287),r=n(282);const c=e=>(0,i.jsx)(r.Z,Object.assign({},Object.assign({},e.propsButton),{children:e.label}));var d=n(17812);const u=e=>(0,i.jsx)(d.Z,Object.assign({},Object.assign({},e),{children:e.children}));var v=n(47463),m=n(41749);const h=e=>(0,i.jsx)(m.Z,Object.assign({},Object.assign({},e),{container:!0},{children:e.children})),g=e=>(0,i.jsx)(m.Z,Object.assign({},Object.assign({},e),{item:!0},{children:e.children}));var f=n(55517);const x=e=>(0,i.jsx)(f.Z,Object.assign({},Object.assign({},e)));var j=n(82285);const b=e=>(0,i.jsx)(j.Z,Object.assign({},Object.assign({},e),{children:(0,i.jsx)(m.Z,{children:e.children})}))},45287:(e,t,n)=>{n.d(t,{C:()=>a});var i=n(85893),s=n(64436),l=n(8286);const a=e=>{const{propsTextField:t,propsForm:n}=e;return(0,i.jsx)(s.Z,Object.assign({},Object.assign({},n),{children:(0,i.jsx)(l.Z,Object.assign({},Object.assign({},t)))}))}},47463:(e,t,n)=>{n.d(t,{I:()=>l});var i=n(85893),s=n(60395);const l=({children:e,height:t,width:n})=>(0,i.jsx)(s.Z,Object.assign({height:t,width:n},{children:e}))},38062:(e,t,n)=>{n.d(t,{M:()=>j});var i=n(85893),s=n(77349),l=n(67294),a=n(42799),o=n(36233),r=n(43703),c=n(11640),d=n(10950),u=n(8230),v=n(41120),m=n(35117);const h=(0,v.Z)((()=>(0,m.Z)({container:{display:"flex",width:"100%",background:"inherit",justifyContent:"center",height:"100%",flexWrap:"wrap"},buttonWrapper:{display:"flex",alignItems:"flexEnd",background:"inherit"},button:{border:"none",textDecoration:"none",cursor:"pointer",borderRadius:"50%",width:"40px",height:"40px",color:"white",fontSize:"20px",fontWeight:"bold",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",padding:0,marginBottom:"13px"},dateListScrollable:{display:"flex",overflowX:"hidden",scrollbarWidth:"none",WebkitOverflowScrolling:"touch",justifyContent:"center",flexWrap:"wrap"},monthContainer:{display:"flex",flexDirection:"column",cursor:"pointer",padding:" 2px",margin:"2px"},monthYearLabel:{alignSelf:"flex-start",zIndex:3,fontSize:"15px",fontWeight:"bold",position:"sticky",top:" 10px",left:"0",margin:"0 10px"},dateDayItem:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",margin:"0 0 0 5px",width:"32px",flexShrink:0},dateDayItemMarked:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",margin:" 0 0 0 10px",width:" 32px",flexShrink:0},daysContainer:{display:"flex",zIndex:3,marginTop:"10px",flexWrap:"wrap"},dayLabel:{fontSize:"12px",margin:"4px 0 0 0"},dateLabel:{fontSize:"18px"},markedLabel:{marginTop:"10px"}})));var g=n(71655);const f=({startDate:e,lastDate:t,selectDate:n,getSelectedDay:v,primaryColor:m,labelFormat:f,marked:x})=>{const[j,b]=(0,l.useState)(null);var p={fontWeight:"bold",width:"45px",height:"45px",borderRadius:"50%",border:`2px solid ${m}`,color:m};const y={color:m},E={color:"#8c3737",padding:"2px",fontSize:12},O=e=>(0,a.Z)(e,j)?p:null,S=e=>{var t;const n=h();let s=x.find((t=>(0,a.Z)(t.date,e)));if(s){if(!(null==s?void 0:s.marked))return;return(0,i.jsx)("div",Object.assign({style:Object.assign({},null!==(t=null==s?void 0:s.style)&&void 0!==t?t:E),className:n.markedLabel},{children:s.text}))}return""},T=e=>{b(e),v&&v(e)};return(0,l.useEffect)((()=>{v&&v(n||e)}),[]),(0,l.useEffect)((()=>{n&&((0,a.Z)(j,n)||(b(n),setTimeout((()=>{let e=document.getElementById("selected");e&&e.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}),20)))}),[n]),(0,i.jsx)(l.Fragment,{children:(()=>{const n=h(),l=[];let v=[];for(let h=0;h<=(0,o.Z)(t,e);h++){let b,p;const E=(0,r.Z)((0,c.Z)(e,h));b=0===h?Number((0,d.Z)(e,"d",{locale:g.Z}))-1:0,p=h===(0,o.Z)(t,e)?Number((0,d.Z)(t,"d",{locale:g.Z})):Number((0,d.Z)((0,u.Z)(E),"d",{locale:g.Z}));for(let e=b;e<p;e++){let t=(0,s.Z)(E,e);console.log(),v.push((0,i.jsxs)("div",Object.assign({id:(m=t,(0,a.Z)(m,j)?"selected":""),className:x?n.dateDayItemMarked:n.dateDayItem,style:O(t),onClick:()=>T(t)},{children:[(0,i.jsx)("div",Object.assign({className:n.dayLabel},{children:(0,d.Z)(t,"E",{locale:g.Z})})),(0,i.jsx)("div",Object.assign({className:n.dateLabel},{children:(0,d.Z)(t,"d",{locale:g.Z})})),S(t)]}),t.getTime()))}l.push((0,i.jsxs)("div",Object.assign({className:n.monthContainer},{children:[(0,i.jsx)("span",Object.assign({className:n.monthYearLabel,style:y},{children:(0,d.Z)(E,f||"MMMM yyyy",{locale:g.Z})})),(0,i.jsx)("div",Object.assign({className:n.daysContainer},{children:v}))]}),E.getTime())),v=[]}var m;return(0,i.jsx)("div",Object.assign({id:"container",className:n.dateListScrollable},{children:l}))})()})},x=({startDate:e,lastDate:t,selectDate:n,getSelectedDay:s,primaryColor:u,labelFormat:v})=>{const[m,f]=(0,l.useState)(null),x=u.replace(/[^\d,]/g,"").split(","),j={borderRadius:"0.7rem",background:`${u}`,color:Math.round((299*parseInt(x[0])+587*parseInt(x[1])+114*parseInt(x[2]))/1e3)>125?"black":"white"},b=e=>(0,a.Z)(e,m)?j:null,p=h(),y=e=>{f(e),s&&s(e)};return(0,l.useEffect)((()=>{s&&s(n||e)}),[]),(0,l.useEffect)((()=>{n&&((0,a.Z)(m,n)||(f(n),setTimeout((()=>{let e=document.getElementById("selected");e&&e.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}),20)))}),[n]),(0,i.jsx)(l.Fragment,{children:(()=>{const n=[];for(let l=0;l<=(0,o.Z)(t,e);l++){const t=(0,r.Z)((0,c.Z)(e,l));n.push((0,i.jsx)("div",Object.assign({id:(s=t,(0,a.Z)(s,m)?"selected":""),className:p.monthContainer,style:b(t),onClick:()=>y(t)},{children:(0,i.jsx)("span",Object.assign({className:p.monthYearLabel},{children:(0,d.Z)(t,v||"MMMM yyyy",{locale:g.Z})}))}),t.getTime()))}var s;return(0,i.jsx)("div",Object.assign({id:"container",className:p.dateListScrollable},{children:n}))})()})},j=e=>{const t=e.color?e.color.indexOf("rgb")>0?e.color:(n=e.color,(l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n))?"rgb("+parseInt(l[1],16)+","+parseInt(l[2],16)+","+parseInt(l[3],16)+")":null):"rgb(54, 105, 238)";var n,l;const a=e.startDate||new Date,o=(0,s.Z)(a,e.days||90);let r={zIndex:2},c={background:t},d=f;"month"===e.type&&({zIndex:5},d=x,c={background:t});const u=h();return(0,i.jsx)("div",Object.assign({className:u.container},{children:(0,i.jsx)(d,Object.assign({},e,{primaryColor:t,startDate:a,lastDate:o}))}))}},61242:(e,t,n)=>{n.d(t,{a:()=>m});var i=n(85893),s=n(41120),l=n(52663),a=n(66083),o=n(29525),r=n(66856),c=n(95477),d=n(282),u=n(93584);const v=(0,s.Z)({disabledPadding:{padding:0,textAlign:"center"}}),m=({open:e,handleClose:t,handleConfirm:n,title:s,children:m,maxWidth:h="lg",disabled:g=!1,loading:f})=>{const x=v();return(0,i.jsxs)(l.Z,Object.assign({open:e,onClose:t,maxWidth:h},{children:[(0,i.jsx)(a.Z,Object.assign({style:{color:"white",background:`${u.Jx}`,padding:"0.5rem"},className:x.disabledPadding},{children:s})),(0,i.jsx)(o.Z,{children:m}),(0,i.jsx)(r.Z,{children:f?(0,i.jsx)(c.Z,{style:{width:"30px",height:"30px"}}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,Object.assign({size:"small",color:"primary",onClick:t},{children:"Cancelar"})),n&&(0,i.jsx)(d.Z,Object.assign({disabled:g,variant:"outlined",size:"small",color:"secondary",onClick:n,autoFocus:!0},{children:"Confirmar"}))]})})]}))}},90582:(e,t,n)=>{n.d(t,{y:()=>v});var i=n(85893),s=n(96912),l=n(44562),a=n(37155),o=n(67294),r=n(41120),c=n(33681);const d=(0,r.Z)({root:{width:"100%"}});function u({time:e}){const t=d(),[n,s]=o.useState(100),l=10*e/100;return o.useEffect((()=>{s((e=>e-10));const e=setInterval((()=>{s((e=>e-10))}),l);return()=>{clearInterval(e)}}),[]),(0,i.jsx)("div",Object.assign({className:t.root},{children:(0,i.jsx)(c.Z,{variant:"determinate",value:n})}))}const v=({error:e,callBack:t,success:n,code:r=0})=>{const[c,d]=o.useState({open:!0,vertical:"top",horizontal:"right"}),{vertical:v,horizontal:m}=c,[h,g]=(0,o.useState)("success"),f=()=>{d(Object.assign(Object.assign({},c),{open:!1})),t()};return(0,o.useEffect)((()=>{const e=setTimeout((()=>{f()}),4e3);return console.log("AlertDts useEffect"),()=>{console.log("AlertDts clear timeout"),window.clearTimeout(e)}}),[]),(0,o.useEffect)((()=>(g(r>=500||2==r?"error":n?"success":"warning"),()=>{g("success")})),[n,r]),(0,i.jsx)(s.Z,Object.assign({open:c.open,anchorOrigin:{vertical:v,horizontal:m},onClose:f},{children:(0,i.jsxs)(l.Z,Object.assign({severity:h,onClose:f},{children:[(0,i.jsx)(a.Z,{children:n?"Exito":"advertencia"}),(0,i.jsx)("strong",{children:r>=500?"¡Ups! Algo salió mal, comuniquese con el administrador":e}),(0,i.jsx)(u,{time:4e3})]}))}))}},2834:(e,t,n)=>{n.d(t,{d:()=>a});var i=n(85893),s=n(282),l=n(95477);const a=e=>{var{loading:t,text:n}=e,a=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n}(e,["loading","text"]);return(0,i.jsx)(s.Z,Object.assign({},a,{disabled:t},{children:t?(0,i.jsx)(l.Z,{style:{width:"20px",height:"20px"}}):n}))}},87559:(e,t,n)=>{n.d(t,{h:()=>r});var i=n(85893),s=n(52387),l=n(73637),a=n(67294),o=n(80324);const r=({children:e,header:t})=>{const[n,r]=a.useState(null),c=()=>{r(null)},d=Boolean(n),u=d?"transitions-popper":void 0;return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(o.Z,{setAnchorEl:r,anchorEl:n,childen:t}),(0,i.jsx)(s.ZP,Object.assign({id:u,open:d,anchorEl:n,onClick:c,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}},{children:(0,i.jsx)(l.Z,{children:e})}))]})}},80324:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(85893);const s=({anchorEl:e,setAnchorEl:t,childen:n})=>(0,i.jsx)("div",Object.assign({onClick:n=>{t(e?null:n.currentTarget)}},{children:n}))},31366:(e,t,n)=>{n.d(t,{Z:()=>v});var i=n(85893),s=n(67294),l=n(41120),a=n(35117),o=n(85639),r=n(64436),c=n(26209),d=n(71308);const u=(0,l.Z)((e=>(0,a.Z)({formControl:{margin:e.spacing(1),minWidth:"100%"},selectEmpty:{marginTop:e.spacing(2)}})));function v(e){var{placeholder:t,iteams:n,selectValue:l,value:a,loading:v=!1}=e,m=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n}(e,["placeholder","iteams","selectValue","value","loading"]);const h=u(),[g,f]=s.useState("");return(0,s.useEffect)((()=>{f(a||"")}),[a]),(0,s.useEffect)((()=>{l(g)}),[g]),(0,i.jsx)(r.Z,Object.assign({className:h.formControl},{children:(0,i.jsxs)(c.Z,Object.assign({},m,{value:g,onChange:e=>{f(e.target.value)},displayEmpty:!0,className:h.selectEmpty,inputProps:{"aria-label":`${t}`}},{children:[(0,i.jsx)(o.Z,Object.assign({value:"",disabled:!0},{children:t})),v?(0,i.jsx)(d.g,{}):null==n?void 0:n.map((e=>(0,i.jsx)(o.Z,Object.assign({value:null==e?void 0:e.value},{children:null==e?void 0:e.tittle}),e.value)))]}))}))}},87338:(e,t,n)=>{n.d(t,{Z:()=>St,O:()=>Et});var i=n(85893),s=n(41749),l=n(52541),a=n(30553),o=n(40074),r=n(282),c=n(44562),d=n(67294),u=n(93584),v=n(88093),m=n(73855),h=n(10646),g=n(15635),f=n(56731),x=n(1754),j=n(38062),b=n(61242),p=n(71308),y=n(29829),E=n(85639),O=n(24837),S=n(52387),T=n(41120),N=n(35117),Z=n(81605),I=n(95090),C=n(78479),w=n(49032),A=n(67774),D=n(89452),k=n(90694);const L=43200,F=()=>{const[e]=(0,v.R)();e.getHours()>=7&&e.getHours()<19?(e.setHours(7),e.setSeconds(0),e.setMinutes(0),e.setMilliseconds(0)):(e.setHours(19),e.setSeconds(0),e.setMinutes(0),e.setMilliseconds(0));const t=((new Date).getTime()-e.getTime())/1e3;return{flex:t/L||0,time:t}},R=e=>{var t,n,i;if(e&&(null==e?void 0:e.initialEventState)&&(null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event))switch(null===(i=null===(n=null==e?void 0:e.initialEventState)||void 0===n?void 0:n.event)||void 0===i?void 0:i.event){case w.EnumEvent.MAINTENANCE:return"#FF0000";case w.EnumEvent.OPERATIONAL:return"#069B15";case w.EnumEvent.NO_OPERATIONAL:return"#F1C012";case w.EnumEvent.OPERATIONAL_DELAY:return"#0000FF"}return"#fff"},H=e=>{switch(e){case w.EnumEvent.MAINTENANCE:return"#FF0000";case w.EnumEvent.OPERATIONAL:return"#069B15";case w.EnumEvent.NO_OPERATIONAL:return"#F1C012";case w.EnumEvent.OPERATIONAL_DELAY:return"#0000FF";default:return"#808080"}},P=e=>`${`0${e.getHours()}`.slice(-2)}:${`0${e.getMinutes()}`.slice(-2)}`;var z=n(11818),M=n(8286),$=n(62822),W=n(50998),_=n(95757),U=n(78721),V=n(34326);const G=({handlePopoverClose:e,eventSelect:t})=>{var n,l,a;const{unitSelectTimelineList:o}=(0,m.C)(x.yV),c=(0,m.T)(),[u,h]=(0,d.useState)(P(new Date)),[f]=(0,V.N)(u),[j,b]=(0,d.useState)(""),{isDisabledTimeStart:y}=(({unitSelectTimelineList:e,setLabelHourInitial:t})=>{const[n]=(0,v.R)(),[i,s]=(0,d.useState)(!1);return(0,d.useEffect)((()=>{var i,l;if(1===e.length&&(null===(l=null===(i=e[0].initialEventState)||void 0===i?void 0:i.event)||void 0===l?void 0:l.event)===w.EnumEvent.UNKNOWN_STATE_EVENT){const e=new Date(n);n.getHours()>=7&&n.getHours()<19?(e.setHours(7),e.setMinutes(0)):(e.setHours(19),e.setMinutes(0)),t(P(new Date(e))),s(!0)}}),[e]),{isDisabledTimeStart:i}})({unitSelectTimelineList:o,setLabelHourInitial:h});(0,d.useEffect)((()=>{var e,t;const n=1===o.length?null===(t=null===(e=o[0])||void 0===e?void 0:e.initialHourmeter)||void 0===t?void 0:t.toFixed(1):"";b(n)}),[o]);const[E,O]=(0,d.useState)(),{eventStateList:S,statusEventStateList:T}=(0,m.C)(k.eG),[N]=(0,g.r)(T),Z=1===o.length&&(null===(a=null===(l=null===(n=o[0])||void 0===n?void 0:n.initialEventState)||void 0===l?void 0:l.event)||void 0===a?void 0:a.event)===w.EnumEvent.MAINTENANCE;return N?(0,i.jsx)(p.g,{}):(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(M.Z,{label:"Entrada",type:"time",value:u,disabled:y,autoFocus:!0,name:"timeStart",size:"small",InputLabelProps:{shrink:!0,required:!0},onChange:e=>h(e.target.value)}),Z&&(0,i.jsx)(M.Z,{label:"H. salida",type:"number",name:"initialHourmeter",size:"small",value:j,style:{maxWidth:100},onChange:e=>{var t;return b(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value)},InputLabelProps:{shrink:!0}}),t&&t.event!==w.EnumEvent.OPERATIONAL&&(0,i.jsx)($.Z,{children:S.map(((e,t)=>(0,i.jsx)(W.Z,Object.assign({selected:(null==E?void 0:E.id)===e.id,dense:!0,button:!0,onClick:()=>O(e),disableGutters:!0},{children:(0,i.jsx)(_.Z,{secondary:e.name})}),t)))}),(0,i.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,i.jsx)(r.Z,Object.assign({onClick:e,color:"primary",variant:"outlined",size:"small"},{children:"CANCELAR"})),(0,i.jsx)(r.Z,Object.assign({disabled:!(null==E?void 0:E.id)&&t&&t.event!==w.EnumEvent.OPERATIONAL&&o.length>0,onClick:()=>{return n=void 0,i=void 0,l=function*(){var n;let i=E;t.event===w.EnumEvent.OPERATIONAL&&(i={eventState:U.EnumEventState.UNKNOWN_STATE,id:"",name:"",event:t});const s={args:{htm:j,Substatus:i,status:null===(n=null==i?void 0:i.event)||void 0===n?void 0:n.event,date:f,time:u},currentTimeline:o[0]};i&&i.event?(Z?yield c((0,x.sx)(s)):yield c((0,x.hd)({event:i.event,eventState:i,dateShift:f,hourStart:u})),e()):alert("Seleccione un subestado")},new((s=void 0)||(s=Promise))((function(e,t){function a(e){try{r(l.next(e))}catch(e){t(e)}}function o(e){try{r(l.throw(e))}catch(e){t(e)}}function r(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(a,o)}r((l=l.apply(n,i||[])).next())}));var n,i,s,l},color:"secondary",variant:"contained",size:"small"},{children:"CONFIRMAR"}))]}))]})};const B=(0,T.Z)((e=>(0,N.Z)({popover:{},paper:{padding:e.spacing(1),zIndex:5}}))),K=({list:e,setOpen:t,setSelected:n,selected:s})=>{const[l,a]=(0,d.useState)(e),o={id:"",name:"NINGUNO",event:w.EnumEvent.UNKNOWN_STATE_EVENT};return(0,d.useEffect)((()=>{const t=[...e];t.unshift(o),a(t)}),[e]),(0,i.jsx)(y.Z,Object.assign({style:{padding:0},id:"split-button-menu"},{children:l.map(((e,l)=>e.event===w.EnumEvent.MAINTENANCE?null:(0,i.jsx)(E.Z,Object.assign({style:{background:H(e.event),color:"white",fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:12},selected:e===s,onClick:i=>((e,i)=>{n(i),t(!1)})(0,e)},{children:e.name}),l)))}))},q=({stateShift:e})=>{const{unitSelectTimelineList:t}=(0,m.C)(x.yV),[n,s,l]=(0,z.y)(t),a=B(),{eventList:o,statusEventList:c}=(0,m.C)(k.yJ),[v,h]=(0,C._)("MOVE_SELECT_EVENT",!1),[g,f]=(0,d.useState)(),[j,b,p]=(()=>{const{eventList:e,statusEventList:t}=(0,m.C)(k.yJ),[n,i]=(0,d.useState)(""),[s,l]=(0,d.useState)(""),[a,o]=(0,d.useState)("");return(0,d.useEffect)((()=>{var n,s,a;t===I.JD.DONE&&(i(null===(n=null==e?void 0:e.find((e=>e.event.toString()===w.EnumEvent.NO_OPERATIONAL.toString())))||void 0===n?void 0:n.name),l(null===(s=null==e?void 0:e.find((e=>e.event.toString()===w.EnumEvent.OPERATIONAL.toString())))||void 0===s?void 0:s.name),o(null===(a=null==e?void 0:e.find((e=>e.event.toString()===w.EnumEvent.OPERATIONAL_DELAY.toString())))||void 0===a?void 0:a.name))}),[t,e]),[n,s,a]})(),{historyTimelineShift:y}=(0,m.C)(x.yV),E=(0,m.T)(),T=(0,d.useRef)(),[N,L]=(0,d.useState)(!1),[F,R]=(0,d.useState)(null),P=()=>{R(null),L(!1)},M=(e,t)=>{return n=void 0,i=void 0,l=function*(){R(e.currentTarget),yield E((0,D.Gy)(t));const n=o.find((e=>e.event===t));h(n)},new((s=void 0)||(s=Promise))((function(e,t){function a(e){try{r(l.next(e))}catch(e){t(e)}}function o(e){try{r(l.throw(e))}catch(e){t(e)}}function r(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(a,o)}r((l=l.apply(n,i||[])).next())}));var n,i,s,l};(0,d.useEffect)((()=>{E((0,x.Rt)()),null==y||y.map((e=>{var t,n;(null===(n=null===(t=null==e?void 0:e.eventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===(null==g?void 0:g.event)&&E((0,x.WZ)(e.currentTimeline))}))}),[g]),(0,d.useEffect)((()=>{E((0,A.TU)())}),[]);const $=Boolean(F);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(O.Z,Object.assign({variant:"contained",color:"primary",disabled:e,ref:T,size:"small","aria-owns":$?"mouse-over-popover":void 0,"aria-label":"split button"},{children:[(0,i.jsx)(r.Z,Object.assign({style:{padding:4,margin:0,color:"#fff",fontSize:10,background:n?"grey":H(w.EnumEvent.NO_OPERATIONAL)},disabled:n,size:"small",onClick:e=>M(e,w.EnumEvent.NO_OPERATIONAL)},{children:j})),(0,i.jsx)(r.Z,Object.assign({style:{padding:4,margin:0,color:"#fff",fontSize:10,background:s?"grey":H(w.EnumEvent.OPERATIONAL)},disabled:s,size:"small",onClick:e=>M(e,w.EnumEvent.OPERATIONAL)},{children:b})),(0,i.jsx)(r.Z,Object.assign({style:{padding:4,margin:0,color:"#fff",fontSize:10,background:l?"grey":H(w.EnumEvent.OPERATIONAL_DELAY)},disabled:l,size:"small",onClick:e=>M(e,w.EnumEvent.OPERATIONAL_DELAY)},{children:p})),(0,i.jsx)(r.Z,Object.assign({color:"primary",size:"small","aria-controls":"split-button-menu","aria-expanded":"true","aria-label":"select merge strategy","aria-haspopup":"menu",onClick:()=>{L((e=>!e))},style:{padding:0,margin:0,color:"#fff",background:u.sb}},{children:(0,i.jsx)(Z.Z,{fontSize:"small"})}))]})),(0,i.jsx)(S.ZP,Object.assign({open:N,anchorEl:T.current,role:void 0,id:"mouse-list-popover",className:a.popover,classes:{paper:a.paper},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:P},{children:(0,i.jsx)(K,{setOpen:L,list:c===I.JD.DONE?o:[],selected:g,setSelected:f})})),(0,i.jsx)(S.ZP,Object.assign({id:"mouse-over-popover",className:a.popover,classes:{paper:a.paper},open:$,anchorEl:F,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:P},{children:(0,i.jsx)(G,{eventSelect:v,handlePopoverClose:P})}))]})},Y=e=>{const[t,n]=(0,d.useState)(!1);return(0,d.useEffect)((()=>{for(var[t,i]of Object.entries(null==e?{}:e)){if(0==i||""==i){n(!0);break}n(!1)}}),[e]),[t]};var J=n(64436),X=n(96019),Q=n(6562),ee=n(13258),te=n(990),ne=n(51182),ie=n(31366),se=n(71267),le=n(38799),ae=n(96394),oe=n(26209),re=n(8920);const ce=(0,T.Z)((e=>(0,N.Z)({formControl:{margin:e.spacing(1)},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}))),de={PaperProps:{style:{maxHeight:224,width:250}}};function ue(e,t,n){return{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',borderTop:-1===(null==t?void 0:t.indexOf(e))?"":"1px solid",color:-1===(null==t?void 0:t.indexOf(e))?"black":"white",background:-1===(null==t?void 0:t.indexOf(e))?"":`${u.Jx}`,fontWeight:(null==t||t.indexOf(e),n.typography.fontWeightLight)}}function ve(e){var{placeholder:t,iteams:n,selectValue:s}=e,l=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n}(e,["placeholder","iteams","selectValue"]);const a=ce(),o=(0,re.Z)(),[r,c]=d.useState([]);return(0,d.useEffect)((()=>{s(r)}),[r]),(0,i.jsx)(d.Fragment,{children:(0,i.jsxs)(J.Z,Object.assign({fullWidth:!0,className:a.formControl},l,{children:[(0,i.jsx)(ae.Z,Object.assign({id:"demo-mutiple-chip-label"},{children:t})),(0,i.jsxs)(oe.Z,Object.assign({fullWidth:!0,id:"demo-mutiple-chip",input:(0,i.jsx)(le.Z,{id:"select-multiple-chip"}),labelId:"demo-mutiple-chip-label",MenuProps:de,multiple:!0,onChange:e=>{const t=null==n?void 0:n.map((e=>e.name));e.target.value.some((e=>"TODOS"===e))?(null==n?void 0:n.length)===(null==r?void 0:r.length)?c([]):c([...t]):c(e.target.value)},value:r,renderValue:e=>(0,i.jsx)("div",Object.assign({className:a.chips},{children:e.map((e=>(0,i.jsx)(se.Z,{label:e,className:a.chip},e)))}))},{children:[(0,i.jsx)(E.Z,Object.assign({value:"TODOS",onClick:()=>{const e=null==n?void 0:n.map((e=>e.name));0===(null==r?void 0:r.length)?c([...e]):c([])}},{children:"TODOS"})),0===(null==n?void 0:n.length)?(0,i.jsx)(p.g,{}):null==n?void 0:n.map((e=>(0,i.jsx)(E.Z,Object.assign({style:ue(e.name,r,o),value:e.name},{children:e.name}),e.value)))]}))]}))})}const me=({setForm:e,setFormCheckbox:t})=>{const n=(0,m.T)(),[l,o]=d.useState(f.Shift.UNKNOWN_SHIFT),[r]=(0,h.l)(new Date),[c]=(0,h.l)(new Date),[u,v]=d.useState([]),g=(()=>{const{assetList:e,statusAssetList:t}=(0,m.C)(ne.LG),[n,i]=(0,d.useState)([]);return(0,d.useEffect)((()=>{t===I.JD.DONE?i(e):i([])}),[t]),n})(),x=((e,t)=>{const[n,i]=(0,d.useState)([]);return(0,d.useEffect)((()=>{const n=[];e.forEach((e=>{t.forEach((t=>{e.name!==t||n.push(e.enumAssetType)}))})),i(n)}),[t,e]),n})(g,u),[j,b,p,y]=(0,te.M)({assetTypeList:x,endDate:r,shift:l||f.Shift.UNKNOWN_SHIFT,startDate:c}),[E,O]=(0,te.M)({history:!1,resumen:!0}),{startDate:S,endDate:T}=j;return(0,d.useEffect)((()=>{e(j),t(E)}),[j,E]),(0,d.useEffect)((()=>{y(Object.assign(Object.assign({},j),{assetTypeList:x,shift:l}))}),[l,x]),(0,d.useEffect)((()=>{n((0,ne.BX)())}),[]),(0,i.jsx)(d.Fragment,{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,spacing:2,direction:"row",justifyContent:"space-between"},{children:[(0,i.jsx)(s.Z,Object.assign({container:!0,spacing:2,xs:12,sm:6,md:6},{children:(0,i.jsx)(s.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:(0,i.jsx)(ve,{iteams:g.map((e=>({name:e.name,value:e.enumAssetType}))),placeholder:"Tipo de equipos",selectValue:v,style:{minWidth:400,maxWidth:450}})}))})),(0,i.jsxs)(s.Z,Object.assign({container:!0,spacing:2,xs:12,sm:6,md:6},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,i.jsx)(M.Z,{autoFocus:!0,fullWidth:!0,id:"startDate",label:"Fecha Inicial",margin:"normal",name:"startDate",onChange:b,required:!0,style:{textAlign:"center"},type:"date",value:S,variant:"outlined"})})),(0,i.jsx)(s.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,i.jsx)(M.Z,{label:"Fecha Final",autoFocus:!0,fullWidth:!0,id:"endDate",margin:"normal",name:"endDate",onChange:b,required:!0,style:{textAlign:"center"},type:"date",value:T,variant:"outlined"})}))," ",(0,i.jsx)(s.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,i.jsx)(ie.Z,{iteams:[{value:f.Shift.BOTH,tittle:"Ambos"},{value:f.Shift.DAY,tittle:"Dia"},{value:f.Shift.NIGHT,tittle:"Noche"}],placeholder:"Turno",required:!0,selectValue:o})})),(0,i.jsx)(s.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,i.jsxs)(J.Z,Object.assign({component:"fieldset"},{children:[(0,i.jsx)(X.Z,Object.assign({component:"legend"},{children:"Tipo de Excel"})),(0,i.jsxs)(Q.Z,Object.assign({row:!0},{children:[(0,i.jsx)(a.Z,{control:(0,i.jsx)(ee.Z,{checked:E.resumen,name:"resumen",onChange:O}),label:"Resumen"}),(0,i.jsx)(a.Z,{control:(0,i.jsx)(ee.Z,{checked:E.history,name:"history",onChange:O}),label:"Historico"})]}))]}))}))]}))]}))})};var he=n(43099);const ge=()=>{const e=(0,m.T)(),[t,n]=(0,d.useState)(!1),[s,l]=(0,d.useState)(),[a,o]=(0,d.useState)(),[c]=Y(s);return(0,i.jsxs)(d.Fragment,{children:[(0,i.jsx)(r.Z,Object.assign({color:"secondary",size:"small",variant:"contained",startIcon:(0,i.jsx)(he.Z,{}),onClick:()=>{n(!0)}},{children:"Reportes"})),(0,i.jsx)(b.a,Object.assign({open:t,handleClose:()=>{n(!1)},title:"Descargar Reportes línea de tiempo",disabled:c,handleConfirm:()=>{(null==a?void 0:a.history)&&e((0,x.g7)(s)),(null==a?void 0:a.resumen)&&e((0,x.LO)(s)),n(!1)}},{children:(0,i.jsx)(me,{setForm:l,setFormCheckbox:o})}))]})};var fe=n(22318),xe=n(7258),je=n(80936);const be=()=>{const{historyTimelineShift:e,guardShift:t,stateShift:n}=(0,m.C)(x.yV),s=(e=>{switch(e){case xe.EnumGuard.A:return"A";case xe.EnumGuard.B:return"B";case xe.EnumGuard.C:return"C";case xe.EnumGuard.UNKNOWN_GUARD:return"DESCONOCIDO"}})(t),l=n===(null===je.TimelinesShiftResponse||void 0===je.TimelinesShiftResponse?void 0:je.TimelinesShiftResponse.State.CLOSED)?"CERRADO":"EN PROGRESO";return(0,i.jsx)(i.Fragment,{children:0===(null==e?void 0:e.length)?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(fe.Z,Object.assign({variant:"subtitle1",style:{color:"white"}},{children:["GUARDIA ",s," - TURNO: ",l]}))})};var pe=n(96617),ye=n(79895),Ee=n(868),Oe=n(28428),Se=n(30115),Te=n(39704),Ne=n(19238),Ze=n(63663),Ie=n(2834);const Ce=(e,t)=>{const[n,i]=(0,d.useState)(!1);return(0,d.useEffect)((()=>{var n,s,l,a;i(!1);const o=null==e?void 0:e.find((e=>e.deviceId===t.deviceId)),r=null==o?void 0:o.historyShiftList.findIndex((e=>e.id===t.id)),c=null==o?void 0:o.historyShiftList.at(r-1);(null===(s=null===(n=null==t?void 0:t.initialEventState)||void 0===n?void 0:n.event)||void 0===s?void 0:s.event.toString())===w.EnumEvent.MAINTENANCE.toString()&&i(!0),(null===(a=null===(l=null==c?void 0:c.initialEventState)||void 0===l?void 0:l.event)||void 0===a?void 0:a.event.toString())===w.EnumEvent.MAINTENANCE.toString()&&i(!0)}),[t,e]),[n]};var we=function(e,t,n,i){return new(n||(n=Promise))((function(s,l){function a(e){try{r(i.next(e))}catch(e){l(e)}}function o(e){try{r(i.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}r((i=i.apply(e,t||[])).next())}))};const Ae=(0,Se.Z)((()=>({root:{minWidth:150,padding:4,borderWidth:2,borderStyle:"solid"}}))),De=e=>{var t;const n=new Date(1e3*(null===(t=null==e?void 0:e.initialTime)||void 0===t?void 0:t.seconds)),i=(null==e?void 0:e.finalTime)?new Date(1e3*(null==e?void 0:e.finalTime.seconds)):new Date;return{timeInitial:n,timeFinal:i,hourInitial:P(n),hourFinal:P(i)}},ke=({timeline:e})=>{var t,n,l,a,o,r;const c=R(e),{statusUpdateTimeline:u,currentTimeline:v}=(0,m.C)(x.yV),{historyTimelineShift:h,statusDelete:f}=(0,m.C)(x.yV),[j]=(0,g.r)(u),[b]=(0,g.r)(f),p=(0,Te.I0)(),y=Ae(),E=(0,d.useRef)(),{hourInitial:O,hourFinal:S}=De(e),[T,N]=(0,d.useState)(O),[Z,I]=(0,d.useState)(null===(t=null==e?void 0:e.initialHourmeter)||void 0===t?void 0:t.toFixed(1));(0,d.useEffect)((()=>{var t;I(null===(t=null==e?void 0:e.initialHourmeter)||void 0===t?void 0:t.toFixed(1))}),[e]);const[C,w,A]=((e,t)=>{const[n,i]=(0,d.useState)(!1),[s,l]=(0,d.useState)(!0),[a,o]=(0,d.useState)(!0);return(0,d.useEffect)((()=>{var n,s,a,r;const c=e.find((e=>e.deviceId===t.deviceId));i(!1),l(!1),o(!1),(null==c?void 0:c.historyShiftList.length)>1&&(o(!0),l(!1)),(null===(s=null===(n=null==c?void 0:c.historyShiftList)||void 0===n?void 0:n.at(-1))||void 0===s?void 0:s.id)===(null==t?void 0:t.id)&&(i(!0),l(!1)),(null===(r=null===(a=null==c?void 0:c.historyShiftList)||void 0===a?void 0:a[0])||void 0===r?void 0:r.id)===(null==t?void 0:t.id)&&(i(!1),l(!0))}),[t]),[n,s,a]})(h,e),[D]=Ce(h,e),[k,L]=(0,d.useState)(!1);(0,d.useEffect)((()=>{var t;const{hourInitial:n}=De(e);N(n),I(null===(t=null==e?void 0:e.initialHourmeter)||void 0===t?void 0:t.toFixed(1)),E.current&&setTimeout((()=>{E.current.focus()}),100)}),[e]);const F=(null==e?void 0:e.finalHourmeter)-(null==e?void 0:e.initialHourmeter),H=e=>we(void 0,void 0,void 0,(function*(){"Enter"===e.key&&P()})),P=()=>we(void 0,void 0,void 0,(function*(){var t,n;const[i,s]=T.split(":"),[l,a]=O.split(":"),o=(Number(i),Number(l),Number(s),Number(a),{});o.id=e.id,o.deviceId=e.deviceId,o.deviceAlias=e.deviceAlias,o.initialHourmeter=Z,o.finalHourmeter=e.finalHourmeter,o.initialState=e.initialState,o.finalState=e.finalState,o.date=(0,Ne.v)(new Date),o.time=T,e.finalTime&&(o.finalTime={seconds:null===(t=e.finalTime)||void 0===t?void 0:t.seconds}),o.shiftDate={seconds:null===(n=null==e?void 0:e.shiftDate)||void 0===n?void 0:n.seconds},o.shift=e.shift,yield p((0,x.yi)(o)),!1===j&&v&&p((0,x.IE)())}));return(0,i.jsx)(ye.Z,Object.assign({elevation:4,className:y.root,style:{borderColor:c}},{children:(0,i.jsxs)(Ze.T5,Object.assign({alignItems:"center",justifyContent:"center",direction:"row",style:{gap:4,alignItems:"stretch"}},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"column",style:{height:"100%"}},{children:[(0,i.jsx)(Ze.P4,{children:(0,i.jsx)(se.Z,{size:"small",label:null==e?void 0:e.deviceAlias})}),(0,i.jsx)(Ze.P4,{children:(0,i.jsx)(se.Z,{style:{background:c,color:"#fff"},size:"small",label:(0,i.jsx)("span",Object.assign({style:{fontSize:9}},{children:null===(l=null===(n=null==e?void 0:e.initialEventState)||void 0===n?void 0:n.event)||void 0===l?void 0:l.name}))})}),(null===(a=e.initialEventState)||void 0===a?void 0:a.name)&&(0,i.jsx)(Ze.P4,{children:(0,i.jsx)(se.Z,{style:{maxWidth:150,borderWidth:2,borderStyle:"solid",borderColor:c},size:"small",label:(0,i.jsx)("span",Object.assign({style:{fontSize:9}},{children:null===(o=e.initialEventState)||void 0===o?void 0:o.name}))})}),(0,i.jsx)(Ze.P4,{children:(0,i.jsx)(se.Z,{size:"small",label:F>=0?`${F.toFixed(1)}h`:"..."})}),(0,i.jsx)(Ze.P4,{children:(0,i.jsx)(se.Z,{size:"small",label:new Date(1e3*(null===(r=null==e?void 0:e.initialTime)||void 0===r?void 0:r.seconds)).toLocaleDateString()})})]}))})),(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"column"},{children:[(0,i.jsx)(M.Z,{label:"Entrada",type:"time",disabled:w,value:T,autoFocus:!0,onKeyDown:H,name:"timeStart",size:"small",inputRef:E,InputLabelProps:{shrink:!0,required:!0},onChange:e=>N(e.target.value)}),(0,i.jsx)(M.Z,{label:"Salida",type:"time",name:"timeEnd",size:"small",disabled:!0,value:S})]}))})),(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"column"},{children:[(0,i.jsx)(M.Z,{label:"H. inicial",type:"number",name:"initialHourmeter",size:"small",disabled:!D,onKeyDown:H,value:Z,style:{maxWidth:100},onChange:e=>I(e.target.value),InputLabelProps:{shrink:!0}}),(0,i.jsx)(M.Z,{label:"H. final ",name:"initialHourmeter",size:"small",disabled:!0,style:{maxWidth:100},value:e.finalHourmeter?e.finalHourmeter.toFixed(1):"...",InputLabelProps:{shrink:!0}})]}))})),!w&&(0,i.jsx)(Ie.d,{size:"small",variant:"contained",color:"secondary",onClick:P,text:"GUARDAR",loading:j}),C&&(0,i.jsx)(Ee.ZP,Object.assign({title:"Doble click para borrar"},{children:(0,i.jsx)(Ie.d,{size:"small",variant:"contained",onDoubleClick:()=>we(void 0,void 0,void 0,(function*(){const t={};t.id=e.id,t.deviceId=e.deviceId,yield p((0,x.Td)(t)),!1===b&&v&&(L(!1),p((0,x.IE)()))})),style:{background:"rgb(154, 0, 54)",color:"white"},startIcon:(0,i.jsx)(Oe.Z,{}),loading:b,text:"Borrar"})}))]}))}))};var Le=n(60395),Fe=n(23800);const Re=({timeline:e})=>{var t,n;const{eventStateList:l,statusEventStateList:a}=(0,m.C)(k.eG),[o]=(0,g.r)(a),c=new Date,u=`0${c.getHours()}`,v=`0${c.getMinutes()}`,h=(0,Te.I0)(),f=Ae(),j=(0,d.useRef)(),[b,p]=(0,d.useState)(`${u.slice(-2)}:${v.slice(-2)}`),[y]=(0,V.N)(b),[E]=(0,Fe.Z)(b,e),[O,S]=(0,d.useState)("");(0,d.useEffect)((()=>{setTimeout((()=>{S(E)}),100)}),[E]),(0,d.useEffect)((()=>{h((0,D.Gy)(w.EnumEvent.MAINTENANCE))}),[]);const[T,N]=d.useState();return(0,i.jsx)(Le.Z,Object.assign({component:"form",onSubmit:t=>{return n=void 0,i=void 0,a=function*(){var n;t.preventDefault();const i={},s=l.find((e=>e.eventState===T));i.deviceId=null==e?void 0:e.deviceId,i.deviceAlias=null==e?void 0:e.deviceAlias,i.assetType=null==e?void 0:e.assetType,i.initialHourmeter=O,i.initialState=w.EnumEvent.MAINTENANCE,i.initialEventState=s,i.date=y,i.time=b,i.shiftDate={seconds:null===(n=null==e?void 0:e.shiftDate)||void 0===n?void 0:n.seconds},i.shift=null==e?void 0:e.shift,i.eventState=s,yield h((0,x.lY)(i)),h((0,x.Gf)())},new((s=void 0)||(s=Promise))((function(e,t){function l(e){try{r(a.next(e))}catch(e){t(e)}}function o(e){try{r(a.throw(e))}catch(e){t(e)}}function r(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(l,o)}r((a=a.apply(n,i||[])).next())}));var n,i,s,a}},{children:(0,i.jsx)(ye.Z,Object.assign({elevation:4,className:f.root,style:{borderColor:H(w.EnumEvent.MAINTENANCE)}},{children:(0,i.jsxs)(Ze.T5,Object.assign({alignItems:"center",justifyContent:"center",direction:"row",style:{gap:4,alignItems:"stretch"}},{children:[(0,i.jsxs)(s.Z,Object.assign({item:!0,direction:"column"},{children:[(0,i.jsx)(Ze.P4,{children:(0,i.jsx)(se.Z,{size:"small",label:null==e?void 0:e.deviceAlias})}),(0,i.jsx)(Ze.P4,{children:(0,i.jsx)(se.Z,{style:{background:H(w.EnumEvent.MAINTENANCE),color:"#fff"},size:"small",label:(0,i.jsx)("span",Object.assign({style:{fontSize:9}},{children:null===(n=null===(t=l[0])||void 0===t?void 0:t.event)||void 0===n?void 0:n.name}))})})]})),(0,i.jsxs)(s.Z,Object.assign({item:!0},{children:[(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"row",justifyContent:"space-between"},{children:[(0,i.jsx)(M.Z,{required:!0,label:"Entrada",type:"time",value:b,autoFocus:!0,name:"timeStart",size:"small",inputRef:j,InputLabelProps:{shrink:!0,required:!0},onChange:e=>p(e.target.value)}),(0,i.jsx)(M.Z,{required:!0,label:"H. de entreda",type:"number",name:"initialHourmeter",size:"small",value:O,style:{maxWidth:100},onChange:e=>S(e.target.value),InputLabelProps:{shrink:!0,required:!0}})]})),(0,i.jsx)(s.Z,Object.assign({container:!0,item:!0,direction:"row"},{children:(0,i.jsx)(ie.Z,{required:!0,value:"",placeholder:"Estado",loading:o,iteams:l.map((e=>({value:e.eventState,tittle:e.name}))),selectValue:N})}))]})),(0,i.jsx)(r.Z,Object.assign({size:"small",type:"submit",variant:"contained",color:"secondary"},{children:"GUARDAR"}))]}))}))}))},He=(0,T.Z)({layoutPopper:{position:"absolute",top:0,bottom:0,right:0,left:0,zIndex:3},arrowPopper:{width:11,height:4,background:e=>e.color,transform:"translateX(-7px) rotate(40deg)"},rootPopper:{zIndex:5,marginTop:8,marginLeft:6}}),Pe=()=>{var e,t;const n=(0,m.T)(),{currentTimeline:s,currentMantoTimeline:l}=(0,m.C)(x.yV),[a,o]=(0,d.useState)(null);(0,d.useEffect)((()=>{if(s){const e=document.getElementById(`state-${(null==s?void 0:s.id)?null==s?void 0:s.id:null==s?void 0:s.deviceId}`);e&&o(e),s&&n((0,x.Gf)())}}),[s]),(0,d.useEffect)((()=>{if(l){const e=document.getElementById(`stateManto-${(null==l?void 0:l.id)?null==l?void 0:l.id:null==l?void 0:l.deviceId}`);e&&o(e),l&&n((0,x.IE)())}}),[l]);const r=s?R(s):"#fff",c=He({color:r});return a&&(s||l)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(pe.Z,Object.assign({open:!!s||!!l,className:c.rootPopper,anchorEl:a,placement:"right-start"},{children:[l&&(null===(t=null===(e=l.initialEventState)||void 0===e?void 0:e.event)||void 0===t?void 0:t.event)!==w.EnumEvent.MAINTENANCE&&(0,i.jsxs)(d.Fragment,{children:[(0,i.jsx)("div",{className:c.arrowPopper}),(0,i.jsx)(Re,{timeline:l})]}),s&&(0,i.jsxs)(d.Fragment,{children:[(0,i.jsx)("div",{className:c.arrowPopper}),(0,i.jsx)(ke,{timeline:s})]})]})),(0,i.jsx)("div",{onClick:()=>{n((0,x.IE)()),n((0,x.Gf)())},className:c.layoutPopper})]}):(0,i.jsx)(i.Fragment,{})};var ze=n(57163);const Me=e=>{const[t,n]=(0,d.useState)(!0);return(0,d.useEffect)((()=>{n(!0),e===je.TimelinesShiftResponse.State.CLOSED&&n(!0),e===je.TimelinesShiftResponse.State.IN_PROGRESS&&n(!1)}),[e]),{state:t}},$e=()=>{const[e,t]=(0,d.useState)({flex:0,time:0});return(0,d.useEffect)((()=>{t(F()),setInterval((()=>{t(F())}),5e3)}),[]),{currentLine:e}},We=(0,T.Z)((()=>({root:{position:"absolute",display:"flex",bottom:0,right:400,left:50,top:-4},itemHour:{flex:1,borderRightColor:"grey",borderRightWidth:1,borderRightStyle:"dashed",position:"relative"},labelItemHour:{color:"rgb(131 126 126)",position:"absolute",left:-19,top:-8,background:"white",userSelect:"none"},labelContainerHour:{zIndex:5,top:90,position:"sticky"},rootTimeline:{position:"absolute",right:0,height:"100%",left:0,display:"flex",zIndex:0},beforeTimeline:{height:0},afterTimeline:{height:0,borderRightColor:"#ccc",borderRightWidth:1,borderRightStyle:"dashed"},line:{width:1,background:u.Jx,height:"100%"},rootLine:{paddingTop:8,height:"100%"},labelTitle:{color:"rgb(131 126 126)",background:"white",userSelect:"none"},labelContainer:{top:80,position:"sticky",height:10,background:"#fafafa",width:80,zIndex:2},rootRigth:{textAlign:"center",position:"absolute",display:"flex",bottom:0,right:0,top:-14}}))),_e=({shift:e})=>{const{currentLine:t}=$e(),n=We(),l=(e=>e===f.Shift.DAY?[7,8,9,10,11,12,13,14,15,16,17,18]:[19,20,21,22,23,0,1,2,3,4,5,6])(e),a=(0,d.useMemo)((()=>l.map(((e,t)=>(0,i.jsx)("div",Object.assign({className:n.itemHour},{children:(0,i.jsx)("div",Object.assign({className:n.labelContainerHour},{children:(0,i.jsxs)("label",Object.assign({className:n.labelItemHour},{children:[`0${e}`.slice(-2),":00"]}))}))}),t)))),[l]);return(0,i.jsxs)(d.Fragment,{children:[(0,i.jsxs)(s.Z,Object.assign({className:n.root},{children:[a,(0,i.jsxs)("div",Object.assign({className:n.rootTimeline},{children:[(0,i.jsx)("div",{className:n.beforeTimeline,style:{flex:t.flex}}),(0,i.jsx)("div",Object.assign({className:n.rootLine},{children:(0,i.jsx)("div",{className:n.line})})),(0,i.jsx)("div",{className:n.afterTimeline,style:{flex:1-t.flex}})]}))]})),(0,i.jsxs)(s.Z,Object.assign({className:n.rootRigth},{children:[(0,i.jsx)("div",Object.assign({className:n.labelContainer},{children:(0,i.jsx)("label",Object.assign({className:n.labelTitle},{children:"Nombre"}))})),(0,i.jsx)("div",Object.assign({className:n.labelContainer},{children:(0,i.jsx)("label",Object.assign({className:n.labelTitle},{children:"Inicial"}))})),(0,i.jsx)("div",Object.assign({className:n.labelContainer},{children:(0,i.jsx)("label",Object.assign({className:n.labelTitle},{children:"Proyectado"}))})),(0,i.jsx)("div",Object.assign({className:n.labelContainer},{children:(0,i.jsx)("label",Object.assign({className:n.labelTitle},{children:"Ajuste"}))})),(0,i.jsx)("div",Object.assign({className:n.labelContainer},{children:(0,i.jsx)("label",Object.assign({className:n.labelTitle},{children:"Final"}))}))]}))]})};var Ue=n(95875),Ve=n(50743),Ge=n(61201),Be=n(64566);const Ke=e=>{const[t,n]=(0,d.useState)("");return(0,d.useEffect)((()=>{var t;const i=null===(t=null==e?void 0:e.deviceAlias)||void 0===t?void 0:t.split("-"),s=1===i.length?i[0]:`${i[0]}${i[1].slice(-3)}`;n(s)}),[e]),[t]},qe=(0,T.Z)((()=>({rootUnitState:{height:2,position:"relative"},dotUnitState:{width:12,height:12,borderRadius:6,background:"#fff",position:"absolute",borderColor:"#6d6c6c",borderWidth:2,borderStyle:"solid",top:-5,left:-4,zIndex:5,cursor:"pointer"},dotUnitStateCurrent:{width:12,height:12,borderRadius:6,position:"absolute",top:-5,right:-5,zIndex:4,cursor:"pointer"},dotLabelHour:{fontSize:9,position:"absolute",left:-4,bottom:-15,userSelect:"none"},rootRowTimeline:{background:e=>e.indexTimeline%2!=0?"#cccccc52":"#fff","&:hover, &:focus":{backgroundColor:"#ccc"}}}))),Ye=(e,t,n,i)=>{if(e<0)return null;let s;const l=n?`${i}${e===t?0:e+1}`:`${i}${0===e?t:e-1}`;return s=document.getElementById(l),setTimeout((()=>{s.setSelectionRange(s.value.length,s.value.length)}),10),s&&s.disabled&&(s=null),!s&&e<t&&0!==e?Ye(n?e+1:e-1,t,n):s};var Je=n(51034);const Xe=e=>{const[t,n]=(0,d.useState)(""),i=(0,m.T)(),[s,l]=(0,d.useState)(!1),[a]=(()=>{const{shiftSelect:e}=(0,m.C)(x.yV),[t]=(0,v.R)(),[n]=(0,h.l)(t);return[{shift:e,date:`${n}T00:00`}]})(),{historyTimelineShift:o}=(0,m.C)(x.yV),r=o.find((t=>t.deviceId===e.deviceId)),c=e=>{n(e)};return{editHourmeter:s,intialHourmeter:t,handleEditHourmeter:e=>{return t=void 0,n=void 0,a=function*(){var t;if("Escape"===e.key&&l(!1),"Enter"===e.key){const n=Object.assign(Object.assign({},r.historyShiftList[0]),{initialHourmeter:null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value});yield i((0,x.xe)(n)),l(!1)}},new((s=void 0)||(s=Promise))((function(e,i){function l(e){try{r(a.next(e))}catch(e){i(e)}}function o(e){try{r(a.throw(e))}catch(e){i(e)}}function r(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(l,o)}r((a=a.apply(t,n||[])).next())}));var t,n,s,a},handleLabelInitialHourmeter:()=>{var t,n;l(!0),c(null===(n=null===(t=r.historyShiftList[0])||void 0===t?void 0:t.initialHourmeter)||void 0===n?void 0:n.toFixed(1)),setTimeout((()=>{const t=null==e?void 0:e.id;document.getElementById(t).focus()}),100)},handlesetIntialHourmeter:c}},Qe=(0,T.Z)((()=>({borderLeft:{borderLeftColor:"gray",borderLeftWidth:1,borderLeftStyle:"dashed",width:80,paddingLeft:4,zIndex:1},inputHourmeterFinal:{borderColor:e=>e.error?"orange":"#ccc",borderRadius:2,width:80,paddingLeft:4,zIndex:1,"&:focus":{background:"#1D4E89",color:"white",fontWeight:900}},borderAdjustement:{borderLeftColor:"gray",borderLeftWidth:1,borderLeftStyle:"dashed",color:e=>e.errorAjustment?"red":"grey",textAlign:"center",width:80},borderAdjustementCloseShift:{borderLeftColor:"gray",borderLeftWidth:1,borderLeftStyle:"dashed",color:e=>e.errorAjustmentCloseShift?"red":"grey",textAlign:"center",width:80}}))),et=({currentTimeline:e,index:t,lastIndex:n,idInitial:l,timeFinal:a,setTimeFinal:o})=>{var r,c,u,v,h,g,f,j,b,p,y;const E=(0,m.T)(),{unitSelectTimelineList:O,historyTimelineShift:S,stateShift:T}=(0,m.C)(x.yV),{}=$e(),[N,Z]=(0,d.useState)("2222"),{error:I,textInput:A,onChangeText:D,onKeyDown:k}=(({currentState:e,setTimeFinal:t,timeFinal:n,historyTimelineShift:i})=>{const[s,l]=(0,C._)("close_shift_units",[]),[a,o]=(0,d.useState)(null),[r,c]=(0,d.useState)(""),[u,v]=(0,d.useState)(!1),[h]=Ce(i,e),{timelineError:g}=(0,m.C)(Je.a9);(0,d.useEffect)((()=>{f(0)}),[]),(0,d.useEffect)((()=>{if(null!=typeof g.code&&410===g.code&&0!=e.finalHourmeter){let t=e.finalHourmeter.toFixed(1).toString();c(t),f(Number(t))}}),[g.code]);const f=t=>{const n=localStorage.getItem("close_shift_units"),i=n?JSON.parse(n):[],s=i.findIndex((t=>t.deviceId===e.deviceId)),a={deviceAlias:e.deviceAlias,deviceId:e.deviceId,hourmeter:t>0?parseFloat(t.toFixed(1)):0,time:t>0?(new Date).getTime()/1e3:0},o=[...i];-1===s?o.push(a):o[s]=a,l(o)};return{error:u,textInput:r,setTextInput:c,timeFinal:n,setTimeFinal:t,onChangeText:n=>{let i=n.target.value;h&&!i&&(i=""),n.target.value||(i=0===e.finalHourmeter?"":e.finalHourmeter.toFixed(1).toString(),""===n.target.value&&0==e.finalHourmeter&&(i=""),h&&(i="")),!n.target.value&&Object.entries(n).length>1&&(i=n.target.value),c(i),t(n.target.value?(new Date).getTime()/1e3:-1),f(Number(i))},onKeyDown:()=>{clearTimeout(a)}}})({currentState:e,setTimeFinal:o,timeFinal:a,historyTimelineShift:S}),[L]=((e,t,n)=>{const[i,s]=(0,d.useState)(""),[l]=((e,t)=>{const[n,i]=(0,d.useState)(!1);return(0,d.useEffect)((()=>{var n,s;i(!1);const l=null==e?void 0:e.find((e=>e.deviceId===t.deviceId)),a=null==l?void 0:l.historyShiftList.findIndex((e=>e.id===t.id)),o=null==l?void 0:l.historyShiftList.at(a-1);(null===(s=null===(n=null==o?void 0:o.initialEventState)||void 0===n?void 0:n.event)||void 0===s?void 0:s.event.toString())===w.EnumEvent.MAINTENANCE.toString()&&i(!0)}),[t,e]),[n]})(e,t);return(0,d.useEffect)((()=>{var e,i;(null===(i=null===(e=t.initialEventState)||void 0===e?void 0:e.event)||void 0===i?void 0:i.event)===w.EnumEvent.MAINTENANCE?s(t.initialHourmeter.toFixed(1)):s(""===n?n:"number"==typeof n?parseFloat(n).toFixed(1):n),l&&s(n)}),[n,l]),[i]})(S,e,A),[F]=Ke(e),{editHourmeter:R,intialHourmeter:H,handleEditHourmeter:P,handleLabelInitialHourmeter:z,handlesetIntialHourmeter:M}=Xe(e),$=()=>{""!=A&&(E((0,x.r6)({truck:{deviceId:e.deviceId,deviceAlias:e.deviceAlias},hourmeter:A?parseFloat(A):0})),D({target:{value:A}}))},W=((e,t)=>{var n,i,s,l,a,o;if((null===(i=null===(n=e.initialEventState)||void 0===n?void 0:n.event)||void 0===i?void 0:i.event)!==w.EnumEvent.NO_OPERATIONAL&&(null===(l=null===(s=e.initialEventState)||void 0===s?void 0:s.event)||void 0===l?void 0:l.event)!==w.EnumEvent.MAINTENANCE){if(-1===t){const t=((new Date).getTime()/1e3-(null===(a=null==e?void 0:e.initialTime)||void 0===a?void 0:a.seconds))/3600;return(e.initialHourmeter+t).toFixed(1)}const n=((t||(new Date).getTime()/1e3)-(null===(o=null==e?void 0:e.initialTime)||void 0===o?void 0:o.seconds))/3600;return(e.initialHourmeter+n).toFixed(1)}return e.initialHourmeter.toFixed(1)})(e,Number(a)),_=null==S?void 0:S.find((t=>t.deviceId===e.deviceId)),U=(Number(A)>0&&(Number(A),null===(u=null===(c=null===(r=null==_?void 0:_.historyShiftList)||void 0===r?void 0:r.at(-1))||void 0===c?void 0:c.initialHourmeter)||void 0===u||u.toFixed(1)),Number(e.adjustment.toFixed(1))>=.3||Number(e.adjustment.toFixed(1))<=-.3),V=(null===(v=null==_?void 0:_.currentTimeline)||void 0===v?void 0:v.adjustment.toFixed(1))>=.3||(null===(h=null==_?void 0:_.currentTimeline)||void 0===h?void 0:h.adjustment.toFixed(1))<=-.3,G=Qe({error:I,errorAjustment:U,errorAjustmentCloseShift:V}),B=(0,d.useCallback)((()=>O.some((t=>t.deviceId===e.deviceId))),[O]);return(0,d.useEffect)((()=>{B()&&E((0,x.Z7)(e))}),[e]),(0,d.useEffect)((()=>{D({target:{value:""}})}),[null===(f=null===(g=e.initialEventState)||void 0===g?void 0:g.event)||void 0===f?void 0:f.event]),(0,i.jsxs)(s.Z,Object.assign({style:{width:400,display:"flex",textAlign:"center"}},{children:[(0,i.jsxs)("label",Object.assign({style:{width:30,userSelect:"none",flex:2}},{children:[(0,i.jsx)(ee.Z,{onClick:()=>{E((0,x.WZ)(e))},checked:B(),style:{padding:0,flex:1,zIndex:1},size:"small"}),F]})),!R&&(0,i.jsx)("label",Object.assign({className:G.borderLeft,onDoubleClick:z},{children:null===(b=null===(j=null==_?void 0:_.historyShiftList[0])||void 0===j?void 0:j.initialHourmeter)||void 0===b?void 0:b.toFixed(1)})),R&&(0,i.jsx)("input",{id:e.id,className:G.borderLeft,type:"number",value:H,onChange:e=>M(e.currentTarget.value),name:"hourmeterInitial",onKeyUp:e=>P(e)}),(0,i.jsx)("label",Object.assign({className:G.borderLeft},{children:W})),T===je.TimelinesShiftResponse.State.IN_PROGRESS?(0,i.jsxs)(d.Fragment,{children:[(0,i.jsx)("label",Object.assign({className:G.borderAdjustement},{children:e.adjustment.toFixed(1)})),(0,i.jsx)("input",{id:`${l}${t}`,className:G.inputHourmeterFinal,value:A,type:"text",pattern:"[0-9]+([.,][0-9]+)?",onChange:e=>function(e){const t=e.currentTarget.value;""===t&&D(Object.assign({target:{value:t}},e)),!isNaN(parseFloat(t))&&isFinite(t)&&D(Object.assign({target:{value:t}},e))}(e),autoComplete:"off",onKeyDown:e=>{let i=null;switch(e.key){case"ArrowDown":case"Enter":i=Ye(t,n,!0,l),$();break;case"ArrowUp":i=Ye(t,n,!1,l),$();break;default:k()}i&&i.focus()},placeholder:e.deviceAlias,onBlur:$})]}):(0,i.jsxs)(d.Fragment,{children:[(0,i.jsx)("label",Object.assign({className:G.borderAdjustementCloseShift},{children:null===(p=null==_?void 0:_.currentTimeline)||void 0===p?void 0:p.adjustment.toFixed(1)})),(0,i.jsx)("label",Object.assign({className:G.inputHourmeterFinal},{children:null===(y=null==_?void 0:_.currentTimeline)||void 0===y?void 0:y.finalHourmeter.toFixed(1)}))]})]}))},tt=({currentTimeline:e,timeFinal:t})=>{var n,l;const a=(0,m.T)(),{}=$e(),o=qe({}),r=new Date(1e3*(null===(n=null==e?void 0:e.initialTime)||void 0===n?void 0:n.seconds)).getMinutes(),[c,u]=(0,d.useState)(((t>0?t:(new Date).getTime()/1e3)-(null===(l=null==e?void 0:e.initialTime)||void 0===l?void 0:l.seconds))/L);(0,d.useEffect)((()=>{var n;u(((t>0?t:(new Date).getTime()/1e3)-(null===(n=null==e?void 0:e.initialTime)||void 0===n?void 0:n.seconds))/L);const i=setInterval((()=>{var n;u(((t>0?t:(new Date).getTime()/1e3)-(null===(n=null==e?void 0:e.initialTime)||void 0===n?void 0:n.seconds))/L)}),5e3);return()=>{window.clearInterval(i)}}),[e]);const v=R(e);return(0,i.jsxs)("div",Object.assign({className:o.rootUnitState,style:{flex:c||0,background:v}},{children:[(0,i.jsx)(s.Z,{className:o.dotUnitState,onClick:()=>a((0,x.Sf)(e)),style:{flex:c||0,borderColor:R(e)},id:`state-${e.id?e.id:e.deviceId}`}),r?(0,i.jsx)("label",Object.assign({className:o.dotLabelHour},{children:`0${r}`.slice(-2)})):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)(s.Z,{className:o.dotUnitStateCurrent,id:`stateManto-${e.id?e.id:e.deviceId}`,onClick:()=>a((0,x.MD)(e)),style:{background:v}})]}))},nt=({currentTimeline:e})=>{const[t]=(e=>{const[t]=(0,v.R)(),[n,i]=(0,d.useState)(0);return(0,d.useEffect)((()=>{var n;t.getHours()>=7&&t.getHours()<19?(t.setHours(7),t.setMinutes(0),t.setSeconds(0)):(t.setHours(19),t.setMinutes(0),t.setSeconds(0));const s=(new Date).getTime()/1e3,l=null===(n=null==e?void 0:e.initialTime)||void 0===n?void 0:n.seconds,a=l>s?l:s;return i((t.getTime()/1e3-a)/L),()=>{}}),[e]),[n]})(e),[n]=(e=>{const{}=$e(),[t,n]=(0,d.useState)("#ccc");return(0,d.useEffect)((()=>{var t;(null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.eventState)===U.EnumEventState.CHANGE_OF_SHIFT&&n(R(e)),n("#ccc")}),[e]),[t]})(e);return(0,i.jsx)("div",Object.assign({style:{flex:t,height:12,display:"flex",alignItems:"center"}},{children:(0,i.jsx)("div",{style:{width:"100%",background:n,height:1}})}))},it=({state:e,line:t,setState:n})=>{const l=(0,m.T)(),{currentTimeline:a}=(0,Te.v9)(x.yV),o=qe({}),r=(0,d.useRef)(),c=(0,d.useCallback)((()=>{l((0,x.Sf)(e))}),[e]);return(0,d.useEffect)((()=>{(null==a?void 0:a.id)===e.id&&l((0,x.Sf)(e))}),[e]),(0,i.jsx)(s.Z,{id:`state-${e.id?e.id:e.deviceId}`,className:o.dotUnitState,onClick:c,ref:r,style:{borderColor:R(e)}})},st=({state:e})=>{var t;const[n,s]=(0,d.useState)(e),[l]=(e=>{const[t,n]=(0,d.useState)(0);return(0,d.useEffect)((()=>{var t,i;n((null==e?void 0:e.finalTime)?(null===(t=null==e?void 0:e.finalTime)||void 0===t?void 0:t.seconds)-(null===(i=null==e?void 0:e.initialTime)||void 0===i?void 0:i.seconds):0)}),[e]),[t]})(n);(0,d.useEffect)((()=>{s(e)}),[e]);const a=(0,d.useRef)(),o=new Date(1e3*(null===(t=null==n?void 0:n.initialTime)||void 0===t?void 0:t.seconds)).getMinutes(),r=qe({});return(0,i.jsxs)("div",Object.assign({className:r.rootUnitState,style:{flex:l/L,zIndex:4,background:R(n)},ref:a},{children:[(0,i.jsx)(it,{state:n,line:a,setState:s}),o?(0,i.jsx)("label",Object.assign({className:r.dotLabelHour},{children:`0${o}`.slice(-2)})):(0,i.jsx)(i.Fragment,{})]}))},lt=({states:e,currentTimeline:t,timeFinal:n})=>{const[l,a]=(0,d.useState)(t);if((0,d.useEffect)((()=>{a(t)}),[l,e]),!e)return(0,i.jsx)(i.Fragment,{});const o=e.at(-1);return(0,i.jsx)(s.Z,Object.assign({item:!0,style:{flex:1,marginTop:2,marginBottom:2}},{children:(0,i.jsxs)(Ze.T5,Object.assign({alignItems:"center"},{children:[null==e?void 0:e.map((e=>(null==e?void 0:e.id)===(null==o?void 0:o.id)?(0,i.jsx)(tt,{currentTimeline:e,timeFinal:n},null==e?void 0:e.id):(0,i.jsx)(st,{state:e},null==e?void 0:e.id))),(0,i.jsx)(nt,{currentTimeline:o})]}))}))},at=({index:e,lastIndex:t,timeline:n,idInitial:l})=>{const[a,o]=(0,d.useState)(-1),[r]=Ke(n),c=qe({indexTimeline:e});return(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"row",alignItems:"center",className:c.rootRowTimeline},{children:[(0,i.jsx)("label",Object.assign({style:{width:50,userSelect:"none"}},{children:r})),(0,i.jsx)(lt,{setTimeFinal:o,timeFinal:a,states:n.historyShiftList,currentTimeline:n.currentTimeline},e),(0,i.jsx)(et,{states:n.historyShiftList,currentTimeline:n.currentTimeline,index:e,idInitial:l,lastIndex:t,timeFinal:a,setTimeFinal:o})]}),e)},ot=(0,T.Z)((e=>(0,N.Z)({root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},muiAccordionDetails:{padding:0},muiAccordionSummary:{}}))),rt=({historyTimelineShift:e,title:t})=>{const n=ot(),[l,a]=(0,d.useState)(t);return(0,i.jsx)("div",Object.assign({className:n.root},{children:(0,i.jsxs)(Ue.Z,Object.assign({expanded:l===t,onChange:(o=t,(e,t)=>{a(!!t&&o)})},{children:[(0,i.jsx)(Ve.Z,Object.assign({style:{zIndex:1},expandIcon:(0,i.jsx)(Be.Z,{}),"aria-controls":`${t}-content`,id:`${t}-header`,className:n.muiAccordionSummary},{children:(0,i.jsx)(fe.Z,Object.assign({className:n.heading},{children:t}))})),(0,i.jsx)(Ge.Z,Object.assign({className:n.muiAccordionDetails},{children:(0,i.jsx)(s.Z,Object.assign({container:!0,style:{position:"relative",paddingTop:8,borderColor:"#000"}},{children:(null==e?void 0:e.length)>0&&l===t&&(null==e?void 0:e.map(((n,s)=>n.currentTimeline&&(0,i.jsx)(at,{index:s,lastIndex:(null==e?void 0:e.length)-1,timeline:n,idInitial:t},`${n.deviceId}-${s}`))))}))}))]}))}));var o};var ct=n(34880),dt=n(57196),ut=n(20567),vt=n(27165);const mt=new dt.fI(`${ct.$s}:${ct.Vs}`,null,null);let ht;const gt=new ut.UnitInfoRequest,ft=()=>{const e=(0,m.T)(),{UnitCurrentTimeline:t,historyTimelineShift:n}=(0,m.C)(x.yV);return(0,d.useEffect)((()=>(ht=mt.serverStream(gt,(0,vt.Pu)()),ht.on("data",(t=>{var i,s,l,a;console.log("Streaming timelineInfoClient ",t.getInfo().toObject());const o=t.getInfo().toObject();(null===(i=null==o?void 0:o.shiftDate)||void 0===i?void 0:i.seconds)===(null===(l=null===(s=n[0])||void 0===s?void 0:s.shiftDate)||void 0===l?void 0:l.seconds)&&(null==o?void 0:o.shift)===(null===(a=n[0])||void 0===a?void 0:a.shift)&&e((0,x.gs)(o))})),ht.on("error",(t=>{return n=void 0,i=void 0,l=function*(){console.log("Streaming timelineInfoClient Error - Code:",t.code),console.log("Streaming timelineInfoClient Error - Message:",t.message),console.log("Trying to reconnect to timelineInfoClient..."),setTimeout((()=>{e((0,x.gs)([]))}),3e3)},new((s=void 0)||(s=Promise))((function(e,t){function a(e){try{r(l.next(e))}catch(e){t(e)}}function o(e){try{r(l.throw(e))}catch(e){t(e)}}function r(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(a,o)}r((l=l.apply(n,i||[])).next())}));var n,i,s,l})),ht.on("end",(()=>{console.log("Streaming timelineInfoClient Ended!")})),()=>{console.log("Streaming timelineInfoClient Ended"),ht&&ht.cancel()})),[]),(0,i.jsx)(i.Fragment,{})},xt=({shift:e})=>{const{stateShift:t,historyTimelineShift:n,UnitCurrentTimeline:l}=(0,m.C)(x.yV),a=(0,m.T)(),[o]=(({array:e,current:t,findIndex:n})=>{const[i,s]=(0,d.useState)([...e]);return(0,d.useEffect)((()=>{s(e);const i=n();let l=[];if(l=[...e],Array.isArray(t)&&Array.isArray(i))for(let e=0;e<t.length;e++)for(let n=0;n<i.length;n++)e==n&&(l[i[n]]=t[n]);Array.isArray(i)||i>-1&&(l[i]=t),s(l)}),[t]),[i]})({array:n,current:l,findIndex:()=>(()=>{let e=[];return Array.isArray(l)?l.forEach((t=>{const i=n.findIndex((e=>t.deviceId===e.deviceId));-1!==i&&Array.isArray(e)&&e.push(i)})):e=n.findIndex((e=>e.deviceId===l.deviceId)),e})()});(0,d.useEffect)((()=>{o.length>1&&a((0,x.$S)(o))}),[o]);const{trucks:r,excavators:c,yellowMaquinary:u}=(e=>{const[t,n]=(0,d.useState)([]),[i,s]=(0,d.useState)([]),[l,a]=(0,d.useState)([]);return(0,d.useEffect)((()=>{const t=e.filter((e=>e.assetType===ze.EnumAssetType.TRUCK));n(t);const i=e.filter((e=>e.assetType===ze.EnumAssetType.EXCAVATOR));s(i);const l=e.filter((e=>e.assetType!=ze.EnumAssetType.EXCAVATOR&&e.assetType!=ze.EnumAssetType.TRUCK));a(l)}),[e]),{trucks:t,excavators:i,yellowMaquinary:l}})(n),{state:v}=Me(t);return(0,i.jsxs)(d.Fragment,{children:[(0,i.jsx)(ft,{}),(0,i.jsxs)(s.Z,Object.assign({container:!0,style:{position:"relative",paddingTop:8,borderColor:"#000"}},{children:[v&&(0,i.jsx)("div",{style:{position:"absolute",background:"#51515124",width:"100%",height:"100%",zIndex:999}}),r.length>0&&(0,i.jsx)(rt,{historyTimelineShift:r,title:"Camiones"}),c.length>0&&(0,i.jsx)(rt,{historyTimelineShift:c,title:"Excavadoras"}),u.length>0&&(0,i.jsx)(rt,{historyTimelineShift:u,title:"Linea amarilla"}),(0,i.jsx)(Pe,{}),e?(0,i.jsx)(_e,Object.assign({},{shift:e})):null]}))]})},jt=({setForms:e})=>{const[t,n]=d.useState(),[l,a]=d.useState(),[o]=(0,h.l)(new Date),[r]=(0,h.l)(new Date((new Date).getTime()-3456e5)),[c]=(0,h.l)(new Date),[u,v,m,g]=(0,te.M)({guard:xe.EnumGuard.UNKNOWN_GUARD,shift:f.Shift.UNKNOWN_SHIFT,shiftDate:c}),{shiftDate:x}=u;return(0,d.useEffect)((()=>{g(Object.assign(Object.assign({},u),{shift:l,guard:t}))}),[t,l]),(0,d.useEffect)((()=>(e(u),()=>{})),[u]),(0,i.jsx)(d.Fragment,{children:(0,i.jsx)(Le.Z,Object.assign({component:"form",sx:{mt:1}},{children:(0,i.jsxs)(s.Z,Object.assign({container:!0,spacing:2,justifyContent:"space-between"},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,i.jsx)(ie.Z,{required:!0,placeholder:"Turno",iteams:[{value:f.Shift.DAY,tittle:"Dia"},{value:f.Shift.NIGHT,tittle:"Noche"}],selectValue:a})})),(0,i.jsx)(s.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,i.jsx)(ie.Z,{required:!0,placeholder:"Guardia",iteams:[{value:xe.EnumGuard.A,tittle:"A"},{value:xe.EnumGuard.B,tittle:"B"},{value:xe.EnumGuard.C,tittle:"C"}],selectValue:n})})),(0,i.jsx)(s.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:(0,i.jsx)(M.Z,{style:{textAlign:"center"},variant:"outlined",onChange:v,value:x,disabled:!0,margin:"normal",required:!0,fullWidth:!0,id:"shiftDate",type:"date",name:"shiftDate",inputProps:{min:`${r}`,max:`${o}`},autoFocus:!0})}))]}))}))})};const bt=()=>{const e=(0,m.T)(),{stateShift:t,statusLoading:n}=(0,m.C)(x.yV),[s,l]=(0,d.useState)(!1),[a]=(0,g.r)(n),[o,c]=(0,d.useState)(),[u]=Y(o);return(0,d.useEffect)((()=>{window.localStorage.setItem("close_shift_units",JSON.stringify([]))}),[]),(0,i.jsxs)(d.Fragment,{children:[t===(null===je.TimelinesShiftResponse||void 0===je.TimelinesShiftResponse?void 0:je.TimelinesShiftResponse.State.CLOSED)&&(0,i.jsx)(r.Z,Object.assign({color:"secondary",size:"small",variant:"contained",onClick:()=>{l(!0)}},{children:"INICIAR TURNO"})),(0,i.jsx)(b.a,Object.assign({open:s,handleClose:()=>{l(!1)},title:"Creación del turno para Horómetros",disabled:u,loading:a,handleConfirm:()=>{return t=void 0,n=void 0,s=function*(){const t=Object.assign(Object.assign({},o),{assetType:ze.EnumAssetType.UNKNOWN_ASSET_TYPE});yield e((0,x.Z3)(t)),localStorage.removeItem("close_shift_units"),!a&&l(!1)},new((i=void 0)||(i=Promise))((function(e,l){function a(e){try{r(s.next(e))}catch(e){l(e)}}function o(e){try{r(s.throw(e))}catch(e){l(e)}}function r(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,o)}r((s=s.apply(t,n||[])).next())}));var t,n,i,s}},{children:(0,i.jsx)(jt,{setForms:c})}))]})};var pt=n(90582),yt=function(e,t,n,i){return new(n||(n=Promise))((function(s,l){function a(e){try{r(i.next(e))}catch(e){l(e)}}function o(e){try{r(i.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}r((i=i.apply(e,t||[])).next())}))};const Et=()=>864e5*(1===(new Date).getDate()?30:31),Ot=new Date,St=()=>{const e=(0,m.T)(),[t]=(0,v.R)(),{dateShiftSelect:n,shiftSelect:y,stateShift:E,statusCloseTimeline:O,statusLoading:S,statusGetTimeline:T}=(0,m.C)(x.yV),{timelineError:N}=(0,m.C)(Je.a9),{state:Z}=Me(E),[I]=(0,g.r)(T),[C]=(0,g.r)(O),[w]=(0,g.r)(S),[A,D]=(0,d.useState)(!1),[k,L]=(0,d.useState)(!1),F=new Date(Ot.getTime()-Et()),[R]=(0,h.l)(new Date(n));return(0,d.useEffect)((()=>{e((0,x.tp)(t.getTime()))}),[t.getDate()]),(0,d.useEffect)((()=>{N.success&&C&&(localStorage.removeItem("close_shift_units"),location.reload())}),[C,N]),(0,d.useEffect)((()=>{t.getHours()>=7&&t.getHours()<19?e((0,x.Nx)(f.Shift.DAY)):e((0,x.Nx)(f.Shift.NIGHT))}),[]),(0,d.useEffect)((()=>{const t={shift:y,date:`${R}T00:00`};e((0,x.y1)(t))}),[R,y]),(0,i.jsxs)(s.Z,Object.assign({container:!0,direction:"row"},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0,lg:12,md:12,xs:12,style:{background:"#dbdbdb"}},{children:(0,i.jsx)(j.M,{startDate:F,days:31,marked:[{}],selectDate:new Date(n),getSelectedDay:t=>{e((0,x.tp)(t.getTime()))},color:"#024e8c"})})),(0,i.jsxs)(s.Z,Object.assign({item:!0,lg:12,md:12,xs:12},{children:[(0,i.jsxs)(s.Z,Object.assign({container:!0,item:!0,style:{marginBottom:16,marginTop:8,gap:4,position:"sticky",zIndex:6,top:50,background:`${u.Jx}`,borderTop:"2px ridge white",color:"white"},justifyContent:"space-between"},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsxs)(l.Z,Object.assign({row:!0,"aria-label":"shift",name:"shift",value:y,style:{marginRight:8}},{children:[(0,i.jsx)(a.Z,{value:f.Shift.DAY,control:(0,i.jsx)(o.Z,{style:{padding:0},size:"small",color:"primary"}),label:"Día",onClick:()=>e((0,x.Nx)(f.Shift.DAY)),labelPlacement:"start"}),(0,i.jsx)(a.Z,{value:f.Shift.NIGHT,control:(0,i.jsx)(o.Z,{style:{padding:0},size:"small",color:"primary"}),label:"Noche",onClick:()=>e((0,x.Nx)(f.Shift.NIGHT)),labelPlacement:"start"})]}))})),(0,i.jsx)(s.Z,Object.assign({item:!0},{children:(0,i.jsx)(be,{})})),(0,i.jsxs)(s.Z,Object.assign({container:!0,item:!0,style:{width:"auto"}},{children:[(0,i.jsx)(q,{stateShift:Z}),Z?(0,i.jsx)(bt,{}):(0,i.jsxs)(d.Fragment,{children:[(0,i.jsx)(r.Z,Object.assign({color:"secondary",disabled:Z,style:{background:Z?"grey":""},onClick:()=>{D(!0)},size:"small",variant:"contained"},{children:"CERRAR TURNO"})),(0,i.jsx)(r.Z,Object.assign({color:"secondary",disabled:Z,style:{background:Z?"grey":""},onClick:()=>{L(!0)},size:"small",variant:"contained"},{children:"eliminar turno"}))]}),(0,i.jsx)(ge,{})]}))]})),I?(0,i.jsx)(p.g,{}):y?(0,i.jsx)(xt,Object.assign({},{shift:y})):null]})),(0,i.jsx)(b.a,{open:A,handleClose:()=>{D(!1)},handleConfirm:()=>yt(void 0,void 0,void 0,(function*(){yield e((0,x.g1)())})),title:"¿Estás seguro de cerrar turno?",loading:C,children:(0,i.jsx)(c.Z,Object.assign({severity:"warning"},{children:"Una vez cerrado el turno no se podrá modificar"}))}),(0,i.jsx)(b.a,{open:k,handleClose:()=>{L(!1)},handleConfirm:()=>yt(void 0,void 0,void 0,(function*(){yield e((0,x.do)()),!w&&L(!1)})),title:"¿Estás seguro de eliminar turno?",loading:w,children:(0,i.jsx)(c.Z,Object.assign({severity:"warning"},{children:"¿Estás seguro de eliminar el turno actual ?"}))}),!!N.message&&(0,i.jsx)(pt.y,{error:N.message,success:N.success,code:N.code?N.code:0,callBack:()=>e((0,Je.OL)())})]}))}},11818:(e,t,n)=>{n.d(t,{y:()=>l});var i=n(67294),s=n(49032);const l=e=>{const[t,n]=(0,i.useState)(!0),[l,a]=(0,i.useState)(!0),[o,r]=(0,i.useState)(!0),[c,d]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{const t=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===s.EnumEvent.NO_OPERATIONAL}))),i=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===s.EnumEvent.OPERATIONAL}))),l=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===s.EnumEvent.OPERATIONAL_DELAY}))),o=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===s.EnumEvent.MAINTENANCE}))),c=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===n?void 0:n.event)===s.EnumEvent.UNKNOWN_STATE_EVENT})));n(!0),a(!0),r(!0),d(!0),i()&&(n(!1),a(!0),r(!1),d(!1)),c()&&(n(!1),a(!1),r(!1)),t()&&(n(!0),a(!1),r(!1),d(!1)),l()&&(n(!1),a(!1),r(!0)),o()&&(n(!1),a(!1),r(!0),d(!0)),0==c()&&0==t()&&0==l()&&0==i()&&0==o()&&(n(!0),a(!0),r(!0),d(!0))}),[e]),[t,l,o,c]}},23800:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(67294),s=n(49032);function l(e,t){const[n,l]=(0,i.useState)(0);return(0,i.useEffect)((()=>{var n,i,a,o,r;const c=new Date;c.setHours(Number.parseInt(e.split(":")[0])),c.setMinutes(Number.parseInt(e.split(":")[1]));const d=new Date(1e3*(null===(n=null==t?void 0:t.initialTime)||void 0===n?void 0:n.seconds));var u=(c.getTime()-d.getTime())/1e3;let v=1/60*Math.ceil(u/60);const m=(null==t?void 0:t.initialHourmeter)+Number.parseFloat(v);return(null===(a=null===(i=null==t?void 0:t.initialEventState)||void 0===i?void 0:i.event)||void 0===a?void 0:a.event)===s.EnumEvent.NO_OPERATIONAL||(null===(r=null===(o=null==t?void 0:t.initialEventState)||void 0===o?void 0:o.event)||void 0===r?void 0:r.event)===s.EnumEvent.MAINTENANCE?l(Number.parseFloat(null==t?void 0:t.initialHourmeter.toFixed(1))):l(Number.parseFloat(m.toFixed(1))),()=>{l(0)}}),[e,t]),[n]}},34326:(e,t,n)=>{n.d(t,{N:()=>r});var i=n(67294),s=n(73855),l=n(10646),a=n(56731),o=n(1754);const r=e=>{const{historyTimelineShift:t}=(0,s.C)(o.yV),[n]=(0,l.l)(new Date),[r]=(0,l.l)(new Date((new Date).getTime()-864e5)),[c,d]=(0,i.useState)(n);return(0,i.useEffect)((()=>{var i,s,l;(null===(i=t[0])||void 0===i?void 0:i.shift)===a.Shift.NIGHT&&new Date(1e3*(null===(l=null===(s=t[0])||void 0===s?void 0:s.shiftDate)||void 0===l?void 0:l.seconds)).toLocaleDateString()===(new Date).toLocaleDateString()?d(n):parseInt(e.split(":")[0])>=19&&parseInt(e.split(":")[0])<=23?d(r):d(n)}),[e]),[c]}},10646:(e,t,n)=>{n.d(t,{i:()=>s,l:()=>i});const i=e=>[`${e.getFullYear()}-${`0${e.getMonth()+1}`.slice(-2)}-${`0${e.getDate()}`.slice(-2)}`],s=e=>[`${`0${e.getHours()}`.substr(-2)}:${`0${e.getMinutes()}`.substr(-2)}`]},88093:(e,t,n)=>{n.d(t,{R:()=>i});const i=()=>{var e=new Date;return e.getHours(),[e.getHours()>=0&&e.getHours()<7?new Date(e.getTime()-864e5):e]}},990:(e,t,n)=>{n.d(t,{M:()=>s});var i=n(67294);const s=e=>{const[t,n]=(0,i.useState)(e),s=()=>{n(e)};return(0,i.useEffect)((()=>()=>{s()}),[]),[t,e=>{console.log("type e",typeof e),n(Object.assign(Object.assign({},t),{[e.target.name]:e.target.value?e.target.value:e.target.checked}))},s,n]}},15635:(e,t,n)=>{n.d(t,{r:()=>l});var i=n(67294),s=n(95090);const l=e=>{const[t,n]=(0,i.useState)(!1);return(0,i.useEffect)((()=>(e===s.JD.DONE||e===s.JD.UNKNOWN||e===s.JD.ERROR?n(!1):n(!0),()=>{n(!1)})),[e]),[t]}},49521:(e,t,n)=>{n.d(t,{h:()=>w});var i=n(85893),s=n(41120),l=n(35117),a=n(45258),o=n(28358),r=n(41749),c=n(282),d=n(22318),u=n(43471),v=n(5977),m=n(83736),h=n(55517),g=n(18463),f=n(79912),x=n(79895),j=n(17812),b=n(16575),p=n(51972),y=n(67294),E=n(87559),O=n(73855),S=n(45855),T=n(96102);const N=({title:e,content:t})=>(0,i.jsxs)(y.Fragment,{children:[(0,i.jsxs)(d.Z,Object.assign({variant:"subtitle1"},{children:[(0,i.jsx)(b.Z,{style:{fontSize:"14px",marginRight:"4px"}}),e]})),(0,i.jsx)(d.Z,Object.assign({variant:"body1"},{children:t})),(0,i.jsx)(h.Z,{})]}),Z=()=>{var e,t;const n=(0,O.T)(),s=(0,T.dP)(),{notificationsHeader:l}=(0,O.C)(S.Af);return(0,y.useEffect)((()=>{n((0,S.pK)())}),[]),(0,i.jsxs)(g.Z,{children:[(0,i.jsx)(f.Z,Object.assign({className:s.root},{children:(0,i.jsx)(d.Z,Object.assign({variant:"subtitle1"},{children:"Notificaciones"}))})),(0,i.jsx)(h.Z,{}),(0,i.jsxs)(x.Z,Object.assign({elevation:3,style:{padding:"8px",overflow:"scroll"}},{children:[(!l.notificationsList||0===(null===(e=l.notificationsList)||void 0===e?void 0:e.length))&&(0,i.jsx)(d.Z,Object.assign({variant:"subtitle1"},{children:"No tiene notificaciones Nuevas"})),null===(t=l.notificationsList)||void 0===t?void 0:t.map(((e,t)=>(0,i.jsx)(N,{title:e.title,content:e.message},t)))]}))]})},I=()=>{var e;const{notificationsHeader:t}=(0,O.C)(S.Af);return(0,i.jsx)(E.h,{children:(0,i.jsx)(Z,{}),header:(0,i.jsx)(j.Z,Object.assign({color:(null===(e=t.notificationsList)||void 0===e?void 0:e.length)>0?"primary":"inherit",style:{width:"40px",height:"40px"},size:"medium"},{children:(0,i.jsx)(p.Z,{})}))})},C=(0,s.Z)((e=>(0,l.Z)({root:{minHeight:"50px"}}))),w=({title:e})=>{const t=C(),n=(0,v.k6)();return(0,i.jsx)(a.Z,Object.assign({position:"fixed",color:"secondary",className:t.root,elevation:0},{children:(0,i.jsxs)(o.Z,Object.assign({variant:"dense"},{children:[(0,i.jsxs)(r.Z,Object.assign({container:!0,alignItems:"center"},{children:[(0,i.jsx)(c.Z,{size:"small",startIcon:(0,i.jsx)(u.Z,{color:"action",style:{color:"#fff"}}),onClick:()=>{n.goBack()}}),(0,i.jsx)(d.Z,Object.assign({variant:"h6"},{children:e}))," "]})),(0,i.jsxs)(r.Z,Object.assign({container:!0,justifyContent:"flex-end",alignItems:"center",spacing:5},{children:[(0,i.jsx)(r.Z,Object.assign({item:!0},{children:(0,i.jsx)(I,{})})),(0,i.jsx)(r.Z,Object.assign({item:!0},{children:(0,i.jsx)(m.u,{})}))]}))]}))}))}},83736:(e,t,n)=>{n.d(t,{f:()=>E,u:()=>S});var i=n(85893),s=n(33901),l=n(18463),a=n(79912),o=n(22318),r=n(55517),c=n(94697),d=n(51907),u=n(41749),v=n(87559),m=n(40064),h=n(50255),g=n(5833),f=n(73855),x=n(53559),j=n(5977),b=n(82067),p=n(93584),y=n(96102);const E=({className:e})=>{const{loginResponse:{user:t}}=(0,f.C)(x.MR);return(0,i.jsx)(s.Z,Object.assign({className:e,alt:"Avatar"},{children:null==t?void 0:t.firstName[0].toUpperCase()}))},O=()=>{const e=(0,y.dP)(),{loginResponse:{user:t}}=(0,f.C)(x.MR),n=(0,j.k6)();return(0,i.jsxs)(l.Z,{children:[(0,i.jsx)(a.Z,Object.assign({className:e.root},{children:(0,i.jsx)(o.Z,Object.assign({variant:"subtitle1"},{children:"Cuenta"}))})),(0,i.jsx)(r.Z,{}),(0,i.jsx)(c.Z,{avatar:(0,i.jsx)(E,{}),title:`${null==t?void 0:t.firstName} ${null==t?void 0:t.lastName}`,subheader:null==t?void 0:t.username}),(0,i.jsx)(r.Z,{}),(0,i.jsx)(d.Z,Object.assign({disableSpacing:!0},{children:(0,i.jsxs)(u.Z,Object.assign({container:!0,direction:"column",alignItems:"flex-start"},{children:[(0,i.jsx)(y.Eo,Object.assign({onClick:()=>{n.push("/setting/profile")},style:{width:"100%"},startIcon:(0,i.jsx)(b.Z,{htmlColor:`${p.Jx}`})},{children:"Perfil"})),(0,i.jsx)(y.Eo,Object.assign({onClick:()=>{n.push("/")},style:{width:"100%"},startIcon:(0,i.jsx)(m.Z,{htmlColor:`${p.Jx}`})},{children:"Dispatch"})),(0,i.jsx)(y.Eo,Object.assign({onClick:()=>{n.push("/setting")},style:{width:"100%"},startIcon:(0,i.jsx)(h.Z,{htmlColor:`${p.Jx}`})},{children:"Configuraciones"})),(0,i.jsxs)("div",Object.assign({style:{width:"100%"}},{children:[(0,i.jsx)(r.Z,{}),(0,i.jsx)(y.Eo,Object.assign({style:{width:"100%"},onClick:()=>{window.localStorage.removeItem("token"),window.localStorage.removeItem("user"),n.push("/login")},startIcon:(0,i.jsx)(g.Z,{htmlColor:"red"})},{children:"Cerrar sesión"}))]}))]}))}))]})},S=()=>{const e=(0,y.QH)();return(0,i.jsx)(v.h,{children:(0,i.jsx)(O,{}),header:(0,i.jsx)(E,{className:e.root})})}},96102:(e,t,n)=>{n.d(t,{Eo:()=>c,QH:()=>r,dP:()=>o});var i=n(41120),s=n(282),l=n(10150),a=n(38920);const o=(0,i.Z)((e=>(0,l.Z)({root:{textAlign:"center",padding:"5px"}}))),r=(0,i.Z)((e=>(0,l.Z)({root:{width:"30px",height:"30px"}}))),c=(0,a.Z)((e=>({label:{display:"flex",justifyContent:"flex-start"},root:{"&:hover":{backgroundColor:"#0069d9",borderColor:"#0062cc",boxShadow:"none",color:"white"},"&:active":{boxShadow:"none",backgroundColor:"#0062cc",borderColor:"#005cbf",color:"white"},"&:focus":{boxShadow:"0 0 0 0.2rem rgba(0,123,255,.5)"}}})))(s.Z)}}]);