"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[902],{61242:(e,i,t)=>{t.d(i,{a:()=>l});var n=t(85893),s=t(52663),o=t(66083),a=t(29525),r=t(66856),d=t(282);const l=({open:e,handleClose:i,handleConfirm:t,title:l,children:c,disabled:v=!1})=>(0,n.jsxs)(s.Z,Object.assign({open:e,onClose:i,maxWidth:"lg"},{children:[(0,n.jsx)(o.Z,{children:l},void 0),(0,n.jsx)(a.Z,{children:c},void 0),(0,n.jsxs)(r.Z,{children:[(0,n.jsx)(d.Z,Object.assign({color:"primary",onClick:i},{children:"Cancelar"}),void 0),t&&(0,n.jsx)(d.Z,Object.assign({disabled:v,color:"secondary",onClick:t,autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)]}),void 0)},34250:(e,i,t)=>{t.d(i,{Z:()=>v});var n=t(85893),s=t(67294),o=t(41120),a=t(87623),r=t(8920),d=t(76211),l=t(33758);const c=(0,o.Z)((e=>(0,a.Z)({fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2),zIndex:2}})));function v({actionClick:e,Icon:i,visible:t,disabled:o,right:a,color:v,keyAction:u}){const p=c(),g=(0,r.Z)();(0,s.useEffect)((()=>{const i=i=>{console.log(i.key),i.key!==(null==u?void 0:u.toUpperCase())&&i.key!==(null==u?void 0:u.toLocaleLowerCase())&&i.key!==u||e()};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}}),[]);const h={enter:g.transitions.duration.enteringScreen,exit:g.transitions.duration.leavingScreen};return(0,n.jsx)(d.Z,Object.assign({in:t,timeout:h,unmountOnExit:!0},{children:(0,n.jsx)(l.Z,Object.assign({disabled:o,onClick:e,className:p.fab,style:{right:a},size:"small",color:v||"primary"},{children:(0,n.jsx)(i,{},void 0)}),void 0)}),void 0)}},33570:(e,i,t)=>{t.d(i,{v:()=>l});var n=t(85893),s=t(17812),o=t(96837),a=t(59544),r=t(17215);const d=(0,t(73914).Z)((()=>({subHeader:{lineHeight:0,background:"#fff",paddingLeft:0,display:"flex",marginTop:8,borderRadius:4,borderBottomStyle:"groove"}}))),l=({useOpen:e,title:i})=>{const t=d(),[l,c]=e,v=(0,n.jsx)(s.Z,Object.assign({size:"small"},{children:l?(0,n.jsx)(a.Z,{fontSize:"small"},void 0):(0,n.jsx)(r.Z,{fontSize:"small"},void 0)}),void 0);return(0,n.jsx)(o.Z,Object.assign({disableGutters:!0,onClick:()=>{c((e=>!e))},component:"span",className:t.subHeader},{children:(0,n.jsxs)("div",Object.assign({style:{display:"flex",alignItems:"center"}},{children:[(0,n.jsx)("span",Object.assign({style:{marginLeft:4}},{children:i}),void 0),(0,n.jsx)("div",Object.assign({style:{marginLeft:8}},{children:v}),void 0)]}),void 0)}),void 0)}},65738:(e,i,t)=>{t.d(i,{E:()=>k,m:()=>w});var n=t(85893),s=t(67294),o=t(41120),a=t(79895),r=t(41749),d=t(41423),l=t(22318),c=t(62822),v=t(50998),u=t(95757),p=t(55517),g=t(33570),h=t(14096),b=t(78479),j=t(95090),x=t(10465),f=t(73855),m=t(18973),y=t(66217),O=t(39299);const k="80vh",C=(0,o.Z)((e=>({root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{marginLeft:e.spacing(1),marginBottom:0},root_unload:{display:"flex"},tabs:{borderRight:`1px solid ${e.palette.divider}`},tab:{minWidth:10,padding:1,paddingTop:8,paddingBottom:8},buttonTab:{writingMode:"vertical-rl"}})));function Z(e){const{children:i,value:t,index:s}=e,o=function(e,i){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&i.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)i.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(t[n[s]]=e[n[s]])}return t}(e,["children","value","index"]);return(0,n.jsx)("div",Object.assign({role:"tabpanel",hidden:t!==s,id:`vertical-tabpanel-${s}`,"aria-labelledby":`vertical-tab-${s}`,style:{flex:1,height:"auto",boxShadow:"inset 0px -2px 10px 0px rgb(17 16 10 / 56%)",margin:8,borderRadius:4}},o,{children:t===s&&i}),void 0)}function S(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const w=()=>{const{selectedUploadList:e}=(0,f.C)(m.nx),{polygonList:i,stockCellList:t,state:o}=(0,f.C)(m.WD),w=(0,f.T)(),L=C(),[E,N]=(0,s.useState)([]),[T,A]=(0,s.useState)([]),[I,$]=(0,b._)("index_tab_load_operation",0),z=(0,s.useState)(!1);(0,s.useEffect)((()=>{o===O.jR.DONE&&(N(i.filter((e=>e.state!==j.p$.FINISHED))),A(t.filter((e=>e.state!==j.p$.FINISHED))))}),[o]);const P=(0,s.useCallback)((e=>{if(e){const{value:t}=e.target,n=t?t.toUpperCase():"";N(i.filter((e=>{const i=e.material?e.material.type:"";return e.name.toUpperCase().includes(n)||e.nameProject.toUpperCase().includes(n)||i.includes(n)})))}}),[i]),R=(0,s.useCallback)((e=>{if(e){const{value:i}=e.target,n=i?i.toUpperCase():"";A(t.filter((e=>e.name.toUpperCase().includes(n))))}}),[t]),U=(0,s.useCallback)((()=>{N(i)}),[i]),D=(0,s.useCallback)((()=>{A(t)}),[t]),F=(0,s.useCallback)((i=>!!e.find((e=>e.id===i.id))),[e]);return(0,n.jsx)(a.Z,Object.assign({elevation:4,style:{flex:1}},{children:(0,n.jsxs)(r.Z,Object.assign({container:!0},{children:[(0,n.jsxs)(h.Z,Object.assign({orientation:"vertical",variant:"scrollable",value:I,indicatorColor:"primary",textColor:"primary",onChange:(e,i)=>{$(i)},"aria-label":"Vertical tabs",className:L.tabs},{children:[(0,n.jsx)(d.Z,Object.assign({className:L.tab,label:(0,n.jsx)(l.Z,Object.assign({variant:"caption",className:L.buttonTab},{children:"TAJO"}),void 0)},S(0)),void 0),(0,n.jsx)(d.Z,Object.assign({className:L.tab,label:(0,n.jsx)(l.Z,Object.assign({variant:"caption",className:L.buttonTab},{children:"STOCKs"}),void 0)},S(1)),void 0)]}),void 0),(0,n.jsx)(Z,Object.assign({value:I,index:0},{children:(0,n.jsxs)(c.Z,Object.assign({dense:!0,disablePadding:!0,style:{width:"100%",paddingLeft:4,overflowY:"scroll",paddingBottom:32,height:k},subheader:(0,n.jsx)(g.v,{title:"Carguío",useOpen:z},void 0)},{children:[z[0]&&(0,n.jsx)(x.V,{functionFilter:P,functionCancel:U,placeholder:"Buscar por polígono"},void 0),E.map((e=>(0,n.jsxs)(s.Fragment,{children:[(0,n.jsx)(v.Z,Object.assign({selected:F(e),button:!0,dense:!0,onClick:()=>{return i=e,void w((0,y.qn)(Object.assign(Object.assign({},i),{type:j.NZ.PIT})));var i}},{children:(0,n.jsx)(u.Z,{primary:`${e.nameProject} - ${e.name} `,secondary:e.material?`Material ${e.material.type}`:"Material not found"},void 0)}),void 0),(0,n.jsx)(p.Z,{},void 0)]},e.id)))]}),void 0)}),void 0),(0,n.jsx)(Z,Object.assign({value:I,index:1},{children:(0,n.jsxs)(c.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,overflowY:"scroll"},subheader:(0,n.jsx)(g.v,{title:"Carguío",useOpen:z},void 0)},{children:[z[0]&&(0,n.jsx)(x.V,{functionFilter:R,functionCancel:D},void 0),T.map((e=>(0,n.jsx)(v.Z,Object.assign({selected:F(e),button:!0,dense:!0,onClick:()=>{return i=e,void w((0,y.qn)(Object.assign(Object.assign({},i),{type:j.NZ.STOCK})));var i}},{children:(0,n.jsx)(u.Z,{primary:e.name},void 0)}),e.id)))]}),void 0)}),void 0)]}),void 0)}),void 0)}},70461:(e,i,t)=>{t.d(i,{K:()=>m});var n=t(85893),s=t(55517),o=t(62822),a=t(67294),r=t(73855),d=t(8693),l=t(10465),c=t(33570),v=t(41120),u=t(50998),p=t(30553),g=t(13258),h=t(95757),b=t(95090);const j=(0,v.Z)((e=>({disabledSpacing:{margin:0,padding:0,width:"100%"},checkbox:{"& .MuiCheckbox-root":{margin:0,padding:0,paddingLeft:8}}}))),x=a.memo((({truck:e,checked:i,trucksSelect:t,setTrucksSelect:s,disableWithOperation:o,handleonchangeTruck:a})=>{const r=j(),d=e.state>=0?b.SS[e.state]:"Sin conex...",l=e.operationList&&e.operationList.length>0?e.operationList[0].excavator.deviceAlias:"";return(0,n.jsx)(u.Z,Object.assign({button:!0,dense:!0,className:r.disabledSpacing,disabled:!!o&&!!l},{children:(0,n.jsx)(p.Z,{className:r.checkbox,onChange:()=>{const i=t.findIndex((i=>e.deviceId===i.deviceId));-1===i?t.push(e):t.splice(i,1),s(JSON.parse(JSON.stringify(t)))},control:(0,n.jsx)(g.Z,{onClick:()=>a(e),size:"small",checked:i,inputProps:{style:{padding:0}}},void 0),label:(0,n.jsx)(h.Z,{primary:`${e.deviceAlias} ${l?` ➜ ${l}`:""} (${d})`},void 0)},void 0)}),void 0)}));var f=t(65738);const m=a.memo((({trucksSelect:e,setTrucksSelect:i,handleonchangeTruck:t,disableWithOperation:v})=>{const u=(0,a.useState)(),{truckInfoList:p}=(0,r.C)(d.ej),[g,h]=(0,a.useState)([]),[b,j]=(0,a.useState)("");(0,a.useEffect)((()=>{h(p.filter((e=>e.deviceAlias.toLowerCase().includes(b.toLowerCase()))))}),[p]);const m=(0,a.useCallback)((e=>{if(e){const i=e.target?e.target.value.toUpperCase():"";h(p.filter((e=>e.deviceAlias.toUpperCase().includes(i)))),j(i)}}),[p]),y=(0,a.useCallback)((()=>{h(p),j("")}),[p]);return(0,n.jsxs)(o.Z,Object.assign({dense:!0,subheader:(0,n.jsx)(c.v,{title:"Trucks",useOpen:u},void 0),style:{width:"100%",paddingLeft:4,height:f.E,overflowY:"scroll",boxShadow:"inset 0px -2px 10px 0px rgb(17 16 10 / 56%)",margin:8,borderRadius:4}},{children:[u[0]&&(0,n.jsx)(l.V,{functionFilter:m,functionCancel:y},void 0),g.map((o=>{return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(x,{handleonchangeTruck:t,disableWithOperation:v,checked:(r=o,!!e.find((e=>r.deviceId===e.deviceId))),trucksSelect:e,setTrucksSelect:i,truck:o},void 0),(0,n.jsx)(s.Z,{},void 0)]},o.deviceId);var r}))]}),void 0)}))},2780:(e,i,t)=>{t.d(i,{We:()=>o,Uk:()=>a,wg:()=>r});var n=t(55501),s=function(e,i,t,n){return new(t||(t=Promise))((function(s,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function r(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var i;e.done?s(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(a,r)}d((n=n.apply(e,i||[])).next())}))};const o=(e,i)=>s(void 0,void 0,void 0,(function*(){return yield(0,n.g$)(i,e)})),a=(e,i,t,o,a)=>s(void 0,void 0,void 0,(function*(){t(!0);const s=yield(0,n.e1)(e,i);console.log("responseAssigment",s),t(!1),o((e=>!e)),a(void 0);let r="";s.truckErrorList.length>0&&s.truckErrorList.forEach((e=>{const i=1===e.state?"CARGANDO":"A DESCARGA";r+=` ${e.truckError.deviceAlias}=> ${i},`})),""!==r&&alert(`Las siguientes unidades no han podido ser reasignadas: ${r}`)})),r=e=>s(void 0,void 0,void 0,(function*(){const i=yield(0,n.zY)(e);console.log("finalizeOperationEvent",i);let t="";return i.truckErrorList.length>0&&i.truckErrorList.forEach((e=>{const i=1===e.state?"CARGANDO":"A DESCARGA";t+=` ${e.truckError.deviceAlias} => ${i},`})),t}))},16281:(e,i,t)=>{t.d(i,{h:()=>O});var n=t(85893),s=t(45258),o=t(28358),a=t(282),r=t(22318),d=t(43471),l=t(5977),c=t(55517),v=t(17812),u=t(96617),p=t(73637),g=t(79895),h=t(16575),b=t(51972),j=t(67294),x=t(73855),f=t(45855);const m=({title:e,content:i})=>(0,n.jsxs)("div",Object.assign({style:{paddingBottom:"8px",paddingTop:"8px"}},{children:[(0,n.jsxs)(r.Z,Object.assign({variant:"subtitle1"},{children:[(0,n.jsx)(h.Z,{style:{fontSize:"14px",marginRight:"4px"}},void 0),e]}),void 0),(0,n.jsx)(r.Z,Object.assign({variant:"body1"},{children:i}),void 0),(0,n.jsx)(c.Z,{},void 0)]}),void 0),y=({})=>{var e,i,t;const[s,o]=(0,j.useState)(null),[a,d]=(0,j.useState)(!1),{notificationsHeader:l}=(0,x.C)(f.Af),c=(0,x.T)();(0,j.useEffect)((()=>{c((0,f.pK)())}),[]);const h=a&&Boolean(s)?"transition-popper":void 0;return(0,n.jsxs)("div",Object.assign({style:{display:"flex",flexDirection:"row",alignItems:"center",width:"8%",marginRight:"4px"}},{children:["Notifications",(0,n.jsx)(v.Z,Object.assign({color:(null===(e=l.notificationsList)||void 0===e?void 0:e.length)>0?"primary":"inherit",onClick:e=>{o(e.currentTarget),d((e=>!e))}},{children:(0,n.jsxs)("div",Object.assign({style:{margin:"4px"}},{children:[(0,n.jsx)(r.Z,Object.assign({variant:"subtitle2",style:{color:"white",zIndex:1,position:"absolute",justifyContent:"right",marginLeft:"18px"}},{children:(null===(i=l.notificationsList)||void 0===i?void 0:i.length)>0?null===(t=l.notificationsList)||void 0===t?void 0:t.length:""}),void 0),(0,n.jsx)(b.Z,{},void 0)]}),void 0)}),void 0),(0,n.jsx)("div",Object.assign({style:{zIndex:1}},{children:(0,n.jsx)(u.Z,Object.assign({id:h,open:a,anchorEl:s,transition:!0},{children:({TransitionProps:e})=>{var i,t,s;return(0,n.jsx)(p.Z,Object.assign({},e,{timeout:350},{children:(0,n.jsxs)(g.Z,Object.assign({elevation:3,style:{width:"300px",height:(null===(i=l.notificationsList)||void 0===i?void 0:i.length)>10?"87vh":"100%",padding:"8px",overflow:"scroll"}},{children:[0===(null===(t=l.notificationsList)||void 0===t?void 0:t.length)&&(0,n.jsx)(n.Fragment,{children:"Not Have a new Notification"},void 0),null===(s=l.notificationsList)||void 0===s?void 0:s.map(((e,i)=>(0,n.jsx)(m,{title:e.title,content:e.message},i)))]}),void 0)}),void 0)}}),void 0)}),void 0)]}),void 0)},O=({title:e,positionContainer:i,notificationPannel:t})=>{const c=i||"sticky",v=(0,l.k6)();return(0,n.jsx)(s.Z,Object.assign({position:c,color:"secondary",style:{display:"flex"},elevation:0},{children:(0,n.jsxs)("div",Object.assign({style:{display:"flex"}},{children:[(0,n.jsxs)(o.Z,Object.assign({style:{width:"90%"}},{children:[(0,n.jsx)(a.Z,{size:"small",startIcon:(0,n.jsx)(d.Z,{color:"action",style:{color:"#fff"}},void 0),onClick:()=>{v.goBack()}},void 0),(0,n.jsx)(r.Z,Object.assign({variant:"h6"},{children:e}),void 0)]}),void 0),t&&(0,n.jsx)(y,{},void 0)]}),void 0)}),void 0)}}}]);