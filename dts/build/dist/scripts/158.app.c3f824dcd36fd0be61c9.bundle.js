"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[158],{61242:(e,t,i)=>{i.d(t,{a:()=>c});var a=i(85893),n=i(52663),s=i(66083),o=i(29525),l=i(66856),d=i(282);const c=({open:e,handleClose:t,handleConfirm:i,title:c,children:r,disabled:g=!1})=>(0,a.jsxs)(n.Z,Object.assign({open:e,onClose:t,maxWidth:"lg"},{children:[(0,a.jsx)(s.Z,{children:c},void 0),(0,a.jsx)(o.Z,{children:r},void 0),(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(d.Z,Object.assign({color:"primary",onClick:t},{children:"Cancelar"}),void 0),i&&(0,a.jsx)(d.Z,Object.assign({disabled:g,color:"secondary",onClick:i,autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)]}),void 0)},71211:(e,t,i)=>{i.d(t,{T:()=>a});class a{static addLayerToMap(e,t,i,a,n){e.addLayer({id:t,type:a,source:i,layout:{visibility:"visible"},paint:{"line-color":n,"line-width":4}})}static addSourceToMap(e,t,i){e.addSource(t,{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:i}}})}static removeFeature(e,t,i){this.getLayer(e,t)&&(e.removeLayer(t),e.removeSource(i))}static getLayer(e,t){return e.getLayer(t)}}},69548:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ue});var a=i(85893),n=i(41749),s=i(18463),o=i(67294),l=i(73855),d=i(18973),c=i(41120),r=i(79895),g=i(13258),h=i(22318),j=i(14096),v=i(41423),p=i(95090),u=i(78479),x=i(10008),b=i(62822),m=i(282),y=i(78715),f=i(71211),C=i(39299),Z=i(20113),O=i(10465),k=i(61242),w=i(50998),T=i(95757),S=i(17812),F=i(30387),L=i(52663),N=i(66083),I=i(29525),$=i(8286),P=i(66856),E=i(95477),D=i(39704),_=i(1978);const A=(0,c.Z)((e=>({paper:{padding:"5px",margin:"3px"}}))),M=({open:e,setOpen:t,cell:i,typeDownload:l})=>{const d=A(),c=(0,D.I0)(),[j,v]=(0,o.useState)(i),[u,x]=(0,o.useState)(!1),b=Object.assign({},j),{name:y,altitude:f,volume:Z}=i,O=()=>{t(!1)},k=e=>{"idNameCell"===e.target.id&&(b.name=e.target.value),"idAltitudeCell"===e.target.id&&(b.altitude=parseFloat(e.target.value)),"idVolumeCell"===e.target.id&&(b.volume=parseFloat(e.target.value)),v(b)};return(0,a.jsxs)(L.Z,Object.assign({open:e,onClose:O,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},{children:[(0,a.jsx)(N.Z,{children:"Cell Edit"},void 0),(0,a.jsx)(I.Z,{children:(0,a.jsx)(s.Z,Object.assign({style:{padding:"7px"}},{children:(0,a.jsxs)(n.Z,Object.assign({container:!0,direction:"column",spacing:1,justifyContent:"center"},{children:[(0,a.jsx)(n.Z,Object.assign({item:!0,md:12,xl:12},{children:(0,a.jsxs)(r.Z,Object.assign({className:d.paper,elevation:2},{children:[(0,a.jsx)(h.Z,Object.assign({variant:"body1"},{children:"Habilitar"}),void 0),(0,a.jsx)(g.Z,{checked:j.state!==p.YO.FINISHED,onChange:e=>{b.state=e.target.checked?p.YO.ACTIVE:p.YO.FINISHED,v(b)},inputProps:{"aria-label":"secondary checkbox"}},void 0)]}),void 0)}),void 0),(0,a.jsxs)(n.Z,Object.assign({item:!0,container:!0,direction:"row"},{children:[(0,a.jsx)(n.Z,Object.assign({item:!0,md:6,xl:6},{children:(0,a.jsxs)(r.Z,Object.assign({className:d.paper,elevation:2},{children:[(0,a.jsx)(h.Z,Object.assign({variant:"body1"},{children:"Name:"}),void 0),(0,a.jsx)($.Z,{onChange:k,style:{width:"100%"},id:"idNameCell",label:y,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,a.jsx)(n.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,a.jsxs)(r.Z,Object.assign({className:d.paper,elevation:2},{children:[(0,a.jsx)(h.Z,Object.assign({variant:"body1"},{children:"Altitude:"}),void 0),(0,a.jsx)($.Z,{onChange:k,id:"idAltitudeCell",style:{width:"100%"},label:f,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,a.jsx)(n.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,a.jsxs)(r.Z,Object.assign({className:d.paper,elevation:2},{children:[(0,a.jsx)(h.Z,Object.assign({variant:"body1"},{children:"Volume:"}),void 0),(0,a.jsx)($.Z,{onChange:k,id:"idVolumeCell",style:{width:"100%"},label:Z||"",variant:"outlined"},void 0)]}),void 0)}),void 0)]}),void 0)]}),void 0)}),void 0)},void 0),(0,a.jsxs)(P.Z,{children:[(0,a.jsx)(m.Z,Object.assign({color:"primary",onClick:O},{children:"Cancelar"}),void 0),u?(0,a.jsx)(E.Z,{variant:"indeterminate"},void 0):(0,a.jsx)(m.Z,Object.assign({color:"secondary",onClick:()=>{x(!0),(0,_.w)(j,l).then((e=>{c((0,C.aR)()),x(!1),O()})).catch((e=>{console.log(e),x(!1)})),t(!1)},autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)]}),void 0)};var R=i(53068);const z=({cellDme:e,map:t,isChecked:i})=>{const n=(0,l.T)(),[d,c]=(0,o.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.Z,Object.assign({onClick:()=>{"3"===e.state.toString()||(e=>{if(n((0,x.Mf)(e)),i){const i=`layer_${e.id}`,a=`source_${e.id}`;f.T.getLayer(t,i)&&f.T.removeFeature(t,i,a)}})(e)},selected:!0,dense:!0,button:!0,style:{backgroundColor:"white"}},{children:(0,a.jsxs)(s.Z,Object.assign({elevation:3===e.state?2:4,style:{display:"flex",padding:"5px",height:"100%",width:"100%",backgroundImage:i?"radial-gradient(circle, rgba(233,183,88,1) 68%, rgba(242,167,3,1) 100%)":"",backgroundColor:3===e.state?"#f1c3c34a":""}},{children:[(0,a.jsx)(g.Z,{disabled:"3"===e.state.toString(),checked:"3"!==e.state.toString()&&i,inputProps:{"aria-label":"secondary checkbox"}},void 0),(0,a.jsx)(T.Z,{primary:`Nombre: ${e.name}`},void 0),(0,a.jsx)(S.Z,Object.assign({onClick:()=>{c(!0)}},{children:(0,a.jsx)(F.Z,{fontSize:"small"},void 0)}),void 0)]}),void 0)}),e.id),d&&(0,a.jsx)(M,{typeDownload:R.TypeDownload.DME,open:d,setOpen:c,cell:e},void 0)]},void 0)};const V=(0,c.Z)((e=>({listItem:{"& .MuiListItem-gutters":{paddingLeft:"7px",paddingRight:"7px"}}}))),U=({cellsDme:e,map:t,isChecked:i,type:s})=>{const{selectDme:d}=(0,l.C)(x.C2),[c,g]=o.useState(!1),h=(0,l.T)(),j=V(),{status:v}=((0,o.useState)(!1),(0,l.C)(Z.Lo)),[p,u]=(0,o.useState)([]);(0,o.useEffect)((()=>{h(i?(0,x.E6)(p.filter((e=>3!==e.state))):(0,x.E6)([]))}),[i]),(0,o.useEffect)((()=>{d.map((e=>{const i=`layer_${e.id}`,a=`source_${e.id}`;f.T.getLayer(t,i)&&(f.T.removeFeature(t,i,a),console.log("dme Function TRUE",e)),f.T.addSourceToMap(t,a,e.pointList.map((e=>[e.longitude,e.latitude,e.altitude]))),f.T.addLayerToMap(t,i,a,"line","#EAF772")}))}),[d]);const w=e=>{const i=d.find((t=>e.id===t.id));if(i){const i=`layer_${e.id}`,a=`source_${e.id}`;f.T.getLayer(t,i)&&f.T.removeFeature(t,i,a)}return!!i};(0,o.useEffect)((()=>{e.length>0&&u(e)}),[e]);const T=(0,o.useCallback)((t=>{if(t){const i=t.target?t.target.value.toUpperCase():"";u(e.filter((e=>e.name.toUpperCase().includes(i))))}}),[e]),S=(0,o.useCallback)((()=>{u(e)}),[e]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.Z,Object.assign({elevation:0,style:{overflow:"auto"}},{children:[(0,a.jsx)(O.V,{placeholder:"Buscar por nombre",functionFilter:T,functionCancel:S},void 0),(0,a.jsx)(b.Z,Object.assign({className:j.listItem,dense:!0},{children:(0,a.jsx)(n.Z,Object.assign({container:!0,direction:"column",justifyContent:"flex-end",style:{flex:1}},{children:(0,a.jsx)(n.Z,Object.assign({item:!0,style:{height:"77vh"}},{children:p.map(((e,i)=>(e.id,(0,a.jsx)(z,{cellDme:e,map:t,isChecked:w(e)},i))))}),void 0)}),void 0)}),void 0)]}),void 0),d.length>0&&(0,a.jsx)(m.Z,Object.assign({variant:"contained",color:"primary",onClick:()=>{g(!0)},style:{width:"90%",margin:"10px"}},{children:"Finalizar Seleccionados"}),void 0),(0,a.jsx)(k.a,Object.assign({open:c,handleClose:()=>{g(!1),h((0,x.E6)([])),h((0,x.fn)())},handleConfirm:()=>{return e=void 0,t=void 0,a=function*(){yield h((0,Z.iC)({cells:d,type:s})),h((0,C.aR)()),h((0,x.fn)()),g(!1)},new((i=void 0)||(i=Promise))((function(n,s){function o(e){try{d(a.next(e))}catch(e){s(e)}}function l(e){try{d(a.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,l)}d((a=a.apply(e,t||[])).next())}));var e,t,i,a},title:"¿Esta seguro?"},{children:(0,a.jsx)(y.Z,Object.assign({severity:"warning"},{children:"Confirma para Finalizar los poligonos seleccionados"}),void 0)}),void 0)]},void 0)},W=({cellPad:e,map:t,isChecked:i})=>{const n=(0,l.T)(),[d,c]=(0,o.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.Z,Object.assign({selected:!0,dense:!0,button:!0,onClick:()=>{"3"===e.state.toString()||(e=>{if(n((0,x.SP)(e)),i){const i=`layer_${e.id}`,a=`source_${e.id}`;f.T.getLayer(t,i)&&f.T.removeFeature(t,i,a)}})(e)},style:{backgroundColor:"white"}},{children:(0,a.jsxs)(s.Z,Object.assign({elevation:"3"===e.state.toString()?2:4,style:{display:"flex",padding:"5px",height:"100%",width:"100%",backgroundImage:i?"radial-gradient(circle, rgba(233,183,88,1) 68%, rgba(242,167,3,1) 100%)":"",backgroundColor:3===e.state?"#f1c3c34a":""}},{children:[(0,a.jsx)(g.Z,{disabled:"3"===e.state.toString(),checked:"3"!==e.state.toString()&&i,inputProps:{"aria-label":"secondary checkbox"}},void 0),(0,a.jsx)(T.Z,{primary:`Nombre: ${e.name}`},void 0),(0,a.jsx)(S.Z,Object.assign({onClick:()=>{c(!0)}},{children:(0,a.jsx)(F.Z,{fontSize:"small"},void 0)}),void 0)]}),void 0)}),e.id),d&&(0,a.jsx)(M,{typeDownload:R.TypeDownload.PAD,open:d,setOpen:c,cell:e},void 0)]},void 0)};const B=(0,c.Z)((e=>({listItem:{"& .MuiListItem-gutters":{paddingLeft:"7px",paddingRight:"7px"}}}))),Y=({cellsPad:e,map:t,isChecked:i,setIsChecked:s,type:d})=>{const{selectPad:c}=(0,l.C)(x.C2),[g,h]=o.useState(!1),j=(0,l.T)(),v=B(),{status:p}=((0,o.useState)(!1),(0,l.C)(Z.Lo)),[u,w]=(0,o.useState)([]);(0,o.useEffect)((()=>{i?(j((0,x.Ri)(u.filter((e=>3!==e.state)))),c.length>0&&j((0,x.Ri)(e.filter((e=>3!==e.state))))):j((0,x.Ri)([]))}),[i]),(0,o.useEffect)((()=>{e.length>0&&w(e)}),[e]),(0,o.useEffect)((()=>{c.map((e=>{const i=`layer_${e.id}`,a=`source_${e.id}`;f.T.getLayer(t,i)&&f.T.removeFeature(t,i,a),f.T.addSourceToMap(t,a,e.pointList.map((e=>[e.longitude,e.latitude,e.altitude]))),f.T.addLayerToMap(t,i,a,"line","#EAF772")}))}),[c]);const T=e=>{const i=c.find((t=>e.id===t.id));if(i){const i=`layer_${e.id}`,a=`source_${e.id}`;f.T.getLayer(t,i)&&f.T.removeFeature(t,i,a)}return!!i},S=(0,o.useCallback)((t=>{if(t){const i=t.target?t.target.value.toUpperCase():"";w(e.filter((e=>e.name.toUpperCase().includes(i))))}}),[e]),F=(0,o.useCallback)((()=>{w(e)}),[e]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.Z,Object.assign({elevation:0,style:{overflow:"auto"}},{children:[(0,a.jsx)(O.V,{placeholder:"Buscar por nombre",functionFilter:S,functionCancel:F},void 0),(0,a.jsx)(b.Z,Object.assign({className:v.listItem,dense:!0},{children:(0,a.jsx)(n.Z,Object.assign({container:!0,direction:"column",justifyContent:"flex-end",style:{flex:1}},{children:(0,a.jsx)(n.Z,Object.assign({item:!0,style:{height:"77vh"}},{children:u.map((e=>(0,a.jsx)(W,{cellPad:e,map:t,isChecked:T(e)},e.id)))}),void 0)}),void 0)}),void 0)]}),void 0),c.length>0&&(0,a.jsx)(m.Z,Object.assign({variant:"contained",color:"primary",onClick:()=>{h(!0)},style:{width:"90%",margin:"10px"}},{children:"Finalizar Seleccionados"}),void 0),(0,a.jsx)(k.a,Object.assign({open:g,handleClose:()=>{h(!1),j((0,x.Ri)([])),j((0,x.fn)())},handleConfirm:()=>{return e=void 0,t=void 0,a=function*(){yield j((0,Z.iC)({cells:c,type:d})),j((0,C.aR)()),j((0,x.fn)()),h(!1)},new((i=void 0)||(i=Promise))((function(n,s){function o(e){try{d(a.next(e))}catch(e){s(e)}}function l(e){try{d(a.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,l)}d((a=a.apply(e,t||[])).next())}));var e,t,i,a},title:"¿Esta seguro ?"},{children:(0,a.jsx)(y.Z,Object.assign({severity:"warning"},{children:"Confirma para finalizar los poligonos seleccionados"}),void 0)}),void 0)]},void 0)};var H=i(32759),K=i(8793),J=i(64436),Q=i(96394),q=i(26209),G=i(85639),X=i(21549),ee=i(93565),te=i(35573);const ie=(0,c.Z)((e=>({paper:{padding:"5px",margin:"3px"}}))),ae=({open:e,handleClose:t,handleConfirm:i,polygon:c})=>{const j=ie(),v=(0,D.I0)(),{materialList:u}=(0,l.C)(d.WD),[x,b]=(0,o.useState)(c),[y,f]=(0,o.useState)(te.O[c.color].hex),[Z,O]=(0,o.useState)(!1),[k,w]=(0,o.useState)(""),T=Object.assign({},x),S=e=>{"idName"===e.target.id&&(T.name=e.target.value),"idAltitude"===e.target.id&&(T.altitude=parseFloat(e.target.value)),"idTonnens"===e.target.id&&(T.tonnes=parseFloat(e.target.value)),"idVolume"===e.target.id&&(T.volume=parseFloat(e.target.value)),"idAg"===e.target.id&&(T.ag=parseFloat(e.target.value)),"idAgcn"===e.target.id&&(T.agcn=parseFloat(e.target.value))},{name:F,ag:_,agcn:A,alte:M,altitude:R,as:z,au:V,auch:U,description:W,idProject:B,lito:Y,material:H,nameProject:K,onzas:ae,orezonet:ne,tonnes:se,volume:oe,state:le}=c;return(0,a.jsxs)(L.Z,Object.assign({open:e,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},{children:[(0,a.jsx)(N.Z,{children:"Polygon Edit"},void 0),(0,a.jsx)(I.Z,{children:(0,a.jsx)(s.Z,Object.assign({style:{padding:"7px"}},{children:(0,a.jsxs)(n.Z,Object.assign({container:!0,direction:"column",spacing:1,justifyContent:"center"},{children:[(0,a.jsx)(n.Z,Object.assign({item:!0,md:12,xl:12},{children:(0,a.jsxs)(r.Z,Object.assign({className:j.paper,elevation:2},{children:[(0,a.jsx)(h.Z,Object.assign({variant:"body1"},{children:"Habilitar"}),void 0),(0,a.jsx)(g.Z,{checked:x.state!==p.p$.FINISHED,onChange:e=>{T.state=e.target.checked?p.p$.ACTIVE:p.p$.FINISHED,b(T)},inputProps:{"aria-label":"secondary checkbox"}},void 0)]}),void 0)}),void 0),(0,a.jsxs)(n.Z,Object.assign({item:!0,container:!0,direction:"row"},{children:[(0,a.jsx)(n.Z,Object.assign({item:!0,md:6,xl:6},{children:(0,a.jsxs)(r.Z,Object.assign({className:j.paper,elevation:2},{children:[(0,a.jsx)(h.Z,Object.assign({variant:"body1"},{children:"Project:"}),void 0),(0,a.jsx)($.Z,{style:{width:"100%"},id:"idProject",label:K,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,a.jsx)(n.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,a.jsxs)(r.Z,Object.assign({className:j.paper,elevation:2},{children:[(0,a.jsx)(h.Z,Object.assign({variant:"body1"},{children:"Name:"}),void 0),(0,a.jsx)($.Z,{onChange:S,style:{width:"100%"},id:"idName",label:F,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,a.jsx)(n.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,a.jsxs)(r.Z,Object.assign({className:j.paper},{children:[(0,a.jsx)(h.Z,Object.assign({variant:"body1"},{children:"Altitude:"}),void 0),(0,a.jsx)($.Z,{onChange:S,style:{width:"100%"},id:"idAltitude",label:R,variant:"outlined"},void 0)]}),void 0)}),void 0)]}),void 0),(0,a.jsxs)(n.Z,Object.assign({item:!0,container:!0,md:12,xl:12},{children:[(0,a.jsx)(n.Z,Object.assign({item:!0,md:4,xl:4},{children:(0,a.jsx)(r.Z,Object.assign({className:j.paper,elevation:2},{children:(0,a.jsxs)(J.Z,Object.assign({style:{width:"100%"}},{children:[(0,a.jsx)(Q.Z,Object.assign({id:"demo-controlled-open-select-label"},{children:"Material"}),void 0),(0,a.jsx)(q.Z,Object.assign({style:{width:"100%"},id:"idMaterial",value:k,label:"Material",onChange:e=>{w(e.target.value)}},{children:u.map((e=>(0,a.jsx)(G.Z,Object.assign({value:e.id},{children:e.type}),e.id)))}),void 0)]}),void 0)}),void 0)}),void 0),(0,a.jsx)(n.Z,Object.assign({item:!0,md:8,xl:8},{children:(0,a.jsxs)(r.Z,Object.assign({className:j.paper,elevation:2},{children:[(0,a.jsx)(h.Z,Object.assign({variant:"body1"},{children:"Color"}),void 0),(0,a.jsxs)("div",Object.assign({style:{display:"flex",padding:"1px",justifyContent:"center"}},{children:[(0,a.jsx)(ee.e8,{color:y,colors:["#FF6900","#FCB900","#7BDCB5"],onChangeComplete:e=>{f(e.hex)}},void 0),(0,a.jsx)("div",{style:{justifyItems:"center",borderRadius:"4px",width:"40px",backgroundColor:`${y}`}},void 0)]}),void 0)]}),void 0)}),void 0)]}),void 0),(0,a.jsxs)(n.Z,Object.assign({item:!0,xl:12,md:12,container:!0,direction:"row"},{children:[(0,a.jsx)(n.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,a.jsxs)(r.Z,Object.assign({className:j.paper},{children:[(0,a.jsx)(h.Z,Object.assign({variant:"body1"},{children:"Tonnens:"}),void 0),(0,a.jsx)($.Z,{onChange:S,style:{width:"100%"},id:"idTonnens",label:se,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,a.jsx)(n.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,a.jsxs)(r.Z,Object.assign({className:j.paper},{children:[(0,a.jsx)(h.Z,Object.assign({variant:"body1"},{children:"Volume:"}),void 0),(0,a.jsx)($.Z,{onChange:S,style:{width:"100%"},id:"idVolume",label:oe,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,a.jsx)(n.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,a.jsxs)(r.Z,Object.assign({className:j.paper},{children:[(0,a.jsx)(h.Z,Object.assign({variant:"body1"},{children:"Ag:"}),void 0),(0,a.jsx)($.Z,{onChange:S,style:{width:"100%"},id:"idAg",label:_,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,a.jsx)(n.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,a.jsxs)(r.Z,Object.assign({className:j.paper},{children:[(0,a.jsx)(h.Z,Object.assign({variant:"body1"},{children:"Agcn:"}),void 0),(0,a.jsx)($.Z,{onChange:S,style:{width:"100%"},id:"idAgcn",label:A,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,a.jsx)(n.Z,{item:!0,md:6,xl:6},void 0)]}),void 0)]}),void 0)}),void 0)},void 0),(0,a.jsxs)(P.Z,{children:[(0,a.jsx)(m.Z,Object.assign({color:"primary",onClick:t},{children:"Cancelar"}),void 0),Z?(0,a.jsx)(E.Z,{variant:"indeterminate"},void 0):(0,a.jsx)(m.Z,Object.assign({color:"secondary",onClick:()=>{console.log("Color Select: ",y),O(!0),(0,X.Q)(x).then((e=>{v((0,C.aR)()),O(!1),t()})).catch((e=>{console.log(e),O(!1)}))},autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)]}),void 0)},ne=({pl:e,map:t,isChecked:i})=>{const{selectPolygon:n}=(0,l.C)(x.C2),d=(0,l.T)(),[c,r]=(0,o.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.Z,Object.assign({onClick:()=>{3===e.state||(e=>{if(d((0,x.jY)(e)),i){const i=`layer_${e.id}`,a=`source_${e.id}`;f.T.getLayer(t,i)&&f.T.removeFeature(t,i,a)}})(e)},selected:!0,dense:!0,button:!0,style:{backgroundColor:"white"}},{children:(0,a.jsxs)(s.Z,Object.assign({elevation:3===e.state?2:4,style:{display:"flex",padding:"5px",height:"100%",width:"100%",backgroundImage:i?"radial-gradient(circle, rgba(233,183,88,1) 68%, rgba(242,167,3,1) 100%)":"",backgroundColor:3===e.state?"#f1c3c34a":""}},{children:[(0,a.jsx)(g.Z,{disabled:3===e.state,checked:"3"!==e.state.toString()&&i,inputProps:{"aria-label":"secondary checkbox"}},void 0),(0,a.jsx)(T.Z,{style:{textDecorationLine:(e.state,"")},primary:(0,a.jsx)(h.Z,Object.assign({variant:"subtitle2",style:{color:3===e.state?"gray":"black",fontWeight:(e.state,"normal")}},{children:e.nameProject?`Project: ${e.nameProject}`:`Nombre: ${e.name}`}),void 0),secondary:(0,a.jsx)(h.Z,Object.assign({style:{color:3===e.state?"gray":"",fontWeight:3===e.state?"normal":"initial"},variant:"subtitle2"},{children:e.nameProject?`Name: ${e.name}`:""}),void 0)},void 0),(0,a.jsx)(S.Z,Object.assign({onClick:()=>{r(!0)}},{children:(0,a.jsx)(K.Z,{fontSize:"small",style:{color:i?"white":""}},void 0)}),void 0)]}),void 0)}),e.id),c&&(0,a.jsx)(ae,{open:c,handleClose:()=>{r(!1)},handleConfirm:()=>{r(!1)},polygon:e},void 0)]},void 0)};const se=(0,c.Z)((e=>({listItem:{"& .MuiListItem-gutters":{paddingLeft:"7px",paddingRight:"7px"}}}))),oe=({polygons:e,map:t,isChecked:i,setIsChecked:n})=>{const{selectPolygon:s}=(0,l.C)(x.C2),{status:d}=(0,l.C)(H.$e),[c,g]=(0,o.useState)([]),[h,j]=o.useState(!1),v=(0,l.T)(),p=se();(0,o.useEffect)((()=>{v(i?(0,x.DY)(c.filter((e=>3!==e.state))):(0,x.DY)([]))}),[i]),(0,o.useEffect)((()=>{setTimeout((()=>{s.map((e=>{const i=`layer_${e.id}`,a=`source_${e.id}`;f.T.getLayer(t,i)&&f.T.removeFeature(t,i,a),f.T.addSourceToMap(t,a,e.pointList.map((e=>[e.longitude,e.latitude,e.altitude]))),f.T.addLayerToMap(t,i,a,"line","#EAF772")}))}),10)}),[s]);const u=e=>{const i=s.find((t=>e.id===t.id));if(i){const i=`layer_${e.id}`,a=`source_${e.id}`;f.T.getLayer(t,i)&&f.T.removeFeature(t,i,a)}return!!i};(0,o.useEffect)((()=>{e.length>0&&g(e)}),[e]);const Z=(0,o.useCallback)((t=>{if(t){const i=t.target?t.target.value.toUpperCase():"";console.log("filter",i),g(e.filter((e=>e.name.toUpperCase().includes(i)||e.nameProject&&e.nameProject.toUpperCase().includes(i))))}}),[e]),w=(0,o.useCallback)((()=>{g(e)}),[e]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.V,{placeholder:"Buscar por proyecto, polígon o mineral ",functionFilter:Z,functionCancel:w},void 0),(0,a.jsx)(b.Z,Object.assign({className:p.listItem,dense:!0},{children:(0,a.jsx)(r.Z,Object.assign({elevation:0,style:{overflow:"scroll",height:"75vh"}},{children:c.map((e=>(0,a.jsx)(ne,{pl:e,map:t,isChecked:u(e)},e.id)))}),void 0)}),void 0),(0,a.jsx)(r.Z,Object.assign({elevation:0,style:{}},{children:s.length>0&&(0,a.jsx)(m.Z,Object.assign({variant:"contained",color:"primary",onClick:()=>{j(!0)},style:{width:"90%",margin:"10px"}},{children:"Finalizar Seleccionados"}),void 0)}),void 0),(0,a.jsx)(k.a,Object.assign({open:h,handleClose:()=>{j(!1),v((0,x.DY)([])),v((0,x.fn)())},handleConfirm:()=>{return e=void 0,t=void 0,a=function*(){yield v((0,H.if)(s)),v((0,C.aR)()),v((0,x.fn)()),j(!1)},new((i=void 0)||(i=Promise))((function(n,s){function o(e){try{d(a.next(e))}catch(e){s(e)}}function l(e){try{d(a.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,l)}d((a=a.apply(e,t||[])).next())}));var e,t,i,a},title:"¿Esta seguro ?"},{children:(0,a.jsx)(y.Z,Object.assign({severity:"warning"},{children:"Confirma para finalizar los poligonos seleccionados"}),void 0)}),void 0)]},void 0)},le=({cellStock:e,map:t,isChecked:i})=>{const n=(0,l.T)(),[d,c]=(0,o.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.Z,Object.assign({selected:!0,dense:!0,button:!0,onClick:()=>{"3"===e.state.toString()||(e=>{if(n((0,x.xk)(e)),i){const i=`layer_${e.id}`,a=`source_${e.id}`;f.T.getLayer(t,i)&&f.T.removeFeature(t,i,a)}})(e)},style:{backgroundColor:"white"}},{children:(0,a.jsxs)(s.Z,Object.assign({elevation:"3"===e.state.toString()?2:4,style:{display:"flex",padding:"5px",height:"100%",width:"100%",backgroundImage:i?"radial-gradient(circle, rgba(233,183,88,1) 68%, rgba(242,167,3,1) 100%)":"",backgroundColor:3===e.state?"#f1c3c34a":""}},{children:[(0,a.jsx)(g.Z,{disabled:"3"===e.state.toString(),checked:"3"!==e.state.toString()&&i,inputProps:{"aria-label":"secondary checkbox"}},void 0),(0,a.jsx)(T.Z,{primary:`Nombre: ${e.name}`},void 0),(0,a.jsx)(S.Z,Object.assign({onClick:()=>{c(!0)}},{children:(0,a.jsx)(F.Z,{fontSize:"small"},void 0)}),void 0)]}),void 0)}),e.id),d&&(0,a.jsx)(M,{typeDownload:R.TypeDownload.STOCK,open:d,setOpen:c,cell:e},void 0)]},void 0)};const de=(0,c.Z)((e=>({listItem:{"& .MuiListItem-gutters":{paddingLeft:"7px",paddingRight:"7px"}}}))),ce=({cellsStock:e,map:t,isChecked:i,setIsChecked:s,type:d})=>{const{selectStock:c}=(0,l.C)(x.C2),[g,h]=o.useState(!1),j=(0,l.T)(),v=de(),{status:p}=((0,o.useState)(!1),(0,l.C)(Z.Lo)),[u,w]=(0,o.useState)([]);(0,o.useEffect)((()=>{j(i?(0,x.I5)(u.filter((e=>3!==e.state))):(0,x.I5)([]))}),[i]),(0,o.useEffect)((()=>{setTimeout((()=>{c.map((e=>{const i=`layer_${e.id}`,a=`source_${e.id}`;f.T.getLayer(t,i)&&f.T.removeFeature(t,i,a),f.T.addSourceToMap(t,a,e.pointList.map((e=>[e.longitude,e.latitude,e.altitude]))),f.T.addLayerToMap(t,i,a,"line","#EAF772")}))}),10)}),[c]);const T=e=>{const i=c.find((t=>e.id===t.id));if(i){const i=`layer_${e.id}`,a=`source_${e.id}`;f.T.getLayer(t,i)&&f.T.removeFeature(t,i,a)}return!!i};(0,o.useEffect)((()=>{e.length>0&&w(e)}),[e]);const S=(0,o.useCallback)((t=>{if(t){const i=t.target?t.target.value.toUpperCase():"";w(e.filter((e=>e.name.toUpperCase().includes(i))))}}),[e]),F=(0,o.useCallback)((()=>{w(e)}),[e]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.Z,Object.assign({elevation:0,style:{overflow:"auto"}},{children:[(0,a.jsx)(O.V,{placeholder:"Buscar por nombre",functionFilter:S,functionCancel:F},void 0),(0,a.jsx)(b.Z,Object.assign({className:v.listItem,dense:!0},{children:(0,a.jsx)(n.Z,Object.assign({container:!0,direction:"column",justifyContent:"flex-end",style:{flex:1}},{children:(0,a.jsx)(n.Z,Object.assign({item:!0,style:{height:"77vh"}},{children:u.map((e=>(0,a.jsx)(le,{cellStock:e,map:t,isChecked:T(e)},e.id)))}),void 0)}),void 0)}),void 0)]}),void 0),c.length>0&&(0,a.jsx)(m.Z,Object.assign({variant:"contained",color:"primary",onClick:()=>{h(!0)},style:{width:"90%",margin:"10px"}},{children:"Finalizar Seleccionados"}),void 0),(0,a.jsx)(k.a,Object.assign({open:g,handleClose:()=>{h(!1)},handleConfirm:()=>{return e=void 0,t=void 0,a=function*(){h(!1),yield j((0,Z.iC)({cells:c,type:d})),j((0,C.aR)()),j((0,x.fn)()),h(!1)},new((i=void 0)||(i=Promise))((function(n,s){function o(e){try{d(a.next(e))}catch(e){s(e)}}function l(e){try{d(a.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,l)}d((a=a.apply(e,t||[])).next())}));var e,t,i,a},title:"¿Esta seguro?"},{children:(0,a.jsx)(y.Z,Object.assign({severity:"warning"},{children:"Confirma para finalizar los poligonos seleccionados"}),void 0)}),void 0)]},void 0)};const re=(0,c.Z)((e=>({root:{flex:1,backgroundColor:"#FDF8EF",display:"flex",height:"800px",width:"100%",minWidth:"1300px"},paper:{height:"100vh",width:"100%",textAlign:"center",justifyContent:"center",minWidth:"250px"},tittle:{textAlign:"center"},paperMap:{backgroundColor:"#FDF8EF",width:"100%",height:"800px",padding:"10px",textAlign:"center",minWidth:"900px"},tabs:{borderRight:`1px solid ${e.palette.divider}`,width:"100%"},tab:{minWidth:10,padding:1,paddingTop:8,paddingBottom:8,width:"100%"},buttonTab:{writingMode:"vertical-rl"},listItem:{"& .MuiListItem-gutters":{paddingLeft:"7px",paddingRight:"7px"}}})));function ge(e){const{children:t,value:i,index:n}=e,s=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(i[a[n]]=e[a[n]])}return i}(e,["children","value","index"]);return(0,a.jsx)("div",Object.assign({role:"tabpanel",hidden:i!==n,id:`vertical-tabpanel-${n}`,"aria-labelledby":`vertical-tab-${n}`,style:{flex:1}},s,{children:i===n&&t}),void 0)}function he(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const je=({map:e})=>{const{selectPolygon:t,selectDme:i,selectPad:s,selectStock:c}=(0,l.C)(x.C2),b=(0,l.T)(),{polygonList:m,dmeCellList:y,padCellList:f,stockCellList:C,routeList:Z}=(0,l.C)(d.WD),[O,k]=(0,o.useState)(!1),w=re(),[T,S]=(0,u._)("index_tab_settind_polygon",0);return(0,a.jsx)("div",{children:(0,a.jsxs)(r.Z,Object.assign({elevation:1,className:w.paper},{children:[(0,a.jsxs)(n.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,a.jsx)(g.Z,{indeterminate:t.length>0&&m.length!=t.length||i.length>0&&y.length!=i.length||s.length>0&&f.length!=s.length||c.length>0&&C.length==c.length||void 0,checked:O,onChange:e=>{k(e.target.checked),m.length===t.length&&k(e.target.checked),C.length!==c.length&&k(e.target.checked)}},void 0),(0,a.jsx)(h.Z,Object.assign({className:w.tittle},{children:"Selected Polygon"}),void 0)]}),void 0),(0,a.jsxs)(n.Z,Object.assign({container:!0,justifyContent:"space-between",alignItems:"flex-start",wrap:"nowrap"},{children:[(0,a.jsx)(n.Z,Object.assign({item:!0},{children:(0,a.jsxs)(j.Z,Object.assign({orientation:"vertical",variant:"scrollable",value:T,indicatorColor:"primary",textColor:"primary",onChange:(e,t)=>{S(t),b((0,x.fn)()),k(!1)},"aria-label":"horizontal tabs",className:w.tabs},{children:[(0,a.jsx)(v.Z,Object.assign({className:w.tab,label:(0,a.jsx)(h.Z,Object.assign({variant:"caption",className:w.buttonTab},{children:"TAJO"}),void 0)},he(0)),void 0),(0,a.jsx)(v.Z,Object.assign({className:w.tab,label:(0,a.jsx)(h.Z,Object.assign({variant:"caption",className:w.buttonTab},{children:"DME"}),void 0)},he(1)),void 0),(0,a.jsx)(v.Z,Object.assign({className:w.tab,label:(0,a.jsx)(h.Z,Object.assign({variant:"caption",className:w.buttonTab},{children:"PAD"}),void 0)},he(2)),void 0),(0,a.jsx)(v.Z,Object.assign({className:w.tab,label:(0,a.jsx)(h.Z,Object.assign({variant:"caption",className:w.buttonTab},{children:"STOCKs"}),void 0)},he(3)),void 0)]}),void 0)}),void 0),(0,a.jsxs)(n.Z,Object.assign({item:!0,container:!0,style:{padding:8}},{children:[(0,a.jsx)(ge,Object.assign({value:T,index:0},{children:(0,a.jsx)(oe,{polygons:m,map:e.current,isChecked:O,setIsChecked:k},void 0)}),void 0),(0,a.jsx)(ge,Object.assign({value:T,index:1},{children:(0,a.jsx)(U,{cellsDme:y,map:e.current,isChecked:O,type:p.NZ.DME},void 0)}),void 0),(0,a.jsx)(ge,Object.assign({value:T,index:2},{children:(0,a.jsx)(Y,{cellsPad:f,map:e.current,isChecked:O,setIsChecked:k,type:p.NZ.PAD},void 0)}),void 0),(0,a.jsx)(ge,Object.assign({value:T,index:3},{children:(0,a.jsx)(ce,{cellsStock:C,map:e.current,isChecked:O,setIsChecked:k,type:p.NZ.STOCK},void 0)}),void 0)]}),void 0)]}),void 0)]}),void 0)},void 0)},ve=(0,o.lazy)((()=>Promise.all([i.e(820),i.e(771)]).then(i.bind(i,77771)))),pe=()=>{const{polygonList:e}=(0,l.C)(d.WD),t=(0,o.useRef)(null);return(0,a.jsxs)(n.Z,Object.assign({container:!0,spacing:1,style:{height:"80vh"}},{children:[(0,a.jsx)(n.Z,Object.assign({item:!0,md:4,xl:3},{children:(0,a.jsx)(je,Object.assign({},{map:t}),void 0)}),void 0),(0,a.jsx)(n.Z,Object.assign({item:!0,xs:6,md:8,xl:9},{children:(0,a.jsx)(s.Z,Object.assign({elevation:3,style:{height:"100%"}},{children:(0,a.jsx)(o.Suspense,Object.assign({fallback:null},{children:(0,a.jsx)(ve,{mapRef:t},void 0)}),void 0)}),void 0)}),void 0)]}),void 0)},ue=()=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(pe,{},void 0)},void 0)}}]);