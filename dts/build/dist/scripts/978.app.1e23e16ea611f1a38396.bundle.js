"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[978],{81978:(e,i,t)=>{t.d(i,{c:()=>D});var a=t(85893),n=t(10046),s=t(41749),o=t(22318),d=t(18463),r=t(14741),c=t(282),l=t(62822),v=t(50998),u=t(73430),x=t(30387),h=t(44562),m=t(67294),p=t(73855),j=t(14125),g=t(61242),f=t(8286),y=t(990),b=t(57886),C=t(31940);const I=({openEditExcavator:e,setOpenEditExcavator:i,excavator:t})=>{const s=(0,p.T)(),{excavatorInfoList:o}=(0,p.C)(j.kW),{truckSelects:d}=(0,p.C)(C.__),[r,c,l,v]=(0,y.M)(Object.assign({},t)),{deviceAlias:u,deviceId:x,id:h,deviceInterval:I,plate:Z}=r,w=(0,m.useCallback)((e=>{let i=!1;if(e){const t=e.toUpperCase();return o.filter((e=>{e.deviceAlias.toUpperCase()===t&&(i=!0)})),i}}),[o]);return(0,a.jsx)(g.a,Object.assign({open:e,handleClose:()=>{i(!1),l()},handleConfirm:()=>{return e=void 0,t=void 0,n=function*(){u&&!w(r.deviceAlias)&&(yield s((0,b.hH)(r)),s((0,b.Jl)()),yield s((0,j.CE)()),i(!1))},new((a=void 0)||(a=Promise))((function(i,s){function o(e){try{r(n.next(e))}catch(e){s(e)}}function d(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,d)}r((n=n.apply(e,t||[])).next())}));var e,t,a,n},title:"Editar Excavadora",customise:!0},{children:(0,a.jsxs)(n.Z,Object.assign({component:"form",style:{color:"dark"}},{children:[(0,a.jsx)(f.Z,{error:!!w(r.deviceAlias),variant:"outlined",required:!0,onChange:c,style:{width:"100%"},label:"Alias",size:"small",value:u,name:"deviceAlias",helperText:w(r.deviceAlias)?"Ya hay una excavadora con ese mismo Device Alias":""},void 0),(0,a.jsx)(n.Z,{height:"12px"},void 0),(0,a.jsx)(f.Z,{error:!!w(r.deviceId),variant:"outlined",required:!0,onChange:c,style:{width:"100%"},label:"Id",size:"small",disabled:!0,value:r.deviceId,name:"deviceId",helperText:w(r.deviceId)?"Ya hay una excavadora con ese mismo Device Id":""},void 0)]}),void 0)}),void 0)};var Z=t(15635);const w=({openNewExcavator:e,setOpenNewExcavator:i,unit:t})=>{const s=(0,p.T)(),{excavatorInfoList:o}=(0,p.C)(j.kW),{stateCreate:d}=(0,p.C)(b.$I),[r,c,l,v]=(0,y.M)({deviceAlias:"",deviceId:"",id:"",plate:"",deviceInterval:0,description:"",horometer:0}),{deviceAlias:u,deviceId:x,horometer:C}=r,[I]=(0,Z.r)(d),[w,O]=(0,m.useState)(!1);t&&(r.deviceAlias=null==t?void 0:t.deviceAlias,r.deviceId=null==t?void 0:t.deviceId);const E=(0,m.useCallback)((e=>{let i=!1;if(e){const t=e.toUpperCase();return o.filter((e=>{e.deviceAlias.toUpperCase()===t&&(i=!0),e.deviceId.toUpperCase()===t&&(i=!0)})),i}}),[o]);return(0,m.useEffect)((()=>{O(!!u&&!!x&&!!C&&C>0&&!E(r.deviceAlias)&&!E(r.deviceId))}),[r]),(0,a.jsx)(g.a,Object.assign({open:e,handleClose:()=>{s((0,j.CE)()),i(!1),l()},handleConfirm:()=>{return e=void 0,t=void 0,n=function*(){w&&(yield s((0,b.Li)(r)),yield s((0,j.CE)()),i(!1),l())},new((a=void 0)||(a=Promise))((function(i,s){function o(e){try{r(n.next(e))}catch(e){s(e)}}function d(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,d)}r((n=n.apply(e,t||[])).next())}));var e,t,a,n},title:"Insertar Nueva Excavadora",customise:!0,loading:I,disabled:!w},{children:(0,a.jsxs)(n.Z,Object.assign({component:"form",style:{color:"dark"}},{children:[(0,a.jsx)(f.Z,{error:!!E(r.deviceAlias),variant:"outlined",required:!0,disabled:!!t,onChange:c,style:{width:"100%"},label:"Device Alias",size:"small",value:r.deviceAlias,name:"deviceAlias",helperText:E(r.deviceAlias)?"Ya hay una excavadora con ese mismo Device Alias":""},void 0),(0,a.jsx)(n.Z,{height:"12px"},void 0),(0,a.jsx)(f.Z,{error:!!E(r.deviceId),variant:"outlined",required:!0,disabled:!!t,onChange:c,style:{width:"100%"},label:"Device Id",size:"small",value:r.deviceId,name:"deviceId",helperText:E(r.deviceId)?"Ya hay una excavadora con ese mismo Device Id":"Insertar Device Id"},void 0),(0,a.jsx)(f.Z,{error:C<0,variant:"outlined",required:!0,disabled:!!E(r.deviceId),onChange:c,style:{width:"100%"},label:"Hor칩metro",size:"small",type:"number",value:C,name:"horometer",helperText:C<0?"El Hor칩metro necesita ser mayor que 0":"Insertar Hor칩metro"},void 0),t&&E(r.deviceId)&&(0,a.jsx)(h.Z,Object.assign({severity:"error"},{children:"la excavadora seleccionada ya existe en el sistema"}),void 0)]}),void 0)}),void 0)};var O=t(53280),E=t(17813),k=function(e,i,t,a){return new(t||(t=Promise))((function(n,s){function o(e){try{r(a.next(e))}catch(e){s(e)}}function d(e){try{r(a.throw(e))}catch(e){s(e)}}function r(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(o,d)}r((a=a.apply(e,i||[])).next())}))};const A=()=>{const[e,i]=m.useState(!1),[t,f]=(0,m.useState)(!1),[y,C]=m.useState(!1),[A,L]=m.useState(!1),{excavatorsSelects:S,statusDelete:D}=(0,p.C)(b.$I),T=(0,p.T)(),{excavatorInfoList:z}=(0,p.C)(j.kW),{search:H,setSearch:q,filterList:N,setFilterList:U}=(0,E.e)(),{ExcavatorListHytera:W}=(0,p.C)(b._$),_=(0,m.useRef)(),[J]=(0,Z.r)(D);(0,m.useEffect)((()=>{""===H&&U(z)}),[N]);const P=()=>{i(!1),C(!1),L(!1),T((0,j.CE)()),T((0,b.Jl)())};return(0,a.jsx)(n.Z,{children:(0,a.jsxs)(s.Z,Object.assign({spacing:1,container:!0,direction:"column",style:{padding:"12px"}},{children:[(0,a.jsx)(s.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,a.jsx)(o.Z,Object.assign({variant:"subtitle1"},{children:"Lista de Excavadoras"}),void 0)}),void 0),(0,a.jsxs)(s.Z,Object.assign({item:!0,container:!0,alignItems:"center",style:{width:"100%"}},{children:[(0,a.jsx)(d.Z,Object.assign({style:{paddingLeft:"8px"}},{children:(0,a.jsx)(r.Z,{color:"primary",value:H,inputRef:_,onKeyDown:e=>{var i;"Escape"===e.key&&(q(""),null===(i=_.current)||void 0===i||i.blur(),U(z))},onChange:e=>{q(e.target.value)},placeholder:"Buscar excavadora",inputProps:{"aria-label":"search"}},void 0)}),void 0),(0,a.jsx)(c.Z,Object.assign({startIcon:(0,a.jsx)(u.Z,{},void 0),onClick:()=>{C(!0)},size:"small",style:{marginLeft:"2em",color:"white",background:"#1d4e89"}},{children:"Nueva excavadora"}),void 0),S.length>0&&(0,a.jsx)(c.Z,Object.assign({onClick:()=>{i(!0)},color:"primary",size:"small",style:{marginLeft:"2em",color:"white",background:"#1d4e89"}},{children:"Desactivar excavadora"}),void 0),1===S.length&&(0,a.jsx)(c.Z,Object.assign({startIcon:(0,a.jsx)(x.Z,{},void 0),onClick:()=>{f(!0)},color:"primary",size:"small",style:{marginLeft:"2em",color:"white",background:"#1d4e89"}},{children:"Editar"}),void 0),(0,a.jsx)(s.Z,{item:!0,xs:12,md:6,xl:6},void 0),(0,a.jsx)(s.Z,{item:!0,xs:12,md:6,xl:6},void 0)]}),void 0),(0,a.jsx)(s.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,a.jsx)(l.Z,Object.assign({dense:!0,style:{display:"flex",flexWrap:"wrap",backgroundColor:"rgb(250 250 250)"}},{children:N.map((e=>{return(0,a.jsx)(v.Z,Object.assign({button:!0,onClick:()=>{(e=>{T((0,b.m1)(e))})(e)},style:{width:"12em",padding:"0px",margin:"0.2em",backgroundColor:"white"}},{children:(0,a.jsx)(O.Z,{unit:e,isSelect:(i=e,!!S.find((e=>i.deviceId===e.deviceId))),isTruck:!1},void 0)}),e.deviceId);var i}))}),void 0)}),void 0),(0,a.jsx)(w,{openNewExcavator:y,setOpenNewExcavator:C},void 0),S.length>0&&(0,a.jsx)(g.a,Object.assign({open:e,handleClose:P,handleConfirm:()=>k(void 0,void 0,void 0,(function*(){yield T((0,b._7)(S)),yield T((0,j.CE)()),T((0,b.Jl)()),i(!1)})),title:"Seguro que quieres Deshabilitar",customise:!0,loading:J},{children:(0,a.jsx)(h.Z,Object.assign({severity:"warning"},{children:S.map((e=>e.deviceId+" "))}),void 0)}),void 0),(0,a.jsx)(g.a,Object.assign({open:A,handleClose:P,handleConfirm:()=>k(void 0,void 0,void 0,(function*(){yield W.map((e=>{var i;i=e,z.some((e=>e.deviceId===i.deviceId))||T((0,b.vW)([e]))})),yield T((0,j.CE)()),T((0,b.Jl)()),L(!1)})),title:"sure you want to Syncronize",customise:!0},{children:(0,a.jsx)(h.Z,Object.assign({severity:"info"},{children:"Las excavadoras Hytera se sincronizar치n con el sistema DTS."}),void 0)}),void 0),1===S.length&&(0,a.jsx)(I,{openEditExcavator:t,setOpenEditExcavator:f,excavator:S[0]},void 0)]}),void 0)},void 0)};var L=t(10465);const S=()=>{const[e,i]=m.useState(!1),{ExcavatorListHytera:t}=(0,p.C)(b._$),d=(0,p.T)(),[r,c]=(0,m.useState)(!1),[u,x]=(0,m.useState)([]),[h,f]=(0,m.useState)(!1),[y,C]=(0,m.useState)(),{excavatorInfoList:I}=(0,p.C)(j.kW);(0,m.useEffect)((()=>{d((0,b.Xo)())}),[]),(0,m.useEffect)((()=>{x(t)}),[t]);const Z=(0,m.useCallback)((e=>{if(e){const i=e.target?e.target.value.toUpperCase():"";x(t.filter((e=>e.deviceAlias.toUpperCase().includes(i))))}}),[t]),E=(0,m.useCallback)((()=>{x(t)}),[t]);return(0,a.jsx)(n.Z,{children:(0,a.jsxs)(s.Z,Object.assign({spacing:1,container:!0,direction:"column",style:{padding:"4px"}},{children:[(0,a.jsx)(s.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,a.jsx)(o.Z,Object.assign({variant:"subtitle1"},{children:"List Excavators Hytera"}),void 0)}),void 0),(0,a.jsx)(s.Z,Object.assign({item:!0,container:!0,alignItems:"center",style:{width:"100%"}},{children:(0,a.jsx)(L.V,{placeholder:"Buscar excavadora",functionFilter:Z,functionCancel:E},void 0)}),void 0),(0,a.jsx)(s.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,a.jsx)(l.Z,Object.assign({dense:!0,style:{display:"flex",flexWrap:"wrap",backgroundColor:"rgb(250 250 250)"}},{children:u.map((e=>{return(0,a.jsx)(v.Z,Object.assign({button:!0,onClick:()=>{(e=>{f(!0),C(e),c(!r)})(e)},style:{width:"8em",padding:"0px",margin:"0.1em",backgroundColor:"white"}},{children:(0,a.jsx)(O.Z,{unit:e,isItemHytera:!0,inList:(i=e,I.some((e=>i.deviceId===e.deviceId)))},void 0)}),e.deviceId);var i}))}),void 0)}),void 0),h&&(0,a.jsx)(w,{openNewExcavator:!0,setOpenNewExcavator:f,unit:y},void 0),(0,a.jsx)(g.a,{open:e,handleClose:()=>{i(!1),d((0,b.Jl)())},handleConfirm:()=>{return e=void 0,t=void 0,n=function*(){i(!1)},new((a=void 0)||(a=Promise))((function(i,s){function o(e){try{r(n.next(e))}catch(e){s(e)}}function d(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,d)}r((n=n.apply(e,t||[])).next())}));var e,t,a,n},title:"sure you want to delete"},void 0)]}),void 0)},void 0)},D=()=>(0,a.jsx)(n.Z,{children:(0,a.jsxs)(s.Z,Object.assign({spacing:0,container:!0,direction:"row",style:{padding:"12px"}},{children:[(0,a.jsx)(s.Z,Object.assign({item:!0,xs:12,md:8,xl:8},{children:(0,a.jsx)(A,{},void 0)}),void 0),(0,a.jsx)(s.Z,Object.assign({item:!0,xs:12,md:4,xl:4},{children:(0,a.jsx)(S,{},void 0)}),void 0)]}),void 0)},void 0)}}]);