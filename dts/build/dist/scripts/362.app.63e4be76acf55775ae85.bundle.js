(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[362],{61147:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>H});var s=i(85893),a=i(41749),o=i(10046),n=i(67294),r=i(18463),d=i(94697),l=i(22318),c=i(79912),h=i(33901);const g=({title:e,icon:t,subheader:i,children:a,customStyle:o})=>(0,s.jsx)(r.Z,{children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{style:{color:"#0069AA"},title:(0,s.jsx)(l.Z,Object.assign({variant:"subtitle1",style:{textAlign:"center",fontSize:"0.875rem"}},{children:e}),void 0),subheader:i},void 0),(0,s.jsx)(c.Z,{children:a},void 0)]},void 0):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{style:{color:"#0069AA"},avatar:(0,s.jsx)(h.Z,{variant:"square",src:t},void 0),title:e,subheader:i},void 0),(0,s.jsx)(c.Z,{children:a},void 0)]},void 0)},void 0);var m=i(47229),x=i(73855),v=i(4650);const p=()=>{const{reportPerformancePerHour:e,isSelectDay:t,isSelectNight:i}=(0,x.C)(v.Ig),[a,o]=(0,n.useState)([]),[r,d]=(0,n.useState)([]),[l,c]=(0,n.useState)([]),[h,g]=(0,n.useState)([]),[p,u]=(0,n.useState)([]);(0,n.useEffect)((()=>{(new Date).getHours(),t&&(o(e.day.hourList),d(e.day.padList),c(e.day.stockList),g(e.day.dmeList),u(e.day.lenTruckList)),i&&(o(e.night.hourList),d(e.night.padList),c(e.night.stockList),g(e.night.dmeList),u(e.night.lenTruckList))}),[e,t,i]);const b=(e=>{const{categorie:t,pad:i,stock:s,dme:a,trucks:o,op:n}=e,{id:r,padName:d,stockName:l,dmeName:c,trucksName:h}=n;return{stateChart:{series:[{name:d,type:"column",data:i},{name:l,type:"column",data:s},{name:c,type:"column",data:a},{name:h,type:"line",data:o}],options:{colors:["#FF0808","#F1C012","#069B15","#191970"],dataLabels:{enabled:!0},chart:{id:"bar-"+r,stacked:!0,toolbar:{show:!0},zoom:{enabled:!0}},labels:t,xaxis:{title:{text:"Horas"}},yaxis:[{title:{text:"Toneladas"}}],legend:{position:"top",offsetY:10}},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}}}})({categorie:a,pad:r,stock:l,dme:h,trucks:p,op:{id:"Toneladas",padName:"MINERAL",stockName:"STOCK",dmeName:"DESMONTE",trucksName:"CAMIONES"}});return(0,s.jsx)("div",{children:(0,s.jsx)(m.Z,{options:b.stateChart.options,series:b.stateChart.series,type:"line",height:"413"},void 0)},void 0)};var u=i(90179),b=i(43856);const j=()=>{const{reportPerformancePerHour:e,isSelectDay:t,isSelectNight:i}=(0,x.C)(v.Ig),[a,o]=(0,n.useState)([]),[r,d]=(0,n.useState)([]);(0,n.useEffect)((()=>{t&&(o(e.day.hourList),d(e.day.excavatorValueCycleList.map((e=>({name:e.deviceAlias,data:e.valueList}))))),i&&(o(e.night.hourList),d(e.night.excavatorValueCycleList.map((e=>({name:e.deviceAlias,data:e.valueList})))))}),[e,t,i]);const l=(e=>{const{categorie:t,op:i,seriesEx:s}=e,{id:a}=i;return{stateChart:{series:s,options:{colors:["#DB0A5B","#FF6322","#FFBB04","#2ECC71","#00B0FF","#BC50FA","#68E1FF","#754B10","#003F63","#FFA700","#64732F","#D94625"],chart:{id:"bar-"+a,height:350},plotOptions:{bar:{horizontal:!1}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:t,title:{text:"Horas"}},yaxis:[{title:{text:"Toneladas"}}],tooltip:{shared:!1,y:{formatter:function(e){return e+" Toneladas"}}},fill:{opacity:1},legend:{position:"top",offsetY:10}},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}}}})({categorie:a,seriesEx:r,op:{id:"excavator"}});return(0,s.jsx)("div",{children:(0,s.jsx)(m.Z,{options:l.stateChart.options,series:l.stateChart.series,type:"bar",height:"413"},void 0)},void 0)},y=()=>{const{reportPerformancePerHour:e}=(0,x.C)(v.Ig),{tonnePerTruck:t}=e.day,i=(e=>{const{pad:t,stock:i,dme:s,goalPad:a,goalStock:o,goalDme:n,op:r}=e,{id:d,padName:l,stockName:c,dmeName:h}=r;return{stateChart:{series:[{name:"Actual",data:[{x:l,y:t,goals:[{name:c,value:a,strokeWidth:5,strokeColor:"#008000"}]},{x:c,y:i,goals:[{name:"META",value:o,strokeWidth:5,strokeColor:"#008000"}]},{x:h,y:s,goals:[{name:"META",value:n,strokeWidth:5,strokeColor:"#008000"}]}]}],options:{chart:{id:"bar-"+d,height:350},plotOptions:{bar:{columnWidth:"60%",horizontal:!0}},colors:["#000"],dataLabels:{enabled:!0,formatter:function(e,t){const i=t.w.config.series[t.seriesIndex].data[t.dataPointIndex].goals;return i&&i.length?`${e} / ${i[0].value}`:e}},legend:{show:!0,showForSingleSeries:!0,customLegendItems:["PRODUCCION","META"],markers:{fillColors:["#000","#008000"]}}}}}})({pad:e.day.lenCyclePad*t+e.night.lenCyclePad*t,stock:e.day.lenCycleStock*t+e.night.lenCycleStock*t,dme:e.day.lenCycleDme*t+e.night.lenCycleDme*t,goalPad:0,goalStock:0,goalDme:0,op:{id:"producction",padName:"MINERAL",stockName:"STOCK",dmeName:"DESMONTE"}});return(0,s.jsx)("div",{children:(0,s.jsx)(m.Z,{options:i.stateChart.options,series:i.stateChart.series,type:"bar",height:"282"},void 0)},void 0)};var C=i(56731);const O=({shift:e,lenCycleDme:t,lenCyclePad:i,lenCycleStock:o,label:d,onClick:c,isSelect:h})=>{const[g,m]=(0,n.useState)(""),[x,v]=(0,n.useState)(0),p=(new Date).getHours();return(0,n.useEffect)((()=>{e!=C.Shift.DAY&&p>=7&&p<19&&m("rgb(75 75 75 / 20%)"),e!=C.Shift.NIGHT&&p>=18&&m("rgb(75 75 75 / 20%)"),v(1==h?5:0)}),[c]),(0,s.jsx)(r.Z,Object.assign({onClick:c,style:{flex:"auto"},elevation:x},{children:(0,s.jsxs)(a.Z,Object.assign({container:!0,direction:"column",alignItems:"center"},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0},{children:(0,s.jsxs)(l.Z,Object.assign({style:{color:"#0069AA"},gutterBottom:!0,variant:"h6",component:"h2"},{children:[d," "]}),void 0)}),void 0),(0,s.jsxs)(a.Z,Object.assign({container:!0,item:!0,spacing:2,justifyContent:"space-around"},{children:[(0,s.jsxs)(a.Z,Object.assign({item:!0},{children:[(0,s.jsx)(l.Z,Object.assign({style:{color:"#069B15"},gutterBottom:!0,variant:"h6",component:"h2"},{children:"Desmonte"}),void 0),(0,s.jsx)(l.Z,Object.assign({gutterBottom:!0,variant:"h6",component:"h2"},{children:t}),void 0)]}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0},{children:[(0,s.jsx)(l.Z,Object.assign({style:{color:"#F1C012"},gutterBottom:!0,variant:"h6",component:"h2"},{children:"Stock"}),void 0),(0,s.jsx)(l.Z,Object.assign({gutterBottom:!0,variant:"h6",component:"h2"},{children:o}),void 0)]}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0},{children:[(0,s.jsx)(l.Z,Object.assign({style:{color:"#FF0808"},gutterBottom:!0,variant:"h6",component:"h2"},{children:"Mineral"}),void 0),(0,s.jsx)(l.Z,Object.assign({gutterBottom:!0,variant:"h6",component:"h2"},{children:i}),void 0)]}),void 0)]}),void 0)]}),void 0)}),void 0)};var Z=i(38062),f=i(34250),k=i(10646),A=i(88093),S=i(71768);const T=e=>{const{categorie:t,series:i,op:s,label:a}=e,{id:o}=s;return{stateChart:{series:[{name:a,data:i}],options:{colors:["#FF0808","#F1C012","#069B15","#191970"],dataLabels:{enabled:!0},grid:{show:!1},chart:{id:"bar-"+o,stacked:!0,toolbar:{show:!1},zoom:{enabled:!1}},labels:t,xaxis:{categories:t,title:{text:""},labels:{show:!0}},yaxis:{title:{text:a},labels:{show:!1},min:0,max:100}},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}}}},N=e=>{const{value:t,op:i}=e,{id:s}=i;return{stateChart:{series:[t],options:{colors:["#191970","#F1C012","#069B15","#191970"],dataLabels:{enabled:!0},chart:{id:"bar-"+s,stacked:!0,toolbar:{show:!1},offsetY:-20,sparkline:{enabled:!0}},plotOptions:{radialBar:{startAngle:-90,endAngle:90,track:{background:"#e7e7e7",strokeWidth:"97%",margin:5,dropShadow:{enabled:!0,top:2,left:0,color:"#999",opacity:1,blur:2}},dataLabels:{name:{show:!1},value:{offsetY:-2,fontSize:"22px"}}}},fill:{type:"gradient",gradient:{shade:"light",shadeIntensity:.3,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,50,53,91]}}},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}}}},F=e=>{const{value:t,op:i}=e,{id:s}=i;return{stateChart:{series:[t],options:{colors:["#191970","#F1C012","#069B15","#191970"],dataLabels:{enabled:!1},chart:{id:"bar-"+s,stacked:!1,toolbar:{show:!1},offsetY:-20,sparkline:{enabled:!0}},plotOptions:{radialBar:{startAngle:-90,endAngle:90,track:{background:"#e7e7e7",strokeWidth:"97%",margin:5,dropShadow:{enabled:!0,top:2,left:0,color:"#999",opacity:1,blur:2}},dataLabels:{name:{show:!1},value:{offsetY:-2,fontSize:"22px",formatter:function(e){return e+" Tn/h"}}}}},fill:{type:"gradient",gradient:{shade:"light",shadeIntensity:.3,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,50,53,91]}}},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}}}},D=()=>{const{status:e,dataReport:t}=(0,x.C)(S.vs),{isSelectDay:i,isSelectNight:o}=(0,x.C)(v.Ig),{load:n}=t,r=n.labelDaysReportList,d=n.mechanicalAvailabilityList.map((function(e){return Number(e.toFixed(2))})),c=n.utilizationList.map((function(e){return Number(e.toFixed(2))})),h=n.productivityList.map((function(e){return Number(e.toFixed(2))})),g=Number(n.todayMechanicalAvailability.toFixed(1)),p=Number(n.todayUtilization.toFixed(1)),u=Number(n.todayProductivity.toFixed(1)),b=T({categorie:r,series:d,op:{id:"loadMechAvailability"},label:"Disp. Mecánica"}),j=T({categorie:r,series:c,op:{id:"loadUtilization"},label:"Utilización"}),y=T({categorie:r,series:h,op:{id:"loadDisponibility"},label:"Productividad"}),C=N({value:g,op:{id:"AvailabilityToday"}}),O=N({value:p,op:{id:"UtilizationToday"}}),Z=F({value:u,op:{id:"ProductivityToday"}});return(0,s.jsxs)(a.Z,Object.assign({container:!0,direction:"column"},{children:[(0,s.jsxs)(a.Z,Object.assign({item:!0,container:!0,direction:"row",alignItems:"center",xl:12,md:12,xs:12,spacing:0},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,md:8,xs:8},{children:(0,s.jsx)(m.Z,{options:b.stateChart.options,series:b.stateChart.series,type:"line",height:"150"},void 0)}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0,md:4,xs:4},{children:[(0,s.jsx)(m.Z,{options:C.stateChart.options,series:C.stateChart.series,type:"radialBar",height:"195"},void 0),(0,s.jsx)(l.Z,Object.assign({variant:"subtitle2",style:{textAlign:"center"}},{children:"Today"}),void 0)]}),void 0)]}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0,container:!0,direction:"row",alignItems:"center",xl:12,md:12,xs:12},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,md:8,xs:8},{children:(0,s.jsx)(m.Z,{options:j.stateChart.options,series:j.stateChart.series,type:"line",height:"150"},void 0)}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0,md:4,xs:4},{children:[(0,s.jsx)(m.Z,{options:O.stateChart.options,series:O.stateChart.series,type:"radialBar",height:"195"},void 0),(0,s.jsx)(l.Z,Object.assign({variant:"subtitle2",style:{textAlign:"center"}},{children:"Today"}),void 0)]}),void 0)]}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0,container:!0,direction:"row",alignItems:"center",xl:12,md:12,xs:12},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,md:8,xs:8},{children:(0,s.jsx)(m.Z,{options:y.stateChart.options,series:y.stateChart.series,type:"line",height:"150"},void 0)}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0,md:4,xs:4},{children:[(0,s.jsx)(m.Z,{options:Z.stateChart.options,series:Z.stateChart.series,type:"radialBar",height:"195"},void 0),(0,s.jsx)(l.Z,Object.assign({variant:"subtitle2",style:{textAlign:"center"}},{children:"Today"}),void 0)]}),void 0)]}),void 0)]}),void 0)},L=()=>{const{dataReport:e}=(0,x.C)(S.vs),{isSelectDay:t,isSelectNight:i}=(0,x.C)(v.Ig),{haulage:o}=e,n=o.labelDaysReportList,r=o.mechanicalAvailabilityList.map((function(e){return Number(e.toFixed(2))})),d=o.utilizationList.map((function(e){return Number(e.toFixed(2))})),c=o.productivityList.map((function(e){return Number(e.toFixed(2))})),h=Number(o.todayMechanicalAvailability.toFixed(1)),g=Number(o.todayUtilization.toFixed(1)),p=Number(o.todayProductivity.toFixed(1)),u=T({categorie:n,series:r,op:{id:"HaulageMechAvailability"},label:"Disp. Mecánica"}),b=T({categorie:n,series:d,op:{id:"HaulageUtilization"},label:"Utilización"}),j=T({categorie:n,series:c,op:{id:"HaulageProductivity"},label:"Productividad"}),y=N({value:h,op:{id:"HaulageMechAvailabilityToday"}}),C=N({value:g,op:{id:"HaulageUtilizationToday"}}),O=F({value:p,op:{id:"HaulageProductivityToday"}});return(0,s.jsxs)(a.Z,Object.assign({container:!0,direction:"column"},{children:[(0,s.jsxs)(a.Z,Object.assign({item:!0,container:!0,direction:"row",alignItems:"center",xl:12,md:12,xs:12,spacing:0},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,md:8,xs:8},{children:(0,s.jsx)(m.Z,{options:u.stateChart.options,series:u.stateChart.series,type:"line",height:"150"},void 0)}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0,md:4,xs:4},{children:[(0,s.jsx)(m.Z,{options:y.stateChart.options,series:y.stateChart.series,type:"radialBar",height:"195"},void 0),(0,s.jsx)(l.Z,Object.assign({variant:"subtitle2",style:{textAlign:"center"}},{children:"Today"}),void 0)]}),void 0)]}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0,container:!0,direction:"row",alignItems:"center",xl:12,md:12,xs:12},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,md:8,xs:8},{children:(0,s.jsx)(m.Z,{options:b.stateChart.options,series:b.stateChart.series,type:"line",height:"150"},void 0)}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0,md:4,xs:4},{children:[(0,s.jsx)(m.Z,{options:C.stateChart.options,series:C.stateChart.series,type:"radialBar",height:"195"},void 0),(0,s.jsx)(l.Z,Object.assign({variant:"subtitle2",style:{textAlign:"center"}},{children:"Today"}),void 0)]}),void 0)]}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0,container:!0,direction:"row",alignItems:"center",xl:12,md:12,xs:12},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,md:8,xs:8},{children:(0,s.jsx)(m.Z,{options:j.stateChart.options,series:j.stateChart.series,type:"line",height:"150"},void 0)}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0,md:4,xs:4},{children:[(0,s.jsx)(m.Z,{options:O.stateChart.options,series:O.stateChart.series,type:"radialBar",height:"195"},void 0),(0,s.jsx)(l.Z,Object.assign({variant:"subtitle2",style:{textAlign:"center"}},{children:"Today"}),void 0)]}),void 0)]}),void 0)]}),void 0)};var P=i(81449);const I=i(53292),w=i(69711),B=()=>{const e=(0,x.T)(),{statusReportPerformancePerHour:t,reportPerformancePerHour:i}=(0,x.C)(v.Ig),{isSelectDay:r,isSelectNight:d}=(0,x.C)(v.Ig),{lenCycleDme:l,lenCyclePad:c,lenCycleStock:h,tonnePerTruck:m}=i.day;var T=new Date,N=new Date(T.getTime()-26784e5);const[F]=(0,A.R)(),[B,E]=(0,P.v)(),[H,R]=(0,n.useState)(F),[M]=(0,k.l)(H);function z(){const t={dateStart:`${M}T00:00`,dateEnd:`${M}T00:00`};e((0,v.D2)(t)),e((0,S.X4)(t))}console.log("date",H),console.log("minutes",B),(0,n.useEffect)((()=>{z()}),[H,B]),(0,n.useEffect)((()=>{const e=new Date;F.getHours()>=7&&F.getHours()<19?(U(e),G()):Y()}),[E]);const U=e=>{R(e)};function G(){e((0,v.Sv)(!0)),e((0,v.kQ)(!1))}function Y(){e((0,v.Sv)(!1)),e((0,v.kQ)(!0))}return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsxs)(a.Z,Object.assign({container:!0,direction:"row"},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,lg:12,md:12,xs:12},{children:(0,s.jsx)(Z.M,{startDate:N,days:31,marked:[{}],selectDate:H,getSelectedDay:U,color:"#024e8c"},void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,lg:6,md:12,xs:12},{children:(0,s.jsx)(o.Z,Object.assign({p:3},{children:(0,s.jsx)(g,Object.assign({title:"TONELAJE POR HORA (Tn/Hr)",icon:w},{children:(0,s.jsx)(p,{},void 0)}),void 0)}),void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,lg:6,md:12,xs:12},{children:(0,s.jsx)(o.Z,Object.assign({p:3},{children:(0,s.jsxs)(a.Z,Object.assign({container:!0,spacing:2},{children:[(0,s.jsxs)(a.Z,Object.assign({item:!0,container:!0,spacing:2,justifyContent:"space-between"},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,lg:6,md:6,xs:12},{children:(0,s.jsx)(O,{onClick:G,isSelect:r,shift:C.Shift.DAY,label:"DIA",lenCycleDme:l*m,lenCyclePad:c*m,lenCycleStock:h*m},void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,lg:6,md:6,xs:12},{children:(0,s.jsx)(O,{isSelect:d,onClick:Y,shift:C.Shift.NIGHT,label:"NOCHE",lenCycleDme:i.night.lenCycleDme*m,lenCyclePad:i.night.lenCyclePad*m,lenCycleStock:i.night.lenCycleStock*m},void 0)}),void 0)]}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,lg:12,md:12,xs:12},{children:(0,s.jsx)(g,Object.assign({title:"PRODUCCIÓN TOTAL POR DIA",icon:""},{children:(0,s.jsx)(y,{},void 0)}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,lg:12,md:12,xs:12},{children:(0,s.jsx)(o.Z,Object.assign({p:3},{children:(0,s.jsx)(g,Object.assign({title:"RENDIMIENTO POR EXCAVADORA (Tn/Hr)",icon:I},{children:(0,s.jsx)(j,{},void 0)}),void 0)}),void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,lg:6,md:12,xs:12},{children:(0,s.jsx)(o.Z,Object.assign({p:3},{children:(0,s.jsx)(g,Object.assign({title:"ACARREO",icon:w},{children:(0,s.jsx)(L,{},void 0)}),void 0)}),void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,lg:6,md:12,xs:12},{children:(0,s.jsx)(o.Z,Object.assign({p:3},{children:(0,s.jsx)(g,Object.assign({title:"CARGUIO",icon:I},{children:(0,s.jsx)(D,{},void 0)}),void 0)}),void 0)}),void 0)]}),void 0),(0,s.jsx)(f.Z,{visible:"done"===t,actionClick:z,Icon:u.Z,disabled:"done"!=t,color:"secondary",right:8,keyAction:"R"},void 0),(0,s.jsx)(f.Z,{visible:"done"===t,actionClick:function(){const t={dateStart:`${M}T00:00`,dateEnd:`${M}T00:00`};e((0,v.BF)(t))},Icon:b.Z,disabled:"done"!=t,color:"secondary",right:70},void 0)]},void 0)};var E=i(49521);function H(){return(0,s.jsxs)("div",{children:[(0,s.jsx)(E.h,{title:"Dashboard"},void 0),(0,s.jsx)("div",Object.assign({style:{marginTop:"60px"}},{children:(0,s.jsx)(B,{},void 0)}),void 0)]},void 0)}}}]);