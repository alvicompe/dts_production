"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[158],{61242:(e,i,t)=>{t.d(i,{a:()=>c});var s=t(85893),a=t(52663),n=t(66083),o=t(29525),d=t(66856),l=t(282);const c=({open:e,handleClose:i,handleConfirm:t,title:c,children:r,disabled:g=!1})=>(0,s.jsxs)(a.Z,Object.assign({open:e,onClose:i,maxWidth:"lg"},{children:[(0,s.jsx)(n.Z,{children:c},void 0),(0,s.jsx)(o.Z,{children:r},void 0),(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(l.Z,Object.assign({color:"primary",onClick:i},{children:"Cancelar"}),void 0),t&&(0,s.jsx)(l.Z,Object.assign({disabled:g,color:"secondary",onClick:t,autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)]}),void 0)},33570:(e,i,t)=>{t.d(i,{v:()=>c});var s=t(85893),a=t(17812),n=t(96837),o=t(59544),d=t(17215);const l=(0,t(73914).Z)((()=>({subHeader:{lineHeight:0,background:"#fff",paddingLeft:0,display:"flex",marginTop:8,borderRadius:4,borderBottomStyle:"groove"}}))),c=({useOpen:e,title:i})=>{const t=l(),[c,r]=e,g=(0,s.jsx)(a.Z,Object.assign({size:"small"},{children:c?(0,s.jsx)(o.Z,{fontSize:"small"},void 0):(0,s.jsx)(d.Z,{fontSize:"small"},void 0)}),void 0);return(0,s.jsx)(n.Z,Object.assign({disableGutters:!0,onClick:()=>{r((e=>!e))},component:"span",className:t.subHeader},{children:(0,s.jsxs)("div",Object.assign({style:{display:"flex",alignItems:"center"}},{children:[(0,s.jsx)("span",Object.assign({style:{marginLeft:4}},{children:i}),void 0),(0,s.jsx)("div",Object.assign({style:{marginLeft:8}},{children:g}),void 0)]}),void 0)}),void 0)}},71211:(e,i,t)=>{t.d(i,{T:()=>s});class s{static addLayerToMap(e,i,t,s,a){e.addLayer({id:i,type:s,source:t,layout:{visibility:"visible"},paint:{"line-color":a,"line-width":4}})}static addSourceToMap(e,i,t){e.addSource(i,{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t}}})}static removeFeature(e,i,t){this.getLayer(e,i)&&(e.removeLayer(i),e.removeSource(t))}static getLayer(e,i){return e.getLayer(i)}}},69548:(e,i,t)=>{t.r(i),t.d(i,{default:()=>ue});var s=t(85893),a=t(41749),n=t(18463),o=t(67294),d=t(73855),l=t(18973),c=t(41120),r=t(79895),g=t(13258),j=t(22318),h=t(14096),v=t(41423),p=t(95090),x=t(78479),u=t(10008),b=t(62822),m=t(282),y=t(78715),Z=t(71211),f=t(39299),O=t(20113),C=t(61242),k=t(33570),T=t(50998),w=t(95757),S=t(17812),F=t(30387),L=t(52663),N=t(66083),I=t(29525),$=t(8286),P=t(66856),E=t(95477),D=t(39704),_=t(1978);const A=(0,c.Z)((e=>({paper:{padding:"5px",margin:"3px"}}))),M=({open:e,setOpen:i,cell:t,typeDownload:d})=>{const l=A(),c=(0,D.I0)(),[h,v]=(0,o.useState)(t),[x,u]=(0,o.useState)(!1),b=Object.assign({},h),{name:y,altitude:Z,volume:O}=t,C=()=>{i(!1)},k=e=>{"idNameCell"===e.target.id&&(b.name=e.target.value),"idAltitudeCell"===e.target.id&&(b.altitude=parseFloat(e.target.value)),"idVolumeCell"===e.target.id&&(b.volume=parseFloat(e.target.value)),v(b)};return(0,s.jsxs)(L.Z,Object.assign({open:e,onClose:C,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},{children:[(0,s.jsx)(N.Z,{children:"Cell Edit"},void 0),(0,s.jsx)(I.Z,{children:(0,s.jsx)(n.Z,Object.assign({style:{padding:"7px"}},{children:(0,s.jsxs)(a.Z,Object.assign({container:!0,direction:"column",spacing:1,justifyContent:"center"},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,md:12,xl:12},{children:(0,s.jsxs)(r.Z,Object.assign({className:l.paper,elevation:2},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Habilitar"}),void 0),(0,s.jsx)(g.Z,{checked:h.state!==p.YO.FINISHED,onChange:e=>{b.state=e.target.checked?p.YO.ACTIVE:p.YO.FINISHED,v(b)},inputProps:{"aria-label":"secondary checkbox"}},void 0)]}),void 0)}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0,container:!0,direction:"row"},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,md:6,xl:6},{children:(0,s.jsxs)(r.Z,Object.assign({className:l.paper,elevation:2},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Name:"}),void 0),(0,s.jsx)($.Z,{onChange:k,style:{width:"100%"},id:"idNameCell",label:y,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,s.jsxs)(r.Z,Object.assign({className:l.paper,elevation:2},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Altitude:"}),void 0),(0,s.jsx)($.Z,{onChange:k,id:"idAltitudeCell",style:{width:"100%"},label:Z,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,s.jsxs)(r.Z,Object.assign({className:l.paper,elevation:2},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Volume:"}),void 0),(0,s.jsx)($.Z,{onChange:k,id:"idVolumeCell",style:{width:"100%"},label:O||"",variant:"outlined"},void 0)]}),void 0)}),void 0)]}),void 0)]}),void 0)}),void 0)},void 0),(0,s.jsxs)(P.Z,{children:[(0,s.jsx)(m.Z,Object.assign({color:"primary",onClick:C},{children:"Cancelar"}),void 0),x?(0,s.jsx)(E.Z,{variant:"indeterminate"},void 0):(0,s.jsx)(m.Z,Object.assign({color:"secondary",onClick:()=>{u(!0),(0,_.w)(h,d).then((e=>{c((0,f.aR)()),u(!1),C()})).catch((e=>{console.log(e),u(!1)})),i(!1)},autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)]}),void 0)};var R=t(53068);const z=({cellDme:e,map:i,isChecked:t})=>{const a=(0,d.T)(),[l,c]=(0,o.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,Object.assign({onClick:()=>{"3"===e.state.toString()||(e=>{if(a((0,u.Mf)(e)),t){const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s)}})(e)},selected:!0,dense:!0,button:!0,style:{backgroundColor:"white"}},{children:(0,s.jsxs)(n.Z,Object.assign({elevation:3===e.state?2:4,style:{display:"flex",padding:"5px",height:"100%",width:"100%",backgroundImage:t?"radial-gradient(circle, rgba(233,183,88,1) 68%, rgba(242,167,3,1) 100%)":"",backgroundColor:3===e.state?"#f1c3c34a":""}},{children:[(0,s.jsx)(g.Z,{disabled:"3"===e.state.toString(),checked:"3"!==e.state.toString()&&t,inputProps:{"aria-label":"secondary checkbox"}},void 0),(0,s.jsx)(w.Z,{primary:`Nombre: ${e.name}`},void 0),(0,s.jsx)(S.Z,Object.assign({onClick:()=>{c(!0)}},{children:(0,s.jsx)(F.Z,{fontSize:"small"},void 0)}),void 0)]}),void 0)}),e.id),l&&(0,s.jsx)(M,{typeDownload:R.TypeDownload.DME,open:l,setOpen:c,cell:e},void 0)]},void 0)};const W=(0,c.Z)((e=>({listItem:{"& .MuiListItem-gutters":{paddingLeft:"7px",paddingRight:"7px"}}}))),H=({cellsDme:e,map:i,isChecked:t,type:n})=>{const{selectDme:l}=(0,d.C)(u.C2),[c,g]=o.useState(!1),j=(0,d.T)(),h=W(),v=(0,o.useState)(!1),{status:p}=(0,d.C)(O.Lo);(0,o.useEffect)((()=>{j(t?(0,u.E6)(e.filter((e=>3!==e.state))):(0,u.E6)([]))}),[t]),(0,o.useEffect)((()=>{l.map((e=>{const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&(Z.T.removeFeature(i,t,s),console.log("dme Function TRUE",e)),Z.T.addSourceToMap(i,s,e.pointList.map((e=>[e.longitude,e.latitude,e.altitude]))),Z.T.addLayerToMap(i,t,s,"line","#EAF772")}))}),[l]);const x=e=>{const t=l.find((i=>e.id===i.id));if(t){const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s)}return!!t};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,Object.assign({elevation:0,style:{overflow:"auto"}},{children:(0,s.jsx)(b.Z,Object.assign({className:h.listItem,dense:!0,subheader:(0,s.jsx)(k.v,{title:"polygono",useOpen:v},void 0)},{children:(0,s.jsx)(a.Z,Object.assign({container:!0,direction:"column",justifyContent:"flex-end",style:{flex:1}},{children:(0,s.jsx)(a.Z,Object.assign({item:!0,style:{height:"77vh"}},{children:e.map(((e,t)=>(e.id,(0,s.jsx)(z,{cellDme:e,map:i,isChecked:x(e)},t))))}),void 0)}),void 0)}),void 0)}),void 0),l.length>0&&(0,s.jsx)(m.Z,Object.assign({variant:"contained",color:"primary",onClick:()=>{g(!0)},style:{width:"90%",margin:"10px"}},{children:"Finalizar Seleccionados"}),void 0),(0,s.jsx)(C.a,Object.assign({open:c,handleClose:()=>{g(!1),j((0,u.E6)([])),j((0,u.fn)())},handleConfirm:()=>{return e=void 0,i=void 0,s=function*(){yield j((0,O.iC)({cells:l,type:n})),j((0,f.aR)()),j((0,u.fn)()),g(!1)},new((t=void 0)||(t=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function d(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var i;e.done?a(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(o,d)}l((s=s.apply(e,i||[])).next())}));var e,i,t,s},title:"¿Esta seguro?"},{children:(0,s.jsx)(y.Z,Object.assign({severity:"warning"},{children:"Confirma para Finalizar los poligonos seleccionados"}),void 0)}),void 0)]},void 0)},V=({cellPad:e,map:i,isChecked:t})=>{const a=(0,d.T)(),[l,c]=(0,o.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,Object.assign({selected:!0,dense:!0,button:!0,onClick:()=>{"3"===e.state.toString()||(e=>{if(a((0,u.SP)(e)),t){console.log("Is checked True");const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&(console.log("Layer encontrado"),Z.T.removeFeature(i,t,s))}else console.log("Is checked False")})(e)},style:{backgroundColor:"white"}},{children:(0,s.jsxs)(n.Z,Object.assign({elevation:"3"===e.state.toString()?2:4,style:{display:"flex",padding:"5px",height:"100%",width:"100%",backgroundImage:t?"radial-gradient(circle, rgba(233,183,88,1) 68%, rgba(242,167,3,1) 100%)":"",backgroundColor:3===e.state?"#f1c3c34a":""}},{children:[(0,s.jsx)(g.Z,{disabled:"3"===e.state.toString(),checked:"3"!==e.state.toString()&&t,inputProps:{"aria-label":"secondary checkbox"}},void 0),(0,s.jsx)(w.Z,{primary:`Nombre: ${e.name}`},void 0),(0,s.jsx)(S.Z,Object.assign({onClick:()=>{c(!0)}},{children:(0,s.jsx)(F.Z,{fontSize:"small"},void 0)}),void 0)]}),void 0)}),e.id),l&&(0,s.jsx)(M,{typeDownload:R.TypeDownload.PAD,open:l,setOpen:c,cell:e},void 0)]},void 0)};const Y=(0,c.Z)((e=>({listItem:{"& .MuiListItem-gutters":{paddingLeft:"7px",paddingRight:"7px"}}}))),B=({cellsPad:e,map:i,isChecked:t,setIsChecked:n,type:l})=>{const{selectPad:c}=(0,d.C)(u.C2),[g,j]=o.useState(!1),h=(0,d.T)(),v=Y(),p=(0,o.useState)(!1),{status:x}=(0,d.C)(O.Lo);(0,o.useEffect)((()=>{t?(h((0,u.Ri)(e.filter((e=>3!==e.state)))),c.length>0&&h((0,u.Ri)(e.filter((e=>3!==e.state))))):h((0,u.Ri)([]))}),[t]),(0,o.useEffect)((()=>{c.map((e=>{const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s),Z.T.addSourceToMap(i,s,e.pointList.map((e=>[e.longitude,e.latitude,e.altitude]))),Z.T.addLayerToMap(i,t,s,"line","#EAF772")}))}),[c]);const T=e=>{const t=c.find((i=>e.id===i.id));if(t){const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s)}return!!t};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,Object.assign({elevation:0,style:{overflow:"auto"}},{children:(0,s.jsx)(b.Z,Object.assign({className:v.listItem,dense:!0,subheader:(0,s.jsx)(k.v,{title:"polygono",useOpen:p},void 0)},{children:(0,s.jsx)(a.Z,Object.assign({container:!0,direction:"column",justifyContent:"flex-end",style:{flex:1}},{children:(0,s.jsx)(a.Z,Object.assign({item:!0,style:{height:"77vh"}},{children:e.map((e=>(0,s.jsx)(V,{cellPad:e,map:i,isChecked:T(e)},e.id)))}),void 0)}),void 0)}),void 0)}),void 0),c.length>0&&(0,s.jsx)(m.Z,Object.assign({variant:"contained",color:"primary",onClick:()=>{j(!0)},style:{width:"90%",margin:"10px"}},{children:"Finalizar Seleccionados"}),void 0),(0,s.jsx)(C.a,Object.assign({open:g,handleClose:()=>{j(!1),h((0,u.Ri)([])),h((0,u.fn)())},handleConfirm:()=>{return e=void 0,i=void 0,s=function*(){yield h((0,O.iC)({cells:c,type:l})),h((0,f.aR)()),h((0,u.fn)()),j(!1)},new((t=void 0)||(t=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function d(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var i;e.done?a(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(o,d)}l((s=s.apply(e,i||[])).next())}));var e,i,t,s},title:"¿Esta seguro ?"},{children:(0,s.jsx)(y.Z,Object.assign({severity:"warning"},{children:"Confirma para finalizar los poligonos seleccionados"}),void 0)}),void 0)]},void 0)};var U=t(32759),K=t(10465),G=t(8793),J=t(64436),Q=t(96394),q=t(26209),X=t(85639),ee=t(21549),ie=t(93565),te=t(35573);const se=(0,c.Z)((e=>({paper:{padding:"5px",margin:"3px"}}))),ae=({open:e,handleClose:i,handleConfirm:t,polygon:c})=>{const h=se(),v=(0,D.I0)(),{materialList:x}=(0,d.C)(l.WD),[u,b]=(0,o.useState)(c),[y,Z]=(0,o.useState)(te.O[c.color].hex),[O,C]=(0,o.useState)(!1),[k,T]=(0,o.useState)(""),w=Object.assign({},u),S=e=>{"idName"===e.target.id&&(w.name=e.target.value),"idAltitude"===e.target.id&&(w.altitude=parseFloat(e.target.value)),"idTonnens"===e.target.id&&(w.tonnes=parseFloat(e.target.value)),"idVolume"===e.target.id&&(w.volume=parseFloat(e.target.value)),"idAg"===e.target.id&&(w.ag=parseFloat(e.target.value)),"idAgcn"===e.target.id&&(w.agcn=parseFloat(e.target.value))},{name:F,ag:_,agcn:A,alte:M,altitude:R,as:z,au:W,auch:H,description:V,idProject:Y,lito:B,material:U,nameProject:K,onzas:G,orezonet:ae,tonnes:ne,volume:oe,state:de}=c;return(0,s.jsxs)(L.Z,Object.assign({open:e,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},{children:[(0,s.jsx)(N.Z,{children:"Polygon Edit"},void 0),(0,s.jsx)(I.Z,{children:(0,s.jsx)(n.Z,Object.assign({style:{padding:"7px"}},{children:(0,s.jsxs)(a.Z,Object.assign({container:!0,direction:"column",spacing:1,justifyContent:"center"},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,md:12,xl:12},{children:(0,s.jsxs)(r.Z,Object.assign({className:h.paper,elevation:2},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Habilitar"}),void 0),(0,s.jsx)(g.Z,{checked:u.state!==p.p$.FINISHED,onChange:e=>{w.state=e.target.checked?p.p$.ACTIVE:p.p$.FINISHED,b(w)},inputProps:{"aria-label":"secondary checkbox"}},void 0)]}),void 0)}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0,container:!0,direction:"row"},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,md:6,xl:6},{children:(0,s.jsxs)(r.Z,Object.assign({className:h.paper,elevation:2},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Project:"}),void 0),(0,s.jsx)($.Z,{style:{width:"100%"},id:"idProject",label:K,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,s.jsxs)(r.Z,Object.assign({className:h.paper,elevation:2},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Name:"}),void 0),(0,s.jsx)($.Z,{onChange:S,style:{width:"100%"},id:"idName",label:F,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,s.jsxs)(r.Z,Object.assign({className:h.paper},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Altitude:"}),void 0),(0,s.jsx)($.Z,{onChange:S,style:{width:"100%"},id:"idAltitude",label:R,variant:"outlined"},void 0)]}),void 0)}),void 0)]}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0,container:!0,md:12,xl:12},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,md:4,xl:4},{children:(0,s.jsx)(r.Z,Object.assign({className:h.paper,elevation:2},{children:(0,s.jsxs)(J.Z,Object.assign({style:{width:"100%"}},{children:[(0,s.jsx)(Q.Z,Object.assign({id:"demo-controlled-open-select-label"},{children:"Material"}),void 0),(0,s.jsx)(q.Z,Object.assign({style:{width:"100%"},id:"idMaterial",value:k,label:"Material",onChange:e=>{T(e.target.value)}},{children:x.map((e=>(0,s.jsx)(X.Z,Object.assign({value:e.id},{children:e.type}),e.id)))}),void 0)]}),void 0)}),void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,md:8,xl:8},{children:(0,s.jsxs)(r.Z,Object.assign({className:h.paper,elevation:2},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Color"}),void 0),(0,s.jsxs)("div",Object.assign({style:{display:"flex",padding:"1px",justifyContent:"center"}},{children:[(0,s.jsx)(ie.e8,{color:y,colors:["#FF6900","#FCB900","#7BDCB5"],onChangeComplete:e=>{Z(e.hex)}},void 0),(0,s.jsx)("div",{style:{justifyItems:"center",borderRadius:"4px",width:"40px",backgroundColor:`${y}`}},void 0)]}),void 0)]}),void 0)}),void 0)]}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0,xl:12,md:12,container:!0,direction:"row"},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,s.jsxs)(r.Z,Object.assign({className:h.paper},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Tonnens:"}),void 0),(0,s.jsx)($.Z,{onChange:S,style:{width:"100%"},id:"idTonnens",label:ne,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,s.jsxs)(r.Z,Object.assign({className:h.paper},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Volume:"}),void 0),(0,s.jsx)($.Z,{onChange:S,style:{width:"100%"},id:"idVolume",label:oe,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,s.jsxs)(r.Z,Object.assign({className:h.paper},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Ag:"}),void 0),(0,s.jsx)($.Z,{onChange:S,style:{width:"100%"},id:"idAg",label:_,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,s.jsxs)(r.Z,Object.assign({className:h.paper},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Agcn:"}),void 0),(0,s.jsx)($.Z,{onChange:S,style:{width:"100%"},id:"idAgcn",label:A,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,s.jsx)(a.Z,{item:!0,md:6,xl:6},void 0)]}),void 0)]}),void 0)}),void 0)},void 0),(0,s.jsxs)(P.Z,{children:[(0,s.jsx)(m.Z,Object.assign({color:"primary",onClick:i},{children:"Cancelar"}),void 0),O?(0,s.jsx)(E.Z,{variant:"indeterminate"},void 0):(0,s.jsx)(m.Z,Object.assign({color:"secondary",onClick:()=>{console.log("Color Select: ",y),C(!0),(0,ee.Q)(u).then((e=>{v((0,f.aR)()),C(!1),i()})).catch((e=>{console.log(e),C(!1)}))},autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)]}),void 0)},ne=({pl:e,map:i,isChecked:t})=>{const{selectPolygon:a}=(0,d.C)(u.C2),l=(0,d.T)(),[c,r]=(0,o.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,Object.assign({onClick:()=>{3===e.state||(e=>{if(l((0,u.jY)(e)),t){const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s)}})(e)},selected:!0,dense:!0,button:!0,style:{backgroundColor:"white"}},{children:(0,s.jsxs)(n.Z,Object.assign({elevation:3===e.state?2:4,style:{display:"flex",padding:"5px",height:"100%",width:"100%",backgroundImage:t?"radial-gradient(circle, rgba(233,183,88,1) 68%, rgba(242,167,3,1) 100%)":"",backgroundColor:3===e.state?"#f1c3c34a":""}},{children:[(0,s.jsx)(g.Z,{disabled:3===e.state,checked:"3"!==e.state.toString()&&t,inputProps:{"aria-label":"secondary checkbox"}},void 0),(0,s.jsx)(w.Z,{style:{textDecorationLine:(e.state,"")},primary:(0,s.jsx)(j.Z,Object.assign({variant:"subtitle2",style:{color:3===e.state?"gray":"black",fontWeight:(e.state,"normal")}},{children:e.nameProject?`Project: ${e.nameProject}`:`Nombre: ${e.name}`}),void 0),secondary:(0,s.jsx)(j.Z,Object.assign({style:{color:3===e.state?"gray":"",fontWeight:3===e.state?"normal":"initial"},variant:"subtitle2"},{children:e.nameProject?`Name: ${e.name}`:""}),void 0)},void 0),(0,s.jsx)(S.Z,Object.assign({onClick:()=>{r(!0)}},{children:(0,s.jsx)(G.Z,{fontSize:"small",style:{color:t?"white":""}},void 0)}),void 0)]}),void 0)}),e.id),c&&(0,s.jsx)(ae,{open:c,handleClose:()=>{r(!1)},handleConfirm:()=>{r(!1)},polygon:e},void 0)]},void 0)};const oe=(0,c.Z)((e=>({listItem:{"& .MuiListItem-gutters":{paddingLeft:"7px",paddingRight:"7px"}}}))),de=({polygons:e,map:i,isChecked:t,setIsChecked:a})=>{const{selectPolygon:n}=(0,d.C)(u.C2),{status:l}=(0,d.C)(U.$e),[c,g]=(0,o.useState)([]),[j,h]=o.useState(!1),v=(0,d.T)(),p=oe();(0,o.useEffect)((()=>{v(t?(0,u.DY)(c.filter((e=>3!==e.state))):(0,u.DY)([]))}),[t]),(0,o.useEffect)((()=>{setTimeout((()=>{n.map((e=>{const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s),Z.T.addSourceToMap(i,s,e.pointList.map((e=>[e.longitude,e.latitude,e.altitude]))),Z.T.addLayerToMap(i,t,s,"line","#EAF772")}))}),10)}),[n]);const x=e=>{const t=n.find((i=>e.id===i.id));if(t){const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s)}return!!t};(0,o.useEffect)((()=>{e.length>0&&g(e)}),[e]);const O=(0,o.useCallback)((i=>{if(i){const t=i.target?i.target.value.toUpperCase():"";console.log("filter",t),g(e.filter((e=>e.name.toUpperCase().includes(t)||e.nameProject&&e.nameProject.toUpperCase().includes(t))))}}),[e]),k=(0,o.useCallback)((()=>{g(e)}),[e]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(K.V,{placeholder:"Buscar por proyecto, polígon o mineral ",functionFilter:O,functionCancel:k},void 0),(0,s.jsx)(b.Z,Object.assign({className:p.listItem,dense:!0},{children:(0,s.jsx)(r.Z,Object.assign({elevation:0,style:{overflow:"scroll",height:"75vh"}},{children:c.map((e=>(0,s.jsx)(ne,{pl:e,map:i,isChecked:x(e)},e.id)))}),void 0)}),void 0),(0,s.jsx)(r.Z,Object.assign({elevation:0,style:{}},{children:n.length>0&&(0,s.jsx)(m.Z,Object.assign({variant:"contained",color:"primary",onClick:()=>{h(!0)},style:{width:"90%",margin:"10px"}},{children:"Finalizar Seleccionados"}),void 0)}),void 0),(0,s.jsx)(C.a,Object.assign({open:j,handleClose:()=>{h(!1),v((0,u.DY)([])),v((0,u.fn)())},handleConfirm:()=>{return e=void 0,i=void 0,s=function*(){yield v((0,U.if)(n)),v((0,f.aR)()),v((0,u.fn)()),h(!1)},new((t=void 0)||(t=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function d(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var i;e.done?a(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(o,d)}l((s=s.apply(e,i||[])).next())}));var e,i,t,s},title:"¿Esta seguro ?"},{children:(0,s.jsx)(y.Z,Object.assign({severity:"warning"},{children:"Confirma para finalizar los poligonos seleccionados"}),void 0)}),void 0)]},void 0)},le=({cellStock:e,map:i,isChecked:t})=>{const a=(0,d.T)(),[l,c]=(0,o.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,Object.assign({selected:!0,dense:!0,button:!0,onClick:()=>{"3"===e.state.toString()||(e=>{if(a((0,u.xk)(e)),t){const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s)}})(e)},style:{backgroundColor:"white"}},{children:(0,s.jsxs)(n.Z,Object.assign({elevation:"3"===e.state.toString()?2:4,style:{display:"flex",padding:"5px",height:"100%",width:"100%",backgroundImage:t?"radial-gradient(circle, rgba(233,183,88,1) 68%, rgba(242,167,3,1) 100%)":"",backgroundColor:3===e.state?"#f1c3c34a":""}},{children:[(0,s.jsx)(g.Z,{disabled:"3"===e.state.toString(),checked:"3"!==e.state.toString()&&t,inputProps:{"aria-label":"secondary checkbox"}},void 0),(0,s.jsx)(w.Z,{primary:`Nombre: ${e.name}`},void 0),(0,s.jsx)(S.Z,Object.assign({onClick:()=>{c(!0)}},{children:(0,s.jsx)(F.Z,{fontSize:"small"},void 0)}),void 0)]}),void 0)}),e.id),l&&(0,s.jsx)(M,{typeDownload:R.TypeDownload.STOCK,open:l,setOpen:c,cell:e},void 0)]},void 0)};const ce=(0,c.Z)((e=>({listItem:{"& .MuiListItem-gutters":{paddingLeft:"7px",paddingRight:"7px"}}}))),re=({cellsStock:e,map:i,isChecked:t,setIsChecked:n,type:l})=>{const{selectStock:c}=(0,d.C)(u.C2),[g,j]=o.useState(!1),h=(0,d.T)(),v=ce(),p=(0,o.useState)(!1),{status:x}=(0,d.C)(O.Lo);(0,o.useEffect)((()=>{h(t?(0,u.I5)(e.filter((e=>3!==e.state))):(0,u.I5)([]))}),[t]),(0,o.useEffect)((()=>{setTimeout((()=>{c.map((e=>{const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s),Z.T.addSourceToMap(i,s,e.pointList.map((e=>[e.longitude,e.latitude,e.altitude]))),Z.T.addLayerToMap(i,t,s,"line","#EAF772")}))}),10)}),[c]);const T=e=>{const t=c.find((i=>e.id===i.id));if(t){const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s)}return!!t};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,Object.assign({elevation:0,style:{overflow:"auto"}},{children:(0,s.jsx)(b.Z,Object.assign({className:v.listItem,dense:!0,subheader:(0,s.jsx)(k.v,{title:"polygono",useOpen:p},void 0)},{children:(0,s.jsx)(a.Z,Object.assign({container:!0,direction:"column",justifyContent:"flex-end",style:{flex:1}},{children:(0,s.jsx)(a.Z,Object.assign({item:!0,style:{height:"77vh"}},{children:e.map((e=>(0,s.jsx)(le,{cellStock:e,map:i,isChecked:T(e)},e.id)))}),void 0)}),void 0)}),void 0)}),void 0),c.length>0&&(0,s.jsx)(m.Z,Object.assign({variant:"contained",color:"primary",onClick:()=>{j(!0)},style:{width:"90%",margin:"10px"}},{children:"Finalizar Seleccionados"}),void 0),(0,s.jsx)(C.a,Object.assign({open:g,handleClose:()=>{j(!1)},handleConfirm:()=>{return e=void 0,i=void 0,s=function*(){j(!1),yield h((0,O.iC)({cells:c,type:l})),h((0,f.aR)()),h((0,u.fn)()),j(!1)},new((t=void 0)||(t=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function d(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var i;e.done?a(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(o,d)}l((s=s.apply(e,i||[])).next())}));var e,i,t,s},title:"¿Esta seguro?"},{children:(0,s.jsx)(y.Z,Object.assign({severity:"warning"},{children:"Confirma para finalizar los poligonos seleccionados"}),void 0)}),void 0)]},void 0)};const ge=(0,c.Z)((e=>({root:{flex:1,backgroundColor:"#FDF8EF",display:"flex",height:"800px",width:"100%",minWidth:"1300px"},paper:{height:"100vh",width:"100%",textAlign:"center",justifyContent:"center",minWidth:"250px"},tittle:{textAlign:"center"},paperMap:{backgroundColor:"#FDF8EF",width:"100%",height:"800px",padding:"10px",textAlign:"center",minWidth:"900px"},tabs:{borderRight:`1px solid ${e.palette.divider}`,width:"100%"},tab:{minWidth:10,padding:1,paddingTop:8,paddingBottom:8,width:"100%"},buttonTab:{writingMode:"vertical-rl"},listItem:{"& .MuiListItem-gutters":{paddingLeft:"7px",paddingRight:"7px"}}})));function je(e){const{children:i,value:t,index:a}=e,n=function(e,i){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&i.indexOf(s)<0&&(t[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)i.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(t[s[a]]=e[s[a]])}return t}(e,["children","value","index"]);return(0,s.jsx)("div",Object.assign({role:"tabpanel",hidden:t!==a,id:`vertical-tabpanel-${a}`,"aria-labelledby":`vertical-tab-${a}`,style:{flex:1}},n,{children:t===a&&i}),void 0)}function he(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const ve=({map:e})=>{const{selectPolygon:i,selectDme:t,selectPad:n,selectStock:c}=(0,d.C)(u.C2),b=(0,d.T)(),{polygonList:m,dmeCellList:y,padCellList:Z,stockCellList:f,routeList:O}=(0,d.C)(l.WD),[C,k]=(0,o.useState)(!1),T=ge(),[w,S]=(0,x._)("index_tab_settind_polygon",0);return(0,s.jsx)("div",{children:(0,s.jsxs)(r.Z,Object.assign({elevation:1,className:T.paper},{children:[(0,s.jsxs)(a.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,s.jsx)(g.Z,{indeterminate:i.length>0&&m.length!=i.length||t.length>0&&y.length!=t.length||n.length>0&&Z.length!=n.length||c.length>0&&f.length==c.length||void 0,checked:C,onChange:e=>{k(e.target.checked),m.length===i.length&&k(e.target.checked),f.length!==c.length&&k(e.target.checked)}},void 0),(0,s.jsx)(j.Z,Object.assign({className:T.tittle},{children:"Selected Polygon"}),void 0)]}),void 0),(0,s.jsxs)(a.Z,Object.assign({container:!0,justifyContent:"space-between",alignItems:"flex-start",wrap:"nowrap"},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0},{children:(0,s.jsxs)(h.Z,Object.assign({orientation:"vertical",variant:"scrollable",value:w,indicatorColor:"primary",textColor:"primary",onChange:(e,i)=>{S(i),b((0,u.fn)()),console.log("Change Tab"),k(!1)},"aria-label":"horizontal tabs",className:T.tabs},{children:[(0,s.jsx)(v.Z,Object.assign({className:T.tab,label:(0,s.jsx)(j.Z,Object.assign({variant:"caption",className:T.buttonTab},{children:"TAJO"}),void 0)},he(0)),void 0),(0,s.jsx)(v.Z,Object.assign({className:T.tab,label:(0,s.jsx)(j.Z,Object.assign({variant:"caption",className:T.buttonTab},{children:"DME"}),void 0)},he(1)),void 0),(0,s.jsx)(v.Z,Object.assign({className:T.tab,label:(0,s.jsx)(j.Z,Object.assign({variant:"caption",className:T.buttonTab},{children:"PAD"}),void 0)},he(2)),void 0),(0,s.jsx)(v.Z,Object.assign({className:T.tab,label:(0,s.jsx)(j.Z,Object.assign({variant:"caption",className:T.buttonTab},{children:"STOCKs"}),void 0)},he(3)),void 0)]}),void 0)}),void 0),(0,s.jsxs)(a.Z,Object.assign({item:!0,container:!0,style:{padding:8}},{children:[(0,s.jsx)(je,Object.assign({value:w,index:0},{children:(0,s.jsx)(de,{polygons:m,map:e.current,isChecked:C,setIsChecked:k},void 0)}),void 0),(0,s.jsx)(je,Object.assign({value:w,index:1},{children:(0,s.jsx)(H,{cellsDme:y,map:e.current,isChecked:C,type:p.NZ.DME},void 0)}),void 0),(0,s.jsx)(je,Object.assign({value:w,index:2},{children:(0,s.jsx)(B,{cellsPad:Z,map:e.current,isChecked:C,setIsChecked:k,type:p.NZ.PAD},void 0)}),void 0),(0,s.jsx)(je,Object.assign({value:w,index:3},{children:(0,s.jsx)(re,{cellsStock:f,map:e.current,isChecked:C,setIsChecked:k,type:p.NZ.STOCK},void 0)}),void 0)]}),void 0)]}),void 0)]}),void 0)},void 0)},pe=(0,o.lazy)((()=>Promise.all([t.e(820),t.e(771)]).then(t.bind(t,77771)))),xe=()=>{const{polygonList:e}=(0,d.C)(l.WD),i=(0,o.useRef)(null);return(0,s.jsxs)(a.Z,Object.assign({container:!0,spacing:1,style:{height:"80vh"}},{children:[(0,s.jsx)(a.Z,Object.assign({item:!0,md:4,xl:3},{children:(0,s.jsx)(ve,Object.assign({},{map:i}),void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({item:!0,xs:6,md:8,xl:9},{children:(0,s.jsx)(n.Z,Object.assign({elevation:3,style:{height:"100%"}},{children:(0,s.jsx)(o.Suspense,Object.assign({fallback:null},{children:(0,s.jsx)(pe,{mapRef:i},void 0)}),void 0)}),void 0)}),void 0)]}),void 0)},ue=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(xe,{},void 0)},void 0)}}]);