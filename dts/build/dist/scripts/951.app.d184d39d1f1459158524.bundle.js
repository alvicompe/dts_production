"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[951],{2834:(e,s,t)=>{t.d(s,{d:()=>n});var r=t(85893),a=t(282),i=t(95477);const n=e=>{var{loading:s,text:t}=e,n=function(e,s){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&s.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t}(e,["loading","text"]);return(0,r.jsx)(a.Z,Object.assign({},n,{disabled:s},{children:s?(0,r.jsx)(i.Z,{style:{width:"20px",height:"20px"}}):t}))}},31366:(e,s,t)=>{t.d(s,{Z:()=>m});var r=t(85893),a=t(67294),i=t(41120),n=t(35117),l=t(85639),o=t(64436),c=t(26209);const d=(0,i.Z)((e=>(0,n.Z)({formControl:{margin:e.spacing(1),minWidth:"100%"},selectEmpty:{marginTop:e.spacing(2)}})));function m(e){var{placeholder:s,iteams:t,selectValue:i,value:n}=e,m=function(e,s){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&s.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t}(e,["placeholder","iteams","selectValue","value"]);const u=d(),[h,j]=a.useState("");return(0,a.useEffect)((()=>{j(n||"")}),[n]),(0,a.useEffect)((()=>{i(h)}),[h]),(0,r.jsx)("div",{children:(0,r.jsx)(o.Z,Object.assign({className:u.formControl},{children:(0,r.jsxs)(c.Z,Object.assign({},m,{value:h,onChange:e=>{j(e.target.value)},displayEmpty:!0,className:u.selectEmpty,inputProps:{"aria-label":`${s}`}},{children:[(0,r.jsx)(l.Z,Object.assign({value:"",disabled:!0},{children:s})),null==t?void 0:t.map((e=>(0,r.jsx)(l.Z,Object.assign({value:null==e?void 0:e.value},{children:null==e?void 0:e.tittle}),e.value)))]}))}))})}},86080:(e,s,t)=>{t.d(s,{e:()=>G});var r=t(85893),a=t(41749),i=t(17142),n=t(54100),l=t(67294),o=t(73855),c=t(65529),d=t(73914),m=t(57850),u=t(59693),h=t(93584);function j(e){return e.type||e.mode}const p=(0,m.Z)(),g=(0,d.Z)((e=>{j(e.palette);const s=s=>"dark"===j(e.palette)?(0,u._j)(s,.1):(0,u.$n)(s,.1);return{root:{"& .super-app-theme--cell":{backgroundColor:"rgb(26,62,114,0.1)",color:"#1a3e72",fontWeight:"600"},"& .Mui-error.negative":{backgroundColor:"#CCFFFF",color:"#1a3e72",fontWeight:"600"},"& .Mui-error.positive":{backgroundColor:"rgba(157, 255, 118, 0.49)",color:"#1a3e72",fontWeight:"600"},"& .super-app-theme--false":{backgroundColor:(t="rgb(255, 48, 83)","dark"===j(e.palette)?(0,u._j)(t,.1):(0,u.$n)(t,.5)),"&:hover":{backgroundColor:s(e.palette.error.main)}},"& .MuiDataGrid-row":{"&:hover":{backgroundColor:s(`${h.sb}`)},"& .Mui-selected":{"&:hover":{backgroundColor:s(`${h.sb}`)}}}}};var t}),{defaultTheme:p});var b=t(868),x=t(42403),f=t(59943),v=t(282),O=t(38396),Z=t(85639),C=t(78513),y=t(59067),w=t(28428),k=t(2834),N=t(15635);function A({handleUserCurrent:e,row:s}){const[t,a]=l.useState(null),i=(0,o.T)(),{statusDeleteUser:n}=(0,o.C)(c.mz),[d]=(0,N.r)(n),m=e=>{a(e.currentTarget)},u=()=>{a(null)};return(0,r.jsxs)("div",{children:[(0,r.jsx)(v.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:m,endIcon:(0,r.jsx)(C.Z,{})}),(0,r.jsxs)(O.Z,Object.assign({id:"simple-menu",anchorEl:t,keepMounted:!0,open:Boolean(t),onClose:u},{children:[(0,r.jsx)(Z.Z,Object.assign({onClick:()=>{e(),u()}},{children:(0,r.jsx)(v.Z,Object.assign({"aria-controls":"simple-menu","aria-haspopup":"true",onClick:m,startIcon:(0,r.jsx)(y.Z,{color:"primary",fontSize:"small"})},{children:"editar"}))})),(0,r.jsx)(Z.Z,Object.assign({onClick:()=>{i((0,c.Bz)(s)),i((0,c.TY)({})),!d&&u()}},{children:(0,r.jsx)(k.d,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:m,startIcon:(0,r.jsx)(w.Z,{htmlColor:"red",fontSize:"small"}),text:"Eliminar",loading:d})}))]}))]})}var S=t(95090);const E=()=>{const e=(0,o.T)(),{user:s}=(0,o.C)(c.mz),t=g(),[a,d]=(0,l.useState)(),[m,u]=(()=>{const[e,s]=(0,l.useState)([]),{statusRetriveUser:t,userList:r}=(0,o.C)(c.mz);return(0,l.useEffect)((()=>{t===S.JD.DONE?s(null==r?void 0:r.map(((e,s)=>Object.assign({},e)))):s([])}),[t,t]),[e,s]})();return(0,l.useEffect)((()=>{e((0,c.yE)())}),[]),(0,l.useEffect)((()=>{e((0,c.TY)(a))}),[a]),(0,l.useEffect)((()=>{var e;e=Object.assign({},s);const t=m.findIndex((s=>s.id===e.id)),r=[...m];e.dni?t>=0?r[t]=e:r.push(e):t>=0&&r.splice(t,1),u([...r])}),[s]),(0,r.jsx)(i.Z,Object.assign({sx:{mx:4,display:"flex",flexDirection:"column"}},{children:(0,r.jsx)("div",Object.assign({style:{minHeight:"80vh",overflowY:"scroll",display:"flex",flexDirection:"column"}},{children:(0,r.jsx)(n._$r,{className:t.root,rows:m,columns:(h=d,[{field:"id",hide:!0,hideSortIcons:!0},{field:"username",headerName:"Usuario"},{field:"dni",headerName:"dni"},{field:"firstName",headerName:"Nombre"},{field:"lastName",headerName:"Apellidos",renderCell:({row:e})=>(0,r.jsx)(b.ZP,Object.assign({title:e.lastName},{children:(0,r.jsx)("p",{children:e.lastName})}))},{field:"role",headerName:"rol",hideSortIcons:!0,renderCell:({row:e})=>(0,r.jsx)(b.ZP,Object.assign({title:e.role},{children:(0,r.jsx)("p",{children:e.role===f.Role.DISPATCH?"Despachador":e.role===f.Role.ADMIN?"Administrador":e.role})}))},{field:"email",headerName:"email",renderCell:({row:e})=>(0,r.jsx)(b.ZP,Object.assign({title:e.email},{children:(0,r.jsx)("p",{children:e.email})}))},{field:"isActive",headerName:"Estado",renderCell:({row:e})=>(0,r.jsx)(x.D,{isActive:!e||e.isActive})},{field:"Opciones",headerName:"Opc",hideSortIcons:!0,renderCell:({row:e})=>(0,r.jsx)(A,{handleUserCurrent:()=>{var s=Object.assign({},e);h(s)},row:e})}]),density:"comfortable",disableSelectionOnClick:!0,disableColumnMenu:!0})}))}));var h};var I=t(41120),D=t(13457),P=t(75834),$=t(33901),T=t(22318),V=t(17812),z=t(8286),W=t(44562),M=t(5977),q=t(47298),U=t(990),R=t(31366),F=t(9570);function L({isActive:e,setValue:s}){const t=(0,m.Z)({overrides:{MuiSwitch:{switchBase:{color:"rgb(183, 33, 54)"},colorSecondary:{"&$checked":{color:"rgb(34, 154, 22)"}},track:{opacity:.2,backgroundColor:"rgb(34, 154, 22)","$checked$checked + &":{opacity:.7,backgroundColor:"rgb(34, 154, 22)"}}}}}),[a,i]=l.useState({checkedA:e});return(0,l.useEffect)((()=>{s(a.checkedA)}),[a]),(0,r.jsx)(D.Z,Object.assign({theme:t},{children:(0,r.jsx)(F.Z,{checked:a.checkedA,onChange:e=>{i(Object.assign(Object.assign({},a),{[e.target.name]:e.target.checked}))},name:"checkedA"})}))}var Y=t(59431);const _=(0,m.Z)(),B=(0,I.Z)((e=>({marginSmall:{margin:".5rem 0 .5rem 0"},margin:{margin:"1rem 0 1rem 0"},sx:{[e.breakpoints.down("xs")]:{visibility:"hidden"},[e.breakpoints.down("sm")]:{visibility:"hidden"}}}))),H=()=>{const e=B(),s=(0,o.T)(),{statusCreateUser:t,userCurrent:n,userError:d}=(0,o.C)(c.mz),[m]=(0,N.r)(t),[u,j]=((0,M.k6)(),l.useState()),[p,g]=l.useState(),[b,v,O,Z]=(0,U.M)({id:void 0,role:p,password:"",password2:"",dni:"",email:"",firstName:"",lastName:""});l.useEffect((()=>{n&&Z({id:n.id,role:n.role,password:"",password2:"",dni:n.dni,email:n.email,firstName:n.firstName,lastName:n.lastName,isActive:n.isActive})}),[n]);const{id:C,password:y,password2:w,dni:A,email:S,firstName:E,lastName:I}=b;return l.useEffect((()=>{Z(Object.assign(Object.assign({},b),{role:p}))}),[p]),l.useEffect((()=>{Z(Object.assign(Object.assign({},b),{isActive:u}))}),[u]),(0,r.jsx)(D.Z,Object.assign({theme:_},{children:(0,r.jsxs)(a.Z,Object.assign({container:!0},{children:[(0,r.jsx)(P.ZP,{}),(0,r.jsx)(a.Z,{children:(0,r.jsxs)(i.Z,Object.assign({sx:{mx:4,display:"flex",flexDirection:"column",alignItems:"center"}},{children:[(0,r.jsx)($.Z,{style:{width:"50px",height:"50px"},alt:"logo dts",src:"../../src\\assets\\img\\logodts.png"}),(0,r.jsxs)(a.Z,Object.assign({container:!0,justifyContent:"center",alignItems:"center"},{children:[(0,r.jsx)(T.Z,Object.assign({component:"h1",variant:"h5"},{children:b.firstName?`${b.firstName} ${b.lastName}`:"Usuario Dts"})),b.id?(0,r.jsx)(V.Z,Object.assign({onClick:()=>{new Y.User,s((0,c.TY)({})),O()}},{children:(0,r.jsx)(q.Z,{htmlColor:"rgb(183, 33, 54)"})})):null]})),(0,r.jsx)(x.D,{isActive:!n||b.isActive}),(0,r.jsx)(i.Z,Object.assign({component:"form",onSubmit:e=>{e.preventDefault(),C?(s((0,c.q0)(b)),O(),s((0,c.TY)({}))):w===y&&(s((0,c.hR)(b)),O())},sx:{mt:1}},{children:(0,r.jsxs)(a.Z,Object.assign({container:!0,spacing:2,justifyContent:"space-between"},{children:[(0,r.jsx)(a.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,r.jsx)(z.Z,{variant:"outlined",onChange:v,value:E,margin:"normal",required:!0,fullWidth:!0,id:"firstName",type:"text",label:"Nombre",name:"firstName",autoFocus:!0})})),(0,r.jsx)(a.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,r.jsx)(z.Z,{variant:"outlined",onInvalid:e=>e.target.setCustomValidity("Los campos no pueden estar vacios"),onInput:e=>e.target.setCustomValidity(""),onChange:v,value:I,margin:"normal",required:!0,fullWidth:!0,id:"lastName",type:"text",label:"Apellidos",name:"lastName",autoFocus:!0})})),(0,r.jsx)(a.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:(0,r.jsx)(z.Z,{variant:"outlined",onChange:v,onInvalid:e=>e.target.setCustomValidity("La contraseña debe tener al menos 6 caracteres"),onInput:e=>e.target.setCustomValidity(""),value:y,margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",disabled:!!C,id:"password",inputProps:{pattern:"^[0-9A-Za-z]{6,15}$"},autoComplete:"current-password",error:y!=w,helperText:y!=w?"Las contraseñas no coinciden":null})})),(0,r.jsx)(a.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:(0,r.jsx)(z.Z,{variant:"outlined",onChange:v,onInvalid:e=>e.target.setCustomValidity("La contraseña debe tener al menos 6 caracteres"),onInput:e=>e.target.setCustomValidity(""),value:w,margin:"normal",required:!0,fullWidth:!0,disabled:!!C,inputProps:{pattern:"^[0-9A-Za-z]{6,15}$"},name:"password2",label:"Password",type:"password",id:"password2",autoComplete:"current-password",error:y!=w})})),(0,r.jsx)(a.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:(0,r.jsx)(z.Z,{variant:"outlined",onChange:v,value:S,margin:"normal",required:!0,fullWidth:!0,name:"email",label:"Email",type:"email",id:"email",autoComplete:"current-email"})})),(0,r.jsx)(a.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,r.jsx)(z.Z,{variant:"outlined",onChange:v,value:A,margin:"normal",required:!0,fullWidth:!0,name:"dni",label:"Dni",inputProps:{pattern:"^[0-9]{8}"},id:"dni",autoComplete:"current-dni"})})),(0,r.jsxs)(a.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:[(0,r.jsx)(R.Z,{required:!0,value:n?n.role:"",placeholder:"Rol",iteams:[{value:f.Role.ADMIN,tittle:"Administrador"},{value:f.Role.DISPATCH,tittle:"Despachador"}],selectValue:g})," "]})),C&&(0,r.jsx)(a.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:(0,r.jsx)(J,{setSwitchValue:j})})),d&&(0,r.jsxs)(a.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:[(0,r.jsx)(W.Z,Object.assign({variant:"standard",severity:"error",style:{color:"red",textAlign:"center"}},{children:d}))," "]})),(0,r.jsx)(k.d,{className:e.marginSmall,type:"submit",fullWidth:!0,variant:"contained",style:{background:`${h.Jx}`,color:"white"},text:"Enviar",loading:m})]}))}))]}))})]}))}))},J=({setSwitchValue:e})=>{const{userCurrent:s}=(0,o.C)(c.mz),[t,i]=l.useState();return l.useEffect((()=>{e(t)}),[t]),(0,r.jsxs)(a.Z,Object.assign({container:!0,direction:"row",justifyContent:"space-between"},{children:[(0,r.jsxs)(a.Z,Object.assign({item:!0},{children:[(0,r.jsx)(T.Z,{children:"Prohibido"}),(0,r.jsx)(T.Z,Object.assign({style:{fontSize:"0.875rem",color:"rgb(99, 115, 129)"},variant:"subtitle1"},{children:"Aplicar deshabilitar cuenta"}))]})),(0,r.jsx)(a.Z,Object.assign({item:!0},{children:(0,r.jsx)(L,{isActive:!s||s.isActive,setValue:i})}))]}))},G=()=>(0,r.jsxs)(a.Z,Object.assign({container:!0},{children:[(0,r.jsx)(a.Z,Object.assign({item:!0,xs:12,sm:4,md:5},{children:(0,r.jsx)(H,{})})),(0,r.jsx)(a.Z,Object.assign({item:!0,xs:12,sm:8,md:7},{children:(0,r.jsx)(E,{})}))]}))},42403:(e,s,t)=>{t.d(s,{D:()=>n});var r=t(85893),a=t(71267),i=t(73914);const n=({isActive:e=!0})=>{const s=(0,i.Z)((s=>({color:{background:e?"rgb(34, 154, 22,0.2)":"rgb(183, 33, 54,0.2)",color:e?"rgb(34, 154, 22)":"rgb(183, 33, 54)",fontSize:"0.875rem"}})))();return(0,r.jsx)(a.Z,{className:s.color,label:e?"Activo ":"Deshabilitado"})}}}]);