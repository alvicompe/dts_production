"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[633],{80024:(e,t,i)=>{var n=i(95318),s=i(20862);t.Z=void 0;var a=s(i(67294)),l=(0,n(i(2108)).default)(a.createElement("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z"}),"AddToPhotos");t.Z=l},81395:(e,t,i)=>{var n=i(95318),s=i(20862);t.Z=void 0;var a=s(i(67294)),l=(0,n(i(2108)).default)(a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");t.Z=l},79192:(e,t,i)=>{var n=i(95318),s=i(20862);t.Z=void 0;var a=s(i(67294)),l=(0,n(i(2108)).default)(a.createElement("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDownOutlined");t.Z=l},94491:(e,t,i)=>{var n=i(95318),s=i(20862);t.Z=void 0;var a=s(i(67294)),l=(0,n(i(2108)).default)(a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUncheckedOutlined");t.Z=l},52303:(e,t,i)=>{var n=i(95318),s=i(20862);t.Z=void 0;var a=s(i(67294)),l=(0,n(i(2108)).default)(a.createElement("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2z"}),"Timeline");t.Z=l},61242:(e,t,i)=>{i.d(t,{a:()=>r});var n=i(85893),s=i(52663),a=i(66083),l=i(29525),o=i(66856),c=i(282);const r=({open:e,handleClose:t,handleConfirm:i,title:r,children:d,disabled:h=!1})=>(0,n.jsxs)(s.Z,Object.assign({open:e,onClose:t,maxWidth:"lg"},{children:[(0,n.jsx)(a.Z,{children:r},void 0),(0,n.jsx)(l.Z,{children:d},void 0),(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(c.Z,Object.assign({color:"primary",onClick:t},{children:"Cancelar"}),void 0),i&&(0,n.jsx)(c.Z,Object.assign({disabled:h,color:"secondary",onClick:i,autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)]}),void 0)},696:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(85893),s=i(92284),a=i(73914);const l=(0,i(57850).Z)(),o=(0,a.Z)((e=>({root:{flexDirection:"column","& .ant-empty-img-1":{fill:"light"===e.palette.type?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:"light"===e.palette.type?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:"light"===e.palette.type?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:"light"===e.palette.type?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:"light"===e.palette.type?"0.8":"0.08",fill:"light"===e.palette.type?"#f5f5f5":"#fff"}},label:{marginTop:e.spacing(1)}})),{defaultTheme:l});function c(){const e=o();return(0,n.jsxs)(s.nik,Object.assign({className:e.root},{children:[(0,n.jsx)("svg",Object.assign({width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false"},{children:(0,n.jsxs)("g",Object.assign({fill:"none",fillRule:"evenodd"},{children:[(0,n.jsxs)("g",Object.assign({transform:"translate(24 31.67)"},{children:[(0,n.jsx)("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"},void 0),(0,n.jsx)("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"},void 0),(0,n.jsx)("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"},void 0),(0,n.jsx)("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"},void 0)]}),void 0),(0,n.jsx)("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"},void 0),(0,n.jsxs)("g",Object.assign({className:"ant-empty-img-4",transform:"translate(149.65 15.383)"},{children:[(0,n.jsx)("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"},void 0),(0,n.jsx)("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"},void 0)]}),void 0)]}),void 0)}),void 0),(0,n.jsx)("div",Object.assign({className:e.label},{children:"Sin datos"}),void 0)]}),void 0)}},10646:(e,t,i)=>{i.d(t,{l:()=>n});const n=e=>[`${e.getFullYear()}-${`0${e.getMonth()+1}`.substr(-2)}-${`0${e.getDate()}`.substr(-2)}`]},88093:(e,t,i)=>{i.d(t,{R:()=>n});const n=()=>{var e=new Date;return e.getHours(),{dateShift:e.getHours()>=0&&e.getHours()<7?new Date(e.getTime()-864e5):e}}},192:(e,t,i)=>{i.r(t),i.d(t,{HourmeterView:()=>ie,default:()=>ne});var n=i(85893),s=i(10046),a=i(41749),l=i(67294),o=i(73855),c=i(92336),r=i(61242),d=i(8286),h=i(64436),v=i(96019),u=i(52541),m=i(30553),g=i(40074),j=i(41120),x=i(87623),f=i(81395);const p=e=>{const[t,i]=(0,l.useState)(e);return Object.assign({form:t,handleInputChange:e=>{i(Object.assign(Object.assign({},t),{[e.target.name]:e.target.value}))},handleReactChange:e=>{console.log(e.target),i(Object.assign(Object.assign({},t),{[e.target.name]:e.target.value}))},reset:()=>{i(e)}},t)};var O=i(93007);const b=(0,j.Z)((e=>(0,x.Z)({container:{display:"flex",flexDirection:"column",flexWrap:"wrap",fontFamily:"inherit"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),paddingBottom:"10px",width:100}}))),N=()=>{const e=b(),t=(0,o.T)(),[i,s]=(0,l.useState)(0),[r,j]=(0,l.useState)(1000.2),[x,N]=(0,l.useState)(!1),{currentTimeline:S}=(0,o.C)(c.rf),T=new Date,Z=`0${T.getHours()}`,C=`0${T.getMinutes()}`,{form:y,handleInputChange:E,reset:A}=p({time:`${Z.slice(-2)}:${C.slice(-2)}`,hourmeterEnd:0===(null==S?void 0:S.hystoryShiftList.length)?0:null==S?void 0:S.hystoryShiftList[0].initialHourmeter.toFixed(2),htm:0,status:void 0,currentTimeline:S}),k=null==S?void 0:S.status,{time:I,hourmeterEnd:w,htm:D}=y;(0,l.useEffect)((()=>(t((0,c.$6)(y)),()=>{})),[y]);const L=(e,t)=>{const i=Number.parseFloat(e)+Number.parseFloat(t);return Number.parseFloat(i.toFixed(2))};(0,l.useEffect)((()=>(console.log("hourmeterStart",r),console.log("hourmeterStart",r),console.log(L(w,i)),j(L(w,i)),()=>{t((0,c.J$)())})),[]);const P=e=>{console.log(e),console.log(e.target.checked),N(e.target.checked)};return(0,l.useEffect)((()=>{!function(){var e;if(0===(null==S?void 0:S.hystoryShiftList.length))s(0);else{const i=null==S?void 0:S.hystoryShiftList[0],n=new Date,a=new Date(1e3*(null===(e=null==i?void 0:i.initialTime)||void 0===e?void 0:e.seconds));var t=(n.getTime()-a.getTime())/1e3;let l=1/60*Math.ceil(t/60);console.log("pinta",l),s(l)}}()}),[T]),(0,n.jsxs)(a.Z,Object.assign({container:!0,spacing:5},{children:[(0,n.jsx)(a.Z,Object.assign({item:!0,lg:6,md:6,sm:6,xs:6},{children:(0,n.jsxs)("form",Object.assign({className:e.container,noValidate:!0},{children:[(0,n.jsx)(d.Z,{id:"date",label:"HOUR",type:"time",name:"time",value:I,onChange:E,className:e.textField,InputLabelProps:{shrink:!0,required:!0}},void 0),(0,n.jsx)(d.Z,{id:"date",label:"HOURMETER",type:"number",disabled:!0,name:"hourmeterEnd",value:L(w,i),onChange:E,className:e.textField,InputLabelProps:{shrink:!0}},void 0),("MANTO"===k||x)&&(0,n.jsx)(d.Z,{id:"date",label:"HOURMETER Start",type:"number",name:"htm",value:D,onClick:P,onChange:E,className:e.textField,InputLabelProps:{shrink:!0,required:!0}},void 0)]}),void 0)}),void 0),(0,n.jsx)(a.Z,Object.assign({item:!0,lg:6,md:6,sm:6,xs:6},{children:(0,n.jsxs)(h.Z,Object.assign({component:"fieldset"},{children:[(0,n.jsx)(v.Z,Object.assign({component:"legend"},{children:"choice"}),void 0),(0,n.jsxs)(u.Z,Object.assign({defaultValue:"female","aria-label":"hourmeter",name:"customized-radios"},{children:[(0,n.jsx)(m.Z,{value:`${O.StateUnitGeneral.MANTO}`,control:(0,n.jsx)(g.Z,{icon:(0,n.jsx)(f.Z,{},void 0),checkedIcon:(0,n.jsx)(f.Z,{},void 0),name:"status",onClick:P,onChange:E,disabled:"MANTO"===k},void 0),label:"MANTO"},void 0),(0,n.jsx)(m.Z,{value:`${O.StateUnitGeneral.STANDBY}`,control:(0,n.jsx)(g.Z,{icon:(0,n.jsx)(f.Z,{},void 0),checkedIcon:(0,n.jsx)(f.Z,{},void 0),name:"status",onClick:()=>N(!1),disabled:"STANDBY"===k,onChange:E},void 0),label:"STANDBY"},void 0),(0,n.jsx)(m.Z,{value:`${O.StateUnitGeneral.INSPECTION}`,control:(0,n.jsx)(g.Z,{icon:(0,n.jsx)(f.Z,{},void 0),checkedIcon:(0,n.jsx)(f.Z,{},void 0),onClick:()=>N(!1),name:"status",disabled:"INSPECTION"===k,onChange:E},void 0),label:"INSPECTION"},void 0),(0,n.jsx)(m.Z,{value:`${O.StateUnitGeneral.OPERATIONAL}`,control:(0,n.jsx)(g.Z,{icon:(0,n.jsx)(f.Z,{},void 0),checkedIcon:(0,n.jsx)(f.Z,{},void 0),name:"status",disabled:"OPERATIVE"===k,onClick:()=>N(!1),onChange:E},void 0),label:"OPERATIVE"},void 0)]}),void 0)]}),void 0)}),void 0)]}),void 0)};var S;!function(e){e[e.UNKNOWN_STATE=0]="UNKNOWN_STATE",e[e.UPLOAD=1]="UPLOAD",e[e.DOWNLOAD=2]="DOWNLOAD",e[e.TO_UPLOAD=3]="TO_UPLOAD",e[e.TO_DOWNLOAD=4]="TO_DOWNLOAD",e[e.WAITING=5]="WAITING",e[e.QUEUE=6]="QUEUE",e[e.MANTO=7]="MANTO",e[e.STANDBY=8]="STANDBY",e[e.INSPECTION=9]="INSPECTION",e[e.LOAD_FUEL=10]="LOAD_FUEL",e[e.LOAD_WATER=11]="LOAD_WATER",e[e.OPERATIVE=12]="OPERATIVE"}(S||(S={}));var T=i(94491);const Z=(0,j.Z)((()=>(0,x.Z)({line:{width:"100%",minWidth:"130px",height:"1px",border:"0",backgroundColor:"rgba(191,128,11,1)",padding:"1px",margin:"5px"},container:{display:"flex",alignItems:"center"},timeline:{display:"flex",flexWrap:"wrap",flexDirection:"column",alignItems:"center",WebkitUserSelect:"none"},span:{display:"flex",alignSelf:"start",WebkitUserSelect:"none"}}))),C=({icon:e})=>{const t=Z();return(0,n.jsxs)("div",Object.assign({className:t.container},{children:[e||(0,n.jsx)(T.Z,{htmlColor:"#F2BB13"},void 0),(0,n.jsx)(a.Z,{className:t.line},void 0)]}),void 0)},y=(0,l.createContext)({}),{Provider:E}=y,A=({children:e,data:t})=>{const i=Z();return(0,n.jsx)(E,Object.assign({value:{data:t}},{children:(0,n.jsx)("div",Object.assign({className:i.timeline},{children:e}),void 0)}),void 0)};var k=i(22318);const I=({title:e})=>{const t=Z();return(0,n.jsx)("div",Object.assign({className:t.span},{children:(0,n.jsx)(k.Z,Object.assign({variant:"button",display:"block",gutterBottom:!0},{children:e}),void 0)}),void 0)},w=({title:e})=>{const{data:t}=(0,l.useContext)(y);return(0,n.jsx)(k.Z,Object.assign({variant:"h6",component:"h6"},{children:e||(null==t?void 0:t.title.toString().toLowerCase())}),void 0)},D=()=>{const{currentTimeline:e}=(0,o.C)(c.rf);return(0,n.jsx)(a.Z,Object.assign({container:!0},{children:null==e?void 0:e.hystoryShiftList.map((e=>{var t;let i=new Date(1e3*(null===(t=e.initialTime)||void 0===t?void 0:t.seconds)).toLocaleString();return(0,n.jsxs)(A,{children:[(0,n.jsx)(w,{title:S[e.initialState]},void 0),(0,n.jsx)(C,{},void 0),(0,n.jsx)(I,{title:i.toLocaleString().split(" ")[1].substring(0,i.split(" ")[1].length-3)},void 0)]},e.id+Math.random())}))}),void 0)};var L=i(282),P=i(92284);const H=(0,j.Z)((e=>(0,x.Z)({container:{display:"flex",flexDirection:"column",flexWrap:"wrap",fontFamily:"inherit"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),paddingBottom:"10px",width:100}}))),M=({value:e,label:t})=>{const i=H(),s=(0,o.T)(),r=new Date,j=`0${r.getHours()}`,x=`0${r.getMinutes()}`,{form:f,handleInputChange:O,reset:b}=p({hoursStart:`${j.slice(-2)}:${x.slice(-2)}`,status:e});(0,l.useEffect)((()=>{s((0,c.gS)(f))}),[f]),(0,l.useEffect)((()=>()=>{s((0,c.XH)())}),[]);const{hoursStart:N,hoursEnd:S,status:T}=f;return(0,n.jsxs)(a.Z,Object.assign({container:!0,spacing:5},{children:[(0,n.jsx)(a.Z,Object.assign({item:!0,lg:6,md:6,sm:6,xs:6},{children:(0,n.jsx)("form",Object.assign({className:i.container,noValidate:!0},{children:(0,n.jsx)(d.Z,{id:"date",label:"HOUR START",type:"time",name:"hoursStart",value:N,onChange:O,className:i.textField,InputLabelProps:{shrink:!0,required:!0}},void 0)}),void 0)}),void 0),(0,n.jsx)(a.Z,Object.assign({item:!0,lg:6,md:6,sm:6,xs:6},{children:(0,n.jsxs)(h.Z,Object.assign({component:"fieldset"},{children:[(0,n.jsx)(v.Z,Object.assign({component:"legend"},{children:"choice"}),void 0),(0,n.jsx)(u.Z,Object.assign({defaultValue:"female","aria-label":"hourmeter",name:"customized-radios"},{children:(0,n.jsx)(m.Z,{value:`${e}`,control:(0,n.jsx)(g.Z,{icon:(0,n.jsx)(P._OA,{},void 0),checkedIcon:(0,n.jsx)(P._OA,{},void 0),name:"status",checked:!0,onChange:O},void 0),label:t},void 0)}),void 0)]}),void 0)}),void 0)]}),void 0)};const R=()=>{const{rowsTimeline:e}=(0,o.C)(c.rf),t=(0,o.T)(),[i,s]=(0,l.useState)(!0),[d,h]=(0,l.useState)(!0),[v,u]=(0,l.useState)(!0),[m,g]=(0,l.useState)(!1),[j,x]=(0,l.useState)(!1),[f,p]=(0,l.useState)(!1),b=()=>0!==e.length&&e.every((e=>"STANDBY"===e.status)),N=()=>0!==e.length&&e.every((e=>"OPERATIVE"===e.status)),S=()=>0!==e.length&&e.every((e=>"INSPECTION"===e.status)),T=()=>0!==e.length&&e.every((e=>"UNKNOWN_STATE"===e.status)),Z=(0,l.useCallback)((()=>{g(!1),x(!1),p(!1)}),[]),C=()=>{return e=void 0,i=void 0,s=function*(){yield t((0,c._C)()),g(!1),x(!1),p(!1),yield t((0,c.Sp)())},new((n=void 0)||(n=Promise))((function(t,a){function l(e){try{c(s.next(e))}catch(e){a(e)}}function o(e){try{c(s.throw(e))}catch(e){a(e)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(e){e(i)}))).then(l,o)}c((s=s.apply(e,i||[])).next())}));var e,i,n,s};return(0,l.useEffect)((()=>{N()&&(s(!1),h(!1),u(!0)),T()&&(s(!1),h(!1),u(!1)),b()&&(s(!0),h(!1),u(!1)),S()&&(s(!1),h(!1),u(!0)),0==T()&&0==b()&&0==S()&&0==N()&&(s(!0),h(!0),u(!0))}),[e]),(0,n.jsxs)(a.Z,Object.assign({container:!0,spacing:1},{children:[(0,n.jsx)(a.Z,Object.assign({item:!0},{children:(0,n.jsx)(L.Z,Object.assign({disabled:i,onClick:()=>g(!0),variant:"contained",color:"primary"},{children:"STANDBY"}),void 0)}),void 0),(0,n.jsx)(a.Z,Object.assign({item:!0},{children:(0,n.jsx)(L.Z,Object.assign({disabled:d,onClick:()=>x(!0),variant:"contained",color:"primary"},{children:"OPERATIVE"}),void 0)}),void 0),(0,n.jsx)(a.Z,Object.assign({item:!0},{children:(0,n.jsx)(L.Z,Object.assign({disabled:v,onClick:()=>p(!0),variant:"contained",color:"primary"},{children:"INSPECTION"}),void 0)}),void 0),(0,n.jsx)(r.a,Object.assign({open:m,handleClose:Z,handleConfirm:C,title:"Truck to STANDBY  "},{children:(0,n.jsx)(M,{value:O.StateUnitGeneral.STANDBY,label:"STANDBY"},void 0)}),void 0),(0,n.jsx)(r.a,Object.assign({open:f,handleClose:Z,handleConfirm:C,title:"Truck to INSPECTION  "},{children:(0,n.jsx)(M,{value:O.StateUnitGeneral.INSPECTION,label:"INSPECTION"},void 0)}),void 0),(0,n.jsx)(r.a,Object.assign({open:j,handleClose:Z,handleConfirm:C,title:"Truck to OPERATIVE  "},{children:(0,n.jsx)(M,{value:O.StateUnitGeneral.OPERATIONAL,label:"OPERATIVE"},void 0)}),void 0)]}),void 0)};var V=i(88093),U=i(2357),z=i(10646),$=i(696),F=i(868),B=i(17812),W=i(52303),_=i(80024),Y=i(99050),G=i(85639),K=i(79192);const q=["NONE","STANDBY","OPERATIVE","INSPECTION","MANTO"];function Q(){const e=(0,o.T)(),[t,i]=l.useState(null),s=Boolean(t),a=(t="NONE")=>{i(null),e("NONE"===t?(0,c.V)(""):(0,c.V)(t)),console.log(t)};return(0,n.jsxs)("div",{children:[(0,n.jsx)(B.Z,Object.assign({style:{padding:"0px",margin:"0px"},"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:e=>{i(e.currentTarget)}},{children:(0,n.jsx)(K.Z,{},void 0)}),void 0),(0,n.jsx)(Y.Z,Object.assign({id:"long-menu",anchorEl:t,keepMounted:!0,open:s,onClose:()=>a("NONE"),PaperProps:{style:{maxHeight:216,width:"20ch"}}},{children:q.map((e=>(0,n.jsx)(G.Z,Object.assign({onClick:()=>a(e)},{children:e}),e)))}),void 0)]},void 0)}const X=(e,t,i)=>[Object.assign(Object.assign({},P.mf9),{width:70,renderHeader:e=>(0,n.jsx)(F.ZP,Object.assign({title:"Select all"},{children:(0,n.jsxs)("div",Object.assign({style:{display:"flex",padding:"0px",margin:"0px"}},{children:[(0,n.jsx)(P.KOw,Object.assign({},e),void 0),(0,n.jsx)(Q,{},void 0)]}),void 0)}),void 0)}),{field:"truck",headerName:"Truck",width:150},{field:"status",headerName:"status",width:150},{field:"hmtStart",headerName:"Hourmeter",width:150,editable:!0,type:"number"},{field:"Opciones",headerName:"Opc",minWidth:110,renderCell:({row:s})=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.ZP,Object.assign({onClick:()=>{console.log(s),t(s),e(!0)},title:"Add timeline"},{children:(0,n.jsx)(B.Z,Object.assign({size:"small"},{children:(0,n.jsx)(_.Z,{color:"primary",fontSize:"small"},void 0)}),void 0)}),void 0),(0,n.jsx)(F.ZP,Object.assign({onClick:()=>{t(s),i(!0)},title:"View Timeline"},{children:(0,n.jsx)(B.Z,Object.assign({size:"small"},{children:(0,n.jsx)(W.Z,{htmlColor:"Green",fontSize:"small"},void 0)}),void 0)}),void 0)]},void 0)}],J=l.memo((({setOpen:e,setTimelineCurrent:t,setOpenTimeline:i})=>{const s=(0,o.T)(),{status:a,filterIteam:r}=(0,o.C)(c.rf),{rows:d}=(()=>{const{timesline:e,status:t}=(0,o.C)(c.rf),{currentTimelineList:i}=e,[n,s]=(0,l.useState)([]);return(0,l.useEffect)((()=>{var e,n;"done"===t?(console.log(null===(n=null===(e=i[0])||void 0===e?void 0:e.hystoryShiftList[0])||void 0===n?void 0:n.initialHourmeter),s(null==i?void 0:i.map((e=>{var t;return Object.assign(Object.assign({},e),{id:e.deviceId,truck:e.deviceAlias,status:S[e.state],hmtStart:null===(t=e.hystoryShiftList[0])||void 0===t?void 0:t.initialHourmeter.toFixed(2)})})))):s([])}),[e,t]),{rows:n}})(),[h,v]=(0,l.useState)(!0),[u,m]=l.useState({}),g=l.useCallback((e=>{m(e),0!==Object.keys(e).length&&s((0,c.cK)(e))}),[]);return(0,l.useEffect)((()=>{v("done"!==a&&"failed"!==a)}),[a]),(0,n.jsx)("div",Object.assign({style:{height:"100vh",overflowY:"scroll",display:"flex",flexDirection:"column"}},{children:(0,n.jsx)(P._$r,{rows:d,columns:X(e,t,i),density:"compact",components:{NoRowsOverlay:$.Z},checkboxSelection:!0,disableSelectionOnClick:!0,loading:h,onSelectionModelChange:e=>(e=>{const t=new Set(e),i=d.filter((e=>t.has(e.id.toString())));s((0,c.Xm)(i))})(e),editRowsModel:u,onEditRowsModelChange:g,filterModel:{items:[{columnField:"status",operatorValue:"contains",value:r}]}},void 0)}),void 0)}));const ee=()=>{const e=(0,o.T)(),{formValues:t}=(0,o.C)(c.rf),{dateShift:i}=(0,V.R)(),[d]=(0,z.l)(i),[h,v]=(0,l.useState)(U.Shift.UNKNOWN_SHIFT),[u,m]=(0,l.useState)(!1),[g,j]=(0,l.useState)(!1),[x,f]=(0,l.useState)(!0),[p,O]=(0,l.useState)([]),b=(0,l.useCallback)((()=>{m(!1),f(!0),j(!1)}),[]);return(0,l.useEffect)((()=>{v(U.Shift.DAY),i.getHours()>=7&&i.getHours()<19?(v(U.Shift.DAY),console.log("if",h)):(v(U.Shift.NIGHT),console.log("else"));const t={shift:h,date:`${d}T00:00`};return e((0,c.mA)(t)),()=>{e((0,c.gI)())}}),[]),(0,l.useEffect)((()=>{t.status?f(!1):f(!0)}),[t]),(0,l.useEffect)((()=>{e((0,c.jO)(p))}),[p]),(0,n.jsx)("div",{children:(0,n.jsxs)(s.Z,Object.assign({m:2},{children:[(0,n.jsx)(a.Z,{children:(0,n.jsx)(R,{},void 0)},void 0),(0,n.jsx)(a.Z,{children:(0,n.jsx)(J,{setOpen:m,setTimelineCurrent:O,setOpenTimeline:j},void 0)},void 0),(0,n.jsx)(r.a,Object.assign({open:u,handleClose:b,handleConfirm:()=>{return t=void 0,i=void 0,s=function*(){yield e((0,c.Sp)()),m(!1),f(!0);const t={shift:h,date:`${d}T00:00`};yield e((0,c.mA)(t))},new((n=void 0)||(n=Promise))((function(e,a){function l(e){try{c(s.next(e))}catch(e){a(e)}}function o(e){try{c(s.throw(e))}catch(e){a(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n((function(e){e(i)}))).then(l,o)}c((s=s.apply(t,i||[])).next())}));var t,i,n,s},title:`Truck  ${p.truck}  `,disabled:x},{children:(0,n.jsx)(N,{},void 0)}),void 0),(0,n.jsx)(r.a,Object.assign({open:g,handleClose:b,title:`Timeline to  ${p.truck} `,disabled:x},{children:(0,n.jsx)(D,{},void 0)}),void 0)]}),void 0)},void 0)};var te=i(8850);const ie=()=>(0,n.jsxs)("div",{children:[(0,n.jsx)(te.h,{title:"Hourmeter"},void 0),(0,n.jsx)(ee,{},void 0)]},void 0),ne=ie},8850:(e,t,i)=>{i.d(t,{h:()=>d});var n=i(85893),s=i(45258),a=i(28358),l=i(282),o=i(22318),c=i(43471),r=i(5977);const d=({title:e,positionContainer:t})=>{const i=t||"sticky",d=(0,r.k6)();return(0,n.jsx)(s.Z,Object.assign({position:i,color:"secondary"},{children:(0,n.jsxs)(a.Z,{children:[(0,n.jsx)(l.Z,{size:"small",startIcon:(0,n.jsx)(c.Z,{color:"action",style:{color:"#fff"}},void 0),onClick:()=>{d.goBack()}},void 0),(0,n.jsx)(o.Z,Object.assign({variant:"h6"},{children:e}),void 0)]},void 0)}),void 0)}}}]);