"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[226],{2834:(e,i,s)=>{s.d(i,{d:()=>o});var t=s(85893),r=s(282),a=s(95477);const o=e=>{var{loading:i,text:s}=e,o=function(e,i){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.indexOf(t)<0&&(s[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(t=Object.getOwnPropertySymbols(e);r<t.length;r++)i.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(s[t[r]]=e[t[r]])}return s}(e,["loading","text"]);return(0,t.jsx)(r.Z,Object.assign({},o,{disabled:i},{children:i?(0,t.jsx)(a.Z,{style:{width:"20px",height:"20px"}},void 0):s}),void 0)}},58637:(e,i,s)=>{s.d(i,{b:()=>d});var t=s(73914),r=s(57850),a=s(59693),o=s(93584);function n(e){return e.type||e.mode}const l=(0,r.Z)(),d=(0,t.Z)((e=>{n(e.palette);const i=i=>"dark"===n(e.palette)?(0,a._j)(i,.1):(0,a.$n)(i,.1);return{root:{"& .super-app-theme--cell":{backgroundColor:"rgb(26,62,114,0.1)",color:"#1a3e72",fontWeight:"600"},"& .Mui-error.negative":{backgroundColor:"#CCFFFF",color:"#1a3e72",fontWeight:"600"},"& .Mui-error.positive":{backgroundColor:"rgba(157, 255, 118, 0.49)",color:"#1a3e72",fontWeight:"600"},"& .super-app-theme--false":{backgroundColor:(s="rgb(255, 48, 83)","dark"===n(e.palette)?(0,a._j)(s,.1):(0,a.$n)(s,.5)),"&:hover":{backgroundColor:i(e.palette.error.main)}},"& .MuiDataGrid-row":{"&:hover":{backgroundColor:i(`${o.sb}`)},"& .Mui-selected":{"&:hover":{backgroundColor:i(`${o.sb}`)}}}}};var s}),{defaultTheme:l})},49226:(e,i,s)=>{s.d(i,{e:()=>G});var t=s(85893),r=s(41749),a=s(10046),o=s(2050),n=s(67294),l=s(73855),d=s(65529),c=s(58637),m=s(868),u=s(42403),v=s(59943),h=s(282),j=s(38396),p=s(85639),g=s(78513),b=s(59067),x=s(28428),f=s(2834),O=s(15635);function Z({handleUserCurrent:e,row:i}){const[s,r]=n.useState(null),a=(0,l.T)(),{statusDeleteUser:o}=(0,l.C)(d.mz),[c]=(0,O.r)(o),m=e=>{r(e.currentTarget)},u=()=>{r(null)};return(0,t.jsxs)("div",{children:[(0,t.jsx)(h.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:m,endIcon:(0,t.jsx)(g.Z,{},void 0)},void 0),(0,t.jsxs)(j.Z,Object.assign({id:"simple-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:u},{children:[(0,t.jsx)(p.Z,Object.assign({onClick:()=>{e(),u()}},{children:(0,t.jsx)(h.Z,Object.assign({"aria-controls":"simple-menu","aria-haspopup":"true",onClick:m,startIcon:(0,t.jsx)(b.Z,{color:"primary",fontSize:"small"},void 0)},{children:"editar"}),void 0)}),void 0),(0,t.jsx)(p.Z,Object.assign({onClick:()=>{a((0,d.Bz)(i)),a((0,d.TY)({})),!c&&u()}},{children:(0,t.jsx)(f.d,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:m,startIcon:(0,t.jsx)(x.Z,{htmlColor:"red",fontSize:"small"},void 0),text:"Eliminar",loading:c},void 0)}),void 0)]}),void 0)]},void 0)}var C=s(95090);const y=()=>{const e=(0,l.T)(),{user:i}=(0,l.C)(d.mz),s=(0,c.b)(),[r,h]=(0,n.useState)(),[j,p]=(()=>{const[e,i]=(0,n.useState)([]),{statusRetriveUser:s,userList:t}=(0,l.C)(d.mz);return(0,n.useEffect)((()=>{s===C.JD.DONE?i(null==t?void 0:t.map(((e,i)=>Object.assign({},e)))):i([])}),[s,s]),[e,i]})();return(0,n.useEffect)((()=>{e((0,d.yE)())}),[]),(0,n.useEffect)((()=>{e((0,d.TY)(r))}),[r]),(0,n.useEffect)((()=>{var e;e=Object.assign({},i);const s=j.findIndex((i=>i.id===e.id)),t=[...j];e.dni?s>=0?t[s]=e:t.push(e):s>=0&&t.splice(s,1),p([...t])}),[i]),(0,t.jsx)(a.Z,Object.assign({sx:{mx:4,display:"flex",flexDirection:"column"}},{children:(0,t.jsx)("div",Object.assign({style:{minHeight:"80vh",overflowY:"scroll",display:"flex",flexDirection:"column"}},{children:(0,t.jsx)(o._$r,{className:s.root,rows:j,columns:(g=h,[{field:"id",hide:!0,hideSortIcons:!0},{field:"username",headerName:"Usuario"},{field:"dni",headerName:"dni"},{field:"firstName",headerName:"Nombre"},{field:"lastName",headerName:"Apellidos",renderCell:({row:e})=>(0,t.jsx)(m.ZP,Object.assign({title:e.lastName},{children:(0,t.jsx)("p",{children:e.lastName},void 0)}),void 0)},{field:"role",headerName:"rol",hideSortIcons:!0,renderCell:({row:e})=>(0,t.jsx)(m.ZP,Object.assign({title:e.role},{children:(0,t.jsx)("p",{children:e.role===v.Role.DISPATCH?"Despachador":e.role===v.Role.ADMIN?"Administrador":e.role},void 0)}),void 0)},{field:"email",headerName:"email",renderCell:({row:e})=>(0,t.jsx)(m.ZP,Object.assign({title:e.email},{children:(0,t.jsx)("p",{children:e.email},void 0)}),void 0)},{field:"isActive",headerName:"Estado",renderCell:({row:e})=>(0,t.jsx)(u.D,{isActive:!e||e.isActive},void 0)},{field:"Opciones",headerName:"Opc",hideSortIcons:!0,renderCell:({row:e})=>(0,t.jsx)(Z,{handleUserCurrent:()=>{var i=Object.assign({},e);g(i)},row:e},void 0)}]),density:"comfortable",disableSelectionOnClick:!0,disableColumnMenu:!0},void 0)}),void 0)}),void 0);var g};var w=s(57850),k=s(41120),N=s(13457),A=s(75834),S=s(33901),E=s(22318),I=s(17812),D=s(8286),P=s(44562),T=s(5977),V=s(47298),$=s(990),z=s(35117),W=s(64436),M=s(26209);const q=(0,k.Z)((e=>(0,z.Z)({formControl:{margin:e.spacing(1),minWidth:"100%"},selectEmpty:{marginTop:e.spacing(2)}})));function U(e){var{placeholder:i,iteams:s,selectValue:r,value:a}=e,o=function(e,i){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.indexOf(t)<0&&(s[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(t=Object.getOwnPropertySymbols(e);r<t.length;r++)i.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(s[t[r]]=e[t[r]])}return s}(e,["placeholder","iteams","selectValue","value"]);const l=q(),[d,c]=n.useState("");return(0,n.useEffect)((()=>{c(a||"")}),[a]),(0,n.useEffect)((()=>{r(d)}),[d]),(0,t.jsx)("div",{children:(0,t.jsx)(W.Z,Object.assign({className:l.formControl},{children:(0,t.jsxs)(M.Z,Object.assign({},o,{value:d,onChange:e=>{c(e.target.value)},displayEmpty:!0,className:l.selectEmpty,inputProps:{"aria-label":"Without label"}},{children:[(0,t.jsx)(p.Z,Object.assign({value:"",disabled:!0},{children:i}),void 0),null==s?void 0:s.map((e=>(0,t.jsx)(p.Z,Object.assign({value:null==e?void 0:e.value},{children:null==e?void 0:e.tittle}),e.value)))]}),void 0)}),void 0)},void 0)}var R=s(9570);function F({isActive:e,setValue:i}){const s=(0,w.Z)({overrides:{MuiSwitch:{switchBase:{color:"rgb(183, 33, 54)"},colorSecondary:{"&$checked":{color:"rgb(34, 154, 22)"}},track:{opacity:.2,backgroundColor:"rgb(34, 154, 22)","$checked$checked + &":{opacity:.7,backgroundColor:"rgb(34, 154, 22)"}}}}}),[r,a]=n.useState({checkedA:e});return(0,n.useEffect)((()=>{i(r.checkedA)}),[r]),(0,t.jsx)(N.Z,Object.assign({theme:s},{children:(0,t.jsx)(R.Z,{checked:r.checkedA,onChange:e=>{a(Object.assign(Object.assign({},r),{[e.target.name]:e.target.checked}))},name:"checkedA"},void 0)}),void 0)}var L=s(59431),Y=s(93584);const _=(0,w.Z)(),B=(0,k.Z)((e=>({marginSmall:{margin:".5rem 0 .5rem 0"},margin:{margin:"1rem 0 1rem 0"},sx:{[e.breakpoints.down("xs")]:{visibility:"hidden"},[e.breakpoints.down("sm")]:{visibility:"hidden"}}}))),H=()=>{const e=B(),i=(0,l.T)(),{statusCreateUser:s,userCurrent:o,userError:c}=(0,l.C)(d.mz),[m]=(0,O.r)(s),[h,j]=((0,T.k6)(),n.useState()),[p,g]=n.useState(),[b,x,Z,C]=(0,$.M)({id:void 0,role:p,password:"",password2:"",dni:"",email:"",firstName:"",lastName:""});n.useEffect((()=>{o&&C({id:o.id,role:o.role,password:"",password2:"",dni:o.dni,email:o.email,firstName:o.firstName,lastName:o.lastName,isActive:o.isActive})}),[o]);const{id:y,password:w,password2:k,dni:z,email:W,firstName:M,lastName:q}=b;return n.useEffect((()=>{C(Object.assign(Object.assign({},b),{role:p}))}),[p]),n.useEffect((()=>{C(Object.assign(Object.assign({},b),{isActive:h}))}),[h]),(0,t.jsx)(N.Z,Object.assign({theme:_},{children:(0,t.jsxs)(r.Z,Object.assign({container:!0},{children:[(0,t.jsx)(A.ZP,{},void 0),(0,t.jsx)(r.Z,{children:(0,t.jsxs)(a.Z,Object.assign({sx:{mx:4,display:"flex",flexDirection:"column",alignItems:"center"}},{children:[(0,t.jsx)(S.Z,{style:{width:"50px",height:"50px"},alt:"logo dts",src:"../../src\\assets\\img\\logodts.png"},void 0),(0,t.jsxs)(r.Z,Object.assign({container:!0,justifyContent:"center",alignItems:"center"},{children:[(0,t.jsx)(E.Z,Object.assign({component:"h1",variant:"h5"},{children:b.firstName?`${b.firstName} ${b.lastName}`:"Usuario Dts"}),void 0),b.id?(0,t.jsx)(I.Z,Object.assign({onClick:()=>{new L.User,i((0,d.TY)({})),Z()}},{children:(0,t.jsx)(V.Z,{htmlColor:"rgb(183, 33, 54)"},void 0)}),void 0):null]}),void 0),(0,t.jsx)(u.D,{isActive:!o||b.isActive},void 0),(0,t.jsx)(a.Z,Object.assign({component:"form",onSubmit:e=>{e.preventDefault(),y?(i((0,d.q0)(b)),Z(),i((0,d.TY)({}))):k===w&&(i((0,d.hR)(b)),Z())},sx:{mt:1}},{children:(0,t.jsxs)(r.Z,Object.assign({container:!0,spacing:2,justifyContent:"space-between"},{children:[(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,t.jsx)(D.Z,{variant:"outlined",onChange:x,value:M,margin:"normal",required:!0,fullWidth:!0,id:"firstName",type:"text",label:"Nombre",name:"firstName",autoFocus:!0},void 0)}),void 0),(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,t.jsx)(D.Z,{variant:"outlined",onInvalid:e=>e.target.setCustomValidity("Los campos no pueden estar vacios"),onInput:e=>e.target.setCustomValidity(""),onChange:x,value:q,margin:"normal",required:!0,fullWidth:!0,id:"lastName",type:"text",label:"Apellidos",name:"lastName",autoFocus:!0},void 0)}),void 0),(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:(0,t.jsx)(D.Z,{variant:"outlined",onChange:x,onInvalid:e=>e.target.setCustomValidity("La contraseña debe tener al menos 6 caracteres"),onInput:e=>e.target.setCustomValidity(""),value:w,margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",disabled:!!y,id:"password",inputProps:{pattern:"^[0-9A-Za-z]{6,15}$"},autoComplete:"current-password",error:w!=k,helperText:w!=k?"Las contraseñas no coinciden":null},void 0)}),void 0),(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:(0,t.jsx)(D.Z,{variant:"outlined",onChange:x,onInvalid:e=>e.target.setCustomValidity("La contraseña debe tener al menos 6 caracteres"),onInput:e=>e.target.setCustomValidity(""),value:k,margin:"normal",required:!0,fullWidth:!0,disabled:!!y,inputProps:{pattern:"^[0-9A-Za-z]{6,15}$"},name:"password2",label:"Password",type:"password",id:"password2",autoComplete:"current-password",error:w!=k},void 0)}),void 0),(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:(0,t.jsx)(D.Z,{variant:"outlined",onChange:x,value:W,margin:"normal",required:!0,fullWidth:!0,name:"email",label:"Email",type:"email",id:"email",autoComplete:"current-email"},void 0)}),void 0),(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,t.jsx)(D.Z,{variant:"outlined",onChange:x,value:z,margin:"normal",required:!0,fullWidth:!0,name:"dni",label:"Dni",inputProps:{pattern:"^[0-9]{8}"},id:"dni",autoComplete:"current-dni"},void 0)}),void 0),(0,t.jsxs)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:[(0,t.jsx)(U,{required:!0,value:o?o.role:"",placeholder:"Rol",iteams:[{value:v.Role.ADMIN,tittle:"Administrador"},{value:v.Role.DISPATCH,tittle:"Despachador"}],selectValue:g},void 0)," "]}),void 0),y&&(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:(0,t.jsx)(J,{setSwitchValue:j},void 0)}),void 0),c&&(0,t.jsxs)(r.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:[(0,t.jsx)(P.Z,Object.assign({variant:"standard",severity:"error",style:{color:"red",textAlign:"center"}},{children:c}),void 0)," "]}),void 0),(0,t.jsx)(f.d,{className:e.marginSmall,type:"submit",fullWidth:!0,variant:"contained",style:{background:`${Y.Jx}`,color:"white"},text:"Enviar",loading:m},void 0)]}),void 0)}),void 0)]}),void 0)},void 0)]}),void 0)}),void 0)},J=({setSwitchValue:e})=>{const{userCurrent:i}=(0,l.C)(d.mz),[s,a]=n.useState();return n.useEffect((()=>{e(s)}),[s]),(0,t.jsxs)(r.Z,Object.assign({container:!0,direction:"row",justifyContent:"space-between"},{children:[(0,t.jsxs)(r.Z,Object.assign({item:!0},{children:[(0,t.jsx)(E.Z,{children:"Prohibido"},void 0),(0,t.jsx)(E.Z,Object.assign({style:{fontSize:"0.875rem",color:"rgb(99, 115, 129)"},variant:"subtitle1"},{children:"Aplicar deshabilitar cuenta"}),void 0)]}),void 0),(0,t.jsx)(r.Z,Object.assign({item:!0},{children:(0,t.jsx)(F,{isActive:!i||i.isActive,setValue:a},void 0)}),void 0)]}),void 0)},G=()=>(0,t.jsxs)(r.Z,Object.assign({container:!0},{children:[(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:4,md:5},{children:(0,t.jsx)(H,{},void 0)}),void 0),(0,t.jsx)(r.Z,Object.assign({item:!0,xs:12,sm:8,md:7},{children:(0,t.jsx)(y,{},void 0)}),void 0)]}),void 0)},42403:(e,i,s)=>{s.d(i,{D:()=>o});var t=s(85893),r=s(71267),a=s(73914);const o=({isActive:e=!0})=>{const i=(0,a.Z)((i=>({color:{background:e?"rgb(34, 154, 22,0.2)":"rgb(183, 33, 54,0.2)",color:e?"rgb(34, 154, 22)":"rgb(183, 33, 54)",fontSize:"0.875rem"}})))();return(0,t.jsx)(r.Z,{className:i.color,label:e?"Activo ":"Deshabilitado"},void 0)}}}]);