"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[978],{81978:(e,t,a)=>{a.d(t,{c:()=>D});var i=a(85893),n=a(60395),s=a(41749),r=a(22318),c=a(18463),o=a(14741),l=a(282),d=a(62822),v=a(50998),u=a(73430),x=a(30387),h=a(44562),m=a(67294),p=a(73855),j=a(14125),g=a(61242),f=a(8286),y=a(990),b=a(57886),C=a(31940);const I=({openEditExcavator:e,setOpenEditExcavator:t,excavator:a})=>{const s=(0,p.T)(),{excavatorInfoList:r}=(0,p.C)(j.kW),{truckSelects:c}=(0,p.C)(C.__),[o,l,d,v]=(0,y.M)(Object.assign({},a)),{deviceAlias:u,deviceId:x,id:h,deviceInterval:I,plate:Z}=o,w=(0,m.useCallback)((e=>{let t=!1;if(e){const a=e.toUpperCase();return r.filter((e=>{e.deviceAlias.toUpperCase()===a&&(t=!0)})),t}}),[r]);return(0,i.jsx)(g.a,Object.assign({open:e,handleClose:()=>{t(!1),d()},handleConfirm:()=>{return e=void 0,a=void 0,n=function*(){u&&!w(o.deviceAlias)&&(yield s((0,b.hH)(o)),s((0,b.Jl)()),yield s((0,j.CE)()),t(!1))},new((i=void 0)||(i=Promise))((function(t,s){function r(e){try{o(n.next(e))}catch(e){s(e)}}function c(e){try{o(n.throw(e))}catch(e){s(e)}}function o(e){var a;e.done?t(e.value):(a=e.value,a instanceof i?a:new i((function(e){e(a)}))).then(r,c)}o((n=n.apply(e,a||[])).next())}));var e,a,i,n},title:"Editar Excavadora",customise:!0},{children:(0,i.jsxs)(n.Z,Object.assign({component:"form",style:{color:"dark"}},{children:[(0,i.jsx)(f.Z,{error:!!w(o.deviceAlias),variant:"outlined",required:!0,onChange:l,style:{width:"100%"},label:"Alias",size:"small",value:u,name:"deviceAlias",helperText:w(o.deviceAlias)?"Ya hay una excavadora con ese mismo Device Alias":""}),(0,i.jsx)(n.Z,{height:"12px"}),(0,i.jsx)(f.Z,{error:!!w(o.deviceId),variant:"outlined",required:!0,onChange:l,style:{width:"100%"},label:"Id",size:"small",disabled:!0,value:o.deviceId,name:"deviceId",helperText:w(o.deviceId)?"Ya hay una excavadora con ese mismo Device Id":""})]}))}))};var Z=a(15635);const w=({openNewExcavator:e,setOpenNewExcavator:t,unit:a})=>{const s=(0,p.T)(),{excavatorInfoList:r}=(0,p.C)(j.kW),{stateCreate:c}=(0,p.C)(b.$I),[o,l,d,v]=(0,y.M)({deviceAlias:"",deviceId:"",id:"",plate:"",deviceInterval:0,description:"",horometer:0}),{deviceAlias:u,deviceId:x,horometer:C}=o,[I]=(0,Z.r)(c),[w,O]=(0,m.useState)(!1);a&&(o.deviceAlias=null==a?void 0:a.deviceAlias,o.deviceId=null==a?void 0:a.deviceId);const E=(0,m.useCallback)((e=>{let t=!1;if(e){const a=e.toUpperCase();return r.filter((e=>{e.deviceAlias.toUpperCase()===a&&(t=!0),e.deviceId.toUpperCase()===a&&(t=!0)})),t}}),[r]);return(0,m.useEffect)((()=>{O(!!u&&!!x&&!!C&&C>0&&!E(o.deviceAlias)&&!E(o.deviceId))}),[o]),(0,i.jsx)(g.a,Object.assign({open:e,handleClose:()=>{s((0,j.CE)()),t(!1),d()},handleConfirm:()=>{return e=void 0,a=void 0,n=function*(){w&&(yield s((0,b.Li)(o)),yield s((0,j.CE)()),t(!1),d())},new((i=void 0)||(i=Promise))((function(t,s){function r(e){try{o(n.next(e))}catch(e){s(e)}}function c(e){try{o(n.throw(e))}catch(e){s(e)}}function o(e){var a;e.done?t(e.value):(a=e.value,a instanceof i?a:new i((function(e){e(a)}))).then(r,c)}o((n=n.apply(e,a||[])).next())}));var e,a,i,n},title:"Insertar Nueva Excavadora",customise:!0,loading:I,disabled:!w},{children:(0,i.jsxs)(n.Z,Object.assign({component:"form",style:{color:"dark"}},{children:[(0,i.jsx)(f.Z,{error:!!E(o.deviceAlias),variant:"outlined",required:!0,disabled:!!a,onChange:l,style:{width:"100%"},label:"Device Alias",size:"small",value:o.deviceAlias,name:"deviceAlias",helperText:E(o.deviceAlias)?"Ya hay una excavadora con ese mismo Device Alias":""}),(0,i.jsx)(n.Z,{height:"12px"}),(0,i.jsx)(f.Z,{error:!!E(o.deviceId),variant:"outlined",required:!0,disabled:!!a,onChange:l,style:{width:"100%"},label:"Device Id",size:"small",value:o.deviceId,name:"deviceId",helperText:E(o.deviceId)?"Ya hay una excavadora con ese mismo Device Id":"Insertar Device Id"}),(0,i.jsx)(f.Z,{error:C<0,variant:"outlined",required:!0,disabled:!!E(o.deviceId),onChange:l,style:{width:"100%"},label:"Hor칩metro",size:"small",type:"number",value:C,name:"horometer",helperText:C<0?"El Hor칩metro necesita ser mayor que 0":"Insertar Hor칩metro"}),a&&E(o.deviceId)&&(0,i.jsx)(h.Z,Object.assign({severity:"error"},{children:"la excavadora seleccionada ya existe en el sistema"}))]}))}))};var O=a(53280),E=a(17813),k=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function r(e){try{o(i.next(e))}catch(e){s(e)}}function c(e){try{o(i.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,c)}o((i=i.apply(e,t||[])).next())}))};const A=()=>{const[e,t]=m.useState(!1),[a,f]=(0,m.useState)(!1),[y,C]=m.useState(!1),[A,L]=m.useState(!1),{excavatorsSelects:S,statusDelete:D}=(0,p.C)(b.$I),T=(0,p.T)(),{excavatorInfoList:z}=(0,p.C)(j.kW),{search:H,setSearch:q,filterList:N,setFilterList:U}=(0,E.e)(),{ExcavatorListHytera:W}=(0,p.C)(b._$),_=(0,m.useRef)(),[J]=(0,Z.r)(D);(0,m.useEffect)((()=>{""===H&&U(z)}),[N]);const P=()=>{t(!1),C(!1),L(!1),T((0,j.CE)()),T((0,b.Jl)())};return(0,i.jsx)(n.Z,{children:(0,i.jsxs)(s.Z,Object.assign({spacing:1,container:!0,direction:"column",style:{padding:"12px"}},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,i.jsx)(r.Z,Object.assign({variant:"subtitle1"},{children:"Lista de Excavadoras"}))})),(0,i.jsxs)(s.Z,Object.assign({item:!0,container:!0,alignItems:"center",style:{width:"100%"}},{children:[(0,i.jsx)(c.Z,Object.assign({style:{paddingLeft:"8px"}},{children:(0,i.jsx)(o.Z,{color:"primary",value:H,inputRef:_,onKeyDown:e=>{var t;"Escape"===e.key&&(q(""),null===(t=_.current)||void 0===t||t.blur(),U(z))},onChange:e=>{q(e.target.value)},placeholder:"Buscar excavadora",inputProps:{"aria-label":"search"}})})),(0,i.jsx)(l.Z,Object.assign({startIcon:(0,i.jsx)(u.Z,{}),onClick:()=>{C(!0)},size:"small",style:{marginLeft:"2em",color:"white",background:"#1d4e89"}},{children:"Nueva excavadora"})),S.length>0&&(0,i.jsx)(l.Z,Object.assign({onClick:()=>{t(!0)},color:"primary",size:"small",style:{marginLeft:"2em",color:"white",background:"#1d4e89"}},{children:"Desactivar excavadora"})),1===S.length&&(0,i.jsx)(l.Z,Object.assign({startIcon:(0,i.jsx)(x.Z,{}),onClick:()=>{f(!0)},color:"primary",size:"small",style:{marginLeft:"2em",color:"white",background:"#1d4e89"}},{children:"Editar"})),(0,i.jsx)(s.Z,{item:!0,xs:12,md:6,xl:6}),(0,i.jsx)(s.Z,{item:!0,xs:12,md:6,xl:6})]})),(0,i.jsx)(s.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,i.jsx)(d.Z,Object.assign({dense:!0,style:{display:"flex",flexWrap:"wrap",backgroundColor:"rgb(250 250 250)"}},{children:N.map((e=>{return(0,i.jsx)(v.Z,Object.assign({button:!0,onClick:()=>{(e=>{T((0,b.m1)(e))})(e)},style:{width:"12em",padding:"0px",margin:"0.2em",backgroundColor:"white"}},{children:(0,i.jsx)(O.Z,{unit:e,isSelect:(t=e,!!S.find((e=>t.deviceId===e.deviceId))),isTruck:!1})}),e.deviceId);var t}))}))})),(0,i.jsx)(w,{openNewExcavator:y,setOpenNewExcavator:C}),S.length>0&&(0,i.jsx)(g.a,Object.assign({open:e,handleClose:P,handleConfirm:()=>k(void 0,void 0,void 0,(function*(){yield T((0,b._7)(S)),yield T((0,j.CE)()),T((0,b.Jl)()),t(!1)})),title:"Seguro que quieres Deshabilitar",customise:!0,loading:J},{children:(0,i.jsx)(h.Z,Object.assign({severity:"warning"},{children:S.map((e=>e.deviceId+" "))}))})),(0,i.jsx)(g.a,Object.assign({open:A,handleClose:P,handleConfirm:()=>k(void 0,void 0,void 0,(function*(){yield W.map((e=>{var t;t=e,z.some((e=>e.deviceId===t.deviceId))||T((0,b.vW)([e]))})),yield T((0,j.CE)()),T((0,b.Jl)()),L(!1)})),title:"sure you want to Syncronize",customise:!0},{children:(0,i.jsx)(h.Z,Object.assign({severity:"info"},{children:"Las excavadoras Hytera se sincronizar치n con el sistema DTS."}))})),1===S.length&&(0,i.jsx)(I,{openEditExcavator:a,setOpenEditExcavator:f,excavator:S[0]})]}))})};var L=a(10465);const S=()=>{const[e,t]=m.useState(!1),{ExcavatorListHytera:a}=(0,p.C)(b._$),c=(0,p.T)(),[o,l]=(0,m.useState)(!1),[u,x]=(0,m.useState)([]),[h,f]=(0,m.useState)(!1),[y,C]=(0,m.useState)(),{excavatorInfoList:I}=(0,p.C)(j.kW);(0,m.useEffect)((()=>{c((0,b.Xo)())}),[]),(0,m.useEffect)((()=>{x(a)}),[a]);const Z=(0,m.useCallback)((e=>{if(e){const t=e.target?e.target.value.toUpperCase():"";x(a.filter((e=>e.deviceAlias.toUpperCase().includes(t))))}}),[a]),E=(0,m.useCallback)((()=>{x(a)}),[a]);return(0,i.jsx)(n.Z,{children:(0,i.jsxs)(s.Z,Object.assign({spacing:1,container:!0,direction:"column",style:{padding:"4px"}},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,i.jsx)(r.Z,Object.assign({variant:"subtitle1"},{children:"List Excavators Hytera"}))})),(0,i.jsx)(s.Z,Object.assign({item:!0,container:!0,alignItems:"center",style:{width:"100%"}},{children:(0,i.jsx)(L.V,{placeholder:"Buscar excavadora",functionFilter:Z,functionCancel:E})})),(0,i.jsx)(s.Z,Object.assign({item:!0,xs:12,md:12,xl:12},{children:(0,i.jsx)(d.Z,Object.assign({dense:!0,style:{display:"flex",flexWrap:"wrap",backgroundColor:"rgb(250 250 250)"}},{children:u.map((e=>{return(0,i.jsx)(v.Z,Object.assign({button:!0,onClick:()=>{(e=>{f(!0),C(e),l(!o)})(e)},style:{width:"8em",padding:"0px",margin:"0.1em",backgroundColor:"white"}},{children:(0,i.jsx)(O.Z,{unit:e,isItemHytera:!0,inList:(t=e,I.some((e=>t.deviceId===e.deviceId)))})}),e.deviceId);var t}))}))})),h&&(0,i.jsx)(w,{openNewExcavator:!0,setOpenNewExcavator:f,unit:y}),(0,i.jsx)(g.a,{open:e,handleClose:()=>{t(!1),c((0,b.Jl)())},handleConfirm:()=>{return e=void 0,a=void 0,n=function*(){t(!1)},new((i=void 0)||(i=Promise))((function(t,s){function r(e){try{o(n.next(e))}catch(e){s(e)}}function c(e){try{o(n.throw(e))}catch(e){s(e)}}function o(e){var a;e.done?t(e.value):(a=e.value,a instanceof i?a:new i((function(e){e(a)}))).then(r,c)}o((n=n.apply(e,a||[])).next())}));var e,a,i,n},title:"sure you want to delete"})]}))})},D=()=>(0,i.jsx)(n.Z,{children:(0,i.jsxs)(s.Z,Object.assign({spacing:0,container:!0,direction:"row",style:{padding:"12px"}},{children:[(0,i.jsx)(s.Z,Object.assign({item:!0,xs:12,md:8,xl:8},{children:(0,i.jsx)(A,{})})),(0,i.jsx)(s.Z,Object.assign({item:!0,xs:12,md:4,xl:4},{children:(0,i.jsx)(S,{})}))]}))})}}]);