(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[633],{63663:(e,t,i)=>{"use strict";i.d(t,{F2:()=>l,xu:()=>u.I,zx:()=>d,iz:()=>j,T5:()=>h,P4:()=>g,hU:()=>v,Mi:()=>x,IB:()=>a.C});var n=i(85893),s=i(8286),o=i(96588);const l=e=>(0,n.jsx)(o.ZP,Object.assign({},Object.assign({},e.propsAutocomplete),{renderInput:e=>(0,n.jsx)(s.Z,Object.assign({},e,{label:"Seleccione una opción",variant:"outlined"}),void 0)}),void 0);var a=i(45287),r=i(282);const d=e=>(0,n.jsx)(r.Z,Object.assign({},Object.assign({},e.propsButton),{children:e.label}),void 0);var c=i(17812);const v=e=>(0,n.jsx)(c.Z,Object.assign({},Object.assign({},e),{children:e.children}),void 0);var u=i(47463),m=i(41749);const h=e=>(0,n.jsx)(m.Z,Object.assign({},Object.assign({},e),{container:!0},{children:e.children}),void 0),g=e=>(0,n.jsx)(m.Z,Object.assign({},Object.assign({},e),{item:!0},{children:e.children}),void 0);var f=i(55517);const j=e=>(0,n.jsx)(f.Z,Object.assign({},Object.assign({},e)),void 0);var b=i(82285);const x=e=>(0,n.jsx)(b.Z,Object.assign({},Object.assign({},e),{children:(0,n.jsx)(m.Z,{children:e.children},void 0)}),void 0)},45287:(e,t,i)=>{"use strict";i.d(t,{C:()=>l});var n=i(85893),s=i(64436),o=i(8286);const l=e=>{const{propsTextField:t,propsForm:i}=e;return(0,n.jsx)(s.Z,Object.assign({},Object.assign({},i),{children:(0,n.jsx)(o.Z,Object.assign({},Object.assign({},t)),void 0)}),void 0)}},47463:(e,t,i)=>{"use strict";i.d(t,{I:()=>o});var n=i(85893),s=i(10046);const o=({children:e,height:t,width:i})=>(0,n.jsx)(s.Z,Object.assign({height:t,width:i},{children:e}),void 0)},61242:(e,t,i)=>{"use strict";i.d(t,{a:()=>u});var n=i(85893),s=i(41120),o=i(52663),l=i(66083),a=i(29525),r=i(66856),d=i(95477),c=i(282);const v=(0,s.Z)({disabledPadding:{padding:0,textAlign:"center"}}),u=({open:e,handleClose:t,handleConfirm:i,title:s,children:u,maxWidth:m="lg",disabled:h=!1,loading:g})=>{const f=v();return(0,n.jsxs)(o.Z,Object.assign({open:e,onClose:t,maxWidth:m},{children:[(0,n.jsx)(l.Z,Object.assign({className:f.disabledPadding},{children:s}),void 0),(0,n.jsx)(a.Z,{children:u},void 0),(0,n.jsx)(r.Z,{children:g?(0,n.jsx)(d.Z,{style:{width:"30px",height:"30px"}},void 0):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,Object.assign({size:"small",color:"primary",onClick:t},{children:"Cancelar"}),void 0),i&&(0,n.jsx)(c.Z,Object.assign({disabled:h,variant:"outlined",size:"small",color:"secondary",onClick:i,autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)},void 0)]}),void 0)}},2834:(e,t,i)=>{"use strict";i.d(t,{d:()=>l});var n=i(85893),s=i(282),o=i(95477);const l=e=>{var{loading:t,text:i}=e,l=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i}(e,["loading","text"]);return(0,n.jsx)(s.Z,Object.assign({},l,{disabled:t},{children:t?(0,n.jsx)(o.Z,{style:{width:"20px",height:"20px"}},void 0):i}),void 0)}},31366:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var n=i(85893),s=i(67294),o=i(41120),l=i(35117),a=i(85639),r=i(64436),d=i(26209);const c=(0,o.Z)((e=>(0,l.Z)({formControl:{margin:e.spacing(1),minWidth:"100%"},selectEmpty:{marginTop:e.spacing(2)}})));function v(e){var{placeholder:t,iteams:i,selectValue:o,value:l}=e,v=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i}(e,["placeholder","iteams","selectValue","value"]);const u=c(),[m,h]=s.useState("");return(0,s.useEffect)((()=>{h(l||"")}),[l]),(0,s.useEffect)((()=>{o(m)}),[m]),(0,n.jsx)("div",{children:(0,n.jsx)(r.Z,Object.assign({className:u.formControl},{children:(0,n.jsxs)(d.Z,Object.assign({},v,{value:m,onChange:e=>{h(e.target.value)},displayEmpty:!0,className:u.selectEmpty,inputProps:{"aria-label":`${t}`}},{children:[(0,n.jsx)(a.Z,Object.assign({value:"",disabled:!0},{children:t}),void 0),null==i?void 0:i.map((e=>(0,n.jsx)(a.Z,Object.assign({value:null==e?void 0:e.value},{children:null==e?void 0:e.tittle}),e.value)))]}),void 0)}),void 0)},void 0)}},11818:(e,t,i)=>{"use strict";i.d(t,{y:()=>o});var n=i(67294),s=i(49032);const o=e=>{const[t,i]=(0,n.useState)(!0),[o,l]=(0,n.useState)(!0),[a,r]=(0,n.useState)(!0),[d,c]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{const t=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,i;return(null===(i=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===i?void 0:i.event)===s.EnumEvent.NO_OPERATIONAL}))),n=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,i;return(null===(i=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===i?void 0:i.event)===s.EnumEvent.OPERATIONAL}))),o=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,i;return(null===(i=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===i?void 0:i.event)===s.EnumEvent.OPERATIONAL_DELAY}))),a=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,i;return(null===(i=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===i?void 0:i.event)===s.EnumEvent.MAINTENANCE}))),d=()=>0!==(null==e?void 0:e.length)&&(null==e?void 0:e.every((e=>{var t,i;return void 0===(null===(i=null===(t=null==e?void 0:e.initialEventState)||void 0===t?void 0:t.event)||void 0===i?void 0:i.event)})));i(!0),l(!0),r(!0),c(!0),n()&&(i(!1),l(!0),r(!1),c(!1)),d()&&(i(!1),l(!1),r(!1)),t()&&(i(!0),l(!1),r(!1)),o()&&(i(!1),l(!1),r(!0)),a()&&(i(!1),l(!1),r(!0),c(!0)),0==d()&&0==t()&&0==o()&&0==n()&&0==a()&&(i(!0),l(!0),r(!0),c(!0))}),[e]),[t,o,a,d]}},990:(e,t,i)=>{"use strict";i.d(t,{M:()=>s});var n=i(67294);const s=e=>{const[t,i]=(0,n.useState)(e);return[t,e=>{i(Object.assign(Object.assign({},t),{[e.target.name]:e.target.value}))},()=>{i(e)},i]}},15635:(e,t,i)=>{"use strict";i.d(t,{r:()=>o});var n=i(67294),s=i(95090);const o=e=>{const[t,i]=(0,n.useState)(!1);return(0,n.useEffect)((()=>(console.log("state",e),e===s.JD.DONE||e===s.JD.UNKNOWN||e===s.JD.ERROR?i(!1):i(!0),()=>{i(!1)})),[e]),[t]}},42627:(e,t,i)=>{"use strict";i.r(t),i.d(t,{HourmeterView:()=>o,default:()=>l});var n=i(85893),s=i(49521);const o=()=>(0,n.jsxs)("div",{children:[(0,n.jsx)(s.h,{title:"Hourmeter"},void 0),(0,n.jsx)("div",{style:{marginTop:"60px"}},void 0)]},void 0),l=o},28678:(e,t,i)=>{"use strict";i.r(t),i.d(t,{HourmeterView:()=>dt,default:()=>ct});var n=i(85893),s=i(71267),o=i(13258),l=i(41749),a=i(67162),r=i(30553),d=i(40074),c=i(282),v=i(67294),u=i(88093),m=i(73855),h=i(56731),g=i(1754),f=i(38062),j=i(29829),b=i(85639),x=i(24837),p=i(52387),E=i(81605),S=i(93584),y=i(95090),O=i(78479),T=i(49032),N=i(67774),I=i(97700);const C=43200,A=e=>{new Date;const[t]=(0,u.R)();t.getHours()>=7&&t.getHours()<19?(t.setHours(7),t.setSeconds(0),t.setMinutes(0),t.setMilliseconds(0)):(t.setHours(19),t.setSeconds(0),t.setMinutes(0),t.setMilliseconds(0));const i=((new Date).getTime()-t.getTime())/1e3;return{flex:i/C||0,time:i}},Z=e=>{if(e&&e.initialEventState&&e.initialEventState.event)switch(e.initialEventState.event.event){case T.EnumEvent.MAINTENANCE:return"#FF0000";case T.EnumEvent.OPERATIONAL:return"#069B15";case T.EnumEvent.NO_OPERATIONAL:return"#F1C012";case T.EnumEvent.OPERATIONAL_DELAY:return"#0000FF"}return"#fff"},w=e=>{switch(e){case T.EnumEvent.MAINTENANCE:return"#FF0000";case T.EnumEvent.OPERATIONAL:return"#069B15";case T.EnumEvent.NO_OPERATIONAL:return"#F1C012";case T.EnumEvent.OPERATIONAL_DELAY:return"#0000FF"}},D=e=>`${`0${e.getHours()}`.slice(-2)}:${`0${e.getMinutes()}`.slice(-2)}`;var L=i(41120),R=i(35117),F=i(89452),H=i(8286),k=i(62822),P=i(50998),z=i(95757),M=i(78721),$=i(46212),_=i(10646);const G=()=>{const{shiftSelect:e,dateShiftSelect:t}=(0,m.C)(g.yV),[i]=(0,u.R)(),[n]=(0,_.l)(i);return[{shift:e,date:`${n}T00:00`}]},U=e=>{const{historyTimelineShift:t}=(0,m.C)(g.yV),[i]=(0,_.l)(new Date),[n]=(0,_.l)(new Date((new Date).getTime()-864e5)),[s,o]=(0,v.useState)(i);return(0,v.useEffect)((()=>{var s,l,a;(null===(s=t[0])||void 0===s?void 0:s.shift)===h.Shift.NIGHT&&new Date(1e3*(null===(a=null===(l=t[0])||void 0===l?void 0:l.shiftDate)||void 0===a?void 0:a.seconds)).toLocaleDateString()===(new Date).toLocaleDateString()?o(i):parseInt(e.split(":")[0])>=19&&parseInt(e.split(":")[0])<=23?o(n):o(i)}),[e]),[s]};const V=({handlePopoverClose:e,eventSelect:t})=>{var i,s,o;const{unitSelectList:a}=(0,m.C)(g.yV),[r]=G(),d=(0,m.T)(),[u,h]=(0,v.useState)(D(new Date)),[f]=U(u),[j,b]=(0,v.useState)("");(0,v.useEffect)((()=>{var e,t;const i=1===a.length?null===(t=null===(e=a[0])||void 0===e?void 0:e.initialHourmeter)||void 0===t?void 0:t.toFixed(1):"";b(i)}),[a]);const[x,p]=(0,v.useState)(),{eventStateList:E,statusEventStateList:S}=(0,m.C)(I.eG),O=1===a.length&&(null===(o=null===(s=null===(i=a[0])||void 0===i?void 0:i.initialEventState)||void 0===s?void 0:s.event)||void 0===o?void 0:o.event)===T.EnumEvent.MAINTENANCE;return S===y.JD.LOADING?(0,n.jsx)(n.Fragment,{children:"CARGANDO..."},void 0):(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(H.Z,{label:"Entrada",type:"time",value:u,autoFocus:!0,name:"timeStart",size:"small",InputLabelProps:{shrink:!0,required:!0},onChange:e=>h(e.target.value)},void 0),O&&(0,n.jsx)(H.Z,{label:"H. salida",type:"number",name:"initialHourmeter",size:"small",value:j,style:{maxWidth:100},onChange:e=>{var t;return b(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value)},InputLabelProps:{shrink:!0}},void 0),t&&t.event!==T.EnumEvent.OPERATIONAL&&(0,n.jsx)(k.Z,{children:E.map(((e,t)=>(0,n.jsx)(P.Z,Object.assign({selected:(null==x?void 0:x.id)===e.id,dense:!0,button:!0,onClick:()=>p(e),disableGutters:!0},{children:(0,n.jsx)(z.Z,{secondary:e.name},void 0)}),t)))},void 0),(0,n.jsxs)(l.Z,Object.assign({container:!0},{children:[(0,n.jsx)(c.Z,Object.assign({onClick:e,color:"primary",variant:"outlined",size:"small"},{children:"CANCELAR"}),void 0),(0,n.jsx)(c.Z,Object.assign({disabled:!(null==x?void 0:x.id)&&t&&t.event!==T.EnumEvent.OPERATIONAL&&a.length>0,onClick:()=>{return i=void 0,n=void 0,o=function*(){var i;let n=x;t.event===T.EnumEvent.OPERATIONAL&&(n={eventState:M.EnumEventState.UNKNOWN_STATE,id:"",name:"",event:t}),n&&n.event?(O?yield(0,$.tV)({htm:j,Substatus:n,status:null===(i=null==n?void 0:n.event)||void 0===i?void 0:i.event,currentTimeline:a[0],date:f,time:u}):yield d((0,g.hd)({event:n.event,eventState:n,dateShift:f,hourStart:u})),e(),d((0,g.y1)(r))):alert("Seleccione un subestado")},new((s=void 0)||(s=Promise))((function(e,t){function l(e){try{r(o.next(e))}catch(e){t(e)}}function a(e){try{r(o.throw(e))}catch(e){t(e)}}function r(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(l,a)}r((o=o.apply(i,n||[])).next())}));var i,n,s,o},color:"secondary",variant:"contained",size:"small"},{children:"CONFIRMAR"}),void 0)]}),void 0)]},void 0)};var W=i(11818);const B=(0,L.Z)((e=>(0,R.Z)({popover:{},paper:{padding:e.spacing(1),zIndex:5}}))),K=({list:e,setOpen:t,setSelected:i,selected:s})=>{const[o,l]=(0,v.useState)(e),a={id:"",name:"NINGUNO",event:T.EnumEvent.UNKNOWN_STATE_EVENT};return(0,v.useEffect)((()=>{const t=[...e];t.unshift(a),l(t)}),[e]),(0,n.jsx)(j.Z,Object.assign({id:"split-button-menu"},{children:o.map(((e,o)=>e.event===T.EnumEvent.MAINTENANCE?null:(0,n.jsx)(b.Z,Object.assign({style:{background:w(e.event)},selected:e===s,onClick:n=>((e,n)=>{i(n),t(!1)})(0,e)},{children:e.name}),o)))}),void 0)},Y=({stateShift:e})=>{const{unitSelectList:t}=(0,m.C)(g.yV),[i,s,o]=(0,W.y)(t),l=B(),{eventList:a,statusEventList:r}=(0,m.C)(I.yJ),[d,u]=(0,O._)("MOVE_SELECT_EVENT",!1),[h,f]=(0,v.useState)(),[j,b,C]=(()=>{const{eventList:e,statusEventList:t}=(0,m.C)(I.yJ),[i,n]=(0,v.useState)(""),[s,o]=(0,v.useState)(""),[l,a]=(0,v.useState)("");return(0,v.useEffect)((()=>{var i,s,l;t===y.JD.DONE&&(n(null===(i=null==e?void 0:e.find((e=>e.event.toString()===T.EnumEvent.NO_OPERATIONAL.toString())))||void 0===i?void 0:i.name),o(null===(s=null==e?void 0:e.find((e=>e.event.toString()===T.EnumEvent.OPERATIONAL.toString())))||void 0===s?void 0:s.name),a(null===(l=null==e?void 0:e.find((e=>e.event.toString()===T.EnumEvent.OPERATIONAL_DELAY.toString())))||void 0===l?void 0:l.name))}),[t,e]),[i,s,l]})(),{historyTimelineShift:A}=(0,m.C)(g.yV),Z=(0,m.T)(),D=(0,v.useRef)(),[L,R]=(0,v.useState)(!1),[H,k]=(0,v.useState)(null),P=()=>{k(null),R(!1)},z=(e,t)=>{return i=void 0,n=void 0,o=function*(){k(e.currentTarget),yield Z((0,F.Gy)(t));const i=a.find((e=>e.event===t));u(i)},new((s=void 0)||(s=Promise))((function(e,t){function l(e){try{r(o.next(e))}catch(e){t(e)}}function a(e){try{r(o.throw(e))}catch(e){t(e)}}function r(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(l,a)}r((o=o.apply(i,n||[])).next())}));var i,n,s,o};(0,v.useEffect)((()=>{Z((0,g.Rt)()),null==A||A.map((e=>{var t,i;(null===(i=null===(t=null==e?void 0:e.eventState)||void 0===t?void 0:t.event)||void 0===i?void 0:i.event)===(null==h?void 0:h.event)&&Z((0,g.WZ)(e.currentTimeline))}))}),[h]),(0,v.useEffect)((()=>{Z((0,N.TU)())}),[]);const M=Boolean(H);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(x.Z,Object.assign({variant:"contained",color:"primary",disabled:e,ref:D,size:"small","aria-owns":M?"mouse-over-popover":void 0,"aria-label":"split button"},{children:[(0,n.jsx)(c.Z,Object.assign({style:{padding:4,margin:0,color:"#fff",fontSize:10,background:i?"grey":w(T.EnumEvent.NO_OPERATIONAL)},disabled:i,size:"small",onClick:e=>z(e,T.EnumEvent.NO_OPERATIONAL)},{children:j}),void 0),(0,n.jsx)(c.Z,Object.assign({style:{padding:4,margin:0,color:"#fff",fontSize:10,background:s?"grey":w(T.EnumEvent.OPERATIONAL)},disabled:s,size:"small",onClick:e=>z(e,T.EnumEvent.OPERATIONAL)},{children:b}),void 0),(0,n.jsx)(c.Z,Object.assign({style:{padding:4,margin:0,color:"#fff",fontSize:10,background:o?"grey":w(T.EnumEvent.OPERATIONAL_DELAY)},disabled:o,size:"small",onClick:e=>z(e,T.EnumEvent.OPERATIONAL_DELAY)},{children:C}),void 0),(0,n.jsx)(c.Z,Object.assign({color:"primary",size:"small","aria-controls":"split-button-menu","aria-expanded":"true","aria-label":"select merge strategy","aria-haspopup":"menu",onClick:()=>{R((e=>!e))},style:{padding:0,margin:0,color:"#fff",background:S.sb}},{children:(0,n.jsx)(E.Z,{fontSize:"small"},void 0)}),void 0)]}),void 0),(0,n.jsx)(p.ZP,Object.assign({open:L,anchorEl:D.current,role:void 0,id:"mouse-list-popover",className:l.popover,classes:{paper:l.paper},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:P},{children:(0,n.jsx)(K,{setOpen:R,list:r===y.JD.DONE?a:[],selected:h,setSelected:f},void 0)}),void 0),(0,n.jsx)(p.ZP,Object.assign({id:"mouse-over-popover",className:l.popover,classes:{paper:l.paper},open:M,anchorEl:H,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:P},{children:(0,n.jsx)(V,{eventSelect:d,handlePopoverClose:P},void 0)}),void 0)]},void 0)};var q=i(96617),J=i(79895),X=i(73914),Q=i(39704),ee=i(15635),te=i(19238),ie=i(28428),ne=i(63663),se=i(2834);const oe=(e,t)=>{const[i,n]=(0,v.useState)(!1);return(0,v.useEffect)((()=>{var i,s,o,l;n(!1);const a=null==e?void 0:e.find((e=>e.deviceId===t.deviceId)),r=null==a?void 0:a.historyShiftList.findIndex((e=>e.id===t.id)),d=null==a?void 0:a.historyShiftList.at(r-1);(null===(s=null===(i=null==t?void 0:t.initialEventState)||void 0===i?void 0:i.event)||void 0===s?void 0:s.event.toString())===T.EnumEvent.MAINTENANCE.toString()&&n(!0),(null===(l=null===(o=null==d?void 0:d.initialEventState)||void 0===o?void 0:o.event)||void 0===l?void 0:l.event.toString())===T.EnumEvent.MAINTENANCE.toString()&&n(!0)}),[t,e]),[i]};var le=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function l(e){try{r(n.next(e))}catch(e){o(e)}}function a(e){try{r(n.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(l,a)}r((n=n.apply(e,t||[])).next())}))};const ae=(0,X.Z)((()=>({root:{minWidth:150,padding:4,borderWidth:2,borderStyle:"solid"}}))),re=e=>{var t;const i=new Date(1e3*(null===(t=null==e?void 0:e.initialTime)||void 0===t?void 0:t.seconds)),n=(null==e?void 0:e.finalTime)?new Date(1e3*(null==e?void 0:e.finalTime.seconds)):new Date;return{timeInitial:i,timeFinal:n,hourInitial:D(i),hourFinal:D(n)}},de=({timeline:e})=>{var t,i,o,a,r,d;const c=Z(e),[u]=G(),{statusUpdateTimeline:h}=(0,m.C)(g.yV),{historyTimelineShift:f,statusDelete:j}=(0,m.C)(g.yV),[b]=(0,ee.r)(h),[x]=(0,ee.r)(j),p=(0,Q.I0)(),E=ae(),S=(0,v.useRef)(),{hourInitial:y,hourFinal:O}=re(e),[T,N]=(0,v.useState)(y),[I,C]=(0,v.useState)(null===(t=null==e?void 0:e.initialHourmeter)||void 0===t?void 0:t.toFixed(1));(0,v.useEffect)((()=>{var t;C(null===(t=null==e?void 0:e.initialHourmeter)||void 0===t?void 0:t.toFixed(1))}),[e]);const[A,w,D]=((e,t)=>{const[i,n]=(0,v.useState)(!1),[s,o]=(0,v.useState)(!0),[l,a]=(0,v.useState)(!0);return(0,v.useEffect)((()=>{var i,s,l,r;const d=e.find((e=>e.deviceId===t.deviceId));n(!1),o(!1),a(!1),(null==d?void 0:d.historyShiftList.length)>1&&(a(!0),o(!1)),(null===(s=null===(i=null==d?void 0:d.historyShiftList)||void 0===i?void 0:i.at(-1))||void 0===s?void 0:s.id)===(null==t?void 0:t.id)&&(n(!0),o(!1)),(null===(r=null===(l=null==d?void 0:d.historyShiftList)||void 0===l?void 0:l[0])||void 0===r?void 0:r.id)===(null==t?void 0:t.id)&&(n(!1),o(!0))}),[t]),[i,s,l]})(f,e),[L]=oe(f,e);(0,v.useEffect)((()=>{var t;const{hourInitial:i}=re(e);N(i),C(null===(t=null==e?void 0:e.initialHourmeter)||void 0===t?void 0:t.toFixed(1)),S.current&&setTimeout((()=>{S.current.focus()}),100)}),[e]);const R=(null==e?void 0:e.finalHourmeter)-(null==e?void 0:e.initialHourmeter),F=e=>le(void 0,void 0,void 0,(function*(){"Enter"===e.key&&k()})),k=()=>le(void 0,void 0,void 0,(function*(){var t,i;const[n,s]=T.split(":"),[o,l]=y.split(":"),a=(Number(n),Number(o),Number(s),Number(l),{});a.id=e.id,a.deviceId=e.deviceId,a.deviceAlias=e.deviceAlias,a.initialHourmeter=I,a.finalHourmeter=e.finalHourmeter,a.initialState=e.initialState,a.finalState=e.finalState,a.date=(0,te.v)(new Date),a.time=T,e.finalTime&&(a.finalTime={seconds:null===(t=e.finalTime)||void 0===t?void 0:t.seconds}),a.shiftDate={seconds:null===(i=null==e?void 0:e.shiftDate)||void 0===i?void 0:i.seconds},a.shift=e.shift,yield p((0,g.yi)(a)),p((0,g.y1)(u))}));return(0,n.jsx)(J.Z,Object.assign({elevation:4,className:E.root,style:{borderColor:c}},{children:(0,n.jsxs)(ne.T5,Object.assign({alignItems:"center",justifyContent:"center",direction:"row",style:{gap:4,alignItems:"stretch"}},{children:[(0,n.jsx)(l.Z,Object.assign({item:!0},{children:(0,n.jsxs)(l.Z,Object.assign({container:!0,direction:"column",style:{height:"100%"}},{children:[(0,n.jsx)(ne.P4,{children:(0,n.jsx)(s.Z,{size:"small",label:null==e?void 0:e.deviceAlias},void 0)},void 0),(0,n.jsx)(ne.P4,{children:(0,n.jsx)(s.Z,{style:{background:c,color:"#fff"},size:"small",label:(0,n.jsx)("span",Object.assign({style:{fontSize:9}},{children:null===(o=null===(i=null==e?void 0:e.initialEventState)||void 0===i?void 0:i.event)||void 0===o?void 0:o.name}),void 0)},void 0)},void 0),(null===(a=e.initialEventState)||void 0===a?void 0:a.name)&&(0,n.jsx)(ne.P4,{children:(0,n.jsx)(s.Z,{style:{maxWidth:150,borderWidth:2,borderStyle:"solid",borderColor:c},size:"small",label:(0,n.jsx)("span",Object.assign({style:{fontSize:9}},{children:null===(r=e.initialEventState)||void 0===r?void 0:r.name}),void 0)},void 0)},void 0),(0,n.jsx)(ne.P4,{children:(0,n.jsx)(s.Z,{size:"small",label:R>=0?`${R.toFixed(1)}h`:"..."},void 0)},void 0),(0,n.jsx)(ne.P4,{children:(0,n.jsx)(s.Z,{size:"small",label:new Date(1e3*(null===(d=null==e?void 0:e.initialTime)||void 0===d?void 0:d.seconds)).toLocaleDateString()},void 0)},void 0)]}),void 0)}),void 0),(0,n.jsx)(l.Z,Object.assign({item:!0},{children:(0,n.jsxs)(l.Z,Object.assign({container:!0,direction:"column"},{children:[(0,n.jsx)(H.Z,{label:"Entrada",type:"time",disabled:w,value:T,autoFocus:!0,onKeyDown:F,name:"timeStart",size:"small",inputRef:S,InputLabelProps:{shrink:!0,required:!0},onChange:e=>N(e.target.value)},void 0),(0,n.jsx)(H.Z,{label:"Salida",type:"time",name:"timeEnd",size:"small",disabled:!0,value:O},void 0)]}),void 0)}),void 0),(0,n.jsx)(l.Z,Object.assign({item:!0},{children:(0,n.jsxs)(l.Z,Object.assign({container:!0,direction:"column"},{children:[(0,n.jsx)(H.Z,{label:"H. inicial",type:"number",name:"initialHourmeter",size:"small",disabled:!L,onKeyDown:F,value:I,style:{maxWidth:100},onChange:e=>C(e.target.value),InputLabelProps:{shrink:!0}},void 0),(0,n.jsx)(H.Z,{label:"H. final ",name:"initialHourmeter",size:"small",disabled:!0,style:{maxWidth:100},value:e.finalHourmeter?e.finalHourmeter.toFixed(1):"...",InputLabelProps:{shrink:!0}},void 0)]}),void 0)}),void 0),!w&&(0,n.jsx)(se.d,{size:"small",variant:"contained",color:"secondary",onClick:k,text:"GUARDAR",loading:b},void 0),A&&(0,n.jsx)(se.d,{size:"small",variant:"contained",onClick:()=>le(void 0,void 0,void 0,(function*(){const t={};t.id=e.id,t.deviceId=e.deviceId,yield p((0,g.Td)(t)),p((0,g.y1)(u))})),style:{background:"rgb(154, 0, 54)",color:"white"},startIcon:(0,n.jsx)(ie.Z,{},void 0),loading:!1,text:"Borrar"},void 0)]}),void 0)}),void 0)};var ce=i(10046),ve=i(31366);const ue=({timeline:e})=>{var t,i;Z(e);const[o]=G(),a=new Date,r=`0${a.getHours()}`,d=`0${a.getMinutes()}`,u=(0,Q.I0)(),h=ae(),f=(0,v.useRef)(),[j,b]=(0,v.useState)(`${r.slice(-2)}:${d.slice(-2)}`),[x]=U(j),{eventStateList:p,statusEventStateList:E}=(0,m.C)(I.eG),[S]=function(e,t){const[i,n]=(0,v.useState)(0);return(0,v.useEffect)((()=>{var i,s,o;const l=new Date;l.setHours(Number.parseInt(e.split(":")[0])),l.setMinutes(Number.parseInt(e.split(":")[1]));const a=new Date(1e3*(null===(i=null==t?void 0:t.initialTime)||void 0===i?void 0:i.seconds));var r=(l.getTime()-a.getTime())/1e3;let d=1/60*Math.ceil(r/60);const c=t.initialHourmeter+Number.parseFloat(d);return(null===(o=null===(s=t.initialEventState)||void 0===s?void 0:s.event)||void 0===o?void 0:o.event)===T.EnumEvent.NO_OPERATIONAL?n(Number.parseFloat(t.initialHourmeter.toFixed(1))):n(Number.parseFloat(c.toFixed(1))),()=>{n(0)}}),[e,t]),[i]}(j,e),[y,O]=(0,v.useState)("");(0,v.useEffect)((()=>{setTimeout((()=>{O(S)}),100)}),[S]),(0,v.useEffect)((()=>{u((0,F.Gy)(T.EnumEvent.MAINTENANCE))}),[]);const[N,C]=v.useState();return console.log("selectValue",p),(0,n.jsx)(ce.Z,Object.assign({component:"form",onSubmit:t=>{return i=void 0,n=void 0,l=function*(){var i;t.preventDefault();const n={},s=p.find((e=>e.eventState===N));n.deviceId=null==e?void 0:e.deviceId,n.deviceAlias=null==e?void 0:e.deviceAlias,n.assetType=null==e?void 0:e.assetType,n.initialHourmeter=y,n.initialState=T.EnumEvent.MAINTENANCE,n.initialEventState=s,n.date=x,n.time=j,n.shiftDate={seconds:null===(i=null==e?void 0:e.shiftDate)||void 0===i?void 0:i.seconds},n.shift=null==e?void 0:e.shift,n.eventState=s,yield u((0,g.lY)(n)),u((0,g.y1)(o))},new((s=void 0)||(s=Promise))((function(e,t){function o(e){try{r(l.next(e))}catch(e){t(e)}}function a(e){try{r(l.throw(e))}catch(e){t(e)}}function r(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(o,a)}r((l=l.apply(i,n||[])).next())}));var i,n,s,l}},{children:(0,n.jsx)(J.Z,Object.assign({elevation:4,className:h.root,style:{borderColor:w(T.EnumEvent.MAINTENANCE)}},{children:(0,n.jsxs)(ne.T5,Object.assign({alignItems:"center",justifyContent:"center",direction:"row",style:{gap:4,alignItems:"stretch"}},{children:[(0,n.jsx)(l.Z,Object.assign({item:!0},{children:(0,n.jsxs)(l.Z,Object.assign({container:!0,direction:"column",style:{height:"100%"}},{children:[(0,n.jsx)(ne.P4,{children:(0,n.jsx)(s.Z,{size:"small",label:null==e?void 0:e.deviceAlias},void 0)},void 0),(0,n.jsx)(ne.P4,{children:(0,n.jsx)(s.Z,{style:{background:w(T.EnumEvent.MAINTENANCE),color:"#fff"},size:"small",label:(0,n.jsx)("span",Object.assign({style:{fontSize:9}},{children:null===(i=null===(t=p[0])||void 0===t?void 0:t.event)||void 0===i?void 0:i.name}),void 0)},void 0)},void 0),(0,n.jsx)(ve.Z,{required:!0,value:"",placeholder:"Estado",iteams:p.map((e=>({value:e.eventState,tittle:e.name}))),selectValue:C},void 0)]}),void 0)}),void 0),(0,n.jsx)(l.Z,Object.assign({item:!0},{children:(0,n.jsx)(l.Z,Object.assign({container:!0,direction:"column"},{children:(0,n.jsx)(H.Z,{required:!0,label:"Entrada",type:"time",value:j,autoFocus:!0,name:"timeStart",size:"small",inputRef:f,InputLabelProps:{shrink:!0,required:!0},onChange:e=>b(e.target.value)},void 0)}),void 0)}),void 0),(0,n.jsx)(l.Z,Object.assign({item:!0},{children:(0,n.jsxs)(l.Z,Object.assign({container:!0,direction:"column"},{children:[(0,n.jsx)(H.Z,{required:!0,label:"H. inicial",type:"number",name:"initialHourmeter",size:"small",value:y,style:{maxWidth:100},onChange:e=>O(e.target.value),InputLabelProps:{shrink:!0}},void 0),(0,n.jsx)(H.Z,{label:"H. final ",name:"initialHourmeter",size:"small",disabled:!0,style:{maxWidth:100},value:(null==e?void 0:e.finalHourmeter)?null==e?void 0:e.finalHourmeter.toFixed(1):"...",InputLabelProps:{shrink:!0}},void 0)]}),void 0)}),void 0),(0,n.jsx)(c.Z,Object.assign({size:"small",type:"submit",variant:"contained",color:"secondary"},{children:"GUARDAR"}),void 0)]}),void 0)}),void 0)}),void 0)},me=(0,L.Z)({layoutPopper:{position:"absolute",top:0,bottom:0,right:0,left:0,zIndex:3},arrowPopper:{width:11,height:4,background:e=>e.color,transform:"translateX(-7px) rotate(40deg)"},rootPopper:{zIndex:5,marginTop:8,marginLeft:6}}),he=()=>{var e,t;const i=(0,m.T)(),{currentTimeline:s,currentMantoTimeline:o}=(0,m.C)(g.yV),[l,a]=(0,v.useState)(null);(0,v.useEffect)((()=>{if(s){const e=document.getElementById(`state-${(null==s?void 0:s.id)?null==s?void 0:s.id:null==s?void 0:s.deviceId}`);e&&a(e),s&&i((0,g.Gf)())}}),[s]),(0,v.useEffect)((()=>{if(o){const e=document.getElementById(`stateManto-${(null==o?void 0:o.id)?null==o?void 0:o.id:null==o?void 0:o.deviceId}`);e&&a(e),o&&i((0,g.IE)())}}),[o]);const r=s?Z(s):"#fff",d=me({color:r});return l&&(s||o)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(q.Z,Object.assign({open:!!s||!!o,className:d.rootPopper,anchorEl:l,placement:"right-start"},{children:[o&&(null===(t=null===(e=o.initialEventState)||void 0===e?void 0:e.event)||void 0===t?void 0:t.event)!==T.EnumEvent.MAINTENANCE&&(0,n.jsxs)(v.Fragment,{children:[(0,n.jsx)("div",{className:d.arrowPopper},void 0),(0,n.jsx)(ue,{timeline:o},void 0)]},void 0),s&&(0,n.jsxs)(v.Fragment,{children:[(0,n.jsx)("div",{className:d.arrowPopper},void 0),(0,n.jsx)(de,{timeline:s},void 0)]},void 0)]}),void 0),(0,n.jsx)("div",{onClick:()=>{i((0,g.IE)()),i((0,g.Gf)())},className:d.layoutPopper},void 0)]},void 0):(0,n.jsx)(n.Fragment,{},void 0)};var ge=i(57163),fe=i(80936);const je=e=>{const[t,i]=(0,v.useState)(!0);return(0,v.useEffect)((()=>{i(!0),e===fe.TimelinesShiftResponse.State.CLOSED&&i(!0),e===fe.TimelinesShiftResponse.State.IN_PROGRESS&&i(!1)}),[e]),{state:t}},be=()=>{const[e,t]=(0,v.useState)({flex:0,time:0}),[i]=(0,u.R)();return(0,v.useEffect)((()=>{i.getHours()>=7&&i.getHours()<19?t(A(h.Shift.DAY)):t(A(h.Shift.NIGHT)),setInterval((()=>{i.getHours()>=7&&i.getHours()<19?t(A(h.Shift.DAY)):t(A(h.Shift.NIGHT))}),5e3)}),[]),{currentLine:e}},xe=(0,L.Z)((()=>({root:{position:"absolute",display:"flex",bottom:0,right:400,left:50,top:-4},itemHour:{flex:1,borderRightColor:"grey",borderRightWidth:1,borderRightStyle:"dashed",position:"relative"},labelItemHour:{color:"rgb(131 126 126)",position:"absolute",left:-19,top:-8,background:"white",userSelect:"none"},labelContainerHour:{zIndex:5,top:90,position:"sticky"},rootTimeline:{position:"absolute",right:0,height:"100%",left:0,display:"flex",zIndex:0},beforeTimeline:{height:0},afterTimeline:{height:0,borderRightColor:"#ccc",borderRightWidth:1,borderRightStyle:"dashed"},line:{width:1,background:S.Jx,height:"100%"},rootLine:{paddingTop:8,height:"100%"},labelTitle:{color:"rgb(131 126 126)",background:"white",userSelect:"none"},labelContainer:{top:80,position:"sticky",height:10,background:"#fafafa",width:80,zIndex:2},rootRigth:{textAlign:"center",position:"absolute",display:"flex",bottom:0,right:0,top:-14}}))),pe=({shift:e})=>{const{currentLine:t}=be(),i=xe(),s=(e=>e===h.Shift.DAY?[7,8,9,10,11,12,13,14,15,16,17,18]:[19,20,21,22,23,0,1,2,3,4,5,6])(e),o=(0,v.useMemo)((()=>s.map(((e,t)=>(0,n.jsx)("div",Object.assign({className:i.itemHour},{children:(0,n.jsx)("div",Object.assign({className:i.labelContainerHour},{children:(0,n.jsxs)("label",Object.assign({className:i.labelItemHour},{children:[`0${e}`.slice(-2),":00"]}),void 0)}),void 0)}),t)))),[s]);return(0,n.jsxs)(v.Fragment,{children:[(0,n.jsxs)(l.Z,Object.assign({className:i.root},{children:[o,(0,n.jsxs)("div",Object.assign({className:i.rootTimeline},{children:[(0,n.jsx)("div",{className:i.beforeTimeline,style:{flex:t.flex}},void 0),(0,n.jsx)("div",Object.assign({className:i.rootLine},{children:(0,n.jsx)("div",{className:i.line},void 0)}),void 0),(0,n.jsx)("div",{className:i.afterTimeline,style:{flex:1-t.flex}},void 0)]}),void 0)]}),void 0),(0,n.jsxs)(l.Z,Object.assign({className:i.rootRigth},{children:[(0,n.jsx)("div",Object.assign({className:i.labelContainer},{children:(0,n.jsx)("label",Object.assign({className:i.labelTitle},{children:"Nombre"}),void 0)}),void 0),(0,n.jsx)("div",Object.assign({className:i.labelContainer},{children:(0,n.jsx)("label",Object.assign({className:i.labelTitle},{children:"Inicial"}),void 0)}),void 0),(0,n.jsx)("div",Object.assign({className:i.labelContainer},{children:(0,n.jsx)("label",Object.assign({className:i.labelTitle},{children:"Proyectado"}),void 0)}),void 0),(0,n.jsx)("div",Object.assign({className:i.labelContainer},{children:(0,n.jsx)("label",Object.assign({className:i.labelTitle},{children:"Ajuste"}),void 0)}),void 0),(0,n.jsx)("div",Object.assign({className:i.labelContainer},{children:(0,n.jsx)("label",Object.assign({className:i.labelTitle},{children:"Final"}),void 0)}),void 0)]}),void 0)]},void 0)};var Ee=i(69741),Se=i(50743),ye=i(22318),Oe=i(61201),Te=i(64566);const Ne=e=>{const[t,i]=(0,v.useState)("");return(0,v.useEffect)((()=>{var t;const n=null===(t=null==e?void 0:e.deviceAlias)||void 0===t?void 0:t.split("-"),s=1===n.length?n[0]:`${n[0]}${n[1].slice(-2)}`;i(s)}),[e]),[t]},Ie=(0,L.Z)((()=>({rootUnitState:{height:2,position:"relative"},dotUnitState:{width:12,height:12,borderRadius:6,background:"#fff",position:"absolute",borderColor:"#6d6c6c",borderWidth:2,borderStyle:"solid",top:-5,left:-4,zIndex:5,cursor:"pointer"},dotUnitStateCurrent:{width:12,height:12,borderRadius:6,position:"absolute",top:-5,right:-5,zIndex:4,cursor:"pointer"},dotLabelHour:{fontSize:9,position:"absolute",left:-4,bottom:-15,userSelect:"none"},rootRowTimeline:{background:e=>e.indexTimeline%2!=0?"#cccccc52":"#fff","&:hover, &:focus":{backgroundColor:"#ccc"}}})));const Ce=e=>{const[t,i]=(0,v.useState)(""),n=(0,m.T)(),[s,o]=(0,v.useState)(!1),[l]=(()=>{const[e]=(0,u.R)(),[t]=(0,_.l)(e),i=`${t}T00:00`;return[{shift:h.Shift.UNKNOWN_SHIFT,date:i}]})(),{unitSelectList:a,historyTimelineShift:r}=(0,m.C)(g.yV),d=r.find((t=>t.deviceId===e.deviceId)),c=e=>{i(e)};return{editHourmeter:s,intialHourmeter:t,handleEditHourmeter:e=>{return t=void 0,i=void 0,a=function*(){var t;if("Escape"===e.key&&o(!1),"Enter"===e.key){const i=Object.assign(Object.assign({},d.historyShiftList[0]),{initialHourmeter:null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value});yield n((0,g.xe)(i)),yield n((0,g.y1)(l)),o(!1)}},new((s=void 0)||(s=Promise))((function(e,n){function o(e){try{r(a.next(e))}catch(e){n(e)}}function l(e){try{r(a.throw(e))}catch(e){n(e)}}function r(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(o,l)}r((a=a.apply(t,i||[])).next())}));var t,i,s,a},handleLabelInitialHourmeter:()=>{var t,i;o(!0),c(null===(i=null===(t=d.historyShiftList[0])||void 0===t?void 0:t.initialHourmeter)||void 0===i?void 0:i.toFixed(1)),setTimeout((()=>{const t=null==e?void 0:e.id;document.getElementById(t).focus()}),100)},handlesetIntialHourmeter:c}},Ae=(e,t,i,n)=>{if(e<0)return null;let s;const o=i?`${n}${e===t?0:e+1}`:`${n}${0===e?t:e-1}`;return s=document.getElementById(o),setTimeout((()=>{s.setSelectionRange(s.value.length,s.value.length)}),10),s&&s.disabled&&(s=null),!s&&e<t&&0!==e?Ae(i?e+1:e-1,t,i):s},Ze=(0,L.Z)((()=>({borderLeft:{borderLeftColor:"gray",borderLeftWidth:1,borderLeftStyle:"dashed",width:80,paddingLeft:4,zIndex:1},inputHourmeterFinal:{borderColor:e=>e.error?"orange":"#ccc",borderRadius:2,width:80,paddingLeft:4,zIndex:1},borderAdjustement:{borderLeftColor:"gray",borderLeftWidth:1,borderLeftStyle:"dashed",color:e=>e.errorAjustment?"red":"grey",textAlign:"center",width:80}}))),we=({currentTimeline:e,index:t,lastIndex:i,idInitial:s,timeFinal:a,setTimeFinal:r})=>{var d,c,u,h,f,j,b,x;const p=(0,m.T)(),{unitSelectList:E,historyTimelineShift:S}=(0,m.C)(g.yV),{}=be(),{error:y,textInput:N,onChangeText:I,onKeyDown:C}=(({currentState:e,setTimeFinal:t,timeFinal:i,historyTimelineShift:n})=>{const[s,o]=(0,O._)("close_shift_units",[]),[l,a]=(0,v.useState)(null),[r,d]=(0,v.useState)(""),[c,u]=(0,v.useState)(!1),[m]=oe(n,e),h=()=>s.find((t=>t.deviceId===e.deviceId));(0,v.useEffect)((()=>{const e=h();e&&(d(0===(null==e?void 0:e.hourmeter)?"":`${null==e?void 0:e.hourmeter}`),t(e.time))}),[]);return{error:c,textInput:r,setTextInput:d,timeFinal:i,setTimeFinal:t,onChangeText:i=>{const n=h();let s=i.target.value;i.target.value?s=i.target.value:(s=0===(null==n?void 0:n.hourmeter)?"":`${null==n?void 0:n.hourmeter}`,1===(null==n?void 0:n.hourmeter.toString().length)&&(s=""),void 0===n&&(s="")),m&&(s=""),d(s),t(i.target.value?(new Date).getTime()/1e3:-1),clearTimeout(l);const r=setTimeout((()=>(t=>{var i;const n=localStorage.getItem("close_shift_units"),s=n?JSON.parse(n):[],l=s.findIndex((t=>t.deviceId===e.deviceId)),a=t,r=(new Date).getTime()/1e3,d={deviceId:e.deviceId,hourmeter:a>0?a:0,time:a>0?r:0},c=[...s];-1===l?c.push(d):c[l]=d,null===(i=null==e?void 0:e.initialTime)||void 0===i||i.seconds,o(c)})(Number(s))),100);a(r)},onKeyDown:()=>{clearTimeout(l)}}})({currentState:e,setTimeFinal:r,timeFinal:a,historyTimelineShift:S}),[A]=((e,t,i)=>{const[n,s]=(0,v.useState)(""),[o]=((e,t)=>{const[i,n]=(0,v.useState)(!1);return(0,v.useEffect)((()=>{var i,s;n(!1);const o=null==e?void 0:e.find((e=>e.deviceId===t.deviceId)),l=null==o?void 0:o.historyShiftList.findIndex((e=>e.id===t.id)),a=null==o?void 0:o.historyShiftList.at(l-1);(null===(s=null===(i=null==a?void 0:a.initialEventState)||void 0===i?void 0:i.event)||void 0===s?void 0:s.event.toString())===T.EnumEvent.MAINTENANCE.toString()&&n(!0)}),[t,e]),[i]})(e,t);return(0,v.useEffect)((()=>{var e,n;(null===(n=null===(e=t.initialEventState)||void 0===e?void 0:e.event)||void 0===n?void 0:n.event)===T.EnumEvent.MAINTENANCE?s(t.initialHourmeter.toFixed(1)):s(""===i?i:"number"==typeof i?parseFloat(i).toFixed(1):i),o&&s(i)}),[i,o]),[n]})(S,e,N),[Z]=Ne(e),{editHourmeter:w,intialHourmeter:D,handleEditHourmeter:L,handleLabelInitialHourmeter:R,handlesetIntialHourmeter:F}=Ce(e),H=((e,t)=>{var i,n,s,o,l,a;if((null===(n=null===(i=e.initialEventState)||void 0===i?void 0:i.event)||void 0===n?void 0:n.event)!==T.EnumEvent.NO_OPERATIONAL&&(null===(o=null===(s=e.initialEventState)||void 0===s?void 0:s.event)||void 0===o?void 0:o.event)!==T.EnumEvent.MAINTENANCE){if(-1===t){const t=((new Date).getTime()/1e3-(null===(l=null==e?void 0:e.initialTime)||void 0===l?void 0:l.seconds))/3600;return(e.initialHourmeter+t).toFixed(1)}const i=((t||(new Date).getTime()/1e3)-(null===(a=null==e?void 0:e.initialTime)||void 0===a?void 0:a.seconds))/3600;return(e.initialHourmeter+i).toFixed(1)}return e.initialHourmeter.toFixed(1)})(e,Number(a)),k=null==S?void 0:S.find((t=>t.deviceId===e.deviceId)),P=Number(N)>0?Number(N)-(null===(c=null===(d=null==k?void 0:k.historyShiftList)||void 0===d?void 0:d.at(-1).initialHourmeter)||void 0===c?void 0:c.toFixed(1)):0,z=Ze({error:y,errorAjustment:P>=.3||P<=-.3}),M=(0,v.useCallback)((()=>E.some((t=>t.deviceId===e.deviceId))),[E]);return(0,v.useEffect)((()=>{M()&&p((0,g.Z7)(e))}),[e]),(0,v.useEffect)((()=>{var t,i;(null===(i=null===(t=e.initialEventState)||void 0===t?void 0:t.event)||void 0===i?void 0:i.event)===T.EnumEvent.MAINTENANCE?I({target:{value:e.initialHourmeter}}):I({target:{value:""}})}),[null===(h=null===(u=e.initialEventState)||void 0===u?void 0:u.event)||void 0===h?void 0:h.event]),(0,n.jsxs)(l.Z,Object.assign({style:{width:400,display:"flex",textAlign:"center"}},{children:[(0,n.jsxs)("label",Object.assign({style:{width:30,userSelect:"none",flex:2}},{children:[(0,n.jsx)(o.Z,{onClick:()=>{p((0,g.WZ)(e))},checked:M(),style:{padding:0,flex:1,zIndex:1},size:"small"},void 0),Z]}),void 0),!w&&(0,n.jsx)("label",Object.assign({className:z.borderLeft,onDoubleClick:R},{children:null===(j=null===(f=null==k?void 0:k.historyShiftList[0])||void 0===f?void 0:f.initialHourmeter)||void 0===j?void 0:j.toFixed(1)}),void 0),w&&(0,n.jsx)("input",{id:e.id,className:z.borderLeft,type:"number",value:D,onChange:e=>F(e.currentTarget.value),name:"hourmeterInitial",onKeyUp:e=>L(e)},void 0),(0,n.jsx)("label",Object.assign({className:z.borderLeft},{children:H}),void 0),(0,n.jsx)("label",Object.assign({className:z.borderAdjustement},{children:Number(N).toFixed(1)?P.toFixed(1):"...."}),void 0),(0,n.jsx)("input",{id:`${s}${t}`,className:z.inputHourmeterFinal,disabled:(null===(x=null===(b=e.initialEventState)||void 0===b?void 0:b.event)||void 0===x?void 0:x.event)===T.EnumEvent.MAINTENANCE,value:A,type:"text",pattern:"[0-9]+([.,][0-9]+)?",onChange:e=>{return""===(t=e.currentTarget.value)&&I({target:{value:t}}),void(!isNaN(parseFloat(t))&&isFinite(t)&&I({target:{value:t}}));var t},autoComplete:"off",onKeyDown:n=>{let o=null;switch(n.key){case"ArrowDown":o=Ae(t,i,!0,s),I({target:{value:N}});break;case"ArrowUp":o=Ae(t,i,!1,s),I({target:{value:N}});break;case"Enter":o=Ae(t,i,!0,s),p((0,g.r6)({hourmeter:n.value,deviceId:e.deviceId})),I({target:{value:N}});break;default:C()}o&&o.focus()},placeholder:e.deviceAlias},void 0)]}),void 0)},De=({currentTimeline:e,timeFinal:t})=>{var i,s;const o=(0,m.T)(),{}=be(),a=Ie({}),r=new Date(1e3*(null===(i=null==e?void 0:e.initialTime)||void 0===i?void 0:i.seconds)).getMinutes(),[d,c]=(0,v.useState)(((t>0?t:(new Date).getTime()/1e3)-(null===(s=null==e?void 0:e.initialTime)||void 0===s?void 0:s.seconds))/C);(0,v.useEffect)((()=>{var i;c(((t>0?t:(new Date).getTime()/1e3)-(null===(i=null==e?void 0:e.initialTime)||void 0===i?void 0:i.seconds))/C);const n=setInterval((()=>{var i;c(((t>0?t:(new Date).getTime()/1e3)-(null===(i=null==e?void 0:e.initialTime)||void 0===i?void 0:i.seconds))/C)}),5e3);return()=>{window.clearInterval(n)}}),[e]);const u=Z(e);return(0,n.jsxs)("div",Object.assign({className:a.rootUnitState,style:{flex:d||0,background:u}},{children:[(0,n.jsx)(l.Z,{className:a.dotUnitState,onMouseEnter:()=>o((0,g.Sf)(e)),style:{flex:d||0,borderColor:Z(e)},id:`state-${e.id?e.id:e.deviceId}`},void 0),r?(0,n.jsx)("label",Object.assign({className:a.dotLabelHour},{children:`0${r}`.slice(-2)}),void 0):(0,n.jsx)(n.Fragment,{},void 0),(0,n.jsx)(l.Z,{className:a.dotUnitStateCurrent,id:`stateManto-${e.id?e.id:e.deviceId}`,onMouseEnter:()=>o((0,g.MD)(e)),style:{background:u}},void 0)]}),void 0)},Le=({currentTimeline:e})=>{const[t]=(e=>{const[t]=(0,u.R)(),[i,n]=(0,v.useState)(0);return(0,v.useEffect)((()=>{var i;t.getHours()>=7&&t.getHours()<19?(t.setHours(7),t.setMinutes(0),t.setSeconds(0)):(t.setHours(19),t.setMinutes(0),t.setSeconds(0));const s=(new Date).getTime()/1e3,o=null===(i=null==e?void 0:e.initialTime)||void 0===i?void 0:i.seconds,l=o>s?o:s;return n((t.getTime()/1e3-l)/C),()=>{}}),[e]),[i]})(e),[i]=(e=>{const{}=be(),[t,i]=(0,v.useState)("#ccc");return(0,v.useEffect)((()=>{var t;(null===(t=e.initialEventState)||void 0===t?void 0:t.eventState)===M.EnumEventState.CHANGE_OF_SHIFT&&i(Z(e)),i("#ccc")}),[e]),[t]})(e);return(0,n.jsx)("div",Object.assign({style:{flex:t,height:12,display:"flex",alignItems:"center"}},{children:(0,n.jsx)("div",{style:{width:"100%",background:i,height:1}},void 0)}),void 0)},Re=({state:e,line:t,setState:i})=>{const s=(0,m.T)(),{currentTimeline:o}=(0,Q.v9)(g.yV),a=Ie({}),r=(0,v.useRef)(),d=(0,v.useCallback)((()=>{s((0,g.Sf)(e))}),[e]);return(0,v.useEffect)((()=>{(null==o?void 0:o.id)===e.id&&s((0,g.Sf)(e))}),[e]),(0,n.jsx)(l.Z,{id:`state-${e.id?e.id:e.deviceId}`,className:a.dotUnitState,onMouseEnter:d,ref:r,style:{borderColor:Z(e)}},void 0)},Fe=({state:e})=>{var t;const[i,s]=(0,v.useState)(e),[o]=(e=>{const[t,i]=(0,v.useState)(0);return(0,v.useEffect)((()=>{var t,n;i((null==e?void 0:e.finalTime)?(null===(t=null==e?void 0:e.finalTime)||void 0===t?void 0:t.seconds)-(null===(n=null==e?void 0:e.initialTime)||void 0===n?void 0:n.seconds):0)}),[e]),[t]})(i);(0,v.useEffect)((()=>{s(e)}),[e]);const l=(0,v.useRef)(),a=new Date(1e3*(null===(t=null==i?void 0:i.initialTime)||void 0===t?void 0:t.seconds)).getMinutes(),r=Ie({});return(0,n.jsxs)("div",Object.assign({className:r.rootUnitState,style:{flex:o/C,zIndex:4,background:Z(i)},ref:l},{children:[(0,n.jsx)(Re,{state:i,line:l,setState:s},void 0),a?(0,n.jsx)("label",Object.assign({className:r.dotLabelHour},{children:`0${a}`.slice(-2)}),void 0):(0,n.jsx)(n.Fragment,{},void 0)]}),void 0)},He=({states:e,currentTimeline:t,timeFinal:i})=>{const[s,o]=(0,v.useState)(t);return(0,v.useEffect)((()=>{o(t)}),[s,e]),e?(0,n.jsx)(l.Z,Object.assign({item:!0,style:{flex:1,marginTop:2,marginBottom:2}},{children:(0,n.jsxs)(ne.T5,Object.assign({alignItems:"center"},{children:[null==e?void 0:e.map(((e,t)=>(null==e?void 0:e.id)!==(null==s?void 0:s.id)&&(0,n.jsx)(Fe,{state:e},t))),(0,n.jsx)(De,{currentTimeline:s,timeFinal:i},void 0),(0,n.jsx)(Le,{currentTimeline:s},void 0)]}),void 0)}),void 0):(0,n.jsx)(n.Fragment,{},void 0)},ke=({index:e,lastIndex:t,timeline:i,idInitial:s})=>{const[o,a]=(0,v.useState)(-1),[r]=Ne(i),d=Ie({indexTimeline:e});return(0,n.jsxs)(l.Z,Object.assign({container:!0,direction:"row",alignItems:"center",className:d.rootRowTimeline},{children:[(0,n.jsx)("label",Object.assign({style:{width:50,userSelect:"none"}},{children:r}),void 0),(0,n.jsx)(He,{setTimeFinal:a,timeFinal:o,states:i.historyShiftList,currentTimeline:i.currentTimeline},e),(0,n.jsx)(we,{states:i.historyShiftList,currentTimeline:i.currentTimeline,index:e,idInitial:s,lastIndex:t,timeFinal:o,setTimeFinal:a},void 0)]}),e)},Pe=(0,L.Z)((e=>(0,R.Z)({root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},muiAccordionDetails:{padding:0},muiAccordionSummary:{}}))),ze=({historyTimelineShift:e,title:t})=>{const i=Pe(),[s,o]=(0,v.useState)(t);return(0,n.jsx)("div",Object.assign({className:i.root},{children:(0,n.jsxs)(Ee.Z,Object.assign({expanded:s===t,onChange:(a=t,(e,t)=>{o(!!t&&a)})},{children:[(0,n.jsx)(Se.Z,Object.assign({style:{zIndex:1},expandIcon:(0,n.jsx)(Te.Z,{},void 0),"aria-controls":`${t}-content`,id:`${t}-header`,className:i.muiAccordionSummary},{children:(0,n.jsx)(ye.Z,Object.assign({className:i.heading},{children:t}),void 0)}),void 0),(0,n.jsx)(Oe.Z,Object.assign({className:i.muiAccordionDetails},{children:(0,n.jsx)(l.Z,Object.assign({container:!0,style:{position:"relative",paddingTop:8,borderColor:"#000"}},{children:(null==e?void 0:e.length)>0&&s===t&&(null==e?void 0:e.map(((i,s)=>i.currentTimeline&&(0,n.jsx)(ke,{index:s,lastIndex:(null==e?void 0:e.length)-1,timeline:i,idInitial:t},`${i.deviceId}-${s}`))))}),void 0)}),void 0)]}),void 0)}),void 0);var a},Me=({shift:e})=>{const{trucks:t,excavators:i,yellowMaquinary:s}=(()=>{const{historyTimelineShift:e,statusGetTimeline:t,statusCreateTimeline:i}=(0,m.C)(g.yV),[n,s]=(0,v.useState)([]),[o,l]=(0,v.useState)([]),[a,r]=(0,v.useState)([]);return(0,v.useEffect)((()=>{const t=e.filter((e=>e.assetType===ge.EnumAssetType.TRUCK));s(t);const i=e.filter((e=>e.assetType===ge.EnumAssetType.EXCAVATOR));l(i);const n=e.filter((e=>e.assetType!=ge.EnumAssetType.EXCAVATOR&&e.assetType!=ge.EnumAssetType.TRUCK));r(n)}),[e]),{trucks:n,excavators:o,yellowMaquinary:a}})(),{stateShift:o}=(0,m.C)(g.yV),{state:a}=je(o);return(0,n.jsxs)(l.Z,Object.assign({container:!0,style:{position:"relative",paddingTop:8,borderColor:"#000"}},{children:[a&&(0,n.jsx)("div",{style:{position:"absolute",background:"#51515124",width:"100%",height:"100%",zIndex:999}},void 0),t.length>0&&(0,n.jsx)(ze,{historyTimelineShift:t,title:"camiones"},void 0),i.length>0&&(0,n.jsx)(ze,{historyTimelineShift:i,title:"excavadoras"},void 0),s.length>0&&(0,n.jsx)(ze,{historyTimelineShift:s,title:"otra maquinaria"},void 0),(0,n.jsx)(he,{},void 0),(0,n.jsx)(pe,Object.assign({},{shift:e}),void 0)]}),void 0)};var $e=i(60702),_e=i(44562);const Ge=({error:e,index:t})=>{const[i,s]=v.useState(!0),[o,l]=v.useState({vertical:"bottom",horizontal:"right"}),{vertical:a,horizontal:r}=o,d=(e,t)=>{"clickaway"!==t&&s(!1)};return(0,n.jsx)($e.Z,Object.assign({anchorOrigin:{vertical:a,horizontal:r},open:i,onClose:d,style:{marginBottom:60*t+"px"}},{children:(0,n.jsx)(_e.Z,Object.assign({style:{marginTop:".5rem"},onClose:d,severity:"error"},{children:(0,n.jsx)("strong",{children:e.message},void 0)}),void 0)}),void 0)},Ue=({error:e})=>{const[t,i]=v.useState({open:!0,vertical:"bottom",horizontal:"right"}),{vertical:s,horizontal:o,open:l}=t,a=()=>{i(Object.assign(Object.assign({},t),{open:!1}))};return(0,n.jsx)($e.Z,Object.assign({open:!0,anchorOrigin:{vertical:s,horizontal:o}},{children:(0,n.jsx)("div",{children:null==e?void 0:e.map(((e,t)=>(0,n.jsx)(Ge,{error:e,handleClose:a,index:t},e.deviceId)))},void 0)}),void 0)};var Ve=i(25281),We=i(34250),Be=i(43856),Ke=i(8920),Ye=i(18334);const qe=(0,L.Z)((e=>(0,R.Z)({root:{backgroundColor:e.palette.background.paper,width:500,position:"relative",minHeight:200},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)},fabGreen:{color:e.palette.common.white,backgroundColor:Ye.Z[500],"&:hover":{backgroundColor:Ye.Z[600]}}}))),Je=()=>{qe();const e=(0,Ke.Z)(),{dateShiftSelect:t}=(0,m.C)(g.yV),[i]=(0,_.l)(new Date(t)),s=(0,m.T)(),[o,l]=(0,v.useState)(!1);return e.transitions.duration.enteringScreen,e.transitions.duration.leavingScreen,(0,n.jsxs)(v.Fragment,{children:[(0,n.jsx)(We.Z,{visible:!0,actionClick:()=>{l((e=>!e))},Icon:Ve.Z,disabled:!1,color:"secondary",right:70,title:"Desplegar"},void 0),o&&(0,n.jsxs)(v.Fragment,{children:[(0,n.jsx)(We.Z,{visible:!0,actionClick:function(){const e={dateStart:`${i}T00:00`,dateEnd:`${i}T00:00`};s((0,g.LO)(e))},Icon:Be.Z,disabled:!1,color:"secondary",right:120,title:"Descargar Excel de horometros"},void 0),(0,n.jsx)(We.Z,{visible:!0,actionClick:function(){const e={dateStart:`${i}T00:00`,dateEnd:`${i}T00:00`};s((0,g.g7)(e))},Icon:Be.Z,disabled:!1,color:"secondary",right:170,title:"Descargar Excel de horometros historico"},void 0)]},void 0)]},void 0)};var Xe=i(990),Qe=i(7258);const et=({setForms:e})=>{const[t,i]=v.useState(),[s,o]=v.useState(),[a]=(0,_.l)(new Date),[r]=(0,_.l)(new Date((new Date).getTime()-3456e5)),[d]=(0,_.l)(new Date),[c,u,m,g]=(0,Xe.M)({guard:Qe.EnumGuard.UNKNOWN_GUARD,shift:h.Shift.UNKNOWN_SHIFT,shiftDate:d}),{shiftDate:f}=c;return(0,v.useEffect)((()=>{g(Object.assign(Object.assign({},c),{shift:s,guard:t}))}),[t,s]),(0,v.useEffect)((()=>(e(c),()=>{})),[c]),(0,n.jsx)(v.Fragment,{children:(0,n.jsx)(ce.Z,Object.assign({component:"form",sx:{mt:1}},{children:(0,n.jsxs)(l.Z,Object.assign({container:!0,spacing:2,justifyContent:"space-between"},{children:[(0,n.jsx)(l.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,n.jsx)(ve.Z,{required:!0,placeholder:"Turno",iteams:[{value:h.Shift.DAY,tittle:"Dia"},{value:h.Shift.NIGHT,tittle:"Noche"}],selectValue:o},void 0)}),void 0),(0,n.jsx)(l.Z,Object.assign({item:!0,xs:12,sm:12,md:6},{children:(0,n.jsx)(ve.Z,{required:!0,placeholder:"Guardia",iteams:[{value:Qe.EnumGuard.A,tittle:"A"},{value:Qe.EnumGuard.B,tittle:"B"},{value:Qe.EnumGuard.C,tittle:"C"}],selectValue:i},void 0)}),void 0),(0,n.jsx)(l.Z,Object.assign({item:!0,xs:12,sm:12,md:12},{children:(0,n.jsx)(H.Z,{style:{textAlign:"center"},variant:"outlined",onChange:u,value:f,disabled:!0,margin:"normal",required:!0,fullWidth:!0,id:"shiftDate",type:"date",name:"shiftDate",inputProps:{min:`${r}`,max:`${a}`},autoFocus:!0},void 0)}),void 0)]}),void 0)}),void 0)},void 0)};var tt=i(61242);const it=()=>{const e=(0,m.T)(),{stateShift:t}=(0,m.C)(g.yV),[i,s]=(0,v.useState)(!1),[o,l]=(0,v.useState)(),[a]=(e=>{const[t,i]=(0,v.useState)(!1);return(0,v.useEffect)((()=>{for(var[t,n]of Object.entries(null==e?{}:e)){if(0==n){i(!0);break}i(!1);break}}),[e]),[t]})(o);return(0,n.jsxs)(v.Fragment,{children:[t===(null===fe.TimelinesShiftResponse||void 0===fe.TimelinesShiftResponse?void 0:fe.TimelinesShiftResponse.State.CLOSED)&&(0,n.jsx)(c.Z,Object.assign({color:"secondary",size:"small",variant:"outlined",onClick:()=>{s(!0)}},{children:"INICIAR TURNO"}),void 0),(0,n.jsx)(tt.a,Object.assign({open:i,handleClose:()=>{s(!1)},title:"Creación del turno para horometros",disabled:a,handleConfirm:()=>{const t=Object.assign(Object.assign({},o),{assetType:ge.EnumAssetType.UNKNOWN_ASSET_TYPE});e((0,g.Z3)(t)),localStorage.removeItem("close_shift_units"),s(!1)}},{children:(0,n.jsx)(et,{setForms:l},void 0)}),void 0)]},void 0)},nt=()=>{const{historyTimelineShift:e,guardShift:t,stateShift:i}=(0,m.C)(g.yV),s=(e=>{switch(e){case Qe.EnumGuard.A:return"A";case Qe.EnumGuard.B:return"B";case Qe.EnumGuard.C:return"C";case Qe.EnumGuard.UNKNOWN_GUARD:return"DESCONOCIDO"}})(t),o=i===(null===fe.TimelinesShiftResponse||void 0===fe.TimelinesShiftResponse?void 0:fe.TimelinesShiftResponse.State.CLOSED)?"CERRADO":"EN PROGRESO";return(0,n.jsx)(n.Fragment,{children:0===(null==e?void 0:e.length)?(0,n.jsx)(n.Fragment,{},void 0):(0,n.jsxs)(ye.Z,Object.assign({variant:"subtitle1"},{children:["GUARDIA ",s," - TURNO: ",o]}),void 0)},void 0)};var st=i(71308);const ot=new Date,lt=({stateShift:e})=>{const t=(0,m.T)();return(0,n.jsx)(s.Z,{avatar:(0,n.jsx)(o.Z,{disabled:e,onClick:()=>{t((0,g.IT)())},size:"small"},void 0),label:"Todos"},void 0)},at=()=>{const e=(0,m.T)(),[t]=(0,u.R)(),{dateShiftSelect:i,shiftSelect:s,timelineErrorList:o,stateShift:j,statusGetTimeline:b}=(0,m.C)(g.yV),{state:x}=je(j),[p]=(0,ee.r)(b),[E,S]=(0,v.useState)(!1),y=new Date(ot.getTime()-26784e5),[O]=(0,_.l)(new Date(i));(0,v.useEffect)((()=>{e((0,g.tp)(t.getTime()))}),[t.getDate()]);const T=t=>{e((0,g.Nx)(t))};return(0,v.useEffect)((()=>{t.getHours()>=7&&t.getHours()<19?e((0,g.Nx)(h.Shift.DAY)):e((0,g.Nx)(h.Shift.NIGHT))}),[]),(0,v.useEffect)((()=>{const t={shift:s,date:`${O}T00:00`};e((0,g.y1)(t))}),[O,s]),(0,n.jsxs)(l.Z,Object.assign({container:!0,direction:"row"},{children:[(0,n.jsx)(l.Z,Object.assign({item:!0,lg:12,md:12,xs:12,style:{background:"#dbdbdb"}},{children:(0,n.jsx)(f.M,{startDate:y,days:31,marked:[{}],selectDate:new Date(i),getSelectedDay:t=>{e((0,g.tp)(t.getTime()))},color:"#024e8c"},void 0)}),void 0),(0,n.jsxs)(l.Z,Object.assign({item:!0,lg:12,md:12,xs:12},{children:[(0,n.jsxs)(l.Z,Object.assign({container:!0,style:{marginBottom:16,marginTop:8,gap:4,position:"sticky",zIndex:6,top:50,background:"rgb(255,255,255)"},justifyContent:"space-between"},{children:[(0,n.jsx)(l.Z,Object.assign({item:!0},{children:(0,n.jsxs)(a.Z,Object.assign({row:!0,"aria-label":"shift",name:"shift",value:s,style:{marginRight:8}},{children:[(0,n.jsx)(r.Z,{value:h.Shift.DAY,control:(0,n.jsx)(d.Z,{style:{padding:0},size:"small",color:"primary"},void 0),label:"Día",onClick:()=>T(h.Shift.DAY),labelPlacement:"start"},void 0),(0,n.jsx)(r.Z,{value:h.Shift.NIGHT,control:(0,n.jsx)(d.Z,{style:{padding:0},size:"small",color:"primary"},void 0),label:"Noche",onClick:()=>T(h.Shift.NIGHT),labelPlacement:"start"},void 0)]}),void 0)}),void 0),(0,n.jsx)(l.Z,Object.assign({item:!0},{children:(0,n.jsx)(nt,{},void 0)}),void 0),(0,n.jsxs)(l.Z,Object.assign({item:!0},{children:[(0,n.jsx)(it,{},void 0),(0,n.jsx)(Y,{stateShift:x},void 0),(0,n.jsx)(lt,{stateShift:x},void 0),(0,n.jsx)(c.Z,Object.assign({color:"secondary",size:"small",disabled:x,variant:"outlined",onClick:()=>{S(!0)}},{children:"CERRAR TURNO"}),void 0)]}),void 0)]}),void 0),p?(0,n.jsx)(st.g,{},void 0):(0,n.jsx)(Me,Object.assign({},{shift:s}),void 0)]}),void 0),(0,n.jsx)(tt.a,{open:E,handleClose:()=>{S(!1)},handleConfirm:()=>{return t=void 0,n=void 0,l=function*(){yield e((0,g.g1)({shiftDateString:new Date(i).toString(),shift:s})),localStorage.removeItem("close_shift_units"),location.reload()},new((o=void 0)||(o=Promise))((function(e,i){function s(e){try{r(l.next(e))}catch(e){i(e)}}function a(e){try{r(l.throw(e))}catch(e){i(e)}}function r(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o((function(e){e(i)}))).then(s,a)}r((l=l.apply(t,n||[])).next())}));var t,n,o,l},title:"¿Estas seguro de cerrar turno?",children:(0,n.jsxs)(_e.Z,Object.assign({severity:"warning"},{children:["Una vez cerrado el turno no se podra modificar"," "]}),void 0)},void 0),(0,n.jsx)("div",Object.assign({style:{zIndex:9999}},{children:(0,n.jsx)(Je,{},void 0)}),void 0),!(null==o?void 0:o.success)&&(0,n.jsx)(Ue,{error:null==o?void 0:o.errorsList},void 0)]}),void 0)};var rt=i(49521);const dt=()=>(0,n.jsxs)("div",{children:[(0,n.jsx)(rt.h,{title:"Linea de tiempo"},void 0),(0,n.jsx)("div",Object.assign({style:{marginTop:"48px"}},{children:(0,n.jsx)(at,{},void 0)}),void 0)]},void 0),ct=dt}}]);