(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[408],{86905:(e,t,s)=>{e.exports=s.p+"322f531ddb14529b83bd73182d28de44.png"},77501:(e,t,s)=>{e.exports=s.p+"89f059a2790e391b484a369a3b9f92fb.png"},51790:(e,t,s)=>{e.exports=s.p+"20557549695e4a02b8f5e299c9687642.png"},39080:(e,t,s)=>{e.exports=s.p+"2b28f15b184b6ab80c65d257a47c790c.png"},79800:(e,t,s)=>{"use strict";s.d(t,{H:()=>a});const a=e=>{e.current.loadImage(s(51790),(function(t,s){if(t)throw t;e.current.addImage("truck_nav",s)})),e.current.loadImage(s(86905),(function(t,s){if(t)throw t;e.current.addImage("excavator_nav",s)})),e.current.loadImage(s(39080),(function(t,s){if(t)throw t;e.current.addImage("truck_red",s)})),e.current.loadImage(s(77501),(function(t,s){if(t)throw t;e.current.addImage("pickup_nav",s)}))}},16886:(e,t,s)=>{"use strict";s.d(t,{N:()=>n});var a=s(85893),i=s(67294);const n=({excavatorListClass:e,excavatorList:t})=>((0,i.useEffect)((()=>{e.addToMap()}),[]),(0,i.useEffect)((()=>{e.updateInMap()}),[t]),(0,a.jsx)(a.Fragment,{}))},26271:(e,t,s)=>{"use strict";s.d(t,{b:()=>r});var a=s(85893),i=s(67294),n=s(6777);const r=({truckListClass:e,truckList:t})=>(n.ET,(0,i.useEffect)((()=>{e.addToMap()}),[]),(0,i.useEffect)((()=>{e.updateInMap()}),[t]),(0,a.jsx)(a.Fragment,{}))},74248:(e,t,s)=>{"use strict";s.d(t,{f:()=>n});var a=s(67294),i=s(52573);const n=({polygonList:e,idSource:t,idLayer:s,idSourceCentroid:n,idLayerCentroid:r,map:o,haveCentroid:l,onClickFeature:c})=>((0,a.useEffect)((()=>{const a=new i.z(e,o,t,s,n,r,c,l);return a.addToMap(),()=>{a.removeOfMap()}}),[e]),null)},87559:(e,t,s)=>{"use strict";s.d(t,{h:()=>l});var a=s(85893),i=s(52387),n=s(73637),r=s(67294),o=s(80324);const l=({children:e,header:t})=>{const[s,l]=r.useState(null),c=()=>{l(null)},d=Boolean(s),u=d?"transitions-popper":void 0;return(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)(o.Z,{setAnchorEl:l,anchorEl:s,childen:t}),(0,a.jsx)(i.ZP,Object.assign({id:u,open:d,anchorEl:s,onClick:c,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}},{children:(0,a.jsx)(n.Z,{children:e})}))]})}},80324:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(85893);const i=({anchorEl:e,setAnchorEl:t,childen:s})=>(0,a.jsx)("div",Object.assign({onClick:s=>{t(e?null:s.currentTarget)}},{children:s}))},14276:(e,t,s)=>{"use strict";s.d(t,{c:()=>a});class a{constructor(e,t,s,a,i,n){this.unitsList=e,this.map=t,this.idSource=s,this.idLayer=a,this.iconImagen=i,this.offsetY=-2.1,this.fontSize=9,this.onClickElement=n}getInMap(){return this.map.getSource(this.idSource)}generateFeatures(){return this.unitsList.map((e=>{if(e.sensor){const{latitude:t,longitude:s,direction:a}=e.sensor,i=e.deviceAlias.split("-"),n=i.length>1&&""!==i[1].trim()?`${i[0].substr(0,1)}${i[1].slice(-2)}`:e.deviceAlias;return{type:"Feature",geometry:{type:"Point",coordinates:[s,t]},properties:{deviceId:e.deviceId,rotate:a,name:`${n}`,rotation:-180+a,offsetdata:[0,0]}}}}))}addToMap(){!this.getInMap()&&this.unitsList.length>0&&(this.map.addSource(this.idSource,{type:"geojson",data:{type:"FeatureCollection",features:this.generateFeatures()}}),this.map.addLayer({id:this.idLayer,type:"symbol",source:this.idSource,layout:{"icon-image":this.iconImagen,"icon-size":["interpolate",["linear"],["zoom"],14,.06,20,.3],"icon-ignore-placement":!0,"icon-allow-overlap":!0,"icon-rotate":["get","rotate"]}}),this.map.addLayer({id:`LABEL_${this.idLayer}`,type:"symbol",source:this.idSource,layout:{"text-field":["get","name"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":["interpolate",["linear"],["zoom"],14,8,20,18],"text-rotate":["get","rotation"],"text-offset":["get","offsetdata"],"text-allow-overlap":!0},paint:{"text-color":"#fff","text-halo-color":"#00296b","text-halo-width":4}}),this.map.on("click",this.idLayer,(e=>{this.onClickElement&&this.onClickElement(e)})),this.map.on("mouseenter",this.idLayer,(()=>{this.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave",this.idLayer,(()=>{this.map.getCanvas().style.cursor=""})))}updateInMap(){const e=this.getInMap();e?e.setData({type:"FeatureCollection",features:this.generateFeatures()}):this.addToMap()}removeOfMap(){this.getInMap()&&(this.map.removeLayer(this.idLayer),this.map.removeLayer(`LABEL_${this.idLayer}`),this.map.removeSource(this.idSource))}}},52573:(e,t,s)=>{"use strict";s.d(t,{z:()=>i});var a=s(35573);class i{constructor(e,t,s,a,i,n,r,o){this.polygonList=e,this.map=t,this.idSource=s,this.idLayer=a,this.idSourceCentroid=i,this.idLayerCentroid=n,this.fontSize=9,this.onClickElement=r,this.haveCentroid=o}getInMap(){return this.map.getSource(this.idSource)}getCenterInMap(){return this.map.getSource(this.idSourceCentroid)}generateCentroids(){return this.polygonList.map((e=>{var t,s,a;if(!e.centroid)return{type:"Feature",geometry:{type:"Point",coordinates:[0,0]},properties:{}};const{latitude:i,longitude:n}=e.centroid;return{type:"Feature",geometry:{type:"Point",coordinates:[n,i]},properties:{name:`${e.name}${e.material?`-${e.material.type}`:""}`,points_polygonTajo:e.pointList.map((e=>[e.longitude,e.latitude])),name_polygon:e.name,name_material:null===(t=e.material)||void 0===t?void 0:t.type,id_polygonTajo:e.id,agTajo:e.ag,agcnTajo:e.agcn,alteTajo:e.alte,asTajo:e.as,auTajo:e.au,auchTajo:e.auch,altitudeTajo:e.altitude,descripcionTajo:"",heightTajo:e.height,litoTajo:e.litio,materialTajo:null===(s=e.material)||void 0===s?void 0:s.type,namePolTajo:e.name,nameProjectTajo:e.nameProject,onzasTajo:e.onzas,orezonetTajo:e.orezonet,ptaucnTajo:e.ptaucn,sTajo:e.s,tonnesTajo:e.tonnes,volumeTajo:e.volume,nameDme:`${e.name}`,points_polygonDme:e.pointList.map((e=>[e.longitude,e.latitude])),id_polygonDme:e.id,tonnesDme:e.tonnes,volumeDme:e.volume,namePad:`${e.name}`,id_Pad:`${e.id}_pad`,points_Pad:e.pointList.map((e=>[e.longitude,e.latitude])),tonnesPad:e.tonnes,volumePad:e.volume,nameStock:`${e.name}`,id_polygonStock:e.id,points_polygonStock:e.pointList.map((e=>[e.longitude,e.latitude])),materialStock:null===(a=e.material)||void 0===a?void 0:a.type,altitudeStock:e.altitude,volumeStock:e.volume}}}))}generateFeatures(){return this.polygonList.map((e=>({type:"Feature",properties:{color:a.O[e.color]?a.O[e.color].hex:e.color,out_color:"blue",opacity:this.haveCentroid?1:.2,opacity_border:1},geometry:{type:"Polygon",coordinates:[e.pointList.map((e=>[e.longitude,e.latitude,e.altitude]))]}})))}addToMap(){!this.getInMap()&&this.polygonList.length>0?(this.map.getSource(this.idSource)||this.map.addSource(this.idSource,{type:"geojson",data:{type:"FeatureCollection",features:this.generateFeatures()}}),this.map.getLayer(this.idLayer)||this.map.addLayer({id:this.idLayer,type:"fill",source:this.idSource,paint:{"fill-color":["get","color"],"fill-outline-color":["get","out_color"],"fill-opacity":["get","opacity"]}}),this.map.getLayer(`BORDER_${this.idLayer}`)||this.map.addLayer({id:`BORDER_${this.idLayer}`,type:"line",source:this.idSource,paint:{"line-color":["get","out_color"],"line-width":2,"line-opacity":["get","opacity_border"]},filter:["==","$type","Polygon"]}),this.haveCentroid&&(this.map.getSource(this.idSourceCentroid)||this.map.addSource(this.idSourceCentroid,{type:"geojson",data:{type:"FeatureCollection",features:this.generateCentroids()}}),this.map.getLayer(this.idLayerCentroid)||this.map.addLayer({id:this.idLayerCentroid,type:"symbol",source:this.idSourceCentroid,layout:{"text-field":["get","name"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":this.fontSize},paint:{"text-color":"#00296b","text-halo-color":"#f8f7ff","text-halo-width":2}})),this.map.on("click",this.idLayerCentroid,(e=>{this.onClickElement&&this.onClickElement(e)})),this.map.on("mouseenter",this.idLayerCentroid,(()=>{this.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave",this.idLayerCentroid,(()=>{this.map.getCanvas().style.cursor=""}))):this.getInMap()&&this.updateInMap()}updateInMap(){const e=this.getInMap();e?e.setData({type:"FeatureCollection",features:this.generateFeatures()}):this.addToMap()}removeOfMap(){this.getInMap()&&(this.map.removeLayer(this.idLayer),this.map.removeLayer(`BORDER_${this.idLayer}`),this.map.removeSource(this.idSource),this.getCenterInMap()&&(this.map.removeLayer(this.idLayerCentroid),this.map.removeSource(this.idSourceCentroid)))}}},49521:(e,t,s)=>{"use strict";s.d(t,{h:()=>T});var a=s(85893),i=s(41120),n=s(35117),r=s(45258),o=s(28358),l=s(41749),c=s(282),d=s(22318),u=s(43471),p=s(5977),h=s(83736),g=s(55517),m=s(18463),j=s(79912),x=s(79895),b=s(17812),f=s(16575),v=s(51972),y=s(67294),C=s(87559),O=s(73855),L=s(45855),Z=s(96102);const S=({title:e,content:t})=>(0,a.jsxs)(y.Fragment,{children:[(0,a.jsxs)(d.Z,Object.assign({variant:"subtitle1"},{children:[(0,a.jsx)(f.Z,{style:{fontSize:"14px",marginRight:"4px"}}),e]})),(0,a.jsx)(d.Z,Object.assign({variant:"body1"},{children:t})),(0,a.jsx)(g.Z,{})]}),I=()=>{var e,t;const s=(0,O.T)(),i=(0,Z.dP)(),{notificationsHeader:n}=(0,O.C)(L.Af);return(0,y.useEffect)((()=>{s((0,L.pK)())}),[]),(0,a.jsxs)(m.Z,{children:[(0,a.jsx)(j.Z,Object.assign({className:i.root},{children:(0,a.jsx)(d.Z,Object.assign({variant:"subtitle1"},{children:"Notificaciones"}))})),(0,a.jsx)(g.Z,{}),(0,a.jsxs)(x.Z,Object.assign({elevation:3,style:{padding:"8px",overflow:"scroll"}},{children:[(!n.notificationsList||0===(null===(e=n.notificationsList)||void 0===e?void 0:e.length))&&(0,a.jsx)(d.Z,Object.assign({variant:"subtitle1"},{children:"No tiene notificaciones Nuevas"})),null===(t=n.notificationsList)||void 0===t?void 0:t.map(((e,t)=>(0,a.jsx)(S,{title:e.title,content:e.message},t)))]}))]})},k=()=>{var e;const{notificationsHeader:t}=(0,O.C)(L.Af);return(0,a.jsx)(C.h,{children:(0,a.jsx)(I,{}),header:(0,a.jsx)(b.Z,Object.assign({color:(null===(e=t.notificationsList)||void 0===e?void 0:e.length)>0?"primary":"inherit",style:{width:"40px",height:"40px"},size:"medium"},{children:(0,a.jsx)(v.Z,{})}))})},E=(0,i.Z)((e=>(0,n.Z)({root:{minHeight:"50px"}}))),T=({title:e})=>{const t=E(),s=(0,p.k6)();return(0,a.jsx)(r.Z,Object.assign({position:"fixed",color:"secondary",className:t.root,elevation:0},{children:(0,a.jsxs)(o.Z,Object.assign({variant:"dense"},{children:[(0,a.jsxs)(l.Z,Object.assign({container:!0,alignItems:"center"},{children:[(0,a.jsx)(c.Z,{size:"small",startIcon:(0,a.jsx)(u.Z,{color:"action",style:{color:"#fff"}}),onClick:()=>{s.goBack()}}),(0,a.jsx)(d.Z,Object.assign({variant:"h6"},{children:e}))," "]})),(0,a.jsxs)(l.Z,Object.assign({container:!0,justifyContent:"flex-end",alignItems:"center",spacing:5},{children:[(0,a.jsx)(l.Z,Object.assign({item:!0},{children:(0,a.jsx)(k,{})})),(0,a.jsx)(l.Z,Object.assign({item:!0},{children:(0,a.jsx)(h.u,{})}))]}))]}))}))}},83736:(e,t,s)=>{"use strict";s.d(t,{f:()=>C,u:()=>L});var a=s(85893),i=s(33901),n=s(18463),r=s(79912),o=s(22318),l=s(55517),c=s(94697),d=s(51907),u=s(41749),p=s(87559),h=s(40064),g=s(50255),m=s(5833),j=s(73855),x=s(53559),b=s(5977),f=s(82067),v=s(93584),y=s(96102);const C=({className:e})=>{const{loginResponse:{user:t}}=(0,j.C)(x.MR);return(0,a.jsx)(i.Z,Object.assign({className:e,alt:"Avatar"},{children:null==t?void 0:t.firstName[0].toUpperCase()}))},O=()=>{const e=(0,y.dP)(),{loginResponse:{user:t}}=(0,j.C)(x.MR),s=(0,b.k6)();return(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,Object.assign({className:e.root},{children:(0,a.jsx)(o.Z,Object.assign({variant:"subtitle1"},{children:"Cuenta"}))})),(0,a.jsx)(l.Z,{}),(0,a.jsx)(c.Z,{avatar:(0,a.jsx)(C,{}),title:`${null==t?void 0:t.firstName} ${null==t?void 0:t.lastName}`,subheader:null==t?void 0:t.username}),(0,a.jsx)(l.Z,{}),(0,a.jsx)(d.Z,Object.assign({disableSpacing:!0},{children:(0,a.jsxs)(u.Z,Object.assign({container:!0,direction:"column",alignItems:"flex-start"},{children:[(0,a.jsx)(y.Eo,Object.assign({onClick:()=>{s.push("/setting/profile")},style:{width:"100%"},startIcon:(0,a.jsx)(f.Z,{htmlColor:`${v.Jx}`})},{children:"Perfil"})),(0,a.jsx)(y.Eo,Object.assign({onClick:()=>{s.push("/")},style:{width:"100%"},startIcon:(0,a.jsx)(h.Z,{htmlColor:`${v.Jx}`})},{children:"Dispatch"})),(0,a.jsx)(y.Eo,Object.assign({onClick:()=>{s.push("/setting")},style:{width:"100%"},startIcon:(0,a.jsx)(g.Z,{htmlColor:`${v.Jx}`})},{children:"Configuraciones"})),(0,a.jsxs)("div",Object.assign({style:{width:"100%"}},{children:[(0,a.jsx)(l.Z,{}),(0,a.jsx)(y.Eo,Object.assign({style:{width:"100%"},onClick:()=>{window.localStorage.removeItem("token"),window.localStorage.removeItem("user"),s.push("/login")},startIcon:(0,a.jsx)(m.Z,{htmlColor:"red"})},{children:"Cerrar sesión"}))]}))]}))}))]})},L=()=>{const e=(0,y.QH)();return(0,a.jsx)(p.h,{children:(0,a.jsx)(O,{}),header:(0,a.jsx)(C,{className:e.root})})}},96102:(e,t,s)=>{"use strict";s.d(t,{Eo:()=>c,QH:()=>l,dP:()=>o});var a=s(41120),i=s(282),n=s(10150),r=s(38920);const o=(0,a.Z)((e=>(0,n.Z)({root:{textAlign:"center",padding:"5px"}}))),l=(0,a.Z)((e=>(0,n.Z)({root:{width:"30px",height:"30px"}}))),c=(0,r.Z)((e=>({label:{display:"flex",justifyContent:"flex-start"},root:{"&:hover":{backgroundColor:"#0069d9",borderColor:"#0062cc",boxShadow:"none",color:"white"},"&:active":{boxShadow:"none",backgroundColor:"#0062cc",borderColor:"#005cbf",color:"white"},"&:focus":{boxShadow:"0 0 0 0.2rem rgba(0,123,255,.5)"}}})))(i.Z)},95393:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ve});var a=s(85893),i=s(43832),n=s(67294),r=s(60395),o=s(41749),l=s(95477),c=s(282),d=s(79895),u=s(41120),p=s(41423),h=s(22318),g=s(18463),m=s(79912),j=s(71267),x=s(70065),b=s(62822),f=s(17812),v=s(96837),y=s(59544),C=s(17215);const O=(0,s(30115).Z)((()=>({subHeader:{lineHeight:0,background:"#fff",paddingLeft:0,display:"flex",marginTop:8,borderRadius:4,borderBottomStyle:"groove"}}))),L=({useOpen:e,title:t})=>{const s=O(),[i,n]=e,r=(0,a.jsx)(f.Z,Object.assign({size:"small"},{children:i?(0,a.jsx)(y.Z,{fontSize:"small"}):(0,a.jsx)(C.Z,{fontSize:"small"})}));return(0,a.jsx)(v.Z,Object.assign({disableGutters:!0,onClick:()=>{n((e=>!e))},component:"span",className:s.subHeader},{children:(0,a.jsxs)("div",Object.assign({style:{display:"flex",alignItems:"center"}},{children:[(0,a.jsx)("span",Object.assign({style:{marginLeft:4}},{children:t})),(0,a.jsx)("div",Object.assign({style:{marginLeft:8}},{children:r}))]}))}))};var Z=s(50998),S=s(95757);const I=(0,u.Z)((e=>({disablePadding:{padding:0,margin:0,flex:1},nested:{margin:0,padding:0,marginLeft:e.spacing(2.5),flex:1}}))),k=({primary:e,Icon:t,isSubItem:s,isSelect:i,onClick:r})=>{(0,n.useEffect)((()=>()=>{}),[]);const o=I();return(0,a.jsxs)(Z.Z,Object.assign({selected:i,onClick:r,dense:!0,button:!0,className:s?o.nested:o.disablePadding},{children:[t&&(0,a.jsx)(t,{fontSize:"small"}),(0,a.jsx)(S.Z,{className:o.disablePadding,primary:e})]}))};var E=s(10465),T=s(73855),w=s(90694),_=s(95090),N=s(66217);const D=({p:e})=>{const{selectedDownloadList:t}=(0,T.C)(w.nx),s=(0,T.T)(),i=(0,n.useCallback)((e=>!!t.find((t=>t.id===e.id))),[t]);return(0,a.jsx)(k,{primary:`Celda - ${e.name?e.name:"SIN NOM"}`,onClick:()=>{return t=e,s((0,N.BG)(Object.assign(Object.assign({},t),{type:_.NZ.PAD}))),void s((0,N.Ru)());var t},isSelect:i(e)})},$=({padCells:e})=>{const t=(0,n.useState)(!1),[s]=t,i=e.map((e=>(0,a.jsx)(D,Object.assign({},{p:e}),e.id)));return(0,a.jsxs)(b.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,a.jsx)(L,{title:"Descarga",useOpen:t})},{children:[s&&(0,a.jsx)(E.V,{functionCancel:()=>{},functionFilter:()=>{}}),i]}))},R=({p:e})=>{const{selectedDownloadList:t}=(0,T.C)(w.nx),s=(0,T.T)(),i=(0,n.useCallback)((e=>!!t.find((t=>t.id===e.id))),[t]);return(0,a.jsx)(k,{primary:`Celda - ${e.name?e.name:"SIN NOM"}`,onClick:()=>{return t=e,s((0,N.Fc)(Object.assign(Object.assign({},t),{type:_.NZ.STOCK}))),void s((0,N.Ru)());var t},isSelect:i(e)})},M=({stockCells:e})=>{const t=(0,n.useState)(!1),[s]=t,i=e.map((e=>(0,a.jsx)(R,Object.assign({},{p:e}),e.id)));return(0,a.jsxs)(b.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,a.jsx)(L,{title:"Descarga",useOpen:t})},{children:[s&&(0,a.jsx)(E.V,{functionCancel:()=>{},functionFilter:()=>{}}),i]}))};var F=s(78479);const P=({p:e})=>{const{selectedDownloadList:t}=(0,T.C)(w.nx),s=(0,T.T)(),i=(0,n.useCallback)((e=>!!t.find((t=>t.id===e.id))),[t]);return(0,a.jsx)(k,{primary:`${e.name?e.name:"SIN NOM"}`,onClick:()=>{return t=e,s((0,N.dI)(Object.assign(Object.assign({},t),{type:_.NZ.DME}))),void s((0,N.Ru)());var t},isSelect:i(e)})},A=({dmeCells:e})=>{const t=(0,n.useState)(!1),[s]=t,i=e.map((e=>(0,a.jsx)(P,Object.assign({},{p:e}),e.id)));return(0,a.jsxs)(b.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,a.jsx)(L,{title:"Descarga",useOpen:t})},{children:[s&&(0,a.jsx)(E.V,{functionCancel:()=>{},functionFilter:()=>{}}),i]}))};const z=(0,u.Z)((e=>({nested:{marginLeft:e.spacing(1),marginBottom:0},root_unload:{display:"flex"},tabs:{borderRight:`1px solid ${e.palette.divider}`},tab:{minWidth:10,padding:1,paddingTop:8,paddingBottom:8},buttonTab:{writingMode:"vertical-rl"}})));function U(e){const{children:t,value:s,index:i}=e,n=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s}(e,["children","value","index"]);return(0,a.jsx)("div",Object.assign({role:"tabpanel",hidden:s!==i,id:`vertical-tabpanel-${i}`,"aria-labelledby":`vertical-tab-${i}`,style:{flex:1}},n,{children:s===i&&t}))}function H(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const B=({value:e,handleChange:t})=>{const s=z();return(0,a.jsxs)(x.Z,Object.assign({orientation:"vertical",variant:"scrollable",value:e,indicatorColor:"primary",textColor:"primary",onChange:t,"aria-label":"Vertical tabs",className:s.tabs},{children:[(0,a.jsx)(p.Z,Object.assign({className:s.tab,label:(0,a.jsx)(h.Z,Object.assign({variant:"caption",className:s.buttonTab},{children:"PAD"}))},H(0))),(0,a.jsx)(p.Z,Object.assign({className:s.tab,label:(0,a.jsx)(h.Z,Object.assign({variant:"caption",className:s.buttonTab},{children:"DME"}))},H(1))),(0,a.jsx)(p.Z,Object.assign({className:s.tab,label:(0,a.jsx)(h.Z,Object.assign({variant:"caption",className:s.buttonTab},{children:"STOCKs"}))},H(2)))]}))},W=()=>{const{padCellList:e,dmeCellList:t,stockCellList:s}=(0,T.C)(w.WD),{selectedDownloadList:i}=(0,T.C)(w.nx),n=z(),[r,l]=(0,F._)("index_tab_unload_operation",0);return(0,a.jsxs)(d.Z,Object.assign({elevation:4,style:{width:"100%"}},{children:[(0,a.jsxs)(o.Z,Object.assign({container:!0,className:n.root_unload},{children:[(0,a.jsx)(B,Object.assign({},{value:r,handleChange:(e,t)=>{l(t)}})),(0,a.jsx)(U,Object.assign({value:r,index:0},{children:(0,a.jsx)($,{padCells:e.filter((e=>e.state!==_.p$.FINISHED))})})),(0,a.jsx)(U,Object.assign({value:r,index:1},{children:(0,a.jsx)(A,{dmeCells:t.filter((e=>e.state!==_.p$.FINISHED))})})),(0,a.jsx)(U,Object.assign({value:r,index:2},{children:(0,a.jsx)(M,{stockCells:s.filter((e=>e.state!==_.p$.FINISHED))})}))]})),(0,a.jsx)(g.Z,{children:(0,a.jsx)(m.Z,{children:i.map((e=>(0,a.jsx)(j.Z,{label:4===e.type?e.name:`Celda - ${e.name}`},e.id)))})})]}))};var Y=s(55517);const V=(0,u.Z)((e=>({root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{marginLeft:e.spacing(1),marginBottom:0},root_unload:{display:"flex"},tabs:{borderRight:`1px solid ${e.palette.divider}`},tab:{minWidth:10,padding:1,paddingTop:8,paddingBottom:8},buttonTab:{writingMode:"vertical-rl"}})));function K(e){const{children:t,value:s,index:i}=e,n=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s}(e,["children","value","index"]);return(0,a.jsx)("div",Object.assign({role:"tabpanel",hidden:s!==i,id:`vertical-tabpanel-${i}`,"aria-labelledby":`vertical-tab-${i}`,style:{flex:1,height:"auto",boxShadow:"inset 0px -2px 10px 0px rgb(17 16 10 / 56%)",margin:8,borderRadius:4}},n,{children:s===i&&t}))}function J(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const q=()=>{const{selectedUploadList:e}=(0,T.C)(w.nx),{polygonList:t,stockCellList:s,state:i}=(0,T.C)(w.WD),r=(0,T.T)(),l=V(),[c,u]=(0,n.useState)([]),[g,m]=(0,n.useState)([]),[j,f]=(0,F._)("index_tab_load_operation",0),v=(0,n.useState)(!1);(0,n.useEffect)((()=>{i===_.JD.DONE&&(u(t.filter((e=>e.state!==_.p$.FINISHED))),m(s.filter((e=>e.state!==_.p$.FINISHED))))}),[i]);const y=(0,n.useCallback)((e=>{if(e){const{value:s}=e.target,a=s?s.toUpperCase():"";u(t.filter((e=>{const t=e.material?e.material.type:"";return e.name.toUpperCase().includes(a)||e.nameProject.toUpperCase().includes(a)||t.includes(a)})))}}),[t]),C=(0,n.useCallback)((e=>{if(e){const{value:t}=e.target,a=t?t.toUpperCase():"";m(s.filter((e=>e.name.toUpperCase().includes(a))))}}),[s]),O=(0,n.useCallback)((()=>{u(t)}),[t]),I=(0,n.useCallback)((()=>{m(s)}),[s]),k=(0,n.useCallback)((t=>!!e.find((e=>e.id===t.id))),[e]);return(0,a.jsx)(d.Z,Object.assign({elevation:4,style:{flex:1}},{children:(0,a.jsxs)(o.Z,Object.assign({container:!0},{children:[(0,a.jsxs)(x.Z,Object.assign({orientation:"vertical",variant:"scrollable",value:j,indicatorColor:"primary",textColor:"primary",onChange:(e,t)=>{f(t)},"aria-label":"Vertical tabs",className:l.tabs},{children:[(0,a.jsx)(p.Z,Object.assign({className:l.tab,label:(0,a.jsx)(h.Z,Object.assign({variant:"caption",className:l.buttonTab},{children:"TAJO"}))},J(0))),(0,a.jsx)(p.Z,Object.assign({className:l.tab,label:(0,a.jsx)(h.Z,Object.assign({variant:"caption",className:l.buttonTab},{children:"STOCKs"}))},J(1)))]})),(0,a.jsx)(K,Object.assign({value:j,index:0},{children:(0,a.jsxs)(b.Z,Object.assign({dense:!0,disablePadding:!0,style:{width:"100%",paddingLeft:4,overflowY:"scroll",paddingBottom:32,height:"80vh"},subheader:(0,a.jsx)(L,{title:"Carguío",useOpen:v})},{children:[v[0]&&(0,a.jsx)(E.V,{functionFilter:y,functionCancel:O,placeholder:"Buscar por polígono"}),c.map((e=>(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(Z.Z,Object.assign({selected:k(e),button:!0,dense:!0,onClick:()=>{return t=e,void r((0,N.qn)(Object.assign(Object.assign({},t),{type:_.NZ.PIT})));var t}},{children:(0,a.jsx)(S.Z,{primary:`${e.nameProject} - ${e.name} `,secondary:e.material?`Material ${e.material.type}`:"Material not found"})})),(0,a.jsx)(Y.Z,{})]},e.id)))]}))})),(0,a.jsx)(K,Object.assign({value:j,index:1},{children:(0,a.jsxs)(b.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,overflowY:"scroll"},subheader:(0,a.jsx)(L,{title:"Carguío",useOpen:v})},{children:[v[0]&&(0,a.jsx)(E.V,{functionFilter:C,functionCancel:I}),g.map((e=>(0,a.jsx)(Z.Z,Object.assign({selected:k(e),button:!0,dense:!0,onClick:()=>{return t=e,void r((0,N.qn)(Object.assign(Object.assign({},t),{type:_.NZ.STOCK})));var t}},{children:(0,a.jsx)(S.Z,{primary:e.name})}),e.id)))]}))}))]}))}))};var G=s(64436),Q=s(52541),X=s(30553),ee=s(40074),te=s(14125),se=s(5977);const ae=(0,u.Z)((e=>({root:{flex:1},list:{maxHeight:"75vh",paddingLeft:e.spacing(1),marginLeft:e.spacing(1),overflowY:"scroll",marginBottom:e.spacing(2)}}))),ie=()=>{const e=(0,n.useState)(!1),{idEx:t,deviceIdEx:s}=(0,se.UO)(),{selectedExcavator:i}=(0,T.C)(w.nx),{excavatorInfoList:r}=(0,T.C)(te.kW),o=(0,T.T)(),[l,c]=(0,n.useState)([]);(0,n.useEffect)((()=>{c(r)}),[r]);const u=ae();return(0,n.useEffect)((()=>{const e={id:t,deviceId:s};t&&"0"!==t&&s&&o((0,N.Zh)(e))}),[t]),(0,a.jsx)(d.Z,Object.assign({elevation:4,style:{width:"100%"}},{children:(0,a.jsx)(b.Z,Object.assign({className:u.list,dense:!0,disablePadding:!0,subheader:(0,a.jsx)(L,{title:"Palas",useOpen:e})},{children:(0,a.jsx)(Z.Z,Object.assign({dense:!0,disableGutters:!0},{children:(0,a.jsx)(G.Z,Object.assign({size:"small",fullWidth:!0,component:"fieldset"},{children:(0,a.jsx)(Q.Z,Object.assign({"aria-label":"gender",name:"radio-buttons-group"},{children:l.map((e=>(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(X.Z,{value:e,checked:i.length>0&&e.deviceId===i[0].deviceId,control:(0,a.jsx)(ee.Z,{checked:i.length>0&&e.deviceId===i[0].deviceId,size:"small"}),onClick:()=>(e=>{o((0,N.Zh)(e))})(e),label:(0,a.jsx)(h.Z,Object.assign({component:"span",variant:"body2"},{children:e.deviceAlias}))}),(0,a.jsx)(Y.Z,{})]},e.deviceId)))}))}))}))}))}))};var ne=s(76533),re=s(48101),oe=s(74248),le=s(14276),ce=s(26666),de=s(26271),ue=s(16886),pe=s(79800);const he=({map:e})=>{const{excavatorInfoList:t}=(0,T.C)(te.kW),{truckInfoList:s}=(0,T.C)(ce.ej),i=(0,n.useMemo)((()=>{const t=s.filter((e=>e.sensor)),i=new le.c(t,e.current,"TRUCK_LIST_SOURCE","TRUCK_LIST_LAYER","truck_nav");return(0,a.jsx)(de.b,{truckList:t,truckListClass:i})}),[s]),r=(0,n.useMemo)((()=>{const s=t.filter((e=>e.sensor)),i=new le.c(s,e.current,"EXCAVATOR_LIST_SOURCE","EXCAVATOR_LIST_LAYER","excavator_nav");return(0,a.jsx)(ue.N,{excavatorList:s,excavatorListClass:i})}),[t]);return(0,a.jsxs)(a.Fragment,{children:[i,r]})},ge=()=>{const e=(0,n.useRef)(null),t=(0,n.useRef)(null),{selectedUploadList:s,selectedDownloadList:i}=(0,T.C)(w.nx);(0,n.useEffect)((()=>()=>{e.current=null}),[]);const[r,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{r&&(0,pe.H)(e)}),[r]),(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(oe.f,Object.assign({},{polygonList:s,map:e.current,idSource:"UPLOAD_SOURCE",idLayer:"UPLOAD_LAYER",idSourceCentroid:"CENTROID_UPLOAD_SOURCE",idLayerCentroid:"CENTROID_UPLOAD_LAYER",haveCentroid:!0})),(0,a.jsx)(oe.f,Object.assign({},{polygonList:i,map:e.current,idSource:"DOWNLOAD_SOURCE",idLayer:"DOWNLOAD_LAYER",idSourceCentroid:"CENTROID_DOWNLOAD_SOURCE",idLayerCentroid:"CENTROID_DOWNLOAD_LAYER",haveCentroid:!0,onClickFeature:()=>{}})),(0,a.jsx)(he,{map:e})]}),(0,a.jsx)(re.Z,Object.assign({map:e,dragRotate:!1,style:"mapbox://styles/dispatchgat/ckqqsfc2y46bo17sf1y29zwnj",mapContainer:t,bearing:0,pitch:15,height:"90vh"},{lat:-7.6163,lng:-78.196,zoom:14,setLoad:o}))]})};var me=s(78965),je=s(52672);const xe=()=>{const[e,t]=(0,n.useState)(!1),s=(0,se.k6)(),i=(0,T.T)(),{selectedExcavator:d,selectedTruckList:u,selectedUploadList:p,selectedDownloadList:h}=(0,T.C)(w.nx);return(0,n.useEffect)((()=>()=>{i((0,N.nw)())}),[]),(0,a.jsx)(r.Z,Object.assign({padding:1},{children:(0,a.jsx)(o.Z,Object.assign({container:!0,justifyContent:"flex-end",alignItems:"center",alignContent:"center"},{children:e?(0,a.jsx)(l.Z,{}):(0,a.jsx)(c.Z,Object.assign({variant:"outlined",onClick:()=>{d.length<=0?i((0,je.L8)({msg:"Debe seleccionar una excavadora",open:!0,severity:"warning"})):p.length>0&&h.length>0?(t(!0),(0,ne.pg)(p,h,u,d,[]).then((e=>{(0,je.L8)({msg:"Done!!",open:!0,severity:"success"}),i((0,N.nw)()),t(!1),s.replace("/operation")})).catch((e=>{console.log(e),t(!1),i((0,je.L8)({msg:`Error al guardar: posiblemente las unidades ya estan en otra operación: ${e.message}`,open:!0,severity:"warning"}))}))):i((0,je.L8)({msg:"Debe seleccionar un Carguío y descarga",open:!0,severity:"warning"}))},color:"primary",size:"small",startIcon:(0,a.jsx)(me.Z,{fontSize:"small"})},{children:"Guardar"}))}))}))},be=()=>(0,a.jsxs)(o.Z,Object.assign({container:!0},{children:[(0,a.jsxs)(d.Z,{children:[(0,a.jsxs)(o.Z,Object.assign({container:!0,style:{padding:4,flex:1}},{children:[(0,a.jsx)(q,{}),(0,a.jsxs)(o.Z,Object.assign({container:!0,alignContent:"flex-start",style:{flex:1,marginLeft:8,marginRight:8,gap:8}},{children:[(0,a.jsx)(W,{}),(0,a.jsx)(ie,{})]}))]})),(0,a.jsx)(xe,{})]}),(0,a.jsx)(ge,{})]}));var fe=s(49521);function ve(){return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(fe.h,{title:"Crear Operación"}),(0,a.jsx)(i.Z,Object.assign({style:{marginTop:"60px"},maxWidth:"xl"},{children:(0,a.jsx)(be,{})}))]})}},38190:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(85893);function i(){return(0,a.jsx)("div",{})}},53279:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(85893),i=s(43832),n=s(67294),r=s(5977),o=s(70164),l=s(73855),c=s(76796),d=s(49521);function u(){const{id:e}=(0,r.UO)(),t=(0,l.T)();return(0,n.useEffect)((()=>{t((0,c.l4)(e))}),[e]),(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(d.h,{title:"Detalle de Operación"}),(0,a.jsx)(i.Z,Object.assign({style:{marginTop:"60px"},maxWidth:"xl"},{children:(0,a.jsx)(o.S,{})}))]})}}}]);