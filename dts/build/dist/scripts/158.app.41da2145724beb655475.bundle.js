"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[158],{61242:(e,i,t)=>{t.d(i,{a:()=>c});var s=t(85893),n=t(52663),a=t(66083),o=t(29525),d=t(66856),l=t(282);const c=({open:e,handleClose:i,handleConfirm:t,title:c,children:r,disabled:g=!1})=>(0,s.jsxs)(n.Z,Object.assign({open:e,onClose:i,maxWidth:"lg"},{children:[(0,s.jsx)(a.Z,{children:c},void 0),(0,s.jsx)(o.Z,{children:r},void 0),(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(l.Z,Object.assign({color:"primary",onClick:i},{children:"Cancelar"}),void 0),t&&(0,s.jsx)(l.Z,Object.assign({disabled:g,color:"secondary",onClick:t,autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)]}),void 0)},33570:(e,i,t)=>{t.d(i,{v:()=>c});var s=t(85893),n=t(17812),a=t(96837),o=t(59544),d=t(17215);const l=(0,t(73914).Z)((()=>({subHeader:{lineHeight:0,background:"#fff",paddingLeft:0,display:"flex",marginTop:8,borderRadius:4,borderBottomStyle:"groove"}}))),c=({useOpen:e,title:i})=>{const t=l(),[c,r]=e,g=(0,s.jsx)(n.Z,Object.assign({size:"small"},{children:c?(0,s.jsx)(o.Z,{fontSize:"small"},void 0):(0,s.jsx)(d.Z,{fontSize:"small"},void 0)}),void 0);return(0,s.jsx)(a.Z,Object.assign({disableGutters:!0,onClick:()=>{r((e=>!e))},component:"span",className:t.subHeader},{children:(0,s.jsxs)("div",Object.assign({style:{display:"flex",alignItems:"center"}},{children:[(0,s.jsx)("span",Object.assign({style:{marginLeft:4}},{children:i}),void 0),(0,s.jsx)("div",Object.assign({style:{marginLeft:8}},{children:g}),void 0)]}),void 0)}),void 0)}},71211:(e,i,t)=>{t.d(i,{T:()=>s});class s{static addLayerToMap(e,i,t,s,n){e.addLayer({id:i,type:s,source:t,layout:{visibility:"visible"},paint:{"line-color":n,"line-width":4}})}static addSourceToMap(e,i,t){e.addSource(i,{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t}}})}static removeFeature(e,i,t){this.getLayer(e,i)&&(e.removeLayer(i),e.removeSource(t))}static getLayer(e,i){return e.getLayer(i)}}},69548:(e,i,t)=>{t.r(i),t.d(i,{default:()=>xe});var s=t(85893),n=t(41749),a=t(18463),o=t(67294),d=t(73855),l=t(18973),c=t(41120),r=t(79895),g=t(13258),j=t(22318),v=t(14096),h=t(41423),p=t(95090),x=t(78479),u=t(10008),m=t(62822),b=t(282),y=t(78715),Z=t(71211),O=t(39299),f=t(20113),C=t(61242),k=t(33570),T=t(50998),S=t(95757),w=t(17812),F=t(30387),L=t(52663),N=t(66083),I=t(29525),$=t(8286),P=t(66856),E=t(95477),D=t(39704),_=t(1978);const A=(0,c.Z)((e=>({paper:{padding:"5px",margin:"3px"}}))),M=({open:e,setOpen:i,cell:t,typeDownload:d})=>{const l=A(),c=(0,D.I0)(),[v,h]=(0,o.useState)(t),[x,u]=(0,o.useState)(!1),m=Object.assign({},v),{name:y,altitude:Z,volume:f}=t,C=()=>{i(!1)},k=e=>{"idNameCell"===e.target.id&&(m.name=e.target.value),"idAltitudeCell"===e.target.id&&(m.altitude=parseFloat(e.target.value)),"idVolumeCell"===e.target.id&&(m.volume=parseFloat(e.target.value)),h(m)};return(0,s.jsxs)(L.Z,Object.assign({open:e,onClose:C,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},{children:[(0,s.jsx)(N.Z,{children:"Cell Edit"},void 0),(0,s.jsx)(I.Z,{children:(0,s.jsx)(a.Z,Object.assign({style:{padding:"7px"}},{children:(0,s.jsxs)(n.Z,Object.assign({container:!0,direction:"column",spacing:1,justifyContent:"center"},{children:[(0,s.jsx)(n.Z,Object.assign({item:!0,md:12,xl:12},{children:(0,s.jsxs)(r.Z,Object.assign({className:l.paper,elevation:2},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Habilitar"}),void 0),(0,s.jsx)(g.Z,{checked:v.state!==p.YO.FINISHED,onChange:e=>{m.state=e.target.checked?p.YO.ACTIVE:p.YO.FINISHED,h(m)},inputProps:{"aria-label":"secondary checkbox"}},void 0)]}),void 0)}),void 0),(0,s.jsxs)(n.Z,Object.assign({item:!0,container:!0,direction:"row"},{children:[(0,s.jsx)(n.Z,Object.assign({item:!0,md:6,xl:6},{children:(0,s.jsxs)(r.Z,Object.assign({className:l.paper,elevation:2},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Name:"}),void 0),(0,s.jsx)($.Z,{onChange:k,style:{width:"100%"},id:"idNameCell",label:y,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,s.jsx)(n.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,s.jsxs)(r.Z,Object.assign({className:l.paper,elevation:2},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Altitude:"}),void 0),(0,s.jsx)($.Z,{onChange:k,id:"idAltitudeCell",style:{width:"100%"},label:Z,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,s.jsx)(n.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,s.jsxs)(r.Z,Object.assign({className:l.paper,elevation:2},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Volume:"}),void 0),(0,s.jsx)($.Z,{onChange:k,id:"idVolumeCell",style:{width:"100%"},label:f||"",variant:"outlined"},void 0)]}),void 0)}),void 0)]}),void 0)]}),void 0)}),void 0)},void 0),(0,s.jsxs)(P.Z,{children:[(0,s.jsx)(b.Z,Object.assign({color:"primary",onClick:C},{children:"Cancelar"}),void 0),x?(0,s.jsx)(E.Z,{variant:"indeterminate"},void 0):(0,s.jsx)(b.Z,Object.assign({color:"secondary",onClick:()=>{u(!0),(0,_.w)(v,d).then((e=>{c((0,O.aR)()),u(!1),C()})).catch((e=>{console.log(e),u(!1)})),i(!1)},autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)]}),void 0)};var z=t(53068);const R=({cellDme:e,map:i,isChecked:t})=>{const n=(0,d.T)(),[l,c]=(0,o.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,Object.assign({onClick:()=>{"3"===e.state.toString()||(e=>{if(n((0,u.Mf)(e)),t){const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s)}})(e)},selected:!0,dense:!0,button:!0},{children:(0,s.jsxs)(a.Z,Object.assign({elevation:"3"===e.state.toString()?0:2,style:{display:"flex",padding:"5px",height:"100%",width:"100%"}},{children:[(0,s.jsx)(g.Z,{disabled:"3"===e.state.toString(),checked:"3"!==e.state.toString()&&t,inputProps:{"aria-label":"secondary checkbox"}},void 0),(0,s.jsx)(S.Z,{primary:`Nombre: ${e.name}`},void 0),(0,s.jsx)(w.Z,Object.assign({onClick:()=>{c(!0)}},{children:(0,s.jsx)(F.Z,{fontSize:"small"},void 0)}),void 0)]}),void 0)}),e.id),l&&(0,s.jsx)(M,{typeDownload:z.TypeDownload.DME,open:l,setOpen:c,cell:e},void 0)]},void 0)};console.log("Status Value",status);const V=(0,c.Z)((e=>({listItem:{"& .MuiListItem-gutters":{paddingLeft:"7px",paddingRight:"7px"}}}))),H=({cellsDme:e,map:i,isChecked:t,setIsChecked:a,type:l})=>{const{selectDme:c}=(0,d.C)(u.C2),[g,j]=o.useState(!1),v=(0,d.T)(),h=V(),p=(0,o.useState)(!1),{status:x}=(0,d.C)(f.Lo);(0,o.useEffect)((()=>{v(t?(0,u.E6)(e):(0,u.E6)([]))}),[t]),(0,o.useEffect)((()=>{setTimeout((()=>{c.map((e=>{const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s),Z.T.addSourceToMap(i,s,e.pointList.map((e=>[e.longitude,e.latitude,e.altitude]))),Z.T.addLayerToMap(i,t,s,"line","#EAF772")}))}),10)}),[c]);const T=e=>{const t=c.find((i=>e.id===i.id));if(t){const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s)}return!!t};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,Object.assign({style:{overflow:"auto"}},{children:(0,s.jsx)(m.Z,Object.assign({className:h.listItem,dense:!0,subheader:(0,s.jsx)(k.v,{title:"polygono",useOpen:p},void 0)},{children:(0,s.jsx)(n.Z,Object.assign({container:!0,direction:"column",justifyContent:"flex-end",style:{flex:1}},{children:(0,s.jsx)(n.Z,Object.assign({item:!0,style:{height:"77vh"}},{children:e.map((e=>(0,s.jsx)(R,{cellDme:e,map:i,isChecked:T(e)},e.id)))}),void 0)}),void 0)}),void 0)}),void 0),c.length>0&&(0,s.jsx)(b.Z,Object.assign({variant:"contained",color:"primary",onClick:()=>{j(!0)},style:{width:"100%",margin:"10px"}},{children:"Finalizar Seleccionados"}),void 0),(0,s.jsx)(C.a,Object.assign({open:g,handleClose:()=>{j(!1),v((0,u.E6)([])),v((0,u.fn)())},handleConfirm:()=>{return e=void 0,i=void 0,s=function*(){yield v((0,f.iC)({cells:c,type:l})),v((0,O.aR)()),v((0,u.fn)()),j(!1)},new((t=void 0)||(t=Promise))((function(n,a){function o(e){try{l(s.next(e))}catch(e){a(e)}}function d(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(o,d)}l((s=s.apply(e,i||[])).next())}));var e,i,t,s},title:"¿Esta seguro?"},{children:(0,s.jsx)(y.Z,Object.assign({severity:"warning"},{children:"Confirma para Finalizar los poligonos seleccionados"}),void 0)}),void 0)]},void 0)},W=({cellPad:e,map:i,isChecked:t})=>{const n=(0,d.T)(),[l,c]=(0,o.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,Object.assign({selected:!0,dense:!0,button:!0,onClick:()=>{"3"===e.state.toString()||(e=>{if(n((0,u.SP)(e)),t){const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s)}})(e)}},{children:(0,s.jsxs)(a.Z,Object.assign({elevation:"3"===e.state.toString()?0:2,style:{display:"flex",padding:"5px",height:"100%",width:"100%"}},{children:[(0,s.jsx)(g.Z,{disabled:"3"===e.state.toString(),checked:"3"!==e.state.toString()&&t,inputProps:{"aria-label":"secondary checkbox"}},void 0),(0,s.jsx)(S.Z,{primary:`Nombre: ${e.name}`},void 0),(0,s.jsx)(w.Z,Object.assign({onClick:()=>{c(!0)}},{children:(0,s.jsx)(F.Z,{fontSize:"small"},void 0)}),void 0)]}),void 0)}),e.id),l&&(0,s.jsx)(M,{typeDownload:z.TypeDownload.PAD,open:l,setOpen:c,cell:e},void 0)]},void 0)};const Y=(0,c.Z)((e=>({listItem:{"& .MuiListItem-gutters":{paddingLeft:"7px",paddingRight:"7px"}}}))),B=({cellsPad:e,map:i,isChecked:t,setIsChecked:a,type:l})=>{const{selectPad:c}=(0,d.C)(u.C2),[g,j]=o.useState(!1),v=(0,d.T)(),h=Y(),p=(0,o.useState)(!1),{status:x}=(0,d.C)(f.Lo);(0,o.useEffect)((()=>{v(t?(0,u.Ri)(e):(0,u.Ri)([]))}),[t]),(0,o.useEffect)((()=>{c.map((e=>{const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s),Z.T.addSourceToMap(i,s,e.pointList.map((e=>[e.longitude,e.latitude,e.altitude]))),Z.T.addLayerToMap(i,t,s,"line","#EAF772")}))}),[c]);const T=e=>{const t=c.find((i=>e.id===i.id));if(t){const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s)}return!!t};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,Object.assign({style:{overflow:"auto"}},{children:(0,s.jsx)(m.Z,Object.assign({className:h.listItem,dense:!0,subheader:(0,s.jsx)(k.v,{title:"polygono",useOpen:p},void 0)},{children:(0,s.jsx)(n.Z,Object.assign({container:!0,direction:"column",justifyContent:"flex-end",style:{flex:1}},{children:(0,s.jsx)(n.Z,Object.assign({item:!0,style:{height:"77vh"}},{children:e.map((e=>(0,s.jsx)(W,{cellPad:e,map:i,isChecked:T(e)},e.id)))}),void 0)}),void 0)}),void 0)}),void 0),c.length>0&&(0,s.jsx)(b.Z,Object.assign({variant:"contained",color:"primary",onClick:()=>{j(!0)},style:{width:"100%",margin:"10px"}},{children:"Finalizar Seleccionados"}),void 0),(0,s.jsx)(C.a,Object.assign({open:g,handleClose:()=>{j(!1),v((0,u.Ri)([])),v((0,u.fn)())},handleConfirm:()=>{return e=void 0,i=void 0,s=function*(){yield v((0,f.iC)({cells:c,type:l})),v((0,O.aR)()),v((0,u.fn)()),j(!1)},new((t=void 0)||(t=Promise))((function(n,a){function o(e){try{l(s.next(e))}catch(e){a(e)}}function d(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(o,d)}l((s=s.apply(e,i||[])).next())}));var e,i,t,s},title:"¿Esta seguro ?"},{children:(0,s.jsx)(y.Z,Object.assign({severity:"warning"},{children:"Confirma para finalizar los poligonos seleccionados"}),void 0)}),void 0)]},void 0)};var K=t(32759),U=t(10465),G=t(64436),J=t(96394),Q=t(42930),q=t(85639),X=t(21549),ee=t(93565),ie=t(35573);const te=(0,c.Z)((e=>({paper:{padding:"5px",margin:"3px"}}))),se=({open:e,handleClose:i,handleConfirm:t,polygon:c})=>{const v=te(),h=(0,D.I0)(),{materialList:x}=(0,d.C)(l.WD),[u,m]=(0,o.useState)(c),[y,Z]=(0,o.useState)(ie.O[c.color].hex),[f,C]=(0,o.useState)(!1),[k,T]=(0,o.useState)(""),S=Object.assign({},u),w=e=>{"idName"===e.target.id&&(S.name=e.target.value),"idAltitude"===e.target.id&&(S.altitude=parseFloat(e.target.value)),"idTonnens"===e.target.id&&(S.tonnes=parseFloat(e.target.value)),"idVolume"===e.target.id&&(S.volume=parseFloat(e.target.value)),"idAg"===e.target.id&&(S.ag=parseFloat(e.target.value)),"idAgcn"===e.target.id&&(S.agcn=parseFloat(e.target.value)),m(S)},{name:F,ag:_,agcn:A,alte:M,altitude:z,as:R,au:V,auch:H,description:W,idProject:Y,lito:B,material:K,nameProject:U,onzas:se,orezonet:ne,tonnes:ae,volume:oe,state:de}=c;return(0,s.jsxs)(L.Z,Object.assign({open:e,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},{children:[(0,s.jsx)(N.Z,{children:"Polygon Edit"},void 0),(0,s.jsx)(I.Z,{children:(0,s.jsx)(a.Z,Object.assign({style:{padding:"7px"}},{children:(0,s.jsxs)(n.Z,Object.assign({container:!0,direction:"column",spacing:1,justifyContent:"center"},{children:[(0,s.jsx)(n.Z,Object.assign({item:!0,md:12,xl:12},{children:(0,s.jsxs)(r.Z,Object.assign({className:v.paper,elevation:2},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Habilitar"}),void 0),(0,s.jsx)(g.Z,{checked:u.state!==p.p$.FINISHED,onChange:e=>{S.state=e.target.checked?p.p$.ACTIVE:p.p$.FINISHED,m(S)},inputProps:{"aria-label":"secondary checkbox"}},void 0)]}),void 0)}),void 0),(0,s.jsxs)(n.Z,Object.assign({item:!0,container:!0,direction:"row"},{children:[(0,s.jsx)(n.Z,Object.assign({item:!0,md:6,xl:6},{children:(0,s.jsxs)(r.Z,Object.assign({className:v.paper,elevation:2},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Project:"}),void 0),(0,s.jsx)($.Z,{style:{width:"100%"},id:"idProject",label:U,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,s.jsx)(n.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,s.jsxs)(r.Z,Object.assign({className:v.paper,elevation:2},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Name:"}),void 0),(0,s.jsx)($.Z,{onChange:w,style:{width:"100%"},id:"idName",label:F,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,s.jsx)(n.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,s.jsxs)(r.Z,Object.assign({className:v.paper},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Altitude:"}),void 0),(0,s.jsx)($.Z,{onChange:w,style:{width:"100%"},id:"idAltitude",label:z,variant:"outlined"},void 0)]}),void 0)}),void 0)]}),void 0),(0,s.jsxs)(n.Z,Object.assign({item:!0,container:!0,md:12,xl:12},{children:[(0,s.jsx)(n.Z,Object.assign({item:!0,md:4,xl:4},{children:(0,s.jsx)(r.Z,Object.assign({className:v.paper,elevation:2},{children:(0,s.jsxs)(G.Z,Object.assign({style:{width:"100%"}},{children:[(0,s.jsx)(J.Z,Object.assign({id:"demo-controlled-open-select-label"},{children:"Material"}),void 0),(0,s.jsx)(Q.Z,Object.assign({style:{width:"100%"},id:"idMaterial",value:k,label:"Material",onChange:e=>{T(e.target.value)}},{children:x.map((e=>(0,s.jsx)(q.Z,Object.assign({value:e.id},{children:e.type}),e.id)))}),void 0)]}),void 0)}),void 0)}),void 0),(0,s.jsx)(n.Z,Object.assign({item:!0,md:8,xl:8},{children:(0,s.jsxs)(r.Z,Object.assign({className:v.paper,elevation:2},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Color"}),void 0),(0,s.jsxs)("div",Object.assign({style:{display:"flex",padding:"1px",justifyContent:"center"}},{children:[(0,s.jsx)(ee.e8,{color:y,colors:["#FF6900","#FCB900","#7BDCB5"],onChangeComplete:e=>{Z(e.hex)}},void 0),(0,s.jsx)("div",{style:{justifyItems:"center",borderRadius:"4px",width:"40px",backgroundColor:`${y}`}},void 0)]}),void 0)]}),void 0)}),void 0)]}),void 0),(0,s.jsxs)(n.Z,Object.assign({item:!0,xl:12,md:12,container:!0,direction:"row"},{children:[(0,s.jsx)(n.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,s.jsxs)(r.Z,Object.assign({className:v.paper},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Tonnens:"}),void 0),(0,s.jsx)($.Z,{onChange:w,style:{width:"100%"},id:"idTonnens",label:ae,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,s.jsx)(n.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,s.jsxs)(r.Z,Object.assign({className:v.paper},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Volume:"}),void 0),(0,s.jsx)($.Z,{onChange:w,style:{width:"100%"},id:"idVolume",label:oe,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,s.jsx)(n.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,s.jsxs)(r.Z,Object.assign({className:v.paper},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Ag:"}),void 0),(0,s.jsx)($.Z,{onChange:w,style:{width:"100%"},id:"idAg",label:_,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,s.jsx)(n.Z,Object.assign({item:!0,md:3,xl:3},{children:(0,s.jsxs)(r.Z,Object.assign({className:v.paper},{children:[(0,s.jsx)(j.Z,Object.assign({variant:"body1"},{children:"Agcn:"}),void 0),(0,s.jsx)($.Z,{onChange:w,style:{width:"100%"},id:"idAgcn",label:A,variant:"outlined"},void 0)]}),void 0)}),void 0),(0,s.jsx)(n.Z,{item:!0,md:6,xl:6},void 0)]}),void 0)]}),void 0)}),void 0)},void 0),(0,s.jsxs)(P.Z,{children:[(0,s.jsx)(b.Z,Object.assign({color:"primary",onClick:i},{children:"Cancelar"}),void 0),f?(0,s.jsx)(E.Z,{variant:"indeterminate"},void 0):(0,s.jsx)(b.Z,Object.assign({color:"secondary",onClick:()=>{C(!0),(0,X.Q)(u).then((e=>{h((0,O.aR)()),C(!1),i()})).catch((e=>{console.log(e),C(!1)}))},autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)]}),void 0)},ne=({pl:e,map:i,isChecked:t})=>{const{selectPolygon:n}=(0,d.C)(u.C2),l=(0,d.T)(),[c,r]=(0,o.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,Object.assign({onClick:()=>{3===e.state||(e=>{if(l((0,u.jY)(e)),t){const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s)}})(e)},selected:!0,dense:!0,button:!0},{children:(0,s.jsxs)(a.Z,Object.assign({elevation:"3"===e.state.toString()?0:2,style:{display:"flex",padding:"5px",height:"100%",width:"100%"}},{children:[(0,s.jsx)(g.Z,{disabled:3===e.state,checked:"3"!==e.state.toString()&&t,inputProps:{"aria-label":"secondary checkbox"}},void 0),(0,s.jsx)(S.Z,{primary:e.nameProject?`Project: ${e.nameProject}`:`Nombre: ${e.name}`,secondary:e.nameProject?`Name: ${e.name}`:""},void 0),(0,s.jsx)(w.Z,Object.assign({onClick:()=>{r(!0)}},{children:(0,s.jsx)(F.Z,{fontSize:"small"},void 0)}),void 0)]}),void 0)}),e.id),c&&(0,s.jsx)(se,{open:c,handleClose:()=>{r(!1)},handleConfirm:()=>{r(!1)},polygon:e},void 0)]},void 0)};const ae=(0,c.Z)((e=>({listItem:{"& .MuiListItem-gutters":{paddingLeft:"7px",paddingRight:"7px"}}}))),oe=({polygons:e,map:i,isChecked:t,setIsChecked:a})=>{const{selectPolygon:l}=(0,d.C)(u.C2),{status:c}=(0,d.C)(K.$e),[g,j]=(0,o.useState)([]),[v,h]=o.useState(!1),p=(0,d.T)(),x=ae();(0,o.useEffect)((()=>{p(t?(0,u.DY)(g):(0,u.DY)([]))}),[t]),(0,o.useEffect)((()=>{setTimeout((()=>{l.map((e=>{const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s),Z.T.addSourceToMap(i,s,e.pointList.map((e=>[e.longitude,e.latitude,e.altitude]))),Z.T.addLayerToMap(i,t,s,"line","#EAF772")}))}),10)}),[l]);const f=e=>{const t=l.find((i=>e.id===i.id));if(t){const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s)}return!!t};(0,o.useEffect)((()=>{e.length>0&&j(e)}),[e]);const k=(0,o.useCallback)((i=>{if(i){const t=i.target?i.target.value.toUpperCase():"";console.log("filter",t),j(e.filter((e=>e.name.toUpperCase().includes(t)||e.nameProject&&e.nameProject.toUpperCase().includes(t))))}}),[e]),T=(0,o.useCallback)((()=>{j(e)}),[e]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(U.V,{placeholder:"Buscar por proyecto, polígon o mineral ",functionFilter:k,functionCancel:T},void 0),(0,s.jsx)(r.Z,Object.assign({style:{overflow:"auto"}},{children:(0,s.jsx)(m.Z,Object.assign({className:x.listItem,dense:!0},{children:(0,s.jsxs)(n.Z,Object.assign({container:!0,direction:"column",justifyContent:"flex-end",style:{flex:1}},{children:[(0,s.jsx)(n.Z,Object.assign({item:!0,style:{height:"77vh"}},{children:g.map((e=>(0,s.jsx)(ne,{pl:e,map:i,isChecked:f(e)},e.id)))}),void 0),(0,s.jsx)(n.Z,{item:!0},void 0)]}),void 0)}),void 0)}),void 0),l.length>0&&(0,s.jsx)(b.Z,Object.assign({variant:"contained",color:"primary",onClick:()=>{h(!0)},style:{width:"100%",margin:"10px"}},{children:"Finalizar Seleccionados"}),void 0),(0,s.jsx)(C.a,Object.assign({open:v,handleClose:()=>{h(!1),p((0,u.DY)([])),p((0,u.fn)())},handleConfirm:()=>{return e=void 0,i=void 0,s=function*(){yield p((0,K.if)(l)),p((0,O.aR)()),p((0,u.fn)()),h(!1)},new((t=void 0)||(t=Promise))((function(n,a){function o(e){try{l(s.next(e))}catch(e){a(e)}}function d(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(o,d)}l((s=s.apply(e,i||[])).next())}));var e,i,t,s},title:"¿Esta seguro ?"},{children:(0,s.jsx)(y.Z,Object.assign({severity:"warning"},{children:"Confirma para finalizar los poligonos seleccionados"}),void 0)}),void 0)]},void 0)},de=({cellStock:e,map:i,isChecked:t})=>{const n=(0,d.T)(),[l,c]=(0,o.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,Object.assign({selected:!0,dense:!0,button:!0,onClick:()=>{"3"===e.state.toString()||(e=>{if(n((0,u.xk)(e)),t){const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s)}})(e)}},{children:(0,s.jsxs)(a.Z,Object.assign({elevation:"3"===e.state.toString()?0:2,style:{display:"flex",padding:"5px",height:"100%",width:"100%"}},{children:[(0,s.jsx)(g.Z,{disabled:"3"===e.state.toString(),checked:"3"!==e.state.toString()&&t,inputProps:{"aria-label":"secondary checkbox"}},void 0),(0,s.jsx)(S.Z,{primary:`Nombre: ${e.name}`},void 0),(0,s.jsx)(w.Z,Object.assign({onClick:()=>{c(!0)}},{children:(0,s.jsx)(F.Z,{fontSize:"small"},void 0)}),void 0)]}),void 0)}),e.id),l&&(0,s.jsx)(M,{typeDownload:z.TypeDownload.STOCK,open:l,setOpen:c,cell:e},void 0)]},void 0)};const le=(0,c.Z)((e=>({listItem:{"& .MuiListItem-gutters":{paddingLeft:"7px",paddingRight:"7px"}}}))),ce=({cellsStock:e,map:i,isChecked:t,setIsChecked:a,type:l})=>{const{selectStock:c}=(0,d.C)(u.C2),[g,j]=o.useState(!1),v=(0,d.T)(),h=le(),p=(0,o.useState)(!1),{status:x}=(0,d.C)(f.Lo);(0,o.useEffect)((()=>{v(t?(0,u.I5)(e):(0,u.I5)([]))}),[t]),(0,o.useEffect)((()=>{setTimeout((()=>{c.map((e=>{const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s),Z.T.addSourceToMap(i,s,e.pointList.map((e=>[e.longitude,e.latitude,e.altitude]))),Z.T.addLayerToMap(i,t,s,"line","#EAF772")}))}),10)}),[c]);const T=e=>{const t=c.find((i=>e.id===i.id));if(t){const t=`layer_${e.id}`,s=`source_${e.id}`;Z.T.getLayer(i,t)&&Z.T.removeFeature(i,t,s)}return!!t};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,Object.assign({style:{overflow:"auto"}},{children:(0,s.jsx)(m.Z,Object.assign({className:h.listItem,dense:!0,subheader:(0,s.jsx)(k.v,{title:"polygono",useOpen:p},void 0)},{children:(0,s.jsx)(n.Z,Object.assign({container:!0,direction:"column",justifyContent:"flex-end",style:{flex:1}},{children:(0,s.jsx)(n.Z,Object.assign({item:!0,style:{height:"77vh"}},{children:e.map((e=>(0,s.jsx)(de,{cellStock:e,map:i,isChecked:T(e)},e.id)))}),void 0)}),void 0)}),void 0)}),void 0),c.length>0&&(0,s.jsx)(b.Z,Object.assign({variant:"contained",color:"primary",onClick:()=>{j(!0)},style:{width:"100%",margin:"10px"}},{children:"Finalizar Seleccionados"}),void 0),(0,s.jsx)(C.a,Object.assign({open:g,handleClose:()=>{j(!1)},handleConfirm:()=>{return e=void 0,i=void 0,s=function*(){j(!1),yield v((0,f.iC)({cells:c,type:l})),v((0,O.aR)()),v((0,u.fn)()),j(!1)},new((t=void 0)||(t=Promise))((function(n,a){function o(e){try{l(s.next(e))}catch(e){a(e)}}function d(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(o,d)}l((s=s.apply(e,i||[])).next())}));var e,i,t,s},title:"¿Esta seguro?"},{children:(0,s.jsx)(y.Z,Object.assign({severity:"warning"},{children:"Confirma para finalizar los poligonos seleccionados"}),void 0)}),void 0)]},void 0)};const re=(0,c.Z)((e=>({root:{flex:1,backgroundColor:"#FDF8EF",display:"flex",height:"800px",width:"100%",minWidth:"1300px"},paper:{height:"100vh",width:"100%",textAlign:"center",justifyContent:"center",minWidth:"250px"},tittle:{textAlign:"center"},paperMap:{backgroundColor:"#FDF8EF",width:"100%",height:"800px",padding:"10px",textAlign:"center",minWidth:"900px"},tabs:{borderRight:`1px solid ${e.palette.divider}`,width:"100%"},tab:{minWidth:10,padding:1,paddingTop:8,paddingBottom:8,width:"100%"},buttonTab:{writingMode:"vertical-rl"},listItem:{"& .MuiListItem-gutters":{paddingLeft:"7px",paddingRight:"7px"}}})));function ge(e){const{children:i,value:t,index:n}=e,a=function(e,i){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&i.indexOf(s)<0&&(t[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)i.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(t[s[n]]=e[s[n]])}return t}(e,["children","value","index"]);return(0,s.jsx)("div",Object.assign({role:"tabpanel",hidden:t!==n,id:`vertical-tabpanel-${n}`,"aria-labelledby":`vertical-tab-${n}`,style:{flex:1}},a,{children:t===n&&i}),void 0)}function je(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const ve=({map:e})=>{const{selectPolygon:i,selectDme:t,selectPad:a,selectStock:c}=(0,d.C)(u.C2),m=(0,d.T)(),{polygonList:b,dmeCellList:y,padCellList:Z,stockCellList:O,routeList:f}=(0,d.C)(l.WD),[C,k]=(0,o.useState)(!1),T=re(),[S,w]=(0,x._)("index_tab_settind_polygon",0);return(0,s.jsx)("div",{children:(0,s.jsxs)(r.Z,Object.assign({elevation:1,className:T.paper},{children:[(0,s.jsxs)(n.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:[(0,s.jsx)(g.Z,{indeterminate:i.length>0&&b.length!=i.length||t.length>0&&y.length!=t.length||a.length>0&&Z.length!=a.length||c.length>0&&O.length==c.length||void 0,checked:C,onChange:e=>{k(e.target.checked),b.length===i.length&&k(e.target.checked),O.length!==c.length&&k(e.target.checked)}},void 0),(0,s.jsx)(j.Z,Object.assign({className:T.tittle},{children:"Selected Polygon"}),void 0)]}),void 0),(0,s.jsxs)(n.Z,Object.assign({container:!0,justifyContent:"space-between",alignItems:"flex-start",wrap:"nowrap"},{children:[(0,s.jsx)(n.Z,Object.assign({item:!0},{children:(0,s.jsxs)(v.Z,Object.assign({orientation:"vertical",variant:"scrollable",value:S,indicatorColor:"primary",textColor:"primary",onChange:(e,i)=>{w(i),m((0,u.fn)()),k(!1)},"aria-label":"horizontal tabs",className:T.tabs},{children:[(0,s.jsx)(h.Z,Object.assign({className:T.tab,label:(0,s.jsx)(j.Z,Object.assign({variant:"caption",className:T.buttonTab},{children:"TAJO"}),void 0)},je(0)),void 0),(0,s.jsx)(h.Z,Object.assign({className:T.tab,label:(0,s.jsx)(j.Z,Object.assign({variant:"caption",className:T.buttonTab},{children:"DME"}),void 0)},je(1)),void 0),(0,s.jsx)(h.Z,Object.assign({className:T.tab,label:(0,s.jsx)(j.Z,Object.assign({variant:"caption",className:T.buttonTab},{children:"PAD"}),void 0)},je(2)),void 0),(0,s.jsx)(h.Z,Object.assign({className:T.tab,label:(0,s.jsx)(j.Z,Object.assign({variant:"caption",className:T.buttonTab},{children:"STOCKs"}),void 0)},je(3)),void 0)]}),void 0)}),void 0),(0,s.jsxs)(n.Z,Object.assign({item:!0,container:!0,style:{padding:8}},{children:[(0,s.jsx)(ge,Object.assign({value:S,index:0},{children:(0,s.jsx)(oe,{polygons:b,map:e.current,isChecked:C,setIsChecked:k},void 0)}),void 0),(0,s.jsx)(ge,Object.assign({value:S,index:1},{children:(0,s.jsx)(H,{cellsDme:y,map:e.current,isChecked:C,setIsChecked:k,type:p.NZ.DME},void 0)}),void 0),(0,s.jsx)(ge,Object.assign({value:S,index:2},{children:(0,s.jsx)(B,{cellsPad:Z,map:e.current,isChecked:C,setIsChecked:k,type:p.NZ.PAD},void 0)}),void 0),(0,s.jsx)(ge,Object.assign({value:S,index:3},{children:(0,s.jsx)(ce,{cellsStock:O,map:e.current,isChecked:C,setIsChecked:k,type:p.NZ.STOCK},void 0)}),void 0)]}),void 0)]}),void 0)]}),void 0)},void 0)},he=(0,o.lazy)((()=>Promise.all([t.e(820),t.e(771)]).then(t.bind(t,77771)))),pe=()=>{const{polygonList:e}=(0,d.C)(l.WD),i=(0,o.useRef)(null);return(0,s.jsxs)(n.Z,Object.assign({container:!0,spacing:1,style:{height:"80vh"}},{children:[(0,s.jsx)(n.Z,Object.assign({item:!0,md:4,xl:3},{children:(0,s.jsx)(ve,Object.assign({},{map:i}),void 0)}),void 0),(0,s.jsx)(n.Z,Object.assign({item:!0,xs:6,md:8,xl:9},{children:(0,s.jsx)(a.Z,Object.assign({elevation:3,style:{height:"100%"}},{children:(0,s.jsx)(o.Suspense,Object.assign({fallback:null},{children:(0,s.jsx)(he,{mapRef:i},void 0)}),void 0)}),void 0)}),void 0)]}),void 0)},xe=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(pe,{},void 0)},void 0)}}]);