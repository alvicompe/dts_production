(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[408],{13258:(e,t,i)=>{"use strict";i.d(t,{Z:()=>b});var a=i(87462),o=i(45987),s=i(67294),n=(i(45697),i(86010)),r=i(56608),d=i(63786);const c=(0,d.Z)(s.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),l=(0,d.Z)(s.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");var u=i(59693);const p=(0,d.Z)(s.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var h=i(93871),v=i(52543),g=s.createElement(l,null),m=s.createElement(c,null),j=s.createElement(p,null),x=s.forwardRef((function(e,t){var i=e.checkedIcon,d=void 0===i?g:i,c=e.classes,l=e.color,u=void 0===l?"secondary":l,p=e.icon,v=void 0===p?m:p,x=e.indeterminate,b=void 0!==x&&x,f=e.indeterminateIcon,y=void 0===f?j:f,C=e.inputProps,O=e.size,Z=void 0===O?"medium":O,L=(0,o.Z)(e,["checkedIcon","classes","color","icon","indeterminate","indeterminateIcon","inputProps","size"]),S=b?y:v,k=b?y:d;return s.createElement(r.Z,(0,a.Z)({type:"checkbox",classes:{root:(0,n.Z)(c.root,c["color".concat((0,h.Z)(u))],b&&c.indeterminate),checked:c.checked,disabled:c.disabled},color:u,inputProps:(0,a.Z)({"data-indeterminate":b},C),icon:s.cloneElement(S,{fontSize:void 0===S.props.fontSize&&"small"===Z?Z:S.props.fontSize}),checkedIcon:s.cloneElement(k,{fontSize:void 0===k.props.fontSize&&"small"===Z?Z:k.props.fontSize}),ref:t},L))}));const b=(0,v.Z)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,u.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,u.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiCheckbox"})(x)},56608:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var a=i(87462),o=i(29439),s=i(45987),n=i(67294),r=(i(45697),i(86010)),d=i(22775),c=i(22601),l=i(52543),u=i(17812),p=n.forwardRef((function(e,t){var i=e.autoFocus,l=e.checked,p=e.checkedIcon,h=e.classes,v=e.className,g=e.defaultChecked,m=e.disabled,j=e.icon,x=e.id,b=e.inputProps,f=e.inputRef,y=e.name,C=e.onBlur,O=e.onChange,Z=e.onFocus,L=e.readOnly,S=e.required,k=e.tabIndex,I=e.type,E=e.value,w=(0,s.Z)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),T=(0,d.Z)({controlled:l,default:Boolean(g),name:"SwitchBase",state:"checked"}),N=(0,o.Z)(T,2),_=N[0],D=N[1],F=(0,c.Z)(),$=m;F&&void 0===$&&($=F.disabled);var P="checkbox"===I||"radio"===I;return n.createElement(u.Z,(0,a.Z)({component:"span",className:(0,r.Z)(h.root,v,_&&h.checked,$&&h.disabled),disabled:$,tabIndex:null,role:void 0,onFocus:function(e){Z&&Z(e),F&&F.onFocus&&F.onFocus(e)},onBlur:function(e){C&&C(e),F&&F.onBlur&&F.onBlur(e)},ref:t},w),n.createElement("input",(0,a.Z)({autoFocus:i,checked:l,defaultChecked:g,className:h.input,disabled:$,id:P&&x,name:y,onChange:function(e){var t=e.target.checked;D(t),O&&O(e,t)},readOnly:L,ref:f,required:S,tabIndex:k,type:I,value:E},b)),_?p:j)}));const h=(0,l.Z)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(p)},86905:(e,t,i)=>{e.exports=i.p+"322f531ddb14529b83bd73182d28de44.png"},77501:(e,t,i)=>{e.exports=i.p+"89f059a2790e391b484a369a3b9f92fb.png"},51790:(e,t,i)=>{e.exports=i.p+"20557549695e4a02b8f5e299c9687642.png"},39080:(e,t,i)=>{e.exports=i.p+"2b28f15b184b6ab80c65d257a47c790c.png"},79800:(e,t,i)=>{"use strict";i.d(t,{H:()=>a});const a=e=>{e.current.loadImage(i(51790),(function(t,i){if(t)throw t;e.current.addImage("truck_nav",i)})),e.current.loadImage(i(86905),(function(t,i){if(t)throw t;e.current.addImage("excavator_nav",i)})),e.current.loadImage(i(39080),(function(t,i){if(t)throw t;e.current.addImage("truck_red",i)})),e.current.loadImage(i(77501),(function(t,i){if(t)throw t;e.current.addImage("pickup_nav",i)}))}},16886:(e,t,i)=>{"use strict";i.d(t,{N:()=>s});var a=i(85893),o=i(67294);const s=({excavatorListClass:e,excavatorList:t})=>((0,o.useEffect)((()=>{e.addToMap()}),[]),(0,o.useEffect)((()=>{e.updateInMap()}),[t]),(0,a.jsx)(a.Fragment,{},void 0))},26271:(e,t,i)=>{"use strict";i.d(t,{b:()=>n});var a=i(85893),o=i(67294),s=i(6777);const n=({truckListClass:e,truckList:t})=>(s.ET,(0,o.useEffect)((()=>{e.addToMap()}),[]),(0,o.useEffect)((()=>{e.updateInMap()}),[t]),(0,a.jsx)(a.Fragment,{},void 0))},74248:(e,t,i)=>{"use strict";i.d(t,{f:()=>s});var a=i(67294),o=i(52573);const s=({polygonList:e,idSource:t,idLayer:i,idSourceCentroid:s,idLayerCentroid:n,map:r,haveCentroid:d,onClickFeature:c})=>((0,a.useEffect)((()=>{const a=new o.z(e,r,t,i,s,n,c,d);return a.addToMap(),()=>{a.removeOfMap()}}),[e]),null)},36192:(e,t,i)=>{"use strict";i.d(t,{h:()=>d});var a=i(85893),o=i(52387),s=i(73637),n=i(67294);const r=({anchorEl:e,setAnchorEl:t,childen:i})=>(0,a.jsx)("div",Object.assign({onClick:i=>{t(e?null:i.currentTarget)}},{children:i}),void 0),d=({children:e,header:t})=>{const[i,d]=n.useState(null),c=Boolean(i),l=c?"transitions-popper":void 0;return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(r,{setAnchorEl:d,anchorEl:i,childen:t},void 0),(0,a.jsx)(o.ZP,Object.assign({id:l,open:c,anchorEl:i,onClose:()=>{d(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}},{children:(0,a.jsx)(s.Z,{children:e},void 0)}),void 0)]},void 0)}},14276:(e,t,i)=>{"use strict";i.d(t,{c:()=>a});class a{constructor(e,t,i,a,o,s){this.unitsList=e,this.map=t,this.idSource=i,this.idLayer=a,this.iconImagen=o,this.offsetY=-2.1,this.fontSize=9,this.onClickElement=s}getInMap(){return this.map.getSource(this.idSource)}generateFeatures(){return this.unitsList.map((e=>{const{latitude:t,longitude:i,direction:a}=e.sensor,o=e.deviceAlias.split("-"),s=o.length>1&&""!==o[1].trim()?`${o[0].substr(0,1)}${o[1].substr(-2)}`:e.deviceAlias;return{type:"Feature",geometry:{type:"Point",coordinates:[i,t]},properties:{deviceId:e.deviceId,rotate:a,name:`${s}`,rotation:-180+a,offsetdata:[0,0]}}}))}addToMap(){!this.getInMap()&&this.unitsList.length>0&&(this.map.addSource(this.idSource,{type:"geojson",data:{type:"FeatureCollection",features:this.generateFeatures()}}),this.map.addLayer({id:this.idLayer,type:"symbol",source:this.idSource,layout:{"icon-image":this.iconImagen,"icon-size":.08,"icon-ignore-placement":!0,"icon-allow-overlap":!0,"icon-rotate":["get","rotate"]}}),this.map.addLayer({id:`LABEL_${this.idLayer}`,type:"symbol",source:this.idSource,layout:{"text-field":["get","name"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":this.fontSize,"text-rotate":["get","rotation"],"text-offset":["get","offsetdata"],"text-allow-overlap":!0},paint:{"text-color":"#fff","text-halo-color":"#00296b","text-halo-width":4}}),this.map.on("click",this.idLayer,(e=>{this.onClickElement&&this.onClickElement(e)})),this.map.on("mouseenter",this.idLayer,(()=>{this.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave",this.idLayer,(()=>{this.map.getCanvas().style.cursor=""})))}updateInMap(){const e=this.getInMap();e?e.setData({type:"FeatureCollection",features:this.generateFeatures()}):this.addToMap()}removeOfMap(){this.getInMap()&&(this.map.removeLayer(this.idLayer),this.map.removeLayer(`LABEL_${this.idLayer}`),this.map.removeSource(this.idSource))}}},52573:(e,t,i)=>{"use strict";i.d(t,{z:()=>o});var a=i(35573);class o{constructor(e,t,i,a,o,s,n,r){this.polygonList=e,this.map=t,this.idSource=i,this.idLayer=a,this.idSourceCentroid=o,this.idLayerCentroid=s,this.fontSize=9,this.onClickElement=n,this.haveCentroid=r}getInMap(){return this.map.getSource(this.idSource)}getCenterInMap(){return this.map.getSource(this.idSourceCentroid)}generateCentroids(){return this.polygonList.map((e=>{var t,i,a;if(!e.centroid)return{type:"Feature",geometry:{type:"Point",coordinates:[0,0]},properties:{}};const{latitude:o,longitude:s}=e.centroid;return{type:"Feature",geometry:{type:"Point",coordinates:[s,o]},properties:{name:`${e.name}${e.material?`-${e.material.type}`:""}`,points_polygonTajo:e.pointList.map((e=>[e.longitude,e.latitude])),name_polygon:e.name,name_material:null===(t=e.material)||void 0===t?void 0:t.type,id_polygonTajo:e.id,agTajo:e.ag,agcnTajo:e.agcn,alteTajo:e.alte,asTajo:e.as,auTajo:e.au,auchTajo:e.auch,altitudeTajo:e.altitude,descripcionTajo:"",heightTajo:e.height,litoTajo:e.litio,materialTajo:null===(i=e.material)||void 0===i?void 0:i.type,namePolTajo:e.name,nameProjectTajo:e.nameProject,onzasTajo:e.onzas,orezonetTajo:e.orezonet,ptaucnTajo:e.ptaucn,sTajo:e.s,tonnesTajo:e.tonnes,volumeTajo:e.volume,nameDme:`${e.name}`,points_polygonDme:e.pointList.map((e=>[e.longitude,e.latitude])),id_polygonDme:e.id,tonnesDme:e.tonnes,volumeDme:e.volume,namePad:`${e.name}`,id_Pad:`${e.id}_pad`,points_Pad:e.pointList.map((e=>[e.longitude,e.latitude])),tonnesPad:e.tonnes,volumePad:e.volume,nameStock:`${e.name}`,id_polygonStock:e.id,points_polygonStock:e.pointList.map((e=>[e.longitude,e.latitude])),materialStock:null===(a=e.material)||void 0===a?void 0:a.type,altitudeStock:e.altitude,volumeStock:e.volume}}}))}generateFeatures(){return this.polygonList.map((e=>({type:"Feature",properties:{color:a.O[e.color]?a.O[e.color].hex:e.color,out_color:"blue",opacity:this.haveCentroid?1:.2,opacity_border:1},geometry:{type:"Polygon",coordinates:[e.pointList.map((e=>[e.longitude,e.latitude,e.altitude]))]}})))}addToMap(){!this.getInMap()&&this.polygonList.length>0?(this.map.getSource(this.idSource)||this.map.addSource(this.idSource,{type:"geojson",data:{type:"FeatureCollection",features:this.generateFeatures()}}),this.map.getLayer(this.idLayer)||this.map.addLayer({id:this.idLayer,type:"fill",source:this.idSource,paint:{"fill-color":["get","color"],"fill-outline-color":["get","out_color"],"fill-opacity":["get","opacity"]}}),this.map.getLayer(`BORDER_${this.idLayer}`)||this.map.addLayer({id:`BORDER_${this.idLayer}`,type:"line",source:this.idSource,paint:{"line-color":["get","out_color"],"line-width":2,"line-opacity":["get","opacity_border"]},filter:["==","$type","Polygon"]}),this.haveCentroid&&(this.map.getSource(this.idSourceCentroid)||this.map.addSource(this.idSourceCentroid,{type:"geojson",data:{type:"FeatureCollection",features:this.generateCentroids()}}),this.map.getLayer(this.idLayerCentroid)||this.map.addLayer({id:this.idLayerCentroid,type:"symbol",source:this.idSourceCentroid,layout:{"text-field":["get","name"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":this.fontSize},paint:{"text-color":"#00296b","text-halo-color":"#f8f7ff","text-halo-width":2}})),this.map.on("click",this.idLayerCentroid,(e=>{this.onClickElement&&this.onClickElement(e)})),this.map.on("mouseenter",this.idLayerCentroid,(()=>{this.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave",this.idLayerCentroid,(()=>{this.map.getCanvas().style.cursor=""}))):this.getInMap()&&this.updateInMap()}updateInMap(){const e=this.getInMap();e?e.setData({type:"FeatureCollection",features:this.generateFeatures()}):this.addToMap()}removeOfMap(){this.getInMap()&&(this.map.removeLayer(this.idLayer),this.map.removeLayer(`BORDER_${this.idLayer}`),this.map.removeSource(this.idSource),this.getCenterInMap()&&(this.map.removeLayer(this.idLayerCentroid),this.map.removeSource(this.idSourceCentroid)))}}},49521:(e,t,i)=>{"use strict";i.d(t,{h:()=>w});var a=i(85893),o=i(41120),s=i(35117),n=i(45258),r=i(28358),d=i(41749),c=i(282),l=i(22318),u=i(43471),p=i(5977),h=i(83736),v=i(55517),g=i(18463),m=i(79912),j=i(79895),x=i(17812),b=i(16575),f=i(51972),y=i(67294),C=i(36192),O=i(73855),Z=i(45855),L=i(5563);const S=({title:e,content:t})=>(0,a.jsxs)(y.Fragment,{children:[(0,a.jsxs)(l.Z,Object.assign({variant:"subtitle1"},{children:[(0,a.jsx)(b.Z,{style:{fontSize:"14px",marginRight:"4px"}},void 0),e]}),void 0),(0,a.jsx)(l.Z,Object.assign({variant:"body1"},{children:t}),void 0),(0,a.jsx)(v.Z,{},void 0)]},void 0),k=()=>{var e,t;const i=(0,O.T)(),o=(0,L.dP)(),{notificationsHeader:s}=(0,O.C)(Z.Af);return(0,y.useEffect)((()=>{i((0,Z.pK)())}),[]),(0,a.jsxs)(g.Z,{children:[(0,a.jsx)(m.Z,Object.assign({className:o.root},{children:(0,a.jsx)(l.Z,Object.assign({variant:"subtitle1"},{children:"Notificaciones"}),void 0)}),void 0),(0,a.jsx)(v.Z,{},void 0),(0,a.jsxs)(j.Z,Object.assign({elevation:3,style:{padding:"8px",overflow:"scroll"}},{children:[(!s.notificationsList||0===(null===(e=s.notificationsList)||void 0===e?void 0:e.length))&&(0,a.jsx)(l.Z,Object.assign({variant:"subtitle1"},{children:"No tiene notificaciones Nuevas"}),void 0),null===(t=s.notificationsList)||void 0===t?void 0:t.map(((e,t)=>(0,a.jsx)(S,{title:e.title,content:e.message},t)))]}),void 0)]},void 0)},I=()=>{var e;const{notificationsHeader:t}=(0,O.C)(Z.Af);return(0,a.jsx)(C.h,{children:(0,a.jsx)(k,{},void 0),header:(0,a.jsx)(x.Z,Object.assign({color:(null===(e=t.notificationsList)||void 0===e?void 0:e.length)>0?"primary":"inherit",style:{width:"40px",height:"40px"},size:"medium"},{children:(0,a.jsx)(f.Z,{},void 0)}),void 0)},void 0)},E=(0,o.Z)((e=>(0,s.Z)({root:{minHeight:"50px"}}))),w=({title:e})=>{const t=E(),i=(0,p.k6)();return(0,a.jsx)(n.Z,Object.assign({position:"fixed",color:"secondary",className:t.root,elevation:0},{children:(0,a.jsxs)(r.Z,Object.assign({variant:"dense"},{children:[(0,a.jsxs)(d.Z,Object.assign({container:!0,alignItems:"center"},{children:[(0,a.jsx)(c.Z,{size:"small",startIcon:(0,a.jsx)(u.Z,{color:"action",style:{color:"#fff"}},void 0),onClick:()=>{i.goBack()}},void 0),(0,a.jsx)(l.Z,Object.assign({variant:"h6"},{children:e}),void 0)," "]}),void 0),(0,a.jsxs)(d.Z,Object.assign({container:!0,justifyContent:"flex-end",alignItems:"center",spacing:5},{children:[(0,a.jsx)(d.Z,Object.assign({item:!0},{children:(0,a.jsx)(I,{},void 0)}),void 0),(0,a.jsx)(d.Z,Object.assign({item:!0},{children:(0,a.jsx)(h.u,{},void 0)}),void 0)]}),void 0)]}),void 0)}),void 0)}},83736:(e,t,i)=>{"use strict";i.d(t,{f:()=>C,u:()=>Z});var a=i(85893),o=i(33901),s=i(18463),n=i(79912),r=i(22318),d=i(55517),c=i(94697),l=i(51907),u=i(41749),p=i(36192),h=i(40064),v=i(50255),g=i(5833),m=i(73855),j=i(53559),x=i(5977),b=i(82067),f=i(93584),y=i(5563);const C=({className:e})=>{const{user:{user:t}}=(0,m.C)(j.MR);return(0,a.jsx)(o.Z,Object.assign({className:e,alt:"Avatar"},{children:t.firstName[0].toUpperCase()}),void 0)},O=()=>{const e=(0,y.dP)(),{user:{user:t}}=(0,m.C)(j.MR),i=(0,x.k6)();return(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(n.Z,Object.assign({className:e.root},{children:(0,a.jsx)(r.Z,Object.assign({variant:"subtitle1"},{children:"Cuenta"}),void 0)}),void 0),(0,a.jsx)(d.Z,{},void 0),(0,a.jsx)(c.Z,{avatar:(0,a.jsx)(C,{},void 0),title:`${t.firstName} ${t.lastName}`,subheader:t.username},void 0),(0,a.jsx)(d.Z,{},void 0),(0,a.jsx)(l.Z,Object.assign({disableSpacing:!0},{children:(0,a.jsxs)(u.Z,Object.assign({container:!0,direction:"column",alignItems:"flex-start"},{children:[(0,a.jsx)(y.Eo,Object.assign({onClick:()=>{i.push("/setting/profile")},style:{width:"100%"},startIcon:(0,a.jsx)(b.Z,{htmlColor:`${f.Jx}`},void 0)},{children:"Perfil"}),void 0),(0,a.jsx)(y.Eo,Object.assign({onClick:()=>{i.push("/")},style:{width:"100%"},startIcon:(0,a.jsx)(h.Z,{htmlColor:`${f.Jx}`},void 0)},{children:"Dispatch"}),void 0),(0,a.jsx)(y.Eo,Object.assign({onClick:()=>{i.push("/setting")},style:{width:"100%"},startIcon:(0,a.jsx)(v.Z,{htmlColor:`${f.Jx}`},void 0)},{children:"Configuraciones"}),void 0),(0,a.jsxs)("div",Object.assign({style:{width:"100%"}},{children:[(0,a.jsx)(d.Z,{},void 0),(0,a.jsx)(y.Eo,Object.assign({style:{width:"100%"},onClick:()=>{window.localStorage.removeItem("token"),window.localStorage.removeItem("user"),i.push("/login")},startIcon:(0,a.jsx)(g.Z,{htmlColor:"red"},void 0)},{children:"Cerrar sesión"}),void 0)]}),void 0)]}),void 0)}),void 0)]},void 0)},Z=()=>{const e=(0,y.QH)();return(0,a.jsx)(p.h,{children:(0,a.jsx)(O,{},void 0),header:(0,a.jsx)(C,{className:e.root},void 0)},void 0)}},5563:(e,t,i)=>{"use strict";i.d(t,{dP:()=>r,QH:()=>d,Eo:()=>c});var a=i(41120),o=i(282),s=i(10150),n=i(38920);const r=(0,a.Z)((e=>(0,s.Z)({root:{textAlign:"center",padding:"5px"}}))),d=(0,a.Z)((e=>(0,s.Z)({root:{width:"30px",height:"30px"}}))),c=(0,n.Z)((e=>({label:{display:"flex",justifyContent:"flex-start"},root:{"&:hover":{backgroundColor:"#0069d9",borderColor:"#0062cc",boxShadow:"none",color:"white"},"&:active":{boxShadow:"none",backgroundColor:"#0062cc",borderColor:"#005cbf",color:"white"},"&:focus":{boxShadow:"0 0 0 0.2rem rgba(0,123,255,.5)"}}})))(o.Z)},95393:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>fe});var a=i(85893),o=i(43832),s=i(67294),n=i(10046),r=i(41749),d=i(95477),c=i(282),l=i(79895),u=i(41120),p=i(41423),h=i(22318),v=i(18463),g=i(79912),m=i(71267),j=i(14096),x=i(62822),b=i(17812),f=i(96837),y=i(59544),C=i(17215);const O=(0,i(73914).Z)((()=>({subHeader:{lineHeight:0,background:"#fff",paddingLeft:0,display:"flex",marginTop:8,borderRadius:4,borderBottomStyle:"groove"}}))),Z=({useOpen:e,title:t})=>{const i=O(),[o,s]=e,n=(0,a.jsx)(b.Z,Object.assign({size:"small"},{children:o?(0,a.jsx)(y.Z,{fontSize:"small"},void 0):(0,a.jsx)(C.Z,{fontSize:"small"},void 0)}),void 0);return(0,a.jsx)(f.Z,Object.assign({disableGutters:!0,onClick:()=>{s((e=>!e))},component:"span",className:i.subHeader},{children:(0,a.jsxs)("div",Object.assign({style:{display:"flex",alignItems:"center"}},{children:[(0,a.jsx)("span",Object.assign({style:{marginLeft:4}},{children:t}),void 0),(0,a.jsx)("div",Object.assign({style:{marginLeft:8}},{children:n}),void 0)]}),void 0)}),void 0)};var L=i(50998),S=i(95757);const k=(0,u.Z)((e=>({disablePadding:{padding:0,margin:0,flex:1},nested:{margin:0,padding:0,marginLeft:e.spacing(2.5),flex:1}}))),I=({primary:e,Icon:t,isSubItem:i,isSelect:o,onClick:n})=>{(0,s.useEffect)((()=>()=>{}),[]);const r=k();return(0,a.jsxs)(L.Z,Object.assign({selected:o,onClick:n,dense:!0,button:!0,className:i?r.nested:r.disablePadding},{children:[t&&(0,a.jsx)(t,{fontSize:"small"},void 0),(0,a.jsx)(S.Z,{className:r.disablePadding,primary:e},void 0)]}),void 0)};var E=i(10465),w=i(73855),T=i(97700),N=i(95090),_=i(66217);const D=({p:e})=>{const{selectedDownloadList:t}=(0,w.C)(T.nx),i=(0,w.T)(),o=(0,s.useCallback)((e=>!!t.find((t=>t.id===e.id))),[t]);return(0,a.jsx)(I,{primary:`Celda - ${e.name?e.name:"SIN NOM"}`,onClick:()=>{return t=e,i((0,_.BG)(Object.assign(Object.assign({},t),{type:N.NZ.PAD}))),void i((0,_.Ru)());var t},isSelect:o(e)},void 0)},F=({padCells:e})=>{const t=(0,s.useState)(!1),[i]=t,o=e.map((e=>(0,a.jsx)(D,Object.assign({},{p:e}),e.id)));return(0,a.jsxs)(x.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,a.jsx)(Z,{title:"Descarga",useOpen:t},void 0)},{children:[i&&(0,a.jsx)(E.V,{functionCancel:()=>{},functionFilter:()=>{}},void 0),o]}),void 0)},$=({p:e})=>{const{selectedDownloadList:t}=(0,w.C)(T.nx),i=(0,w.T)(),o=(0,s.useCallback)((e=>!!t.find((t=>t.id===e.id))),[t]);return(0,a.jsx)(I,{primary:`Celda - ${e.name?e.name:"SIN NOM"}`,onClick:()=>{return t=e,i((0,_.Fc)(Object.assign(Object.assign({},t),{type:N.NZ.STOCK}))),void i((0,_.Ru)());var t},isSelect:o(e)},void 0)},P=({stockCells:e})=>{const t=(0,s.useState)(!1),[i]=t,o=e.map((e=>(0,a.jsx)($,Object.assign({},{p:e}),e.id)));return(0,a.jsxs)(x.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,a.jsx)(Z,{title:"Descarga",useOpen:t},void 0)},{children:[i&&(0,a.jsx)(E.V,{functionCancel:()=>{},functionFilter:()=>{}},void 0),o]}),void 0)};var M=i(78479);const R=({p:e})=>{const{selectedDownloadList:t}=(0,w.C)(T.nx),i=(0,w.T)(),o=(0,s.useCallback)((e=>!!t.find((t=>t.id===e.id))),[t]);return(0,a.jsx)(I,{primary:`${e.name?e.name:"SIN NOM"}`,onClick:()=>{return t=e,i((0,_.dI)(Object.assign(Object.assign({},t),{type:N.NZ.DME}))),void i((0,_.Ru)());var t},isSelect:o(e)},void 0)},z=({dmeCells:e})=>{const t=(0,s.useState)(!1),[i]=t,o=e.map((e=>(0,a.jsx)(R,Object.assign({},{p:e}),e.id)));return(0,a.jsxs)(x.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,a.jsx)(Z,{title:"Descarga",useOpen:t},void 0)},{children:[i&&(0,a.jsx)(E.V,{functionCancel:()=>{},functionFilter:()=>{}},void 0),o]}),void 0)};const A=(0,u.Z)((e=>({nested:{marginLeft:e.spacing(1),marginBottom:0},root_unload:{display:"flex"},tabs:{borderRight:`1px solid ${e.palette.divider}`},tab:{minWidth:10,padding:1,paddingTop:8,paddingBottom:8},buttonTab:{writingMode:"vertical-rl"}})));function B(e){const{children:t,value:i,index:o}=e,s=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(i[a[o]]=e[a[o]])}return i}(e,["children","value","index"]);return(0,a.jsx)("div",Object.assign({role:"tabpanel",hidden:i!==o,id:`vertical-tabpanel-${o}`,"aria-labelledby":`vertical-tab-${o}`,style:{flex:1}},s,{children:i===o&&t}),void 0)}function U(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const H=({value:e,handleChange:t})=>{const i=A();return(0,a.jsxs)(j.Z,Object.assign({orientation:"vertical",variant:"scrollable",value:e,indicatorColor:"primary",textColor:"primary",onChange:t,"aria-label":"Vertical tabs",className:i.tabs},{children:[(0,a.jsx)(p.Z,Object.assign({className:i.tab,label:(0,a.jsx)(h.Z,Object.assign({variant:"caption",className:i.buttonTab},{children:"PAD"}),void 0)},U(0)),void 0),(0,a.jsx)(p.Z,Object.assign({className:i.tab,label:(0,a.jsx)(h.Z,Object.assign({variant:"caption",className:i.buttonTab},{children:"DME"}),void 0)},U(1)),void 0),(0,a.jsx)(p.Z,Object.assign({className:i.tab,label:(0,a.jsx)(h.Z,Object.assign({variant:"caption",className:i.buttonTab},{children:"STOCKs"}),void 0)},U(2)),void 0)]}),void 0)},W=()=>{const{padCellList:e,dmeCellList:t,stockCellList:i}=(0,w.C)(T.WD),{selectedDownloadList:o}=(0,w.C)(T.nx),s=A(),[n,d]=(0,M._)("index_tab_unload_operation",0);return(0,a.jsxs)(l.Z,Object.assign({elevation:4,style:{width:"100%"}},{children:[(0,a.jsxs)(r.Z,Object.assign({container:!0,className:s.root_unload},{children:[(0,a.jsx)(H,Object.assign({},{value:n,handleChange:(e,t)=>{d(t)}}),void 0),(0,a.jsx)(B,Object.assign({value:n,index:0},{children:(0,a.jsx)(F,{padCells:e.filter((e=>e.state!==N.p$.FINISHED))},void 0)}),void 0),(0,a.jsx)(B,Object.assign({value:n,index:1},{children:(0,a.jsx)(z,{dmeCells:t.filter((e=>e.state!==N.p$.FINISHED))},void 0)}),void 0),(0,a.jsx)(B,Object.assign({value:n,index:2},{children:(0,a.jsx)(P,{stockCells:i.filter((e=>e.state!==N.p$.FINISHED))},void 0)}),void 0)]}),void 0),(0,a.jsx)(v.Z,{children:(0,a.jsx)(g.Z,{children:o.map((e=>(0,a.jsx)(m.Z,{label:4===e.type?e.name:`Celda - ${e.name}`},e.id)))},void 0)},void 0)]}),void 0)};var V=i(55517);const Y=(0,u.Z)((e=>({root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{marginLeft:e.spacing(1),marginBottom:0},root_unload:{display:"flex"},tabs:{borderRight:`1px solid ${e.palette.divider}`},tab:{minWidth:10,padding:1,paddingTop:8,paddingBottom:8},buttonTab:{writingMode:"vertical-rl"}})));function q(e){const{children:t,value:i,index:o}=e,s=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(i[a[o]]=e[a[o]])}return i}(e,["children","value","index"]);return(0,a.jsx)("div",Object.assign({role:"tabpanel",hidden:i!==o,id:`vertical-tabpanel-${o}`,"aria-labelledby":`vertical-tab-${o}`,style:{flex:1,height:"auto",boxShadow:"inset 0px -2px 10px 0px rgb(17 16 10 / 56%)",margin:8,borderRadius:4}},s,{children:i===o&&t}),void 0)}function K(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const J=()=>{const{selectedUploadList:e}=(0,w.C)(T.nx),{polygonList:t,stockCellList:i,state:o}=(0,w.C)(T.WD),n=(0,w.T)(),d=Y(),[c,u]=(0,s.useState)([]),[v,g]=(0,s.useState)([]),[m,b]=(0,M._)("index_tab_load_operation",0),f=(0,s.useState)(!1);(0,s.useEffect)((()=>{o===N.JD.DONE&&(u(t.filter((e=>e.state!==N.p$.FINISHED))),g(i.filter((e=>e.state!==N.p$.FINISHED))))}),[o]);const y=(0,s.useCallback)((e=>{if(e){const{value:i}=e.target,a=i?i.toUpperCase():"";u(t.filter((e=>{const t=e.material?e.material.type:"";return e.name.toUpperCase().includes(a)||e.nameProject.toUpperCase().includes(a)||t.includes(a)})))}}),[t]),C=(0,s.useCallback)((e=>{if(e){const{value:t}=e.target,a=t?t.toUpperCase():"";g(i.filter((e=>e.name.toUpperCase().includes(a))))}}),[i]),O=(0,s.useCallback)((()=>{u(t)}),[t]),k=(0,s.useCallback)((()=>{g(i)}),[i]),I=(0,s.useCallback)((t=>!!e.find((e=>e.id===t.id))),[e]);return(0,a.jsx)(l.Z,Object.assign({elevation:4,style:{flex:1}},{children:(0,a.jsxs)(r.Z,Object.assign({container:!0},{children:[(0,a.jsxs)(j.Z,Object.assign({orientation:"vertical",variant:"scrollable",value:m,indicatorColor:"primary",textColor:"primary",onChange:(e,t)=>{b(t)},"aria-label":"Vertical tabs",className:d.tabs},{children:[(0,a.jsx)(p.Z,Object.assign({className:d.tab,label:(0,a.jsx)(h.Z,Object.assign({variant:"caption",className:d.buttonTab},{children:"TAJO"}),void 0)},K(0)),void 0),(0,a.jsx)(p.Z,Object.assign({className:d.tab,label:(0,a.jsx)(h.Z,Object.assign({variant:"caption",className:d.buttonTab},{children:"STOCKs"}),void 0)},K(1)),void 0)]}),void 0),(0,a.jsx)(q,Object.assign({value:m,index:0},{children:(0,a.jsxs)(x.Z,Object.assign({dense:!0,disablePadding:!0,style:{width:"100%",paddingLeft:4,overflowY:"scroll",paddingBottom:32,height:"80vh"},subheader:(0,a.jsx)(Z,{title:"Carguío",useOpen:f},void 0)},{children:[f[0]&&(0,a.jsx)(E.V,{functionFilter:y,functionCancel:O,placeholder:"Buscar por polígono"},void 0),c.map((e=>(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(L.Z,Object.assign({selected:I(e),button:!0,dense:!0,onClick:()=>{return t=e,void n((0,_.qn)(Object.assign(Object.assign({},t),{type:N.NZ.PIT})));var t}},{children:(0,a.jsx)(S.Z,{primary:`${e.nameProject} - ${e.name} `,secondary:e.material?`Material ${e.material.type}`:"Material not found"},void 0)}),void 0),(0,a.jsx)(V.Z,{},void 0)]},e.id)))]}),void 0)}),void 0),(0,a.jsx)(q,Object.assign({value:m,index:1},{children:(0,a.jsxs)(x.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,overflowY:"scroll"},subheader:(0,a.jsx)(Z,{title:"Carguío",useOpen:f},void 0)},{children:[f[0]&&(0,a.jsx)(E.V,{functionFilter:C,functionCancel:k},void 0),v.map((e=>(0,a.jsx)(L.Z,Object.assign({selected:I(e),button:!0,dense:!0,onClick:()=>{return t=e,void n((0,_.qn)(Object.assign(Object.assign({},t),{type:N.NZ.STOCK})));var t}},{children:(0,a.jsx)(S.Z,{primary:e.name},void 0)}),e.id)))]}),void 0)}),void 0)]}),void 0)}),void 0)};var G=i(64436),Q=i(67162),X=i(30553),ee=i(40074),te=i(14125),ie=i(5977);const ae=(0,u.Z)((e=>({root:{flex:1},list:{maxHeight:"75vh",paddingLeft:e.spacing(1),marginLeft:e.spacing(1),overflowY:"scroll",marginBottom:e.spacing(2)}}))),oe=()=>{const e=(0,s.useState)(!1),{idEx:t,deviceIdEx:i}=(0,ie.UO)(),{selectedExcavator:o}=(0,w.C)(T.nx),{excavatorInfoList:n}=(0,w.C)(te.kW),r=(0,w.T)(),[d,c]=(0,s.useState)([]);(0,s.useEffect)((()=>{c(n)}),[n]);const u=ae();return(0,s.useEffect)((()=>{const e={id:t,deviceId:i};t&&"0"!==t&&i&&r((0,_.Zh)(e))}),[t]),(0,a.jsx)(l.Z,Object.assign({elevation:4,style:{width:"100%"}},{children:(0,a.jsx)(x.Z,Object.assign({className:u.list,dense:!0,disablePadding:!0,subheader:(0,a.jsx)(Z,{title:"Palas",useOpen:e},void 0)},{children:(0,a.jsx)(L.Z,Object.assign({dense:!0,disableGutters:!0},{children:(0,a.jsx)(G.Z,Object.assign({size:"small",fullWidth:!0,component:"fieldset"},{children:(0,a.jsx)(Q.Z,Object.assign({"aria-label":"gender",name:"radio-buttons-group"},{children:d.map((e=>{var t,i,n;return(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(X.Z,{value:e,disabled:Number(null===(t=e.operationList)||void 0===t?void 0:t.length)>0,checked:o.length>0&&e.deviceId===o[0].deviceId,control:(0,a.jsx)(ee.Z,{disabled:Number(null===(i=e.operationList)||void 0===i?void 0:i.length)>0,checked:o.length>0&&e.deviceId===o[0].deviceId,size:"small"},void 0),onClick:Number(null===(n=e.operationList)||void 0===n?void 0:n.length)>0?()=>{}:()=>(e=>{r((0,_.Zh)(e))})(e),label:(0,a.jsx)(h.Z,Object.assign({component:"span",variant:"body2"},{children:e.deviceAlias}),void 0)},void 0),(0,a.jsx)(V.Z,{},void 0)]},e.deviceId)}))}),void 0)}),void 0)}),void 0)}),void 0)}),void 0)};var se=i(76533),ne=i(48101),re=i(74248),de=i(14276),ce=i(99302),le=i(26271),ue=i(16886),pe=i(79800);const he=({map:e})=>{const{excavatorInfoList:t}=(0,w.C)(te.kW),{truckInfoList:i}=(0,w.C)(ce.ej),o=(0,s.useMemo)((()=>{const t=i.filter((e=>e.sensor)),o=new de.c(t,e.current,"TRUCK_LIST_SOURCE","TRUCK_LIST_LAYER","truck_nav");return(0,a.jsx)(le.b,{truckList:t,truckListClass:o},void 0)}),[i]),n=(0,s.useMemo)((()=>{const i=t.filter((e=>e.sensor)),o=new de.c(i,e.current,"EXCAVATOR_LIST_SOURCE","EXCAVATOR_LIST_LAYER","excavator_nav");return(0,a.jsx)(ue.N,{excavatorList:i,excavatorListClass:o},void 0)}),[t]);return(0,a.jsxs)(a.Fragment,{children:[o,n]},void 0)},ve=()=>{const e=(0,s.useRef)(null),t=(0,s.useRef)(null),{selectedUploadList:i,selectedDownloadList:o}=(0,w.C)(T.nx);(0,s.useEffect)((()=>()=>{e.current=null}),[]);const[n,r]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{n&&(0,pe.H)(e)}),[n]),(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(re.f,Object.assign({},{polygonList:i,map:e.current,idSource:"UPLOAD_SOURCE",idLayer:"UPLOAD_LAYER",idSourceCentroid:"CENTROID_UPLOAD_SOURCE",idLayerCentroid:"CENTROID_UPLOAD_LAYER",haveCentroid:!0}),void 0),(0,a.jsx)(re.f,Object.assign({},{polygonList:o,map:e.current,idSource:"DOWNLOAD_SOURCE",idLayer:"DOWNLOAD_LAYER",idSourceCentroid:"CENTROID_DOWNLOAD_SOURCE",idLayerCentroid:"CENTROID_DOWNLOAD_LAYER",haveCentroid:!0,onClickFeature:()=>{}}),void 0),(0,a.jsx)(he,{map:e},void 0)]},void 0),(0,a.jsx)(ne.Z,Object.assign({map:e,dragRotate:!1,style:"mapbox://styles/dispatchgat/ckqqsfc2y46bo17sf1y29zwnj",mapContainer:t,bearing:0,pitch:15,height:"90vh"},{lat:-7.6163,lng:-78.196,zoom:14,setLoad:r}),void 0)]},void 0)};var ge=i(78965),me=i(52672);const je=()=>{const[e,t]=(0,s.useState)(!1),i=(0,ie.k6)(),o=(0,w.T)(),{selectedExcavator:l,selectedTruckList:u,selectedUploadList:p,selectedDownloadList:h}=(0,w.C)(T.nx);return(0,s.useEffect)((()=>()=>{o((0,_.nw)())}),[]),(0,a.jsx)(n.Z,Object.assign({padding:1},{children:(0,a.jsx)(r.Z,Object.assign({container:!0,justifyContent:"flex-end",alignItems:"center",alignContent:"center"},{children:e?(0,a.jsx)(d.Z,{},void 0):(0,a.jsx)(c.Z,Object.assign({variant:"outlined",onClick:()=>{l.length<=0?o((0,me.L8)({msg:"Debe seleccionar una excavadora",open:!0,severity:"warning"})):p.length>0&&h.length>0?(t(!0),(0,se.pg)(p,h,u,l,[]).then((e=>{(0,me.L8)({msg:"Done!!",open:!0,severity:"success"}),o((0,_.nw)()),t(!1),i.replace("/operation")})).catch((e=>{console.log(e),t(!1),o((0,me.L8)({msg:`Error al guardar: posiblemente las unidades ya estan en otra operación: ${e.message}`,open:!0,severity:"warning"}))}))):o((0,me.L8)({msg:"Debe seleccionar un Carguío y descarga",open:!0,severity:"warning"}))},color:"primary",size:"small",startIcon:(0,a.jsx)(ge.Z,{fontSize:"small"},void 0)},{children:"Guardar"}),void 0)}),void 0)}),void 0)},xe=()=>(0,a.jsxs)(r.Z,Object.assign({container:!0},{children:[(0,a.jsxs)(l.Z,{children:[(0,a.jsxs)(r.Z,Object.assign({container:!0,style:{padding:4,flex:1}},{children:[(0,a.jsx)(J,{},void 0),(0,a.jsxs)(r.Z,Object.assign({container:!0,alignContent:"flex-start",style:{flex:1,marginLeft:8,marginRight:8,gap:8}},{children:[(0,a.jsx)(W,{},void 0),(0,a.jsx)(oe,{},void 0)]}),void 0)]}),void 0),(0,a.jsx)(je,{},void 0)]},void 0),(0,a.jsx)(ve,{},void 0)]}),void 0);var be=i(49521);function fe(){return(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(be.h,{title:"Crear Operación"},void 0),(0,a.jsx)(o.Z,Object.assign({style:{marginTop:"60px"},maxWidth:"xl"},{children:(0,a.jsx)(xe,{},void 0)}),void 0)]},void 0)}},38190:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var a=i(85893),o=i(43832),s=i(5977),n=i(75666),r=i(73855),d=i(49521);function c(){const{id:e}=(0,s.UO)();return(0,r.T)(),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.h,{title:`Cyclos de camión ${e}`},void 0),(0,a.jsx)(o.Z,Object.assign({style:{marginTop:"100px"},maxWidth:"xl"},{children:(0,a.jsx)(n.Z,{id:e},void 0)}),void 0)]},void 0)}},53279:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var a=i(85893),o=i(43832),s=i(67294),n=i(5977),r=i(67539),d=i(73855),c=i(76796),l=i(49521);function u(){const{id:e}=(0,n.UO)(),t=(0,d.T)();return(0,s.useEffect)((()=>{t((0,c.l4)(e))}),[e]),(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(l.h,{title:"Detalle de Operación"},void 0),(0,a.jsx)(o.Z,Object.assign({style:{marginTop:"60px"},maxWidth:"xl"},{children:(0,a.jsx)(r.S,{},void 0)}),void 0)]},void 0)}}}]);