"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[633],{61242:(e,t,i)=>{i.d(t,{a:()=>u});var n=i(85893),o=i(41120),s=i(52663),a=i(66083),l=i(29525),r=i(66856),d=i(95477),c=i(282);const v=(0,o.Z)({disabledPadding:{padding:0,textAlign:"center"}}),u=({open:e,handleClose:t,handleConfirm:i,title:o,children:u,maxWidth:m="lg",disabled:h=!1,loading:g})=>{const j=v();return(0,n.jsxs)(s.Z,Object.assign({open:e,onClose:t,maxWidth:m},{children:[(0,n.jsx)(a.Z,Object.assign({className:j.disabledPadding},{children:o}),void 0),(0,n.jsx)(l.Z,{children:u},void 0),(0,n.jsx)(r.Z,{children:g?(0,n.jsx)(d.Z,{style:{width:"30px",height:"30px"}},void 0):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,Object.assign({size:"small",color:"primary",onClick:t},{children:"Cancelar"}),void 0),i&&(0,n.jsx)(c.Z,Object.assign({disabled:h,variant:"outlined",size:"small",color:"secondary",onClick:i,autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)},void 0)]}),void 0)}},10646:(e,t,i)=>{i.d(t,{l:()=>n});const n=e=>[`${e.getFullYear()}-${`0${e.getMonth()+1}`.substr(-2)}-${`0${e.getDate()}`.substr(-2)}`]},88093:(e,t,i)=>{i.d(t,{R:()=>n});const n=()=>{var e=new Date;return e.getHours(),[e.getHours()>=0&&e.getHours()<7?new Date(e.getTime()-864e5):e]}},990:(e,t,i)=>{i.d(t,{M:()=>o});var n=i(67294);const o=e=>{const[t,i]=(0,n.useState)(e);return[t,e=>{i(Object.assign(Object.assign({},t),{[e.target.name]:e.target.value}))},()=>{i(e)},i]}},15635:(e,t,i)=>{i.d(t,{r:()=>s});var n=i(67294),o=i(95090);const s=e=>{const[t,i]=(0,n.useState)(!1);return(0,n.useEffect)((()=>(e===o.JD.DONE||e===o.JD.UNKNOWN||e===o.JD.ERROR?i(!1):i(!0),()=>{i(!1)})),[e]),[t]}},42382:(e,t,i)=>{i.r(t),i.d(t,{HourmeterView:()=>ot,default:()=>st});var n=i(85893),o=i(41749),s=i(10046),a=i(67294),l=i(73855),r=i(12207),d=i(74046),c=i(61242),v=i(60702),u=i(44562);const m=({error:e,index:t})=>{const[i,o]=a.useState(!0),[s,l]=a.useState({vertical:"bottom",horizontal:"right"}),{vertical:r,horizontal:d}=s,c=(e,t)=>{"clickaway"!==t&&o(!1)};return(0,n.jsx)(v.Z,Object.assign({anchorOrigin:{vertical:r,horizontal:d},open:i,onClose:c,style:{marginBottom:60*t+"px"}},{children:(0,n.jsx)(u.Z,Object.assign({style:{marginTop:".5rem"},onClose:c,severity:"error"},{children:(0,n.jsx)("strong",{children:e.message},void 0)}),void 0)}),void 0)},h=({error:e})=>{const[t,i]=a.useState({open:!0,vertical:"bottom",horizontal:"right"}),{vertical:o,horizontal:s,open:l}=t,r=()=>{i(Object.assign(Object.assign({},t),{open:!1}))};return(0,n.jsx)(v.Z,Object.assign({open:!0,anchorOrigin:{vertical:o,horizontal:s}},{children:(0,n.jsx)("div",{children:null==e?void 0:e.map(((e,t)=>(0,n.jsx)(m,{error:e,handleClose:r,index:t},e.deviceId)))},void 0)}),void 0)};var g=i(92284),j=i(73914),f=i(57850),x=i(59693),b=i(93584);function E(e){return e.type||e.mode}const O=(0,f.Z)(),p=(0,j.Z)((e=>{E(e.palette);const t=t=>"dark"===E(e.palette)?(0,x._j)(t,.1):(0,x.$n)(t,.1);return{root:{"& .super-app-theme--cell":{backgroundColor:"rgb(26,62,114,0.1)",color:"#1a3e72",fontWeight:"600"},"& .Mui-error.negative":{backgroundColor:"#CCFFFF",color:"#1a3e72",fontWeight:"600"},"& .Mui-error.positive":{backgroundColor:"rgba(157, 255, 118, 0.49)",color:"#1a3e72",fontWeight:"600"},"& .super-app-theme--false":{backgroundColor:(i="rgb(255, 48, 83)","dark"===E(e.palette)?(0,x._j)(i,.1):(0,x.$n)(i,.5)),"&:hover":{backgroundColor:t(e.palette.error.main)}},"& .MuiDataGrid-row":{"&:hover":{backgroundColor:t(`${b.sb}`)},"& .Mui-selected":{"&:hover":{backgroundColor:t(`${b.sb}`)}}}}};var i}),{defaultTheme:O});var S=i(868),T=i(17812),N=i(52303),y=i(80024),C=i(99050),w=i(85639),Z=i(79192),I=i(67774),k=i(97700);const A=()=>{const{eventList:e}=(0,l.C)(k.yJ),t=(0,l.T)(),[i,n]=a.useState([]);return(0,a.useEffect)((()=>{n([{id:"NONE",name:"NONE",event:""},...e])}),[e]),(0,a.useEffect)((()=>{t((0,I.TU)())}),[]),[i]},L=(e,t)=>{const i=(0,l.T)();return[(n="NONE")=>{t(null),i(e("NONE"===n?{columnField:"statusEvent",operatorValue:"startsWith",value:""}:{columnField:"statusEvent",operatorValue:"startsWith",value:n}))}]};function D(){const[e]=A(),[t,i]=a.useState(null),o=Boolean(t),[s]=L(d.V,i);return(0,n.jsxs)("div",{children:[(0,n.jsx)(T.Z,Object.assign({style:{padding:"0px",margin:"0px"},"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:e=>{i(e.currentTarget)}},{children:(0,n.jsx)(Z.Z,{},void 0)}),void 0),(0,n.jsx)(C.Z,Object.assign({id:"long-menu",anchorEl:t,keepMounted:!0,open:o,onClose:()=>s("NINGUNO"),PaperProps:{style:{maxHeight:216,width:"20ch"}}},{children:e.map((e=>(0,n.jsx)(w.Z,Object.assign({onClick:()=>s(e.event.toString())},{children:e.name}),e.name)))}),void 0)]},void 0)}var P=i(8286),F=i(78479);const H=({row:e})=>{var t,i,o,r;const[c,v]=(0,F._)("hourmeterExcavator",{}),u=(0,l.T)();return(0,a.useEffect)((()=>{u((0,d.WZ)(c))}),[c]),(0,n.jsx)(s.Z,Object.assign({component:"form",onSubmit:t=>{t.preventDefault();const i=new FormData(t.currentTarget),n={};n[e.deviceId]={value:i.get("hourmeter"),color:"rgba(157, 255, 118, 0.49)"},(e=>{const t=JSON.parse(window.localStorage.getItem("hourmeterExcavator")),i=Object.assign(t,e);v(Object.assign({},i))})(n),"UNKNOWN_SHIFT"!==e.shift&&u((0,d.zi)(Object.assign(Object.assign({},e),{hourmeter:i.get("hourmeter")})))},sx:{mt:1}},{children:(0,n.jsx)(P.Z,{style:{background:(null===(t=c[e.deviceId])||void 0===t?void 0:t.color)?null===(i=c[e.deviceId])||void 0===i?void 0:i.color:""},inputProps:{pattern:"^[0-9]+([.][0-9]+)?$"},name:"hourmeter",autoComplete:"off",id:"hourmeter",defaultValue:(null===(o=c[e.deviceId])||void 0===o?void 0:o.value)?null===(r=c[e.deviceId])||void 0===r?void 0:r.value:e.hourmeterCurrent},void 0)}),void 0)},M=(e,t,i,o)=>[Object.assign(Object.assign({},g.mf9),{width:60,renderHeader:e=>(0,n.jsx)(S.ZP,Object.assign({title:"Select all"},{children:(0,n.jsxs)("div",Object.assign({style:{display:"flex",padding:"0px",margin:"0px"}},{children:[(0,n.jsx)(g.KOw,Object.assign({},e),void 0),(0,n.jsx)(D,{},void 0)]}),void 0)}),void 0)}),{field:"excavator",headerName:"Excavadora",hideSortIcons:!0},{field:"shift",headerName:"Turno",hideSortIcons:!0,width:60,renderCell:({row:e})=>(0,n.jsx)(S.ZP,Object.assign({title:e.shift},{children:(0,n.jsx)("p",{children:e.shift},void 0)}),void 0)},{field:"statusEvent",headerName:"Evento",type:"string",hide:!0},{field:"status",headerName:"Estado",width:100,hideSortIcons:!0,renderCell:({row:e})=>(0,n.jsx)(S.ZP,Object.assign({title:e.status},{children:(0,n.jsx)("p",{children:e.status},void 0)}),void 0)},{field:"hmtStart",headerName:"Horometro",editable:!1,type:"number",hideSortIcons:!0},{field:"hourmeterCurrent",headerName:"Horometro actual",editable:!o,hideSortIcons:!0,type:"number"},{field:"xx",headerName:"Horometro actual",cellClassName:"super-app-theme--cell",hideSortIcons:!0,renderCell:({row:e})=>(0,n.jsx)(H,{row:e},void 0)},{field:"adjustment",headerName:"Ajuste",type:"number",hideSortIcons:!0},{field:"Opciones",headerName:"Opc",hideSortIcons:!0,minWidth:110,renderCell:({row:o})=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.ZP,Object.assign({onClick:()=>{t(o),e(!0)},title:"Add timeline"},{children:(0,n.jsx)(T.Z,Object.assign({size:"small"},{children:(0,n.jsx)(y.Z,{color:"primary",fontSize:"small"},void 0)}),void 0)}),void 0),(0,n.jsx)(S.ZP,Object.assign({onClick:()=>{t(o),i(!0)},title:"View Timeline"},{children:(0,n.jsx)(T.Z,Object.assign({size:"small"},{children:(0,n.jsx)(N.Z,{htmlColor:"Green",fontSize:"small"},void 0)}),void 0)}),void 0)]},void 0)}],$=(e,t)=>{const[i,n]=(0,a.useState)([{field:e,sort:t}]);return{sortModel:i,handleModelGrid:e=>{0!=e.length?e[0].field==i[0].field&&e[0].sort==i[0].sort||n(e):"desc"==i[0].sort?n([Object.assign(Object.assign({},i[0]),{sort:"asc"})]):n([Object.assign(Object.assign({},i[0]),{sort:"desc"})])}}};var _,U;!function(e){e[e.UNKNOWN_STATE_EVENT=0]="UNKNOWN_STATE_EVENT",e[e.MA=1]="MA",e[e.NOP=2]="NOP",e[e.DOP=3]="DOP",e[e.OP=4]="OP"}(_||(_={})),function(e){e[e.UNKNOWN_SHIFT=0]="UNKNOWN_SHIFT",e[e.NOCHE=1]="NOCHE",e[e.DIA=2]="DIA",e[e.AMBOS=3]="AMBOS"}(U||(U={}));var V=i(95090);const W=(e,t)=>{const[i,n]=(0,a.useState)([]);return(0,a.useEffect)((()=>{t===V.JD.DONE?n(null==e?void 0:e.map((e=>{var t,i,n,o,s,a,l,r,d,c,v,u,m,h,g,j;return Object.assign(Object.assign({},e),{id:e.deviceId,excavator:e.deviceAlias,status:` ${(null===(i=null===(t=e.eventState)||void 0===t?void 0:t.event)||void 0===i?void 0:i.name)?null===(o=null===(n=e.eventState)||void 0===n?void 0:n.event)||void 0===o?void 0:o.name.substring(0,3):""}  ${(null===(s=e.eventState)||void 0===s?void 0:s.name)?` - ${null===(a=e.eventState)||void 0===a?void 0:a.name.toString().toLowerCase()}`:""}`,statusEvent:null===(r=null===(l=e.eventState)||void 0===l?void 0:l.event)||void 0===r?void 0:r.event,hmtStart:null===(d=e.hystoryShiftList[0])||void 0===d?void 0:d.initialHourmeter.toFixed(2),hourmeterCurrent:null===(c=e.hystoryShiftList.at(-1))||void 0===c?void 0:c.initialHourmeter.toFixed(2),shift:U[null===(v=e.currentTimeline)||void 0===v?void 0:v.shift],date:new Date(1e3*(null===(m=null===(u=e.currentTimeline)||void 0===u?void 0:u.shiftDate)||void 0===m?void 0:m.seconds)).toLocaleDateString(),adjustment:(null===(h=e.currentTimeline)||void 0===h?void 0:h.adjustment)?e.currentTimeline.adjustment:0,statusAdjustment:!!(null===(g=e.currentTimeline)||void 0===g?void 0:g.status)&&(null===(j=e.currentTimeline)||void 0===j?void 0:j.status)})}))):n([])}),[e,t]),[i,n]},R=(e,t,i)=>{const n=(0,l.T)();Object.keys(e).length>=2?(t({}),n(i({}))):(Object.keys(e).forEach((t=>{if(e[t].hourmeterCurrent){var i=e[t].hourmeterCurrent.value>0;e[t].hourmeterCurrent=Object.assign(Object.assign({},e[t].hourmeterCurrent),{error:!i})}})),t(e),n(i(e)))},z=({setOpen:e,setTimelineCurrent:t,setOpenTimeline:i})=>{const o=p(),s=(0,l.T)(),{statusTimeslineExcavator:r,filterDataGrid:c,isEditableRows:v,timeslineExcavator:u,oneTimelimeUpdate:m}=(0,l.C)(d.tH),[h,j]=W(u.currentTimelineList,r),{sortModel:f,handleModelGrid:x}=$("excavator","asc"),[b,E]=(0,F._)("hourmeterExcavator",{}),[O,S]=(0,a.useState)();return(0,a.useEffect)((()=>{r===V.JD.DONE&&(s((0,d.hV)()),s((0,d.OE)()))}),[h]),(0,a.useEffect)((()=>{((e,t,i)=>{var n,o,s,a,l,r,d,c,v,u,m,h,g,j,f,x,b;if(t){b=Object.assign(Object.assign({},t),{id:t.deviceId,excavator:t.deviceAlias,status:` ${(null===(o=null===(n=t.eventState)||void 0===n?void 0:n.event)||void 0===o?void 0:o.name)?null===(a=null===(s=t.eventState)||void 0===s?void 0:s.event)||void 0===a?void 0:a.name.substring(0,3):""}  ${(null===(l=t.eventState)||void 0===l?void 0:l.name)?` - ${null===(r=t.eventState)||void 0===r?void 0:r.name.toString().toLowerCase()}`:""}`,statusEvent:null===(c=null===(d=t.eventState)||void 0===d?void 0:d.event)||void 0===c?void 0:c.event,hmtStart:null===(v=t.hystoryShiftList[0])||void 0===v?void 0:v.initialHourmeter.toFixed(2),hourmeterCurrent:null===(u=t.hystoryShiftList.at(-1))||void 0===u?void 0:u.initialHourmeter.toFixed(2),shift:U[null===(m=t.currentTimeline)||void 0===m?void 0:m.shift],date:new Date(1e3*(null===(g=null===(h=t.currentTimeline)||void 0===h?void 0:h.shiftDate)||void 0===g?void 0:g.seconds)).toLocaleDateString(),adjustment:(null===(j=t.currentTimeline)||void 0===j?void 0:j.adjustment)?t.currentTimeline.adjustment:0,statusAdjustment:!!(null===(f=t.currentTimeline)||void 0===f?void 0:f.status)&&(null===(x=t.currentTimeline)||void 0===x?void 0:x.status)});const E=e.findIndex((e=>e.id===b.id)),O=[...e];console.log("rows",e),console.log("rowsindex",E),console.log("rowsaux",O),console.log("rows",e),E>=0&&(O[E]=b),i([...O])}})(h,m.currentTimeline,j)}),[m]),(0,n.jsx)("div",Object.assign({style:{height:"1113px",overflowY:"scroll",display:"flex",flexDirection:"column"}},{children:(0,n.jsx)(g._$r,{className:o.root,rowHeight:30,rows:h,columns:M(e,t,i,v),density:"compact",checkboxSelection:!0,disableSelectionOnClick:!0,onSelectionModelChange:e=>(e=>{const t=new Set(e),i=h.filter((e=>t.has(e.id.toString())));s((0,d.Xm)(i))})(e),disableColumnMenu:!0,sortModel:f,editRowsModel:O,onEditRowsModelChange:e=>(e=>{var t="";for(var[i,n]of Object.entries(e))Object.keys(n).length<=1&&Object.keys(n).forEach((e=>{t=e}));var o=Object.assign({},e);switch(t){case"hourmeterCurrent":S(Object.assign(Object.assign({},O),o)),s((0,d.Jo)(o));break;case"hmtStart":R(o,S,d.Yb)}})(e),filterModel:{items:[c]},getRowClassName:e=>`super-app-theme--${e.row.statusAdjustment}`},void 0)}),void 0)};var K=i(66977),B=i(990),J=i(88093),G=i(10646),Y=i(49032),X=i(64436),q=i(96019),Q=i(67162),ee=i(30553),te=i(40074),ie=i(81395),ne=i(89452);const oe=({setEventState:e,event:t})=>{var i,o;const[s,r,d,c]=(0,B.M)({status:Y.EnumEvent.UNKNOWN_STATE_EVENT}),{eventStateList:v,statusEventStateList:u}=(0,l.C)(k.eG),m=(0,l.T)();return(0,a.useEffect)((()=>{if(t.toString()===Y.EnumEvent.OPERATIONAL.toString()){if(u===V.JD.DONE){const t=v[0];e(Object.assign(Object.assign({},t),{id:"",name:"",eventState:0,event:null==t?void 0:t.event}))}}else{const t=v.find((e=>e.eventState.toString()===s.status.toString()));e(t)}}),[s.status]),(0,a.useEffect)((()=>{m((0,ne.Gy)(t))}),[t]),(0,a.useEffect)((()=>{e({id:"",name:"",eventState:0,event:{id:"",name:"",event:0}})}),[]),(0,a.useEffect)((()=>{if(u===V.JD.DONE&&t.toString()===Y.EnumEvent.OPERATIONAL.toString()){const t=v[0];e(Object.assign(Object.assign({},t),{id:"",name:"",eventState:0,event:null==t?void 0:t.event}))}}),[u]),(0,a.useEffect)((()=>{d()}),[t]),(null==t?void 0:t.toString())===Y.EnumEvent.OPERATIONAL.toString()?null:(0,n.jsxs)(X.Z,Object.assign({component:"fieldset"},{children:[(0,n.jsx)(q.Z,Object.assign({component:"legend"},{children:null===(o=null===(i=null==v?void 0:v.find((e=>{var i;return(null===(i=null==e?void 0:e.event)||void 0===i?void 0:i.event)==t})))||void 0===i?void 0:i.event)||void 0===o?void 0:o.name}),void 0),(0,n.jsx)(Q.Z,Object.assign({defaultValue:"female","aria-label":"hourmeter",name:"customized-radios"},{children:null==v?void 0:v.map((e=>{var t,i,o;return(0,n.jsx)(ee.Z,{value:null==e?void 0:e.eventState,control:(0,n.jsx)(te.Z,{checked:s.status===(null===(t=null==e?void 0:e.eventState)||void 0===t?void 0:t.toString()),icon:(0,n.jsx)(ie.Z,{},void 0),checkedIcon:(0,n.jsx)(ie.Z,{},void 0),name:"status",onClick:()=>{},onChange:r,disabled:(null===(o=null===(i=null==e?void 0:e.event)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toString())===Y.EnumEvent.OPERATIONAL.toString()},void 0),label:null==e?void 0:e.name},null==e?void 0:e.id)}))}),void 0)]}),void 0)};var se=i(10150);const ae=(0,j.Z)((e=>(0,se.Z)({container:{display:"flex",flexDirection:"column",flexWrap:"wrap",fontFamily:"inherit"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),paddingBottom:"10px"}}))),le=({value:e,label:t})=>{const i=ae(),s=(0,l.T)(),d=new Date,c=`0${d.getHours()}`,v=`0${d.getMinutes()}`,[u]=(0,G.l)(new Date),[m,h]=(0,a.useState)({hoursStart:`${c.slice(-2)}:${v.slice(-2)}`,date:u,status:e,substatus:{id:"",name:"",eventState:Y.EnumEvent.UNKNOWN_STATE_EVENT,event:{id:"",name:"",event:Y.EnumEvent.UNKNOWN_STATE_EVENT}}}),[g,j]=(0,a.useState)({id:"",name:"",eventState:Y.EnumEvent.UNKNOWN_STATE_EVENT,event:{id:"",name:"",event:Y.EnumEvent.UNKNOWN_STATE_EVENT}});console.log(m);const f=e=>{h(Object.assign(Object.assign({},m),{[e.target.name]:e.target.value}))};(0,a.useEffect)((()=>{s((0,r.gS)(Object.assign({},m)))}),[m]),(0,a.useEffect)((()=>()=>{s((0,r.XH)())}),[]),(0,a.useEffect)((()=>{h(Object.assign(Object.assign({},m),{substatus:g}))}),[g]);const{hoursStart:x}=m;return(0,n.jsxs)(o.Z,Object.assign({container:!0,spacing:1},{children:[(0,n.jsx)(o.Z,Object.assign({item:!0,lg:6,md:6,sm:6,xs:6},{children:(0,n.jsxs)("form",Object.assign({className:i.container,noValidate:!0},{children:[(0,n.jsx)(P.Z,{id:"date",name:"date",label:"Fecha",type:"date",defaultValue:m.date,onChange:f,className:i.textField,InputLabelProps:{shrink:!0}},void 0),(0,n.jsx)(P.Z,{id:"date",label:"Hora inicial",type:"time",name:"hoursStart",value:x,onChange:f,className:i.textField,InputLabelProps:{shrink:!0,required:!0}},void 0)]}),void 0)}),void 0),(0,n.jsx)(o.Z,Object.assign({item:!0,lg:6,md:6,sm:6,xs:6},{children:(0,n.jsx)(oe,{setEventState:j,event:m.status},void 0)}),void 0)]}),void 0)};var re=i(282);const de=({rowsTimelines:e,setOpenEvent:t,setevent:i})=>{const o=(0,l.T)(),{eventList:s}=(0,l.C)(k.yJ),[r,d]=a.useState(null),[c]=(e=>{const[t,i]=(0,a.useState)(!0),[n,o]=(0,a.useState)(!0),[s,l]=(0,a.useState)(!0);(0,a.useEffect)((()=>{d()&&(i(!1),o(!0),l(!1)),v()&&(i(!1),o(!1),l(!1)),r()&&(i(!0),o(!1),l(!1)),c()&&(i(!1),o(!1),l(!0)),0==v()&&0==r()&&0==c()&&0==d()&&(i(!0),o(!0),l(!0))}),[e]);const r=()=>0!==e.length&&e.every((e=>{var t,i;return(null===(i=null===(t=e.eventState)||void 0===t?void 0:t.event)||void 0===i?void 0:i.event)===Y.EnumEvent.NO_OPERATIONAL})),d=()=>0!==e.length&&e.every((e=>{var t,i;return(null===(i=null===(t=e.eventState)||void 0===t?void 0:t.event)||void 0===i?void 0:i.event)===Y.EnumEvent.OPERATIONAL})),c=()=>0!==e.length&&e.every((e=>{var t,i;return(null===(i=null===(t=e.eventState)||void 0===t?void 0:t.event)||void 0===i?void 0:i.event)===Y.EnumEvent.OPERATIONAL_DELAY})),v=()=>0!==e.length&&e.every((e=>{var t,i;return void 0===(null===(i=null===(t=e.eventState)||void 0===t?void 0:t.event)||void 0===i?void 0:i.event)}));return[e=>{var i=!1;return e===Y.EnumEvent.OPERATIONAL_DELAY&&(i=s),e===Y.EnumEvent.OPERATIONAL&&(i=n),e===Y.EnumEvent.NO_OPERATIONAL&&(i=t),e===Y.EnumEvent.MAINTENANCE&&(i=!0),i}]})(e);return(0,a.useEffect)((()=>{o((0,I.TU)())}),[]),(0,n.jsxs)("div",{children:[(0,n.jsx)(re.Z,Object.assign({"aria-controls":"simple-menu","aria-haspopup":"true",onClick:e=>{d(e.currentTarget)},color:"primary",size:"small",variant:"outlined"},{children:"Ir a"}),void 0),(0,n.jsx)(C.Z,Object.assign({id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:()=>{d(null)}},{children:s.map((e=>(0,n.jsx)(w.Z,Object.assign({disabled:c(null==e?void 0:e.event),onClick:()=>(e=>{t(!0),i(e)})(null==e?void 0:e.event),color:"primary"},{children:e.name}),e.id)))}),void 0)]},void 0)};var ce=i(97480),ve=i(71267),ue=i(69798);const me=({shift:e,date:t})=>{const i=new Date(t).toLocaleDateString(),o=(new Date).toLocaleDateString();return(0,n.jsxs)("div",{children:[(0,n.jsx)(ve.Z,{icon:(0,n.jsx)(ce.Z,{},void 0),label:e,clickable:!0,color:"secondary",deleteIcon:(0,n.jsx)(ce.Z,{},void 0),variant:"outlined"},void 0),(0,n.jsx)(ve.Z,{icon:(0,n.jsx)(ue.Z,{},void 0),label:t,clickable:!0,color:`${i===o}`?"secondary":"primary",deleteIcon:(0,n.jsx)(ue.Z,{},void 0),variant:"outlined"},void 0)]},void 0)},he=a.memo(me);var ge=i(15635),je=i(53375);const fe=()=>{const{timeslineExcavator:e,rowsEditModelHourmeterExcavator:t,isCheckFinalizeExcavator:i}=(0,l.C)(d.tH),o=(0,l.T)(),[s,r]=(0,a.useState)(!0),[c]=(0,J.R)();return(0,a.useEffect)((()=>{e.currentTimelineList.some((e=>{var t;return!1===(null===(t=e.currentTimeline)||void 0===t?void 0:t.status)}))?r(!0):e.currentTimelineList.length===(null==t?void 0:t.length)?r(!1):r(!0)}),[t,e]),(0,n.jsx)(re.Z,Object.assign({onClick:()=>{return e=void 0,t=void 0,n=function*(){yield o((0,d.Qc)()),window.localStorage.removeItem("hourmeterExcavator"),o((0,d.jF)()),location.reload()},new((i=void 0)||(i=Promise))((function(o,s){function a(e){try{r(n.next(e))}catch(e){s(e)}}function l(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}r((n=n.apply(e,t||[])).next())}));var e,t,i,n},disabled:s,startIcon:(0,n.jsx)(je.Z,{},void 0),variant:"outlined",color:"primary",size:"small"},{children:"Cerrar turno"}),void 0)};const xe=()=>{var e,t;const{rowsTimeline:i,hourmeterStart:v,timeslineExcavator:u,statusTimeslineExcavator:m,statusCreateTimelineTruckListExcavator:h}=(0,l.C)(d.tH),g=(0,l.T)(),[j]=(0,J.R)(),{formValuesBtn:f}=(0,l.C)(r.k3),[x]=(0,G.l)(j),[b,E]=(0,a.useState)(!1),[O,p]=(0,a.useState)(Y.EnumEvent.UNKNOWN_STATE_EVENT),[S]=W(u.currentTimelineList,m),[T,N]=(0,a.useState)(!1),[y]=(0,ge.r)(h),[C,w]=(0,B.M)({columnField:"excavator",operatorValue:"contains",value:""}),{value:Z}=C;return(0,a.useEffect)((()=>{g((0,d.V)(C))}),[Z]),(0,a.useEffect)((()=>{var e,t;(null===(t=null===(e=f.substatus)||void 0===e?void 0:e.event)||void 0===t?void 0:t.id)?N(!1):N(!0)}),[f]),(0,n.jsxs)(o.Z,Object.assign({container:!0,justifyContent:"flex-start",spacing:1,style:{paddingBottom:"20px"},alignItems:"center"},{children:[(0,n.jsx)(o.Z,Object.assign({item:!0,style:{width:"20%"}},{children:(0,n.jsxs)(s.Z,Object.assign({sx:{display:"flex",alignItems:"flex-end"}},{children:[(0,n.jsx)(K.Z,{},void 0),(0,n.jsx)(P.Z,{id:"input-with-sx",label:"Buscar ",variant:"standard",name:"value",onChange:w,fullWidth:!0},void 0)]}),void 0)}),void 0),(0,n.jsx)(o.Z,Object.assign({item:!0},{children:(0,n.jsx)(de,{rowsTimelines:i,setevent:p,setOpenEvent:E},void 0)}),void 0),(0,n.jsx)(o.Z,{children:(0,n.jsx)(fe,{},void 0)},void 0),(0,n.jsx)(o.Z,{item:!0},void 0),(0,n.jsx)(o.Z,Object.assign({item:!0},{children:(0,n.jsx)(me,{shift:null===(e=S[0])||void 0===e?void 0:e.shift,date:null===(t=S[0])||void 0===t?void 0:t.date},void 0)}),void 0),(0,n.jsx)(c.a,Object.assign({open:b,handleClose:()=>{E(!1)},handleConfirm:()=>{return e=void 0,t=void 0,n=function*(){yield g((0,d.vd)()),!y&&E(!1);const e={shift:0,date:`${x}T00:00`};yield g((0,d.pW)(e))},new((i=void 0)||(i=Promise))((function(o,s){function a(e){try{r(n.next(e))}catch(e){s(e)}}function l(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}r((n=n.apply(e,t||[])).next())}));var e,t,i,n},title:`Excavator to ${_[O]}  `,disabled:T,loading:y},{children:(0,n.jsx)(le,{value:O},void 0)}),void 0)]}),void 0)};var be=i(94491),Ee=i(41120),Oe=i(35117);const pe=(0,Ee.Z)((()=>(0,Oe.Z)({line:{width:"100%",minWidth:"100px",height:"1px",border:"0",backgroundColor:"rgba(191,128,11,1)",padding:"1px",margin:"5px"},container:{display:"flex",alignItems:"center"},timeline:{display:"flex",flexWrap:"wrap",flexDirection:"column",WebkitUserSelect:"none"},span:{display:"flex",alignSelf:"start",WebkitUserSelect:"none"}}))),Se=({icon:e})=>{const t=pe();return(0,n.jsxs)("div",Object.assign({className:t.container},{children:[e||(0,n.jsx)(be.Z,{htmlColor:"#F2BB13"},void 0),(0,n.jsx)(o.Z,{className:t.line},void 0)]}),void 0)},Te=(0,a.createContext)({}),{Provider:Ne}=Te,ye=({children:e,data:t,setData:i})=>{const o=pe();return(0,n.jsx)(Ne,Object.assign({value:{data:t}},{children:(0,n.jsx)("div",Object.assign({className:o.timeline,onClick:()=>{i()}},{children:e}),void 0)}),void 0)};var Ce=i(22318);const we=({title:e})=>{const t=pe();return(0,n.jsx)("div",Object.assign({className:t.span},{children:(0,n.jsx)(Ce.Z,Object.assign({variant:"button",display:"block",gutterBottom:!0},{children:e}),void 0)}),void 0)},Ze=({title:e,subTitle:t})=>{var i;const{data:o}=(0,a.useContext)(Te);return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(Ce.Z,Object.assign({style:{fontSize:".7rem",fontWeight:700,padding:"0 2rem"},variant:"h6",component:"h6"},{children:e||(null===(i=null==o?void 0:o.title)||void 0===i?void 0:i.toString().toLowerCase())}),void 0),(0,n.jsx)("span",Object.assign({style:{color:"rgba(0, 0, 0, 0.54)",padding:"0 2rem"}},{children:t}),void 0)]},void 0)};var Ie=i(28428),ke=i(95477);const Ae=e=>{var{loading:t,text:i}=e,o=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,["loading","text"]);return(0,n.jsx)(re.Z,Object.assign({},o,{disabled:t},{children:t?(0,n.jsx)(ke.Z,{style:{width:"20px",height:"20px"}},void 0):i}),void 0)};const Le=({currentTimeline:e,updateTimeline:t,startDeleteTimeline:i,setFormUpdateTimeline:o,handleGetTimeline:s,loading:r})=>{var d,c,v,u,m;const h=ae(),g=(0,l.T)(),j=new Date(1e3*(null===(d=t.initialTime)||void 0===d?void 0:d.seconds)),f=new Date(1e3*(null===(c=t.finalTime)||void 0===c?void 0:c.seconds)),x=`0${j.getHours()}`,b=`0${j.getMinutes()}`,E=`0${f.getHours()}`,O=`0${f.getMinutes()}`,p=`${x.slice(-2)}:${b.slice(-2)}`,[S]=(0,G.l)(j),T=`${E.slice(-2)}:${O.slice(-2)}`,[N,y]=(0,a.useState)(Object.assign(Object.assign({},t),{date:S,initialHourmeter:null===(v=t.initialHourmeter)||void 0===v?void 0:v.toFixed(2),time:p})),[C,w]=(0,a.useState)(!1),[Z,I]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(null==e?void 0:e.hystoryShiftList.at(-1).id)===t.id&&w(!0),(null==e?void 0:e.hystoryShiftList.at(0).id)===t.id&&w(!1)}),[t]),(0,a.useEffect)((()=>{(null==e?void 0:e.hystoryShiftList.at(0).id)===t.id&&I(!0)}),[t]);const k=e=>{y(Object.assign(Object.assign({},N),{[e.target.name]:e.target.value}))},{initialHourmeter:A}=N;return(0,a.useEffect)((()=>(g(o(Object.assign({},N))),()=>{})),[N]),(0,a.useEffect)((()=>()=>{g(o({})),y({})}),[]),(0,n.jsxs)("div",{children:[(0,n.jsxs)("form",Object.assign({className:h.container,noValidate:!0},{children:[(0,n.jsx)(P.Z,{id:"date",name:"date",label:"Fecha",type:"date",defaultValue:N.date,onChange:k,className:h.textField,InputLabelProps:{shrink:!0}},void 0),(0,n.jsx)(P.Z,{id:"date",label:"HOUR",type:"time",name:"time",defaultValue:p,disabled:Z,onChange:k,className:h.textField,InputLabelProps:{shrink:!0,required:!0}},void 0),(0,n.jsx)(P.Z,{id:"date",label:"HOUR",type:"time",name:"timeEnd",defaultValue:T,disabled:!0,className:h.textField,InputLabelProps:{shrink:!0,required:!0}},void 0),(0,n.jsx)(P.Z,{id:"date",label:"INITIAL HOURMETER",type:"number",name:"initialHourmeter",disabled:(null===(u=null==t?void 0:t.initialEventState)||void 0===u?void 0:u.event.event.toString())!=Y.EnumEvent.MAINTENANCE.toString(),defaultValue:A,onChange:k,className:h.textField,InputLabelProps:{shrink:!0}},void 0),(0,n.jsx)(P.Z,{id:"date",label:"END HOURMETER ",type:"number",name:"initialHourmeter",disabled:!0,defaultValue:null===(m=t.finalHourmeter)||void 0===m?void 0:m.toFixed(2),className:h.textField,InputLabelProps:{shrink:!0}},void 0)]}),void 0),C&&(0,n.jsx)(Ae,{variant:"contained",onClick:()=>{return e=void 0,t=void 0,o=function*(){yield g(i()),yield s()},new((n=void 0)||(n=Promise))((function(i,s){function a(e){try{r(o.next(e))}catch(e){s(e)}}function l(e){try{r(o.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}r((o=o.apply(e,t||[])).next())}));var e,t,n,o},style:{background:"rgb(154, 0, 54)",color:"white",width:"100%"},startIcon:(0,n.jsx)(Ie.Z,{},void 0),loading:r,text:"Delete"},void 0)]},void 0)};var De=i(56731);const Pe=()=>{const[e]=(0,J.R)(),[t]=(0,G.l)(e),i=`${t}T00:00`;return[{shift:De.Shift.UNKNOWN_SHIFT,date:i}]};var Fe=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{r(n.next(e))}catch(e){s(e)}}function l(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const He=({setClose:e})=>{var t,i;const{statusTimeslineExcavator:s,currentTimeline:r,updateTimeline:v,statusUpdateTimelineExcavator:u}=(0,l.C)(d.tH),m=(0,l.T)(),[h,g]=(0,a.useState)(!1),[j]=Pe(),[f]=(0,ge.r)(u),x=(0,a.useCallback)((()=>{g(!1),m((0,d.zX)({}))}),[]),b=(0,a.useCallback)((()=>Fe(void 0,void 0,void 0,(function*(){yield m((0,d.NT)()),m((0,d.zX)({})),s===V.JD.DONE&&(g(!1),e(!1)),yield m((0,d.pW)(j))}))),[]),E=(0,a.useCallback)((()=>Fe(void 0,void 0,void 0,(function*(){m((0,d.zX)({})),s===V.JD.DONE&&(g(!1),e(!1)),yield m((0,d.pW)(j))}))),[]);return(0,n.jsxs)(o.Z,Object.assign({container:!0,alignItems:"flex-end"},{children:[null==r?void 0:r.hystoryShiftList.map((e=>{var t,i,o,s,a,l,r;let c=new Date(1e3*(null===(t=e.initialTime)||void 0===t?void 0:t.seconds)).toLocaleString();return(0,n.jsxs)(ye,Object.assign({data:e,setData:()=>(e=>{m((0,d.zX)(e)),g(!0)})(e)},{children:[(0,n.jsx)(Ze,{title:(null===(o=null===(i=e.initialEventState)||void 0===i?void 0:i.event)||void 0===o?void 0:o.name)?null===(a=null===(s=e.initialEventState)||void 0===s?void 0:s.event)||void 0===a?void 0:a.name:"",subTitle:(null===(l=e.initialEventState)||void 0===l?void 0:l.name)?null===(r=e.initialEventState)||void 0===r?void 0:r.name.toString().toLowerCase():""},void 0),(0,n.jsx)(Se,{},void 0),(0,n.jsx)(we,{title:c.toLocaleString().split(" ")[1].substring(0,c.split(" ")[1].length-3)},void 0)]}),e.id+Math.random())})),(0,n.jsx)(c.a,Object.assign({open:h,handleClose:x,handleConfirm:b,title:`Update Timeline ${new Date(1e3*(null===(t=v.initialTime)||void 0===t?void 0:t.seconds)).toLocaleString().split(" ")[1].substring(0,new Date(1e3*(null===(i=v.initialTime)||void 0===i?void 0:i.seconds)).toLocaleString().split(" ")[1].length-3)}`,loading:f},{children:(0,n.jsx)(Le,{currentTimeline:r,updateTimeline:v,startDeleteTimeline:d.T1,setFormUpdateTimeline:d.mP,handleGetTimeline:E},void 0)}),void 0)]}),void 0)},Me=(e,t)=>{const i=Number.parseFloat(e)+Number.parseFloat(t);return Number.parseFloat(i.toFixed(2))},$e=a.memo((({setstateform:e,isDisabled:t,setisManto:i,handleIsManto:o})=>{const{eventList:s}=(0,l.C)(k.yJ),r=(0,l.T)(),[d,c]=(0,a.useState)({status:Y.EnumEvent.UNKNOWN_STATE_EVENT,Substatus:{id:"",name:"",eventState:0,event:{id:"",name:"",event:0}}}),v=e=>{d.status!=Y.EnumEvent.MAINTENANCE?c(Object.assign(Object.assign({},d),{[e.target.name]:e.target.value})):c(Object.assign(Object.assign({},d),{[e.target.name]:e.target.value}))},u=()=>{c(Object.assign(Object.assign({},d),{Substatus:{id:"",name:"",eventState:0,event:{id:"",name:"",event:0}}})),i(!1)},[m]=(e=>{const[t,i]=(0,a.useState)(!0),[n,o]=(0,a.useState)(!0),[s,l]=(0,a.useState)(!0),[r,d]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{e.toString()===Y.EnumEvent.OPERATIONAL.toString()&&(i(!1),l(!1),d(!1),o(!0)),e.toString()===Y.EnumEvent.UNKNOWN_STATE_EVENT.toString()&&(i(!1),o(!1),l(!1),d(!1)),e.toString()===Y.EnumEvent.NO_OPERATIONAL.toString()&&(d(!1),o(!1),l(!1),i(!0)),e.toString()===Y.EnumEvent.OPERATIONAL_DELAY.toString()&&(o(!1),l(!0),i(!0),d(!0)),e.toString()===Y.EnumEvent.MAINTENANCE.toString()&&(i(!1),o(!1),l(!0),d(!0))}),[e]),[e=>{var i=!1;return e===Y.EnumEvent.OPERATIONAL_DELAY&&(i=s),e===Y.EnumEvent.OPERATIONAL&&(i=n),e===Y.EnumEvent.NO_OPERATIONAL&&(i=t),e===Y.EnumEvent.MAINTENANCE&&(i=r),i}]})(t);return(0,a.useEffect)((()=>{e(d)}),[d]),(0,a.useEffect)((()=>{r((0,I.TU)())}),[]),(0,n.jsxs)(X.Z,Object.assign({component:"fieldset"},{children:[(0,n.jsx)(q.Z,Object.assign({component:"legend"},{children:"Opciones"}),void 0),(0,n.jsx)(Q.Z,Object.assign({defaultValue:"female","aria-label":"hourmeter",name:"customized-radios"},{children:null==s?void 0:s.map((e=>{var t,i;return(null==e?void 0:e.event.toString())===Y.EnumEvent.MAINTENANCE.toString()?(0,n.jsx)(ee.Z,{value:null==e?void 0:e.event,control:(0,n.jsx)(te.Z,{icon:(0,n.jsx)(ie.Z,{},void 0),checkedIcon:(0,n.jsx)(ie.Z,{},void 0),name:"status",onClick:()=>o(),onChange:v,checked:d.status.toString()===(null===(t=null==e?void 0:e.event)||void 0===t?void 0:t.toString()),disabled:m(null==e?void 0:e.event)},void 0),label:null==e?void 0:e.name},null==e?void 0:e.id):(0,n.jsx)(ee.Z,{value:null==e?void 0:e.event,onClick:u,control:(0,n.jsx)(te.Z,{icon:(0,n.jsx)(ie.Z,{},void 0),checkedIcon:(0,n.jsx)(ie.Z,{},void 0),name:"status",checked:d.status.toString()===(null===(i=null==e?void 0:e.event)||void 0===i?void 0:i.toString()),disabled:m(null==e?void 0:e.event),onClick:u,onChange:v},void 0),label:null==e?void 0:e.name},null==e?void 0:e.id)}))}),void 0)]}),void 0)})),_e=a.memo((({currentTimeline:e})=>{var t,i,s,d,c;const v=ae(),u=(0,l.T)(),[m,h]=(0,a.useState)(0),[g,j]=(0,a.useState)(!1),f=new Date,x=`0${f.getHours()}`,b=`0${f.getMinutes()}`,[E]=(0,G.l)(new Date),[O,p]=(0,a.useState)({time:`${x.slice(-2)}:${b.slice(-2)}`,date:E,hourmeterEnd:0===(null==e?void 0:e.hystoryShiftList.length)?0:null===(t=null==e?void 0:e.hystoryShiftList)||void 0===t?void 0:t.at(-1).initialHourmeter.toFixed(1),htm:0,status:Y.EnumEvent.UNKNOWN_STATE_EVENT,Substatus:{id:"",name:"",eventState:Y.EnumEvent.UNKNOWN_STATE_EVENT,event:{id:"",name:"",event:Y.EnumEvent.UNKNOWN_STATE_EVENT}},currentTimeline:e}),S=(null===(s=null===(i=null==e?void 0:e.eventState)||void 0===i?void 0:i.event)||void 0===s?void 0:s.event)?null===(c=null===(d=null==e?void 0:e.eventState)||void 0===d?void 0:d.event)||void 0===c?void 0:c.event:Y.EnumEvent.UNKNOWN_STATE_EVENT,{time:T,hourmeterEnd:N}=O,y=function(e,t){var i,n;if(0===(null==t?void 0:t.hystoryShiftList.length))return 0;{const s=null===(i=null==t?void 0:t.hystoryShiftList)||void 0===i?void 0:i.at(-1),a=new Date(e),l=new Date(1e3*(null===(n=null==s?void 0:s.initialTime)||void 0===n?void 0:n.seconds));var o=(a.getTime()-l.getTime())/1e3;return 1/60*Math.ceil(o/60)}}(`${O.date}T${T}`,e),[C,w]=(0,a.useState)({id:"",name:"",eventState:0,event:{id:"",name:"",event:0}}),[Z,I]=(0,a.useState)({}),k=e=>{O.status!=Y.EnumEvent.MAINTENANCE?p(Object.assign(Object.assign({},O),{[e.target.name]:e.target.value})):p(Object.assign(Object.assign({},O),{[e.target.name]:e.target.value}))};return(0,a.useEffect)((()=>(u((0,r.$6)(O)),()=>{})),[O]),console.log("form",O),(0,a.useEffect)((()=>(h(Me(N,y)),()=>{u((0,r.J$)())})),[]),(0,a.useEffect)((()=>{var t,i;(null==e?void 0:e.state.toString())===Y.EnumEvent.UNKNOWN_STATE_EVENT.toString()?h(N):(null===(i=null===(t=null==e?void 0:e.eventState)||void 0===t?void 0:t.event)||void 0===i?void 0:i.event.toString())===Y.EnumEvent.NO_OPERATIONAL.toString()?h(null==e?void 0:e.hourmeterCurrent):h(Me(N,y)),console.log("  currentTimeline?.state.toString()",null==e?void 0:e.state.toString()),console.log("  currentTimeline?.state.toStrin EnumEvent.MAINTENANCE.toString()g()",Y.EnumEvent.MAINTENANCE.toString()),(null==e?void 0:e.state.toString())===Y.EnumEvent.MAINTENANCE.toString()&&p(Object.assign(Object.assign({},O),{htm:null==e?void 0:e.hourmeterCurrent})),O.status!=Y.EnumEvent.MAINTENANCE&&p(Object.assign(Object.assign({},O),{htm:m}))}),[T,O.date]),(0,a.useEffect)((()=>{p(Object.assign(Object.assign({},O),{Substatus:Object.assign({},C)}))}),[C]),(0,a.useEffect)((()=>{p(Object.assign(Object.assign({},O),Z))}),[Z]),(0,a.useEffect)((()=>{const e=setTimeout((()=>{p(Object.assign(Object.assign({},O),{htm:m}))}),9);return()=>clearTimeout(e)}),[m]),(0,n.jsxs)("div",{children:[(0,n.jsxs)(o.Z,Object.assign({container:!0,spacing:1},{children:[(0,n.jsx)(o.Z,Object.assign({item:!0,lg:6,md:6,sm:6,xs:12},{children:(0,n.jsxs)("form",Object.assign({className:v.container,noValidate:!0},{children:[(0,n.jsx)(P.Z,{id:"date",name:"date",label:"Fecha",type:"date",defaultValue:O.date,onChange:k,className:v.textField,InputLabelProps:{shrink:!0}},void 0),(0,n.jsx)(P.Z,{id:"date",label:"Hora",type:"time",name:"time",value:T,onChange:k,className:v.textField,InputLabelProps:{shrink:!0,required:!0}},void 0),(0,n.jsx)(P.Z,{id:"date",label:"Horometro",type:"number",disabled:!0,name:"hourmeterCalculated",value:m,onChange:k,className:v.textField,InputLabelProps:{shrink:!0}},void 0),(S===Y.EnumEvent.MAINTENANCE||g)&&(0,n.jsx)(P.Z,{autoFocus:!0,id:"date",label:"Horometro inicial",type:"number",name:"htm",defaultValue:m,onChange:k,className:v.textField,InputLabelProps:{shrink:!0,required:!0}},void 0)]}),void 0)}),void 0),(0,n.jsx)(o.Z,Object.assign({item:!0,lg:6,md:6,sm:6,xs:12},{children:(0,n.jsx)($e,{setstateform:I,isDisabled:S,setisManto:j,handleIsManto:e=>{j(!0),p(Object.assign(Object.assign({},O),{htm:m,status:Y.EnumEvent.MAINTENANCE,Substatus:{id:"",name:"",eventState:Y.EnumEvent.UNKNOWN_STATE_EVENT,event:{id:"",name:"",event:Y.EnumEvent.UNKNOWN_STATE_EVENT}}}))}},void 0)}),void 0)]}),void 0),(0,n.jsx)(o.Z,Object.assign({container:!0,spacing:2},{children:!!O.status&&(0,n.jsx)(o.Z,Object.assign({item:!0,lg:12,md:12,sm:12,xs:12},{children:(0,n.jsx)(oe,{setEventState:w,event:O.status},void 0)}),void 0)}),void 0)]},void 0)})),Ue=e=>{const[t,i]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{var t,n;e.status&&(null===(n=null===(t=e.Substatus)||void 0===t?void 0:t.event)||void 0===n?void 0:n.id)?i(!1):i(!0)}),[e.status,e.Substatus]),[t]};var Ve=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{r(n.next(e))}catch(e){s(e)}}function l(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const We=()=>{const e=(0,l.T)(),{timelineErrorList:t,currentTimeline:i,statusCreateTimelineExcavator:v}=(0,l.C)(d.tH),{formValues:u}=(0,l.C)(r.k3),[m]=Pe(),[g,j]=(0,a.useState)(!1),[f,x]=(0,a.useState)(!1),[b]=Ue(u),[E,O]=(0,a.useState)([]),[p]=(0,ge.r)(v),S=(0,a.useCallback)((()=>{j(!1),x(!1)}),[]);return(0,a.useEffect)((()=>(e((0,d.pW)(m)),()=>{})),[]),(0,a.useEffect)((()=>{e((0,d.gc)(E))}),[E]),(0,n.jsxs)(s.Z,Object.assign({m:2,p:.5,style:{height:"100%"}},{children:[(0,n.jsx)(o.Z,{children:(0,n.jsx)(xe,{},void 0)},void 0),(0,n.jsx)(o.Z,Object.assign({container:!0,style:{height:"100%"}},{children:(0,n.jsx)(o.Z,Object.assign({item:!0,lg:12,md:12,sm:12,xs:12},{children:(0,n.jsx)(z,{setOpen:j,setTimelineCurrent:O,setOpenTimeline:x},void 0)}),void 0)}),void 0),(0,n.jsx)(c.a,Object.assign({open:g,handleClose:S,handleConfirm:()=>Ve(void 0,void 0,void 0,(function*(){yield e((0,d.SN)()),!p&&j(!1),yield function(){return Ve(this,void 0,void 0,(function*(){yield e((0,d.pW)(m))}))}()})),title:`Excavadora  ${E.deviceAlias}  `,disabled:b,loading:p},{children:(0,n.jsx)(_e,{currentTimeline:i},void 0)}),void 0),(0,n.jsx)(c.a,Object.assign({open:f,handleClose:S,title:`Linea de tiempo de la excavadora  ${E.deviceAlias} `,disabled:b},{children:(0,n.jsx)(He,{setClose:x},void 0)}),void 0),!(null==t?void 0:t.success)&&(0,n.jsx)(h,{error:null==t?void 0:t.errorsList},void 0)]}),void 0)};var Re=i(19225),ze=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{r(n.next(e))}catch(e){s(e)}}function l(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const Ke=({setClose:e})=>{var t,i;const{status:s,currentTimeline:r,updateTimeline:d,statusUpdateTimeline:v,statusDeleteTimeline:u}=(0,l.C)(Re.rf),m=(0,l.T)(),[h,g]=(0,a.useState)(!1),[j]=(0,J.R)(),[f]=(0,G.l)(j),[x]=(0,ge.r)(v),[b]=(0,ge.r)(u),[E]=Pe(),O=(0,a.useCallback)((()=>{g(!1),m((0,Re.Uy)({}))}),[]),p=(0,a.useCallback)((()=>ze(void 0,void 0,void 0,(function*(){yield m((0,Re.ft)()),m((0,Re.Uy)({})),!1===x&&(g(!1),e(!1),yield m((0,Re.mA)(E)))}))),[]),S=(0,a.useCallback)((()=>ze(void 0,void 0,void 0,(function*(){yield m((0,Re.Uy)({})),!1===b&&(g(!1),e(!1),yield m((0,Re.mA)(E)))}))),[]);return(0,n.jsxs)(o.Z,Object.assign({container:!0,alignItems:"flex-end"},{children:[null==r?void 0:r.hystoryShiftList.map((e=>{var t,i,o,s,a,l,r;let d=new Date(1e3*(null===(t=e.initialTime)||void 0===t?void 0:t.seconds)).toLocaleString();return(0,n.jsxs)(ye,Object.assign({data:e,setData:()=>(e=>{m((0,Re.Uy)(e)),g(!0)})(e)},{children:[(0,n.jsx)(Ze,{title:(null===(o=null===(i=null==e?void 0:e.initialEventState)||void 0===i?void 0:i.event)||void 0===o?void 0:o.name)?null===(a=null===(s=null==e?void 0:e.initialEventState)||void 0===s?void 0:s.event)||void 0===a?void 0:a.name:null,subTitle:(null===(l=null==e?void 0:e.initialEventState)||void 0===l?void 0:l.name)?`${null===(r=null==e?void 0:e.initialEventState)||void 0===r?void 0:r.name.toString().toLowerCase()}`:""},void 0),(0,n.jsx)(Se,{},void 0),(0,n.jsx)(we,{title:d.toLocaleString().split(" ")[1].substring(0,d.split(" ")[1].length-3)},void 0)]}),e.id+Math.random())})),(0,n.jsx)(c.a,Object.assign({open:h,handleClose:O,handleConfirm:p,title:`Update  ${new Date(1e3*(null===(t=d.initialTime)||void 0===t?void 0:t.seconds)).toLocaleString().split(" ")[1].substring(0,new Date(1e3*(null===(i=d.initialTime)||void 0===i?void 0:i.seconds)).toLocaleString().split(" ")[1].length-3)}`,loading:x},{children:(0,n.jsx)(Le,{currentTimeline:r,updateTimeline:d,startDeleteTimeline:Re.a8,setFormUpdateTimeline:Re.Zp,handleGetTimeline:S,loading:b},void 0)}),void 0)]}),void 0)},Be=(e,t)=>{const[i,n]=(0,a.useState)([]);return(0,a.useEffect)((()=>{t===V.JD.DONE?n(null==e?void 0:e.map((e=>{var t,i,n,o,s,a,l,r,d,c,v,u,m,h,g,j;return Object.assign(Object.assign({},e),{id:e.deviceId,truck:e.deviceAlias,status:`${(null===(i=null===(t=e.eventState)||void 0===t?void 0:t.event)||void 0===i?void 0:i.name)?null===(o=null===(n=e.eventState)||void 0===n?void 0:n.event)||void 0===o?void 0:o.name.substring(0,3):""}  ${(null===(s=e.eventState)||void 0===s?void 0:s.name)?` - ${null===(a=e.eventState)||void 0===a?void 0:a.name.toString().toLowerCase()}`:""}`,statusEvent:null===(r=null===(l=e.eventState)||void 0===l?void 0:l.event)||void 0===r?void 0:r.event,hmtStart:null===(d=e.hystoryShiftList[0])||void 0===d?void 0:d.initialHourmeter.toFixed(2),hourmeterCurrent:null===(c=e.hystoryShiftList.at(-1))||void 0===c?void 0:c.initialHourmeter.toFixed(2),shift:U[null===(v=e.currentTimeline)||void 0===v?void 0:v.shift],date:new Date(1e3*(null===(m=null===(u=e.currentTimeline)||void 0===u?void 0:u.shiftDate)||void 0===m?void 0:m.seconds)).toLocaleDateString(),adjustment:(null===(h=e.currentTimeline)||void 0===h?void 0:h.adjustment)?e.currentTimeline.adjustment:0,statusAdjustment:!!(null===(g=e.currentTimeline)||void 0===g?void 0:g.status)&&(null===(j=e.currentTimeline)||void 0===j?void 0:j.status)})}))):n([])}),[e,t]),[i,n]};const Je=()=>{const{timesline:e,rowsEditModelHourmeterTruck:t}=(0,l.C)(Re.rf),{currentTimelineList:i}=e,o=(0,l.T)(),[s,r]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{i.some((e=>{var t;return!1===(null===(t=e.currentTimeline)||void 0===t?void 0:t.status)}))?r(!0):i.length===(null==t?void 0:t.length)?r(!1):r(!0)}),[i,t]),(0,n.jsx)(re.Z,Object.assign({onClick:()=>{return e=void 0,t=void 0,n=function*(){yield o((0,Re.nx)()),window.localStorage.removeItem("hourmeterTruck"),o((0,Re.zq)()),location.reload()},new((i=void 0)||(i=Promise))((function(o,s){function a(e){try{r(n.next(e))}catch(e){s(e)}}function l(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}r((n=n.apply(e,t||[])).next())}));var e,t,i,n},disabled:s,startIcon:(0,n.jsx)(je.Z,{},void 0),variant:"outlined",color:"primary",size:"small"},{children:"Cerrar turno"}),void 0)};const Ge=()=>{var e,t;const{rowsTimeline:i,timesline:d,status:v,statusCreateTimelineTruckListtruck:u}=(0,l.C)(Re.rf),{formValuesBtn:m}=(0,l.C)(r.k3),h=(0,l.T)(),[g]=(0,J.R)(),[j]=Be(d.currentTimelineList,v),[f]=(0,G.l)(g),[x,b]=(0,a.useState)(!1),[E,O]=(0,a.useState)(Y.EnumEvent.UNKNOWN_STATE_EVENT),[p,S]=(0,a.useState)(!1),[T]=(0,ge.r)(u),N=(0,a.useRef)(),[y]=((e,t)=>{const[i,n]=a.useState("");return a.useEffect((()=>{const t=t=>{n(t.key),(t.altKey&&t.key===e.toUpperCase()||t.altKey&&t.key===e.toLocaleLowerCase()||t.altKey&&t.key===e)&&(()=>{var e;null===(e=null==N?void 0:N.current)||void 0===e||e.focus()})()};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}),[]),[i]})("B"),[C,w]=(0,B.M)({columnField:"truck",operatorValue:"contains",value:""});console.log("keyPress",y);const{value:Z}=C;return(0,a.useEffect)((()=>{h((0,Re.V)(C))}),[Z]),(0,a.useEffect)((()=>{var e,t;(null===(t=null===(e=m.substatus)||void 0===e?void 0:e.event)||void 0===t?void 0:t.id)?S(!1):S(!0)}),[m]),(0,n.jsxs)(o.Z,Object.assign({container:!0,spacing:1,justifyContent:"flex-start",style:{paddingBottom:"20px"},alignItems:"center"},{children:[(0,n.jsx)(o.Z,Object.assign({item:!0,style:{width:"20%"}},{children:(0,n.jsxs)(s.Z,Object.assign({sx:{display:"flex",alignItems:"flex-end"}},{children:[(0,n.jsx)(K.Z,{},void 0),(0,n.jsx)(P.Z,{focused:!1,inputRef:N,id:"input-with-sx",label:"Buscar ",variant:"standard",name:"value",onChange:w,fullWidth:!0},void 0)]}),void 0)}),void 0),(0,n.jsx)(de,{rowsTimelines:i,setevent:O,setOpenEvent:b},void 0),(0,n.jsx)(o.Z,Object.assign({item:!0},{children:(0,n.jsx)(Je,{},void 0)}),void 0),(0,n.jsx)(o.Z,Object.assign({item:!0},{children:(0,n.jsx)(he,{shift:null===(e=j[0])||void 0===e?void 0:e.shift,date:null===(t=j[0])||void 0===t?void 0:t.date},void 0)}),void 0),(0,n.jsx)(c.a,Object.assign({open:x,handleClose:()=>{b(!1)},handleConfirm:()=>{return e=void 0,t=void 0,n=function*(){yield h((0,Re._C)()),!T&&b(!1);const e={shift:0,date:`${f}T00:00`};yield h((0,Re.mA)(e))},new((i=void 0)||(i=Promise))((function(o,s){function a(e){try{r(n.next(e))}catch(e){s(e)}}function l(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}r((n=n.apply(e,t||[])).next())}));var e,t,i,n},title:`Truck to ${_[E]}  `,disabled:p,loading:T},{children:(0,n.jsx)(le,{value:E},void 0)}),void 0)]}),void 0)};function Ye(){const[e]=A(),[t,i]=a.useState(null),o=Boolean(t),[s]=L(Re.V,i);return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(T.Z,Object.assign({style:{padding:"0px",margin:"5px"},"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:e=>{i(e.currentTarget)}},{children:(0,n.jsx)(Z.Z,{},void 0)}),void 0),(0,n.jsx)(C.Z,Object.assign({id:"long-menu",anchorEl:t,keepMounted:!0,open:o,onClose:()=>s("NONE"),PaperProps:{style:{maxHeight:216,width:"20ch"}}},{children:e.map((e=>(0,n.jsx)(w.Z,Object.assign({onClick:()=>s(e.event.toString())},{children:e.name}),e.name)))}),void 0)]},void 0)}const Xe=({row:e})=>{var t,i,o,r;const[d,c]=(0,F._)("hourmeterTruck",{}),[v]=Pe(),u=(0,l.T)();return(0,a.useEffect)((()=>{u((0,Re.H3)(d))}),[d]),(0,n.jsx)(s.Z,Object.assign({component:"form",onSubmit:t=>{t.preventDefault();const i=new FormData(t.currentTarget),n={};n[e.deviceId]={value:i.get("hourmeter"),color:"rgba(157, 255, 118, 0.49)"},(e=>{const t=JSON.parse(window.localStorage.getItem("hourmeterTruck")),i=Object.assign(t,e);c(Object.assign({},i))})(n),"UNKNOWN_SHIFT"!==e.shift&&u((0,Re.Ir)(Object.assign(Object.assign({},e),{hourmeter:i.get("hourmeter")})))},sx:{mt:1}},{children:(0,n.jsx)(P.Z,{style:{background:(null===(t=d[e.deviceId])||void 0===t?void 0:t.color)?null===(i=d[e.deviceId])||void 0===i?void 0:i.color:""},autoComplete:"off",inputProps:{pattern:"^[0-9]+([.][0-9]+)?$"},name:"hourmeter",id:"hourmeter",defaultValue:(null===(o=d[e.deviceId])||void 0===o?void 0:o.value)?null===(r=d[e.deviceId])||void 0===r?void 0:r.value:e.hourmeterCurrent},void 0)}),void 0)},qe=(e,t,i,o)=>[Object.assign(Object.assign({},g.mf9),{width:70,align:"left",renderHeader:e=>(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(g.KOw,Object.assign({},e),void 0),(0,n.jsx)(S.ZP,Object.assign({title:"Select all"},{children:(0,n.jsx)(Ye,{},void 0)}),void 0)]},void 0)}),{field:"truck",headerName:"Camión",hideSortIcons:!0},{field:"shift",headerName:"Turno",hideSortIcons:!0,width:60,renderCell:({row:e})=>(0,n.jsx)(S.ZP,Object.assign({title:e.shift},{children:(0,n.jsx)("p",{children:e.shift},void 0)}),void 0)},{field:"statusEvent",headerName:"Evento",type:"string",hide:!0},{field:"status",headerName:"Estado",width:100,hideSortIcons:!0,renderCell:({row:e})=>(0,n.jsx)(S.ZP,Object.assign({title:e.status},{children:(0,n.jsx)("p",{children:e.status},void 0)}),void 0)},{field:"hmtStart",headerName:"Horometro",editable:!1,type:"number",hideSortIcons:!0},{field:"hourmeterCurrent",headerName:"Horometro actual",editable:!o,type:"number",hideSortIcons:!0},{field:"hourmeterend",headerName:"Horometro Final",cellClassName:"super-app-theme--cell",hideSortIcons:!0,renderCell:({row:e})=>(0,n.jsx)(Xe,{row:e},void 0)},{field:"adjustment",headerName:"Ajuste",type:"number",width:60,hideSortIcons:!0},{field:"Opciones",headerName:"Opc",minWidth:110,hideSortIcons:!0,renderCell:({row:o})=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.ZP,Object.assign({onClick:()=>{t(o),e(!0)},title:"Add timeline"},{children:(0,n.jsx)(T.Z,Object.assign({size:"small"},{children:(0,n.jsx)(y.Z,{color:"primary",fontSize:"small"},void 0)}),void 0)}),void 0),(0,n.jsx)(S.ZP,Object.assign({onClick:()=>{t(o),i(!0)},title:"View Timeline"},{children:(0,n.jsx)(T.Z,Object.assign({size:"small"},{children:(0,n.jsx)(N.Z,{htmlColor:"Green",fontSize:"small"},void 0)}),void 0)}),void 0)]},void 0)}],Qe=a.memo((({setOpen:e,setTimelineCurrent:t,setOpenTimeline:i})=>{const o=p(),s=(0,l.T)(),{status:r,filterDataGrid:d,statusUpdateInitialHourmeterTimeline:c,isEditableRows:v,timesline:u,oneTimelimeUpdate:m}=(0,l.C)(Re.rf),[h,j]=Be(u.currentTimelineList,r),[f,x]=a.useState([]),{sortModel:b}=$("truck","asc"),[E,O]=(0,a.useState)({});return(0,a.useEffect)((()=>{((e,t,i)=>{var n,o,s,a,l,r,d,c,v,u,m,h,g,j,f,x,b;if(t){b=Object.assign(Object.assign({},t),{id:t.deviceId,truck:t.deviceAlias,status:`${(null===(o=null===(n=t.eventState)||void 0===n?void 0:n.event)||void 0===o?void 0:o.name)?null===(a=null===(s=t.eventState)||void 0===s?void 0:s.event)||void 0===a?void 0:a.name.substring(0,3):""}  ${(null===(l=t.eventState)||void 0===l?void 0:l.name)?` - ${null===(r=t.eventState)||void 0===r?void 0:r.name.toString().toLowerCase()}`:""}`,statusEvent:null===(c=null===(d=t.eventState)||void 0===d?void 0:d.event)||void 0===c?void 0:c.event,hmtStart:null===(v=t.hystoryShiftList[0])||void 0===v?void 0:v.initialHourmeter.toFixed(2),hourmeterCurrent:null===(u=t.hystoryShiftList.at(-1))||void 0===u?void 0:u.initialHourmeter.toFixed(2),shift:U[null===(m=t.currentTimeline)||void 0===m?void 0:m.shift],date:new Date(1e3*(null===(g=null===(h=t.currentTimeline)||void 0===h?void 0:h.shiftDate)||void 0===g?void 0:g.seconds)).toLocaleDateString(),adjustment:(null===(j=t.currentTimeline)||void 0===j?void 0:j.adjustment)?t.currentTimeline.adjustment:0,statusAdjustment:!!(null===(f=t.currentTimeline)||void 0===f?void 0:f.status)&&(null===(x=t.currentTimeline)||void 0===x?void 0:x.status)});const E=e.findIndex((e=>e.id===b.id)),O=[...e];E>=0&&(O[E]=b),i([...O])}})(h,m.currentTimeline,j)}),[m]),(0,n.jsx)("div",Object.assign({style:{height:"1150px",overflowY:"scroll",display:"flex",flexDirection:"column"}},{children:(0,n.jsx)(g._$r,{className:o.root,rowHeight:30,rows:h,columns:qe(e,t,i,v),density:"compact",checkboxSelection:!0,disableSelectionOnClick:!0,sortModel:b,onSelectionModelChange:e=>(e=>{const t=new Set(e),i=h.filter((e=>t.has(e.id.toString())));s((0,Re.Xm)(i))})(e),disableColumnMenu:!0,editRowsModel:E,onEditRowsModelChange:e=>(e=>{var t="";for(var[i,n]of Object.entries(e))Object.keys(n).length<=1&&Object.keys(n).forEach((e=>{t=e}));var o=Object.assign({},e);switch(t){case"hourmeterCurrent":O(Object.assign(Object.assign({},E),o));break;case"hmtStart":R(o,O,Re.SZ)}})(e),filterModel:{items:[d]},getRowClassName:e=>`super-app-theme--${e.row.statusAdjustment}`},void 0)}),void 0)}));var et=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{r(n.next(e))}catch(e){s(e)}}function l(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const tt=()=>{const e=(0,l.T)(),{status:t,timelineErrorList:i,currentTimeline:d,statusCreateTimeline:v}=(0,l.C)(Re.rf),{formValues:u}=(0,l.C)(r.k3),[m]=Pe(),[g,j]=(0,a.useState)(!1),[f,x]=(0,a.useState)(!1),[b]=Ue(u),[E,O]=(0,a.useState)([]),[p]=(0,ge.r)(v),S=(0,a.useCallback)((()=>{j(!1),x(!1)}),[]);return(0,a.useEffect)((()=>(e((0,Re.mA)(m)),()=>{e((0,Re.gI)())})),[]),(0,a.useEffect)((()=>{e((0,Re.jO)(E))}),[E]),(0,n.jsxs)(s.Z,Object.assign({m:2,p:.5,style:{height:"100%"}},{children:[(0,n.jsx)(o.Z,{children:(0,n.jsx)(Ge,{},void 0)},void 0),(0,n.jsx)(o.Z,Object.assign({container:!0,style:{height:"100%"}},{children:(0,n.jsx)(o.Z,Object.assign({item:!0,lg:12,md:12,sm:12,xs:12},{children:(0,n.jsx)(Qe,{setOpen:j,setTimelineCurrent:O,setOpenTimeline:x},void 0)}),void 0)}),void 0),(0,n.jsx)(c.a,Object.assign({open:g,handleClose:S,handleConfirm:()=>et(void 0,void 0,void 0,(function*(){yield e((0,Re.Sp)()),!p&&j(!1),yield function(){return et(this,void 0,void 0,(function*(){yield e((0,Re.mA)(m))}))}()})),title:`Camión  ${E.truck}  `,disabled:b,loading:p},{children:(0,n.jsx)(_e,{currentTimeline:d},void 0)}),void 0),(0,n.jsx)(c.a,Object.assign({open:f,handleClose:S,title:`Linea de tiempo del camión ${E.truck} `,disabled:b,maxWidth:"lg"},{children:(0,n.jsx)(Ke,{setClose:x},void 0)}),void 0),t===V.JD.DONE&&!(null==i?void 0:i.success)&&(0,n.jsx)(h,{error:null==i?void 0:i.errorsList},void 0)]}),void 0)},it=()=>(0,n.jsx)("div",{children:(0,n.jsxs)(o.Z,Object.assign({container:!0},{children:[(0,n.jsx)(o.Z,Object.assign({item:!0,lg:6},{children:(0,n.jsx)(tt,{},void 0)}),void 0),(0,n.jsx)(o.Z,Object.assign({item:!0,lg:6},{children:(0,n.jsx)(We,{},void 0)}),void 0)]}),void 0)},void 0);var nt=i(16281);const ot=()=>(0,n.jsxs)("div",{children:[(0,n.jsx)(nt.h,{title:"Hourmeter",notificationPannel:!0},void 0),(0,n.jsx)(it,{},void 0)]},void 0),st=ot},16281:(e,t,i)=>{i.d(t,{h:()=>p});var n=i(85893),o=i(45258),s=i(28358),a=i(282),l=i(22318),r=i(43471),d=i(5977),c=i(55517),v=i(17812),u=i(96617),m=i(73637),h=i(79895),g=i(16575),j=i(51972),f=i(67294),x=i(73855),b=i(45855);const E=({title:e,content:t})=>(0,n.jsxs)("div",{children:[(0,n.jsxs)(l.Z,Object.assign({variant:"subtitle1"},{children:[(0,n.jsx)(g.Z,{style:{fontSize:"14px",marginRight:"4px"}},void 0),e]}),void 0),(0,n.jsx)(l.Z,Object.assign({variant:"body1"},{children:t}),void 0),(0,n.jsx)(c.Z,{},void 0)]},void 0),O=({})=>{var e,t,i;const[o,s]=(0,f.useState)(null),[a,r]=(0,f.useState)(!1),{notificationsHeader:d}=(0,x.C)(b.Af),c=(0,x.T)();(0,f.useEffect)((()=>{c((0,b.pK)())}),[]);const g=a&&Boolean(o)?"transition-popper":void 0;return console.log("notificationsHeader.notificationsList",d.notificationsList),(0,n.jsxs)("div",Object.assign({style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",width:"8%",marginRight:"4px"}},{children:[(0,n.jsx)(v.Z,Object.assign({color:(null===(e=d.notificationsList)||void 0===e?void 0:e.length)>0?"primary":"inherit",onClick:e=>{s(e.currentTarget),r((e=>!e))},size:"small"},{children:(0,n.jsxs)("div",Object.assign({style:{margin:"4px"}},{children:[(0,n.jsx)(l.Z,Object.assign({variant:"subtitle2",style:{color:"white",zIndex:1,position:"absolute",justifyContent:"right",marginLeft:"18px"}},{children:(null===(t=d.notificationsList)||void 0===t?void 0:t.length)>0?null===(i=d.notificationsList)||void 0===i?void 0:i.length:""}),void 0),(0,n.jsx)(j.Z,{},void 0)]}),void 0)}),void 0),(0,n.jsx)("div",Object.assign({style:{zIndex:1}},{children:(0,n.jsx)(u.Z,Object.assign({id:g,open:a,anchorEl:o,transition:!0,style:{zIndex:3}},{children:({TransitionProps:e})=>{var t,i,o;return(0,n.jsx)(m.Z,Object.assign({},e,{timeout:350},{children:(0,n.jsxs)(h.Z,Object.assign({elevation:3,style:{width:"300px",height:(null===(t=d.notificationsList)||void 0===t?void 0:t.length)>10?"87vh":"100%",padding:"8px",overflow:"scroll"}},{children:[(!d.notificationsList||0===(null===(i=d.notificationsList)||void 0===i?void 0:i.length))&&(0,n.jsx)(n.Fragment,{children:"No tiene notificaciones Nuevas"},void 0),null===(o=d.notificationsList)||void 0===o?void 0:o.map(((e,t)=>(0,n.jsx)(E,{title:e.title,content:e.message},t)))]}),void 0)}),void 0)}}),void 0)}),void 0)]}),void 0)},p=({title:e,positionContainer:t,notificationPannel:i})=>{const c=t||"sticky",v=(0,d.k6)();return(0,n.jsx)(o.Z,Object.assign({position:c,color:"secondary",style:{display:"flex"},elevation:0},{children:(0,n.jsxs)("div",Object.assign({style:{display:"flex"}},{children:[(0,n.jsxs)(s.Z,Object.assign({variant:"dense",style:{width:"90%"}},{children:[(0,n.jsx)(a.Z,{size:"small",startIcon:(0,n.jsx)(r.Z,{color:"action",style:{color:"#fff"}},void 0),onClick:()=>{v.goBack()}},void 0),(0,n.jsx)(l.Z,Object.assign({variant:"h6"},{children:e}),void 0)]}),void 0),i&&(0,n.jsx)(O,{},void 0)]}),void 0)}),void 0)}}}]);