"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[633],{80024:(e,t,i)=>{var n=i(95318),s=i(20862);t.Z=void 0;var a=s(i(67294)),o=(0,n(i(2108)).default)(a.createElement("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z"}),"AddToPhotos");t.Z=o},81395:(e,t,i)=>{var n=i(95318),s=i(20862);t.Z=void 0;var a=s(i(67294)),o=(0,n(i(2108)).default)(a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");t.Z=o},79192:(e,t,i)=>{var n=i(95318),s=i(20862);t.Z=void 0;var a=s(i(67294)),o=(0,n(i(2108)).default)(a.createElement("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDownOutlined");t.Z=o},94491:(e,t,i)=>{var n=i(95318),s=i(20862);t.Z=void 0;var a=s(i(67294)),o=(0,n(i(2108)).default)(a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUncheckedOutlined");t.Z=o},52303:(e,t,i)=>{var n=i(95318),s=i(20862);t.Z=void 0;var a=s(i(67294)),o=(0,n(i(2108)).default)(a.createElement("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2z"}),"Timeline");t.Z=o},61242:(e,t,i)=>{i.d(t,{a:()=>r});var n=i(85893),s=i(52663),a=i(66083),o=i(29525),l=i(66856),d=i(282);const r=({open:e,handleClose:t,handleConfirm:i,title:r,children:c,disabled:h=!1})=>(0,n.jsxs)(s.Z,Object.assign({open:e,onClose:t,maxWidth:"lg"},{children:[(0,n.jsx)(a.Z,{children:r},void 0),(0,n.jsx)(o.Z,{children:c},void 0),(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(d.Z,Object.assign({color:"primary",onClick:t},{children:"Cancelar"}),void 0),i&&(0,n.jsx)(d.Z,Object.assign({disabled:h,color:"secondary",onClick:i,autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)]}),void 0)},696:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(85893),s=i(92284),a=i(73914);const o=(0,i(57850).Z)(),l=(0,a.Z)((e=>({root:{flexDirection:"column","& .ant-empty-img-1":{fill:"light"===e.palette.type?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:"light"===e.palette.type?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:"light"===e.palette.type?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:"light"===e.palette.type?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:"light"===e.palette.type?"0.8":"0.08",fill:"light"===e.palette.type?"#f5f5f5":"#fff"}},label:{marginTop:e.spacing(1)}})),{defaultTheme:o});function d(){const e=l();return(0,n.jsxs)(s.nik,Object.assign({className:e.root},{children:[(0,n.jsx)("svg",Object.assign({width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false"},{children:(0,n.jsxs)("g",Object.assign({fill:"none",fillRule:"evenodd"},{children:[(0,n.jsxs)("g",Object.assign({transform:"translate(24 31.67)"},{children:[(0,n.jsx)("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"},void 0),(0,n.jsx)("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"},void 0),(0,n.jsx)("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"},void 0),(0,n.jsx)("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"},void 0)]}),void 0),(0,n.jsx)("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"},void 0),(0,n.jsxs)("g",Object.assign({className:"ant-empty-img-4",transform:"translate(149.65 15.383)"},{children:[(0,n.jsx)("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"},void 0),(0,n.jsx)("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"},void 0)]}),void 0)]}),void 0)}),void 0),(0,n.jsx)("div",Object.assign({className:e.label},{children:"Sin datos"}),void 0)]}),void 0)}},10646:(e,t,i)=>{i.d(t,{l:()=>n});const n=e=>[`${e.getFullYear()}-${`0${e.getMonth()+1}`.substr(-2)}-${`0${e.getDate()}`.substr(-2)}`]},88093:(e,t,i)=>{i.d(t,{R:()=>n});const n=()=>{var e=new Date;return e.getHours(),{dateShift:e.getHours()>=0&&e.getHours()<7?new Date(e.getTime()-864e5):e}}},36280:(e,t,i)=>{i.r(t),i.d(t,{HourmeterView:()=>re,default:()=>ce});var n=i(85893),s=i(10046),a=i(41749),o=i(67294),l=i(73855),d=i(92336),r=i(61242),c=i(8286),h=i(64436),v=i(96019),u=i(52541),m=i(30553),g=i(40074),j=i(41120),x=i(87623),f=i(81395);const p=e=>{const[t,i]=(0,o.useState)(e);return Object.assign({form:t,handleInputChange:e=>{i(Object.assign(Object.assign({},t),{[e.target.name]:e.target.value}))},handleReactChange:e=>{console.log(e.target),i(Object.assign(Object.assign({},t),{[e.target.name]:e.target.value}))},reset:()=>{i(e)}},t)};var O=i(93007);const b=(0,j.Z)((e=>(0,x.Z)({container:{display:"flex",flexDirection:"column",flexWrap:"wrap",fontFamily:"inherit"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),paddingBottom:"10px",width:100}}))),Z=()=>{const e=b(),t=(0,l.T)(),[i,s]=(0,o.useState)(0),[r,j]=(0,o.useState)(1000.2),[x,Z]=(0,o.useState)(!1),{currentTimeline:y}=(0,l.C)(d.rf),N=new Date,T=`0${N.getHours()}`,S=`0${N.getMinutes()}`,{form:C,handleInputChange:E,reset:I}=p({time:`${T.slice(-2)}:${S.slice(-2)}`,hourmeterEnd:0===(null==y?void 0:y.hystoryShiftList.length)?0:null==y?void 0:y.hystoryShiftList[0].initialHourmeter.toFixed(2),htm:0,status:void 0,currentTimeline:y}),A=null==y?void 0:y.status,{time:k,hourmeterEnd:w,htm:D}=C;(0,o.useEffect)((()=>(t((0,d.$6)(C)),()=>{})),[C]);const L=(e,t)=>{const i=Number.parseFloat(e)+Number.parseFloat(t);return Number.parseFloat(i.toFixed(2))};return(0,o.useEffect)((()=>(console.log("hourmeterStart",r),console.log("hourmeterStart",r),console.log(L(w,i)),j(L(w,i)),()=>{t((0,d.J$)())})),[]),(0,o.useEffect)((()=>{!function(){var e;if(0===(null==y?void 0:y.hystoryShiftList.length))s(0);else{const i=null==y?void 0:y.hystoryShiftList[0],n=new Date,a=new Date(1e3*(null===(e=null==i?void 0:i.initialTime)||void 0===e?void 0:e.seconds));console.log("CurrenteDate",n),console.log("hourmeterDate",a);var t=(n.getTime()-a.getTime())/1e3;let o=1/60*Math.ceil(t/60);console.log("pinta",o),s(o)}}()}),[N]),(0,n.jsxs)(a.Z,Object.assign({container:!0,spacing:5},{children:[(0,n.jsx)(a.Z,Object.assign({item:!0,lg:6,md:6,sm:6,xs:6},{children:(0,n.jsxs)("form",Object.assign({className:e.container,noValidate:!0},{children:[(0,n.jsx)(c.Z,{id:"date",label:"HOUR",type:"time",name:"time",value:k,onChange:E,className:e.textField,InputLabelProps:{shrink:!0,required:!0}},void 0),(0,n.jsx)(c.Z,{id:"date",label:"HOURMETER",type:"number",disabled:!0,name:"hourmeterEnd",value:L(w,i),onChange:E,className:e.textField,InputLabelProps:{shrink:!0}},void 0),("MANTO"===A||x)&&(0,n.jsx)(c.Z,{id:"date",label:"HOURMETER Start",type:"number",name:"htm",value:D,onChange:E,className:e.textField,InputLabelProps:{shrink:!0,required:!0}},void 0)]}),void 0)}),void 0),(0,n.jsx)(a.Z,Object.assign({item:!0,lg:6,md:6,sm:6,xs:6},{children:(0,n.jsxs)(h.Z,Object.assign({component:"fieldset"},{children:[(0,n.jsx)(v.Z,Object.assign({component:"legend"},{children:"choice"}),void 0),(0,n.jsxs)(u.Z,Object.assign({defaultValue:"female","aria-label":"hourmeter",name:"customized-radios"},{children:[(0,n.jsx)(m.Z,{value:`${O.StateUnitGeneral.MANTO}`,control:(0,n.jsx)(g.Z,{icon:(0,n.jsx)(f.Z,{},void 0),checkedIcon:(0,n.jsx)(f.Z,{},void 0),name:"status",onClick:e=>{console.log(e),console.log(e.target.checked),Z(e.target.checked)},onChange:E,disabled:"MANTO"===A},void 0),label:"MANTO"},void 0),(0,n.jsx)(m.Z,{value:`${O.StateUnitGeneral.STANDBY}`,control:(0,n.jsx)(g.Z,{icon:(0,n.jsx)(f.Z,{},void 0),checkedIcon:(0,n.jsx)(f.Z,{},void 0),name:"status",onClick:()=>Z(!1),disabled:"STANDBY"===A,onChange:E},void 0),label:"STANDBY"},void 0),(0,n.jsx)(m.Z,{value:`${O.StateUnitGeneral.INSPECTION}`,control:(0,n.jsx)(g.Z,{icon:(0,n.jsx)(f.Z,{},void 0),checkedIcon:(0,n.jsx)(f.Z,{},void 0),onClick:()=>Z(!1),name:"status",disabled:"INSPECTION"===A,onChange:E},void 0),label:"INSPECTION"},void 0),(0,n.jsx)(m.Z,{value:`${O.StateUnitGeneral.OPERATIONAL}`,control:(0,n.jsx)(g.Z,{icon:(0,n.jsx)(f.Z,{},void 0),checkedIcon:(0,n.jsx)(f.Z,{},void 0),name:"status",disabled:"OPERATIVE"===A,onClick:()=>Z(!1),onChange:E},void 0),label:"OPERATIVE"},void 0)]}),void 0)]}),void 0)}),void 0)]}),void 0)};var y,N;!function(e){e[e.UNKNOWN_STATE=0]="UNKNOWN_STATE",e[e.UPLOAD=1]="UPLOAD",e[e.DOWNLOAD=2]="DOWNLOAD",e[e.TO_UPLOAD=3]="TO_UPLOAD",e[e.TO_DOWNLOAD=4]="TO_DOWNLOAD",e[e.WAITING=5]="WAITING",e[e.QUEUE=6]="QUEUE",e[e.MANTO=7]="MANTO",e[e.STANDBY=8]="STANDBY",e[e.INSPECTION=9]="INSPECTION",e[e.LOAD_FUEL=10]="LOAD_FUEL",e[e.LOAD_WATER=11]="LOAD_WATER",e[e.OPERATIVE=12]="OPERATIVE"}(y||(y={})),function(e){e[e.UNKNOWN_SHIFT=0]="UNKNOWN_SHIFT",e[e.NIGHT=1]="NIGHT",e[e.DAY=2]="DAY",e[e.BOTH=3]="BOTH"}(N||(N={}));var T=i(94491);const S=(0,j.Z)((()=>(0,x.Z)({line:{width:"100%",minWidth:"130px",height:"1px",border:"0",backgroundColor:"rgba(191,128,11,1)",padding:"1px",margin:"5px"},container:{display:"flex",alignItems:"center"},timeline:{display:"flex",flexWrap:"wrap",flexDirection:"column",alignItems:"center",WebkitUserSelect:"none"},span:{display:"flex",alignSelf:"start",WebkitUserSelect:"none"}}))),C=({icon:e})=>{const t=S();return(0,n.jsxs)("div",Object.assign({className:t.container},{children:[e||(0,n.jsx)(T.Z,{htmlColor:"#F2BB13"},void 0),(0,n.jsx)(a.Z,{className:t.line},void 0)]}),void 0)},E=(0,o.createContext)({}),{Provider:I}=E,A=({children:e,data:t})=>{const i=S();return(0,n.jsx)(I,Object.assign({value:{data:t}},{children:(0,n.jsx)("div",Object.assign({className:i.timeline},{children:e}),void 0)}),void 0)};var k=i(22318);const w=({title:e})=>{const t=S();return(0,n.jsx)("div",Object.assign({className:t.span},{children:(0,n.jsx)(k.Z,Object.assign({variant:"button",display:"block",gutterBottom:!0},{children:e}),void 0)}),void 0)},D=({title:e})=>{const{data:t}=(0,o.useContext)(E);return(0,n.jsx)(k.Z,Object.assign({variant:"h6",component:"h6"},{children:e||(null==t?void 0:t.title.toString().toLowerCase())}),void 0)},L=()=>{const{currentTimeline:e}=(0,l.C)(d.rf);return(0,n.jsx)(a.Z,Object.assign({container:!0},{children:null==e?void 0:e.hystoryShiftList.map((e=>{var t;let i=new Date(1e3*(null===(t=e.initialTime)||void 0===t?void 0:t.seconds)).toLocaleString();return(0,n.jsxs)(A,{children:[(0,n.jsx)(D,{title:y[e.initialState]},void 0),(0,n.jsx)(C,{},void 0),(0,n.jsx)(w,{title:i.toLocaleString().split(" ")[1].substring(0,i.split(" ")[1].length-3)},void 0)]},e.id+Math.random())}))}),void 0)};var P=i(282);const H=(0,i(63786).Z)(o.createElement("path",{d:"M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"SearchRounded");var M=i(88093),R=i(10646),z=i(92284);const V=(0,j.Z)((e=>(0,x.Z)({container:{display:"flex",flexDirection:"column",flexWrap:"wrap",fontFamily:"inherit"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),paddingBottom:"10px",width:100}}))),F=({value:e,label:t})=>{const i=V(),s=(0,l.T)(),r=new Date,j=`0${r.getHours()}`,x=`0${r.getMinutes()}`,{form:f,handleInputChange:O,reset:b}=p({hoursStart:`${j.slice(-2)}:${x.slice(-2)}`,status:e});(0,o.useEffect)((()=>{s((0,d.gS)(f))}),[f]),(0,o.useEffect)((()=>()=>{s((0,d.XH)())}),[]);const{hoursStart:Z,hoursEnd:y,status:N}=f;return(0,n.jsxs)(a.Z,Object.assign({container:!0,spacing:5},{children:[(0,n.jsx)(a.Z,Object.assign({item:!0,lg:6,md:6,sm:6,xs:6},{children:(0,n.jsx)("form",Object.assign({className:i.container,noValidate:!0},{children:(0,n.jsx)(c.Z,{id:"date",label:"HOUR START",type:"time",name:"hoursStart",value:Z,onChange:O,className:i.textField,InputLabelProps:{shrink:!0,required:!0}},void 0)}),void 0)}),void 0),(0,n.jsx)(a.Z,Object.assign({item:!0,lg:6,md:6,sm:6,xs:6},{children:(0,n.jsxs)(h.Z,Object.assign({component:"fieldset"},{children:[(0,n.jsx)(v.Z,Object.assign({component:"legend"},{children:"choice"}),void 0),(0,n.jsx)(u.Z,Object.assign({defaultValue:"female","aria-label":"hourmeter",name:"customized-radios"},{children:(0,n.jsx)(m.Z,{value:`${e}`,control:(0,n.jsx)(g.Z,{icon:(0,n.jsx)(z._OA,{},void 0),checkedIcon:(0,n.jsx)(z._OA,{},void 0),name:"status",checked:!0,onChange:O},void 0),label:t},void 0)}),void 0)]}),void 0)}),void 0)]}),void 0)};var U=function(e,t,i,n){return new(i||(i=Promise))((function(s,a){function o(e){try{d(n.next(e))}catch(e){a(e)}}function l(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,l)}d((n=n.apply(e,t||[])).next())}))};const $=()=>{const{rowsTimeline:e}=(0,l.C)(d.rf),t=(0,l.T)(),{dateShift:i}=(0,M.R)(),[h]=(0,R.l)(i),[v,u]=(0,o.useState)(!0),[m,g]=(0,o.useState)(!0),[j,x]=(0,o.useState)(!0),[f,b]=(0,o.useState)(!1),[Z,y]=(0,o.useState)(!1),[N,T]=(0,o.useState)(!1),[S,C]=(0,o.useState)(!1),{form:E,handleInputChange:I,resetForms:A}=p({columnField:"truck",operatorValue:"contains",value:""});(0,o.useEffect)((()=>{t((0,d.V)(E))}),[E]);const k=()=>0!==e.length&&e.every((e=>"STANDBY"===e.status)),w=()=>0!==e.length&&e.every((e=>"OPERATIVE"===e.status)),D=()=>0!==e.length&&e.every((e=>"INSPECTION"===e.status)),L=()=>0!==e.length&&e.every((e=>"UNKNOWN_STATE"===e.status)),z=()=>{b(!1),y(!1),T(!1),C(!1)},V=()=>U(void 0,void 0,void 0,(function*(){yield t((0,d._C)()),b(!1),y(!1),T(!1);const e={shift:0,date:`${h}T00:00`};yield t((0,d.mA)(e))}));return(0,o.useEffect)((()=>{w()&&(u(!1),g(!0),x(!1)),L()&&(u(!1),g(!1),x(!1)),k()&&(u(!0),g(!1),x(!1)),D()&&(u(!1),g(!1),x(!0)),0==L()&&0==k()&&0==D()&&0==w()&&(u(!0),g(!0),x(!0))}),[e]),(0,n.jsxs)(a.Z,Object.assign({container:!0,spacing:1,style:{paddingBottom:"20px"}},{children:[(0,n.jsx)(a.Z,{children:(0,n.jsxs)(s.Z,Object.assign({sx:{display:"flex",alignItems:"flex-end"}},{children:[(0,n.jsx)(H,{},void 0),(0,n.jsx)(c.Z,{id:"input-with-sx",label:"Search ",variant:"standard",name:"value",onChange:I},void 0)]}),void 0)},void 0),(0,n.jsx)(a.Z,Object.assign({item:!0},{children:(0,n.jsx)(P.Z,Object.assign({disabled:v,onClick:()=>b(!0),variant:"contained",color:"primary"},{children:"STANDBY"}),void 0)}),void 0),(0,n.jsx)(a.Z,Object.assign({item:!0},{children:(0,n.jsx)(P.Z,Object.assign({disabled:m,onClick:()=>y(!0),variant:"contained",color:"primary"},{children:"OPERATIVE"}),void 0)}),void 0),(0,n.jsx)(a.Z,Object.assign({item:!0},{children:(0,n.jsx)(P.Z,Object.assign({disabled:j,onClick:()=>T(!0),variant:"contained",color:"primary"},{children:"INSPECTION"}),void 0)}),void 0),(0,n.jsx)(a.Z,Object.assign({item:!0},{children:(0,n.jsx)(P.Z,Object.assign({disabled:!1,onClick:()=>C(!0),variant:"contained",color:"primary"},{children:"Finalize Shift"}),void 0)}),void 0),(0,n.jsx)(r.a,Object.assign({open:f,handleClose:z,handleConfirm:V,title:"Truck to STANDBY  "},{children:(0,n.jsx)(F,{value:O.StateUnitGeneral.STANDBY,label:"STANDBY"},void 0)}),void 0),(0,n.jsx)(r.a,Object.assign({open:N,handleClose:z,handleConfirm:V,title:"Truck to INSPECTION  "},{children:(0,n.jsx)(F,{value:O.StateUnitGeneral.INSPECTION,label:"INSPECTION"},void 0)}),void 0),(0,n.jsx)(r.a,Object.assign({open:Z,handleClose:z,handleConfirm:V,title:"Truck to OPERATIVE  "},{children:(0,n.jsx)(F,{value:O.StateUnitGeneral.OPERATIONAL,label:"OPERATIVE"},void 0)}),void 0),(0,n.jsx)(r.a,{open:S,handleClose:z,handleConfirm:()=>U(void 0,void 0,void 0,(function*(){yield t((0,d.nx)()),C(!1);const e={shift:0,date:`${h}T00:00`};yield t((0,d.mA)(e))})),title:"Finalize Hourmeter "},void 0)]}),void 0)};var B=i(2357),W=i(696),_=i(868),Y=i(17812),G=i(52303),K=i(80024),q=i(99050),Q=i(85639),X=i(79192);const J=["NONE","STANDBY","OPERATIVE","INSPECTION","MANTO"];function ee(){const e=(0,l.T)(),[t,i]=o.useState(null),s=Boolean(t),a=(t="NONE")=>{i(null),e("NONE"===t?(0,d.V)({columnField:"status",operatorValue:"contains",value:""}):(0,d.V)({columnField:"status",operatorValue:"contains",value:t})),console.log(t)};return(0,n.jsxs)("div",{children:[(0,n.jsx)(Y.Z,Object.assign({style:{padding:"0px",margin:"0px"},"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:e=>{i(e.currentTarget)}},{children:(0,n.jsx)(X.Z,{},void 0)}),void 0),(0,n.jsx)(q.Z,Object.assign({id:"long-menu",anchorEl:t,keepMounted:!0,open:s,onClose:()=>a("NONE"),PaperProps:{style:{maxHeight:216,width:"20ch"}}},{children:J.map((e=>(0,n.jsx)(Q.Z,Object.assign({onClick:()=>a(e)},{children:e}),e)))}),void 0)]},void 0)}const te=(e,t,i)=>[Object.assign(Object.assign({},z.mf9),{width:70,renderHeader:e=>(0,n.jsx)(_.ZP,Object.assign({title:"Select all"},{children:(0,n.jsxs)("div",Object.assign({style:{display:"flex",padding:"0px",margin:"0px"}},{children:[(0,n.jsx)(z.KOw,Object.assign({},e),void 0),(0,n.jsx)(ee,{},void 0)]}),void 0)}),void 0)}),{field:"truck",headerName:"Truck",width:150},{field:"shift",headerName:"Shift",width:150},{field:"date",headerName:"Date",width:150},{field:"status",headerName:"Status",width:150},{field:"hmtStart",headerName:"Hourmeter",width:150,editable:!0,type:"number"},{field:"hourmeterCurrent",headerName:"hourmeter Current",width:170},{field:"Opciones",headerName:"Opc",minWidth:110,renderCell:({row:s})=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.ZP,Object.assign({onClick:()=>{console.log(s),t(s),e(!0)},title:"Add timeline"},{children:(0,n.jsx)(Y.Z,Object.assign({size:"small"},{children:(0,n.jsx)(K.Z,{color:"primary",fontSize:"small"},void 0)}),void 0)}),void 0),(0,n.jsx)(_.ZP,Object.assign({onClick:()=>{t(s),i(!0)},title:"View Timeline"},{children:(0,n.jsx)(Y.Z,Object.assign({size:"small"},{children:(0,n.jsx)(G.Z,{htmlColor:"Green",fontSize:"small"},void 0)}),void 0)}),void 0)]},void 0)}];var ie=i(57850),ne=i(73914);const se=(0,ie.Z)(),ae=(0,ne.Z)((e=>{const t="dark"===((i=e.palette).type||i.mode);var i;return{root:{"& .MuiDataGrid-cell--editing":{backgroundColor:"rgb(255,115,115, 0.19)",color:"#1a3e72"},"& .Mui-error":{backgroundColor:`rgb(126,10,15, ${t?0:.1})`,color:t?"#ff4343":"#750f0f"}}}}),{defaultTheme:se}),oe=o.memo((({setOpen:e,setTimelineCurrent:t,setOpenTimeline:i})=>{const s=ae(),a=(0,l.T)(),{status:r,filterDataGrid:c,selectModel:h,timesline:v}=(0,l.C)(d.rf),{rows:u}=(()=>{const{timesline:e,status:t}=(0,l.C)(d.rf),{currentTimelineList:i}=e,[n,s]=(0,o.useState)([]);return(0,o.useEffect)((()=>{s("done"===t?null==i?void 0:i.map((e=>{var t,i,n,s,a;return Object.assign(Object.assign({},e),{id:e.deviceId,truck:e.deviceAlias,status:y[e.state],hmtStart:null===(t=e.hystoryShiftList[0])||void 0===t?void 0:t.initialHourmeter.toFixed(2),hourmeterCurrent:null===(i=e.hystoryShiftList.at(-1))||void 0===i?void 0:i.initialHourmeter.toFixed(2),shift:N[null===(n=e.currentTimeline)||void 0===n?void 0:n.shift],date:new Date(1e3*(null===(a=null===(s=e.currentTimeline)||void 0===s?void 0:s.shiftDate)||void 0===a?void 0:a.seconds)).toLocaleString().slice(0,-8)})})):[])}),[e,t]),{rows:n}})(),[m,g]=(0,o.useState)(!0),[j,x]=o.useState({}),f=o.useCallback((e=>{x(e),console.log(e),0!==Object.keys(e).length&&a((0,d.cK)(e))}),[]);(0,o.useEffect)((()=>{g("done"!==r&&"failed"!==r)}),[r]);const[p,O]=o.useState([]);return(0,o.useEffect)((()=>{"done"===r&&O(h)}),[h]),(0,o.useEffect)((()=>{"done"===r&&(a((0,d.Cb)()),a((0,d.B6)([])))}),[u]),(0,o.useEffect)((()=>()=>{a((0,d.gI)())}),[]),(0,n.jsx)("div",Object.assign({style:{height:"80vh",overflowY:"scroll",display:"flex",flexDirection:"column"}},{children:(0,n.jsx)(z._$r,{className:s.root,rowHeight:40,rows:u,columns:te(e,t,i),density:"compact",components:{NoRowsOverlay:W.Z},checkboxSelection:!0,disableSelectionOnClick:!0,loading:m,onSelectionModelChange:e=>(e=>{const t=new Set(e),i=u.filter((e=>t.has(e.id.toString())));a((0,d.Xm)(i))})(e),editRowsModel:j,onEditRowsModelChange:f,filterModel:{items:[c]}},void 0)}),void 0)}));const le=()=>{const e=(0,l.T)(),{formValues:t}=(0,l.C)(d.rf),{dateShift:i}=(0,M.R)(),[c]=(0,R.l)(i),[h,v]=(0,o.useState)(B.Shift.UNKNOWN_SHIFT),[u,m]=(0,o.useState)(!1),[g,j]=(0,o.useState)(!1),[x,f]=(0,o.useState)(!0),[p,O]=(0,o.useState)([]),b=(0,o.useCallback)((()=>{m(!1),f(!0),j(!1)}),[]);return(0,o.useEffect)((()=>{const t={shift:0,date:`${c}T00:00`};return e((0,d.mA)(t)),()=>{e((0,d.gI)())}}),[]),(0,o.useEffect)((()=>{t.status?f(!1):f(!0)}),[t]),(0,o.useEffect)((()=>{e((0,d.jO)(p))}),[p]),(0,n.jsx)("div",{children:(0,n.jsxs)(s.Z,Object.assign({m:2,p:.5,style:{height:"100%"}},{children:[(0,n.jsx)(a.Z,{children:(0,n.jsx)($,{},void 0)},void 0),(0,n.jsx)(a.Z,Object.assign({container:!0,style:{height:"100%"}},{children:(0,n.jsx)(a.Z,Object.assign({item:!0,lg:12,md:12,sm:12,xs:12},{children:(0,n.jsx)(oe,{setOpen:m,setTimelineCurrent:O,setOpenTimeline:j},void 0)}),void 0)}),void 0),(0,n.jsx)(r.a,Object.assign({open:u,handleClose:b,handleConfirm:()=>{return t=void 0,i=void 0,s=function*(){yield e((0,d.Sp)()),m(!1),f(!0);const t={shift:h,date:`${c}T00:00`};yield e((0,d.mA)(t))},new((n=void 0)||(n=Promise))((function(e,a){function o(e){try{d(s.next(e))}catch(e){a(e)}}function l(e){try{d(s.throw(e))}catch(e){a(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n((function(e){e(i)}))).then(o,l)}d((s=s.apply(t,i||[])).next())}));var t,i,n,s},title:`Truck  ${p.truck}  `,disabled:x},{children:(0,n.jsx)(Z,{},void 0)}),void 0),(0,n.jsx)(r.a,Object.assign({open:g,handleClose:b,title:`Timeline to  ${p.truck} `,disabled:x},{children:(0,n.jsx)(L,{},void 0)}),void 0)]}),void 0)},void 0)};var de=i(16281);const re=()=>(0,n.jsxs)("div",{children:[(0,n.jsx)(de.h,{title:"Hourmeter",notificationPannel:!0},void 0),(0,n.jsx)(le,{},void 0)]},void 0),ce=re},16281:(e,t,i)=>{i.d(t,{h:()=>Z});var n=i(85893),s=i(45258),a=i(28358),o=i(282),l=i(22318),d=i(43471),r=i(5977),c=i(55517),h=i(17812),v=i(96617),u=i(73637),m=i(79895),g=i(16575),j=i(51972),x=i(67294),f=i(73855),p=i(45855);const O=({title:e,content:t})=>(0,n.jsxs)("div",Object.assign({style:{paddingBottom:"8px",paddingTop:"8px"}},{children:[(0,n.jsxs)(l.Z,Object.assign({variant:"subtitle1"},{children:[(0,n.jsx)(g.Z,{style:{fontSize:"14px",marginRight:"4px"}},void 0),e]}),void 0),(0,n.jsx)(l.Z,Object.assign({variant:"body1"},{children:t}),void 0),(0,n.jsx)(c.Z,{},void 0)]}),void 0),b=({})=>{var e,t,i;const[s,a]=(0,x.useState)(null),[o,d]=(0,x.useState)(!1),{notificationsHeader:r}=(0,f.C)(p.Af),c=(0,f.T)();(0,x.useEffect)((()=>{c((0,p.pK)())}),[]);const g=o&&Boolean(s)?"transition-popper":void 0;return(0,n.jsxs)("div",Object.assign({style:{display:"flex",flexDirection:"row",alignItems:"center",width:"8%",marginRight:"4px"}},{children:["Notifications",(0,n.jsx)(h.Z,Object.assign({color:(null===(e=r.notificationsList)||void 0===e?void 0:e.length)>0?"primary":"inherit",onClick:e=>{a(e.currentTarget),d((e=>!e))}},{children:(0,n.jsxs)("div",Object.assign({style:{margin:"4px"}},{children:[(0,n.jsx)(l.Z,Object.assign({variant:"subtitle2",style:{color:"white",zIndex:1,position:"absolute",justifyContent:"right",marginLeft:"18px"}},{children:(null===(t=r.notificationsList)||void 0===t?void 0:t.length)>0?null===(i=r.notificationsList)||void 0===i?void 0:i.length:""}),void 0),(0,n.jsx)(j.Z,{},void 0)]}),void 0)}),void 0),(0,n.jsx)("div",Object.assign({style:{zIndex:1}},{children:(0,n.jsx)(v.Z,Object.assign({id:g,open:o,anchorEl:s,transition:!0,style:{zIndex:3}},{children:({TransitionProps:e})=>{var t,i,s;return(0,n.jsx)(u.Z,Object.assign({},e,{timeout:350},{children:(0,n.jsxs)(m.Z,Object.assign({elevation:3,style:{width:"300px",height:(null===(t=r.notificationsList)||void 0===t?void 0:t.length)>10?"87vh":"100%",padding:"8px",overflow:"scroll"}},{children:[0===(null===(i=r.notificationsList)||void 0===i?void 0:i.length)&&(0,n.jsx)(n.Fragment,{children:"Not Have a new Notification"},void 0),null===(s=r.notificationsList)||void 0===s?void 0:s.map(((e,t)=>(0,n.jsx)(O,{title:e.title,content:e.message},t)))]}),void 0)}),void 0)}}),void 0)}),void 0)]}),void 0)},Z=({title:e,positionContainer:t,notificationPannel:i})=>{const c=t||"sticky",h=(0,r.k6)();return(0,n.jsx)(s.Z,Object.assign({position:c,color:"secondary",style:{display:"flex"},elevation:0},{children:(0,n.jsxs)("div",Object.assign({style:{display:"flex"}},{children:[(0,n.jsxs)(a.Z,Object.assign({style:{width:"90%"}},{children:[(0,n.jsx)(o.Z,{size:"small",startIcon:(0,n.jsx)(d.Z,{color:"action",style:{color:"#fff"}},void 0),onClick:()=>{h.goBack()}},void 0),(0,n.jsx)(l.Z,Object.assign({variant:"h6"},{children:e}),void 0)]}),void 0),i&&(0,n.jsx)(b,{},void 0)]}),void 0)}),void 0)}}}]);