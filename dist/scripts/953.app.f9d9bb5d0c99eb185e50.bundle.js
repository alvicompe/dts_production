(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[953],{5158:(e,t,i)=>{e.exports=i.p+"fcc811ae2297d46be106267335e25c28.svg"},2515:(e,t,i)=>{"use strict";i.d(t,{t:()=>o,m:()=>d});var s=i(5893),a=i(1920),n=i(5757);const o=({value:e,cy:t})=>{var i,o,d,r;switch(e){case a.u6.PAD:return(0,s.jsx)(n.Z,{primary:`Descarga: ${a.WW[t.download.type]} -  ${null===(i=t.download.pad.cellList[0])||void 0===i?void 0:i.name}`},void 0);case a.u6.DME:return(0,s.jsx)(n.Z,{primary:`Descarga: ${a.WW[t.download.type]} -  ${null===(o=t.download.dme.cellList[0])||void 0===o?void 0:o.name}`},void 0);case a.u6.PIT:return(0,s.jsx)(n.Z,{primary:`Descarga: ${a.WW[t.download.type]} -  ${null===(d=t.download.pit.cellList[0])||void 0===d?void 0:d.name}`},void 0);case a.u6.STOCK:return(0,s.jsx)(n.Z,{primary:`Descarga: ${a.WW[t.download.type]} -  ${null===(r=t.download.stock.cellList[0])||void 0===r?void 0:r.name}`},void 0);default:return(0,s.jsx)(s.Fragment,{},void 0)}},d=({value:e,cy:t})=>{switch(e){case a.u6.PAD:return(0,s.jsx)(n.Z,{primary:`Carga: ${a.WW[t.upload.type]} -  ${t.upload.pad.projectList[0].name}-${t.upload.pad.projectList[0].polygonList[0].name}`},void 0);case a.u6.DME:return(0,s.jsx)(n.Z,{primary:`Carga: ${t.upload.dme.projectList[0].name} - ${t.upload.dme.projectList[0].polygonList[0].name}`},void 0);case a.u6.PIT:return(0,s.jsx)(n.Z,{primary:`Carga: ${a.WW[t.upload.type]} -  ${t.upload.pit.projectList[0].name}- ${t.upload.pit.projectList[0].polygonList[0].name}`},void 0);case a.u6.STOCK:return(0,s.jsx)(n.Z,{primary:`Carga: ${a.WW[t.upload.type]} -  ${t.upload.stock.projectList[0].name}-${t.upload.stock.projectList[0].polygonList[0].name}`},void 0);default:return(0,s.jsx)(s.Fragment,{children:"node"},void 0)}}},1953:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Q});var s=i(5893),a=i(1120),n=i(7623),o=i(1749),d=i(46),r=i(4436),l=i(6394),c=i(2930),v=i(5639),j=i(8286),u=i(282),h=i(5477),x=i(2915),p=i(7215),g=i(7294),m=i(3855),y=i(3133);const Z=()=>{const{truckReportList:e,status:t}=(0,m.C)(y.Gn),{excavatorCycleList:i}=e,[s,a]=(0,g.useState)([]),[n,o]=(0,g.useState)([]),[d,r]=(0,g.useState)([]);return(0,g.useEffect)((()=>{a([]),o([]),r([]),null==i||i.forEach((e=>{a((t=>t.concat(e.excavator.deviceAlias))),o((t=>t.concat(e.lenPad))),r((t=>t.concat(e.lenDme)))}))}),[e]),{status:t,excavatorName:s,dtpad:n,dtdme:d}},b=()=>{const{truckReportList:e,status:t}=(0,m.C)(y.Gn),[i,s]=(0,g.useState)([]),[a,n]=(0,g.useState)([]),[o,d]=(0,g.useState)([]);return(0,g.useEffect)((()=>{var t;s([]),n([]),d([]),null===(t=null==e?void 0:e.truckCycleList)||void 0===t||t.forEach((e=>{s((t=>t.concat(e.truck.deviceAlias))),d((t=>t.concat(e.lenDme))),n((t=>t.concat(e.lenPad)))}))}),[e]),{status:t,truck:i,dtpad:a,dtdme:o}};var f=i(8463),O=i(4697),C=i(3901),k=i(9912),$=i(2318);const L=({icon:e,title:t,total:i,children:a})=>(0,s.jsx)(f.Z,Object.assign({style:{width:"215px",margin:"1 0px"}},{children:(0,s.jsxs)(o.Z,Object.assign({container:!0,alignItems:"center",justifyContent:"center"},{children:[(0,s.jsxs)(o.Z,Object.assign({item:!0},{children:[a,e&&(0,s.jsx)(O.Z,{avatar:(0,s.jsx)(C.Z,{"aria-label":"recipe",variant:"square",alt:t,src:e},void 0)},void 0)]}),void 0),(0,s.jsx)(o.Z,Object.assign({item:!0},{children:(0,s.jsxs)(k.Z,{children:[(0,s.jsx)($.Z,Object.assign({component:"h5",variant:"h5"},{children:i}),void 0),(0,s.jsx)($.Z,Object.assign({variant:"subtitle1",color:"textSecondary"},{children:t}),void 0)]},void 0)}),void 0)]}),void 0)}),void 0),F=({title:e,icon:t,subheader:i,children:a})=>(0,s.jsxs)(f.Z,Object.assign({style:{margin:"30px 0 0 0"}},{children:[(0,s.jsx)(O.Z,{avatar:(0,s.jsx)(C.Z,{variant:"square",src:t},void 0),title:e,subheader:i},void 0),(0,s.jsx)(k.Z,{children:a},void 0)]}),void 0);var S=i(7229);const w=()=>(0,s.jsx)(o.Z,Object.assign({style:{display:"flex",justifyContent:"center"}},{children:(0,s.jsx)(h.Z,{},void 0)}),void 0),D=e=>{const{categorie:t,date1:i,data2:s,op:a}=e,{id:n,serieName1:o,serieName2:d}=a,r={options:{colors:["#F3C507","#0B4B88"],chart:{id:"bar-"+n},xaxis:{categories:t},noData:{text:"No hay datos",style:{color:"#0B4B88",fontSize:"24px"}}},series:[{name:o,data:i},{name:d,data:s}],animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},{options:l,series:c}=r;return{options:l,series:c}},I=()=>{const{status:e,excavatorName:t,dtpad:i,dtdme:a}=Z(),{options:n,series:o}=D({categorie:t,date1:i,data2:a,op:{id:"excavator",serieName1:"Mineral",serieName2:"Desmonte"}});return(0,s.jsx)("div",{children:"loading"===e?(0,s.jsx)(w,{},void 0):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(S.Z,{options:n,series:o,type:"bar",height:"300"},void 0)},void 0)},void 0)},N=()=>{const{status:e,truck:t,dtpad:i,dtdme:a}=b(),n=D({categorie:t.slice(0,t.length/2),date1:i.slice(0,i.length/2),data2:a.slice(0,a.length/2),op:{id:"Camiones",serieName1:"Mineral",serieName2:"Desmonte"}}),o=D({categorie:t.slice(t.length/2,t.length),date1:i.slice(i.length/2,i.length),data2:a.slice(a.length/2,a.length),op:{id:"Camiones",serieName1:"Mineral",serieName2:"Desmonte"}});return(0,s.jsx)("div",{children:"loading"===e?(0,s.jsx)(w,{},void 0):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.Z,{options:n.options,series:n.series,type:"bar",height:"300"},void 0),(0,s.jsx)(S.Z,{options:o.options,series:o.series,type:"bar",height:"300"},void 0)]},void 0)},void 0)};var T=i(3258),E=i(6090),W=i(465),P=i(6037),A=i(2822),B=i(5517),R=i(5757),M=i(2515);const G=({cycle:e,index:t})=>(0,s.jsxs)(d.Z,Object.assign({style:{display:"flex",flexDirection:"column",padding:"15px",paddingTop:"15px"}},{children:[(0,s.jsxs)(d.Z,Object.assign({style:{display:"flex",justifyContent:"space-evenly",paddingLeft:"15px"}},{children:[(0,s.jsxs)($.Z,Object.assign({variant:"h4"},{children:[t+1," "]}),void 0),(0,s.jsxs)(d.Z,Object.assign({style:{paddingLeft:"15px"}},{children:[(0,s.jsx)((()=>{let t="";return e.download.dme&&(t="dme"),e.download.pad&&(t="pad"),e.download.stock&&(t="stock"),(0,s.jsx)(M.t,{value:t,cy:e},void 0)}),{},void 0),(0,s.jsx)((()=>{let t="";return e.upload.pit&&(t="pit"),e.upload.stock&&(t="stock"),(0,s.jsx)(M.m,{value:t,cy:e},void 0)}),{},void 0)]}),void 0)]}),void 0),(0,s.jsx)(B.Z,{},void 0),(0,s.jsxs)(d.Z,Object.assign({style:{padding:"15px",display:"flex",flexDirection:"column"}},{children:[(0,s.jsx)($.Z,Object.assign({style:{alignSelf:"center"},variant:"h6"},{children:"MATERIAL"}),void 0),(0,s.jsx)(R.Z,{primary:` Tipo:${e.material.type} `},void 0),(0,s.jsx)(R.Z,{primary:` Descripcion :${e.material.description} `},void 0),(0,s.jsx)(R.Z,{primary:` crs : ${e.material.crs}`},void 0),(0,s.jsx)(R.Z,{primary:` orezone : ${e.material.orezone}`},void 0),(0,s.jsx)(R.Z,{primary:` Law : ${e.material.law}`},void 0),(0,s.jsx)(R.Z,{primary:` thins : ${e.material.thins}`},void 0),(0,s.jsx)(R.Z,{primary:` cf : ${e.material.cf}`},void 0),(0,s.jsx)(R.Z,{primary:` Lugar :${e.material.place}`},void 0)]}),void 0),(0,s.jsx)(B.Z,{},void 0)]}),void 0),U=i(5158),z=({isChecked:e,truck:t,setTrucksSelect:i,trucksSelect:a})=>{const[n,o]=g.useState(e),[d,r]=(0,g.useState)(0),[l,c]=(0,g.useState)(0),[v,j]=(0,g.useState)(!1);return(0,g.useEffect)((()=>{o(e)}),[e]),(0,g.useEffect)((()=>{var e;return null===(e=null==t?void 0:t.cycleList)||void 0===e||e.map((e=>{2===e.download.type&&c((e=>e+1)),4===e.download.type&&r((e=>e+1))})),()=>{r(0),c(0)}}),[t]),(0,s.jsxs)(f.Z,{children:[(0,s.jsxs)(f.Z,Object.assign({style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},{children:[(0,s.jsxs)(k.Z,Object.assign({onClick:()=>{j((e=>!e))},style:{display:"flex",alignItems:"center",paddingLeft:"60px"}},{children:[(0,s.jsx)(C.Z,{alt:"truck",src:U},void 0),(0,s.jsx)($.Z,Object.assign({variant:"h6",style:{paddingLeft:"30px"}},{children:t.truck.deviceAlias}),void 0),(0,s.jsxs)($.Z,Object.assign({variant:"h6",style:{paddingLeft:"60px"}},{children:[d," Ciclos desmonte"]}),void 0),(0,s.jsxs)($.Z,Object.assign({variant:"h6",style:{paddingLeft:"60px"}},{children:[l," Ciclos mineral"]}),void 0)]}),void 0),(0,s.jsx)(k.Z,{children:(0,s.jsx)(T.Z,{checked:e,onChange:()=>{const e=[...a],s=e.findIndex((e=>t.truck.id===e.id));-1===s?e.push(t):e.splice(s,1),i(e)},inputProps:{"aria-label":"secondary checkbox"}},void 0)},void 0)]}),void 0),v&&(0,s.jsx)(P.Z,Object.assign({in:v,style:{paddingLeft:10}},{children:(0,s.jsx)(A.Z,Object.assign({dense:!0,disablePadding:!0,style:{display:"flex",flexWrap:"wrap",paddingLeft:"60",overflowY:"auto",height:"350px"}},{children:t.cycleList.map(((e,t)=>(0,s.jsx)(G,{cycle:e,index:t},e.id)))}),void 0)}),void 0),(0,s.jsx)(B.Z,{light:!0},void 0)]},void 0)};var q=i(1355);const V=({startField:e,endField:t,shift:i})=>{const[a,n]=(0,g.useState)(!0),{truckReportList:r,status:l,statusReportFile:c}=(0,m.C)(y.Gn),v=(0,m.T)(),{truckCycleList:j}=r,[x,p]=(0,g.useState)([]),[Z,b]=(0,g.useState)([]),[f,O]=(0,g.useState)([]);return(0,g.useEffect)((()=>{p(j),b(j)}),[r]),(0,g.useEffect)((()=>{O(a?x:[])}),[x,a]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.Z,Object.assign({container:!0,justifyContent:"space-evenly",alignItems:"center"},{children:[(0,s.jsx)(o.Z,Object.assign({item:!0},{children:(0,s.jsx)(W.V,{functionFilter:e=>(n(!1),Z.filter((t=>t.truck.deviceAlias.toUpperCase().includes(e.toUpperCase())))),functionCancel:()=>{},placeholder:"Buscar por CamiÃ³n"},void 0)}),void 0),(0,s.jsx)(o.Z,Object.assign({item:!0},{children:(0,s.jsx)(u.Z,Object.assign({color:"secondary",variant:"contained",onClick:()=>{const s=`${e}T00:00`,a=`${t}T00:00`;v((0,y.Sf)({dateStart:s,dateEnd:a,shift:i,trucks:f,allTrucks:(null==f?void 0:f.length)===(null==x?void 0:x.length)}))},endIcon:"loading"===c?(0,s.jsx)(h.Z,{style:{width:"20px",height:"20px"}},void 0):(0,s.jsx)(E.Z,{},void 0)},{children:"exportar a excel"}),void 0)}),void 0),(0,s.jsx)(o.Z,Object.assign({item:!0},{children:(0,s.jsxs)(d.Z,Object.assign({style:{display:"flex",alignItems:"center"}},{children:[(0,s.jsx)($.Z,Object.assign({variant:"h6"},{children:" Todos "}),void 0),(0,s.jsx)(T.Z,{indeterminate:(null==f?void 0:f.length)>0&&(null==f?void 0:f.length)!=(null==x?void 0:x.length),color:"primary",icon:(0,s.jsx)(q.Z,{},void 0),checkedIcon:(0,s.jsx)(q.Z,{},void 0),checked:a,onChange:e=>{n(e.target.checked),(null==f?void 0:f.length)===(null==x?void 0:x.length)&&n(!0)},inputProps:{"aria-label":"secondary checkbox"}},void 0)]}),void 0)}),void 0)]}),void 0),(0,s.jsx)(o.Z,Object.assign({container:!0},{children:(0,s.jsx)(o.Z,Object.assign({item:!0,xs:12,sm:12,md:12,lg:12,style:{overflowY:"auto",height:"500px"}},{children:"loading"===l?(0,s.jsx)(w,{},void 0):null==x?void 0:x.map(((e,t)=>{return(0,s.jsx)(z,{isChecked:(i=e,!!(null==f?void 0:f.find((e=>{var t,s;return(null===(t=i.truck)||void 0===t?void 0:t.id)===(null===(s=e.truck)||void 0===s?void 0:s.id)})))),truck:e,trucksSelect:f,setTrucksSelect:O},t);var i}))}),void 0)}),void 0)]},void 0)},Y=i(6593),K=i(5158),_=(0,a.Z)((e=>(0,n.Z)({formControl:{margin:e.spacing(1),minWidth:120},fontFa:{fontFamily:"sans-serif",fontWeight:400}}))),H=()=>{const e=_(),[t,i]=(0,g.useState)(!1),a=new Date,n=`${a.getFullYear()}-${`0${a.getMonth()+1}`.substr(-2)}-${a.getDate()}`,{startField:f,endField:O,handleInputChange:C}=(e=>{const[t,i]=(0,g.useState)(e);return Object.assign({form:t,handleInputChange:e=>{i(Object.assign(Object.assign({},t),{[e.target.name]:e.target.value}))},handleReactChange:e=>{console.log(e.target),i(Object.assign(Object.assign({},t),{[e.target.name]:e.target.value}))},reset:()=>{i(e)}},t)})({startField:n,endField:n}),{truckReportList:k,status:$,shift:S,handleSearch:w,handleChange:D}=((e,t)=>{const[i,s]=(0,g.useState)(3),{status:a,truckReportList:n}=(0,m.C)(y.Gn),o=(0,m.T)();return(0,g.useEffect)((()=>{const s=`${e}T00:00`,a=`${t}T00:00`,n=setInterval((()=>{const e={dateStart:s,dateEnd:a,shift:i};o((0,y.aU)(e))}),3e5),d={dateStart:s,dateEnd:a,shift:i};return o((0,y.aU)(d)),()=>{clearInterval(n)}}),[]),{status:a,truckReportList:n,shift:i,handleSearch:()=>{const s={dateStart:`${e}T00:00`,dateEnd:`${t}T00:00`,shift:i};o((0,y.aU)(s))},handleChange:e=>{s(e.target.value)}}})(f,O),{truck:T}=b(),{excavatorName:E}=Z();return(0,s.jsx)(g.Fragment,{children:(0,s.jsxs)(o.Z,Object.assign({container:!0,direction:"column"},{children:[(0,s.jsx)(o.Z,Object.assign({item:!0},{children:(0,s.jsxs)(d.Z,Object.assign({p:3},{children:[(0,s.jsxs)(o.Z,Object.assign({container:!0,justifyContent:"space-evenly"},{children:[(0,s.jsx)(o.Z,Object.assign({item:!0},{children:(0,s.jsxs)(r.Z,Object.assign({className:e.formControl},{children:[(0,s.jsx)(l.Z,Object.assign({className:e.fontFa},{children:"Turno"}),void 0),(0,s.jsxs)(c.Z,Object.assign({className:e.fontFa,open:t,onClose:()=>{i(!1)},onOpen:()=>{i(!0)},value:S,name:"shith",onChange:D},{children:[(0,s.jsx)(v.Z,Object.assign({className:e.fontFa,value:1},{children:"Noche"}),void 0),(0,s.jsx)(v.Z,Object.assign({className:e.fontFa,value:2},{children:"Dia"}),void 0),(0,s.jsx)(v.Z,Object.assign({className:e.fontFa,value:3},{children:"Ambos"}),void 0)]}),void 0)]}),void 0)}),void 0),(0,s.jsx)(o.Z,Object.assign({item:!0},{children:(0,s.jsxs)(o.Z,Object.assign({container:!0,spacing:5},{children:[(0,s.jsx)(o.Z,Object.assign({item:!0},{children:(0,s.jsx)("form",Object.assign({noValidate:!0},{children:(0,s.jsx)(j.Z,{className:e.fontFa,id:"start",label:"Inicio",type:"date",name:"startField",value:f,onChange:C,InputLabelProps:{shrink:!0}},void 0)}),void 0)}),void 0),(0,s.jsx)(o.Z,Object.assign({item:!0},{children:(0,s.jsx)("form",Object.assign({noValidate:!0},{children:(0,s.jsx)(j.Z,{className:e.fontFa,id:"endField",label:"Fin",type:"date",name:"endField",value:O,onChange:C,InputLabelProps:{shrink:!0},InputProps:{required:!0}},void 0)}),void 0)}),void 0)]}),void 0)}),void 0),(0,s.jsx)(o.Z,Object.assign({item:!0},{children:(0,s.jsx)(u.Z,Object.assign({color:"secondary",variant:"contained",onClick:w,endIcon:"loading"===$?(0,s.jsx)(h.Z,{style:{width:"20px",height:"20px"}},void 0):(0,s.jsx)(p.Z,{},void 0)},{children:"Buscar"}),void 0)}),void 0)]}),void 0),(0,s.jsxs)(o.Z,Object.assign({item:!0,container:!0,justifyContent:"space-around",style:{margin:"10px 0 20px 0px"}},{children:[(0,s.jsx)(L,{icon:Y,total:E.length,title:"Excavadoras"},void 0),(0,s.jsx)(L,{icon:K,total:T.length,title:"Camiones"},void 0),(0,s.jsx)(L,Object.assign({total:0|(null==k?void 0:k.lenPad),title:"Ciclos Mineral"},{children:(0,s.jsx)(x.Z,{style:{width:"40px",height:"40px",color:"#F3C507"}},void 0)}),void 0),(0,s.jsx)(L,Object.assign({total:0|(null==k?void 0:k.lenDme),title:"Ciclos Desmonte"},{children:(0,s.jsx)(x.Z,{style:{width:"40px",height:"40px",color:"#F3C507"}},void 0)}),void 0),(0,s.jsx)(L,Object.assign({total:0|(null==k?void 0:k.len),title:"Ciclos Totales"},{children:(0,s.jsx)(x.Z,{style:{width:"40px",height:"40px",color:"#F3C507"}},void 0)}),void 0)]}),void 0),(0,s.jsx)(F,Object.assign({title:"Ciclos por camiones",subheader:f===O?`${f} `:`${f} al  ${O}`,icon:K},{children:(0,s.jsx)(N,{},void 0)}),void 0),(0,s.jsx)(F,Object.assign({title:"Ciclos por excavadoras",subheader:f===O?`${f} `:`${f} al ${O}`,icon:Y},{children:(0,s.jsx)(I,{},void 0)}),void 0)]}),void 0)}),void 0),(0,s.jsx)(o.Z,Object.assign({item:!0},{children:(0,s.jsx)(d.Z,Object.assign({p:3},{children:(0,s.jsx)(V,{startField:f,endField:O,shift:S},void 0)}),void 0)}),void 0)]}),void 0)},void 0)};var J=i(8850);function Q(){return(0,s.jsxs)("div",{children:[(0,s.jsx)(J.h,{title:"BashBoard"},void 0),(0,s.jsx)(H,{},void 0)]},void 0)}},8850:(e,t,i)=>{"use strict";i.d(t,{h:()=>c});var s=i(5893),a=i(5258),n=i(8358),o=i(282),d=i(2318),r=i(3471),l=i(5977);const c=({title:e})=>{const t=(0,l.k6)();return(0,s.jsx)(a.Z,Object.assign({position:"sticky",color:"secondary"},{children:(0,s.jsxs)(n.Z,{children:[(0,s.jsx)(o.Z,{size:"small",startIcon:(0,s.jsx)(r.Z,{color:"action",style:{color:"#fff"}},void 0),onClick:()=>{t.goBack()}},void 0),(0,s.jsx)(d.Z,Object.assign({variant:"h6"},{children:e}),void 0)]},void 0)}),void 0)}}}]);