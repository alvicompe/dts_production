(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[469],{2499:(e,t,i)=>{e.exports=i.p+"322f531ddb14529b83bd73182d28de44.png"},7126:(e,t,i)=>{e.exports=i.p+"89f059a2790e391b484a369a3b9f92fb.png"},9091:(e,t,i)=>{e.exports=i.p+"20557549695e4a02b8f5e299c9687642.png"},9800:(e,t,i)=>{"use strict";i.d(t,{H:()=>a});const a=e=>{e.current.loadImage(i(9091),(function(t,i){if(t)throw t;e.current.addImage("truck_nav",i)})),e.current.loadImage(i(2499),(function(t,i){if(t)throw t;e.current.addImage("excavator_nav",i)})),e.current.loadImage(i(7126),(function(t,i){if(t)throw t;e.current.addImage("pickup_nav",i)}))}},6886:(e,t,i)=>{"use strict";i.d(t,{N:()=>n});var a=i(5893),s=i(7294);const n=({excavatorListClass:e,excavatorList:t})=>((0,s.useEffect)((()=>{e.addToMap()}),[]),(0,s.useEffect)((()=>{e.updateInMap()}),[t]),(0,a.jsx)(a.Fragment,{},void 0))},2837:(e,t,i)=>{"use strict";i.d(t,{b:()=>o});var a=i(5893),s=i(7294),n=i(6777);const o=({truckListClass:e,truckList:t})=>(n.ET,(0,s.useEffect)((()=>{e.addToMap()}),[]),(0,s.useEffect)((()=>{e.updateInMap()}),[t]),(0,a.jsx)(a.Fragment,{},void 0))},4248:(e,t,i)=>{"use strict";i.d(t,{f:()=>n});var a=i(7294),s=i(2573);const n=({polygonList:e,idSource:t,idLayer:i,idSourceCentroid:n,idLayerCentroid:o,map:r,haveCentroid:d,onClickFeature:c})=>((0,a.useEffect)((()=>{const a=new s.z(e,r,t,i,n,o,c,d);return a.addToMap(),()=>{a.removeOfMap()}}),[e]),null)},8101:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var a=i(5893),s=i(7294),n=i(4880);const o=i(6158);o.accessToken=n.c3;const r=({dragRotate:e,map:t,pitch:i,bearing:n,mapContainer:r,lng:d,lat:c,zoom:l,setLoad:u,style:p,height:g})=>((0,s.useEffect)((()=>{console.log("map.current",t.current,n),t.current||(r&&(t.current=new o.Map({container:r.current,style:p,center:[d,c],pitch:i,bearing:n,zoom:l,maxBounds:[[-78.2747922,-7.6626779],[-78.1305246,-7.5534415]],antialias:!0,dragRotate:e})),console.log("inianco"))}),[t,r]),(0,s.useEffect)((()=>{t.current&&(t.current.addControl(new o.FullscreenControl,"bottom-left"),t.current.addControl(new o.NavigationControl,"bottom-left"),t.current.on("move",(()=>{})),t.current.on("load",(()=>{t.current&&u(!0)})))}),[t]),(0,s.useEffect)((()=>{t.current&&t.current.setBearing(n)}),[n]),(0,a.jsx)("div",{ref:r,style:{flex:1,height:g||"100vh",width:"100%"},className:"map-container"},void 0))},3570:(e,t,i)=>{"use strict";i.d(t,{v:()=>c});var a=i(5893),s=i(7812),n=i(6837),o=i(9544),r=i(7215);const d=(0,i(3914).Z)((()=>({subHeader:{lineHeight:0,background:"#fff",paddingLeft:0,display:"flex",marginTop:8,borderRadius:4,borderBottomStyle:"groove"}}))),c=({useOpen:e,title:t})=>{const i=d(),[c,l]=e,u=(0,a.jsx)(s.Z,Object.assign({onClick:()=>{l((e=>!e))},size:"small"},{children:c?(0,a.jsx)(o.Z,{fontSize:"small"},void 0):(0,a.jsx)(r.Z,{fontSize:"small"},void 0)}),void 0);return(0,a.jsx)(n.Z,Object.assign({disableGutters:!0,component:"span",className:i.subHeader},{children:(0,a.jsxs)("div",Object.assign({style:{display:"flex",alignItems:"center"}},{children:[(0,a.jsx)("span",Object.assign({style:{marginLeft:4}},{children:t}),void 0),(0,a.jsx)("div",Object.assign({style:{marginLeft:8}},{children:u}),void 0)]}),void 0)}),void 0)}},5738:(e,t,i)=>{"use strict";i.d(t,{E:()=>O,m:()=>Z});var a=i(5893),s=i(7294),n=i(1120),o=i(9895),r=i(1749),d=i(1423),c=i(2318),l=i(2822),u=i(998),p=i(5757),g=i(5517),h=i(3570),v=i(4096),m=i(8479),j=i(465),b=i(3855),x=i(3054),f=i(6217),y=i(5090),C=i(9299);const O="80vh",L=(0,n.Z)((e=>({root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{marginLeft:e.spacing(1),marginBottom:0},root_unload:{display:"flex"},tabs:{borderRight:`1px solid ${e.palette.divider}`},tab:{minWidth:10,padding:1,paddingTop:8,paddingBottom:8},buttonTab:{writingMode:"vertical-rl"}})));function S(e){const{children:t,value:i,index:s}=e,n=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(i[a[s]]=e[a[s]])}return i}(e,["children","value","index"]);return(0,a.jsx)("div",Object.assign({role:"tabpanel",hidden:i!==s,id:`vertical-tabpanel-${s}`,"aria-labelledby":`vertical-tab-${s}`,style:{flex:1,height:"auto",boxShadow:"inset 0px -2px 10px 0px rgb(17 16 10 / 56%)",margin:8,borderRadius:4}},n,{children:i===s&&t}),void 0)}function k(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const Z=()=>{const{selectedUploadList:e}=(0,b.C)(x.nx),{polygonList:t,stockCellList:i,state:n}=(0,b.C)(x.WD),Z=(0,b.T)(),T=L(),[_,I]=(0,s.useState)([]),[E,w]=(0,s.useState)([]),[D,N]=(0,m._)("index_tab_load_operation",0),M=(0,s.useState)(!1);(0,s.useEffect)((()=>{n===C.jR.DONE&&(I(t),w(i))}),[n]);const R=(0,s.useCallback)((e=>{if(e){const{value:i}=e.target,a=i?i.toUpperCase():"";I(t.filter((e=>{const t=e.material?e.material.type:"";return e.name.toUpperCase().includes(a)||e.nameProject.toUpperCase().includes(a)||t.includes(a)})))}}),[t]),$=(0,s.useCallback)((e=>{if(e){const{value:t}=e.target,a=t?t.toUpperCase():"";w(i.filter((e=>e.name.toUpperCase().includes(a))))}}),[i]),P=(0,s.useCallback)((()=>{I(t)}),[t]),F=(0,s.useCallback)((()=>{w(i)}),[i]),A=(0,s.useCallback)((t=>!!e.find((e=>e.id===t.id))),[e]);return(0,a.jsx)(o.Z,Object.assign({elevation:4,style:{flex:1}},{children:(0,a.jsxs)(r.Z,Object.assign({container:!0},{children:[(0,a.jsxs)(v.Z,Object.assign({orientation:"vertical",variant:"scrollable",value:D,indicatorColor:"primary",textColor:"primary",onChange:(e,t)=>{N(t)},"aria-label":"Vertical tabs",className:T.tabs},{children:[(0,a.jsx)(d.Z,Object.assign({className:T.tab,label:(0,a.jsx)(c.Z,Object.assign({variant:"caption",className:T.buttonTab},{children:"TAJO"}),void 0)},k(0)),void 0),(0,a.jsx)(d.Z,Object.assign({className:T.tab,label:(0,a.jsx)(c.Z,Object.assign({variant:"caption",className:T.buttonTab},{children:"STOCKs"}),void 0)},k(1)),void 0)]}),void 0),(0,a.jsx)(S,Object.assign({value:D,index:0},{children:(0,a.jsxs)(l.Z,Object.assign({dense:!0,disablePadding:!0,style:{width:"100%",paddingLeft:4,overflowY:"scroll",paddingBottom:32,height:O},subheader:(0,a.jsx)(h.v,{title:"Carguío",useOpen:M},void 0)},{children:[M[0]&&(0,a.jsx)(j.V,{functionFilter:R,functionCancel:P,placeholder:"Buscar por polígono"},void 0),_.map((e=>(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(u.Z,Object.assign({selected:A(e),button:!0,dense:!0,onClick:()=>{return t=e,void Z((0,f.qn)(Object.assign(Object.assign({},t),{type:y.NZ.PIT})));var t}},{children:(0,a.jsx)(p.Z,{primary:`${e.nameProject} - ${e.name} `,secondary:e.material?`Material ${e.material.type}`:"Material not found"},void 0)}),void 0),(0,a.jsx)(g.Z,{},void 0)]},e.id)))]}),void 0)}),void 0),(0,a.jsx)(S,Object.assign({value:D,index:1},{children:(0,a.jsxs)(l.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,overflowY:"scroll"},subheader:(0,a.jsx)(h.v,{title:"Carguío",useOpen:M},void 0)},{children:[M[0]&&(0,a.jsx)(j.V,{functionFilter:$,functionCancel:F},void 0),E.map((e=>(0,a.jsx)(u.Z,Object.assign({selected:A(e),button:!0,dense:!0,onClick:()=>{return t=e,void Z((0,f.qn)(Object.assign(Object.assign({},t),{type:y.NZ.STOCK})));var t}},{children:(0,a.jsx)(p.Z,{primary:e.name},void 0)}),e.id)))]}),void 0)}),void 0)]}),void 0)}),void 0)}},461:(e,t,i)=>{"use strict";i.d(t,{K:()=>f});var a=i(5893),s=i(5517),n=i(2822),o=i(7294),r=i(3855),d=i(8693),c=i(465),l=i(3570),u=i(1120),p=i(998),g=i(553),h=i(3258),v=i(5757),m=i(5090);const j=(0,u.Z)((e=>({disabledSpacing:{margin:0,padding:0,width:"100%"},checkbox:{"& .MuiCheckbox-root":{margin:0,padding:0,paddingLeft:8}}}))),b=o.memo((({truck:e,checked:t,trucksSelect:i,setTrucksSelect:s,disableWithOperation:n,handleonchangeTruck:o})=>{const r=j(),d=e.state>=0?m.SS[e.state]:"Sin conex...",c=e.operationList&&e.operationList.length>0?e.operationList[0].excavator.deviceAlias:"";return(0,a.jsx)(p.Z,Object.assign({button:!0,dense:!0,className:r.disabledSpacing,disabled:!!n&&!!c},{children:(0,a.jsx)(g.Z,{className:r.checkbox,onChange:()=>{const t=i.findIndex((t=>e.deviceId===t.deviceId));-1===t?i.push(e):i.splice(t,1),s(JSON.parse(JSON.stringify(i))),console.log(i)},control:(0,a.jsx)(h.Z,{onClick:()=>o(e),size:"small",checked:t,inputProps:{style:{padding:0}}},void 0),label:(0,a.jsx)(v.Z,{primary:`${e.deviceAlias} ${c?` ➜ ${c}`:""} (${d})`},void 0)},void 0)}),void 0)}));var x=i(5738);const f=o.memo((({trucksSelect:e,setTrucksSelect:t,handleonchangeTruck:i})=>{const u=(0,o.useState)(),{truckInfoList:p}=(0,r.C)(d.ej),[g,h]=(0,o.useState)([]);(0,o.useEffect)((()=>{h(p)}),[p]);const v=(0,o.useCallback)((e=>{if(e){const t=e.target?e.target.value.toUpperCase():"";h(p.filter((e=>e.deviceAlias.toUpperCase().includes(t))))}}),[p]),m=(0,o.useCallback)((()=>{h(p)}),[p]);return(0,a.jsxs)(n.Z,Object.assign({dense:!0,subheader:(0,a.jsx)(l.v,{title:"Trucks",useOpen:u},void 0),style:{width:"100%",paddingLeft:4,height:x.E,overflowY:"scroll",boxShadow:"inset 0px -2px 10px 0px rgb(17 16 10 / 56%)",margin:8,borderRadius:4}},{children:[u[0]&&(0,a.jsx)(c.V,{functionFilter:v,functionCancel:m},void 0),g.map((n=>{return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(b,{handleonchangeTruck:i,disableWithOperation:!1,checked:(r=n,!!e.find((e=>r.deviceId===e.deviceId))),trucksSelect:e,setTrucksSelect:t,truck:n},void 0),(0,a.jsx)(s.Z,{},void 0)]},n.deviceId);var r}))]}),void 0)}))},4276:(e,t,i)=>{"use strict";i.d(t,{c:()=>a});class a{constructor(e,t,i,a,s,n){this.unitsList=e,this.map=t,this.idSource=i,this.idLayer=a,this.iconImagen=s,this.offsetY=2.5,this.fontSize=9,this.onClickElement=n}getInMap(){return this.map.getSource(this.idSource)}generateFeatures(){return this.unitsList.map((e=>{const{latitude:t,longitude:i,direction:a}=e.sensor,s=e.deviceAlias.split("-"),n=s.length>1&&""!==s[1].trim()?`${s[0].substr(0,1)}${s[1].substr(-2)}`:e.deviceAlias;return{type:"Feature",geometry:{type:"Point",coordinates:[i,t]},properties:{deviceId:e.deviceId,rotate:a-360,name:`${n}`,rotation:-180+a,offsetdate:[0,this.offsetY]}}}))}addToMap(){!this.getInMap()&&this.unitsList.length>0&&(this.map.addSource(this.idSource,{type:"geojson",data:{type:"FeatureCollection",features:this.generateFeatures()}}),this.map.addLayer({id:this.idLayer,type:"symbol",source:this.idSource,layout:{"icon-image":this.iconImagen,"icon-size":.08,"icon-ignore-placement":!0,"icon-allow-overlap":!0,"icon-rotate":["get","rotate"]}}),this.map.addLayer({id:`LABEL_${this.idLayer}`,type:"symbol",source:this.idSource,layout:{"text-field":["get","name"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":this.fontSize,"text-rotate":["get","rotation"],"text-offset":["get","offsetdate"]},paint:{"text-color":"#fff","text-halo-color":"#00296b","text-halo-width":4}}),this.map.on("click",this.idLayer,(e=>{this.onClickElement&&this.onClickElement(e)})),this.map.on("mouseenter",this.idLayer,(()=>{this.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave",this.idLayer,(()=>{this.map.getCanvas().style.cursor=""})))}updateInMap(){const e=this.getInMap();e?e.setData({type:"FeatureCollection",features:this.generateFeatures()}):this.addToMap()}removeOfMap(){this.getInMap()&&(this.map.removeLayer(this.idLayer),this.map.removeLayer(`LABEL_${this.idLayer}`),this.map.removeSource(this.idSource))}}},2573:(e,t,i)=>{"use strict";i.d(t,{z:()=>s});var a=i(5573);class s{constructor(e,t,i,a,s,n,o,r){this.polygonList=e,this.map=t,this.idSource=i,this.idLayer=a,this.idSourceCentroid=s,this.idLayerCentroid=n,this.fontSize=9,this.onClickElement=o,this.haveCentroid=r}getInMap(){return this.map.getSource(this.idSource)}getCenterInMap(){return this.map.getSource(this.idSourceCentroid)}generateCentroids(){return this.polygonList.map((e=>{var t,i,a;const{latitude:s,longitude:n}=e.centroid;return{type:"Feature",geometry:{type:"Point",coordinates:[n,s]},properties:{name:`${e.name}${e.material?`-${e.material.type}`:""}`,points_polygonTajo:e.pointList.map((e=>[e.longitude,e.latitude])),name_polygon:e.name,name_material:null===(t=e.material)||void 0===t?void 0:t.type,id_polygonTajo:e.id,agTajo:e.ag,agcnTajo:e.agcn,alteTajo:e.alte,asTajo:e.as,auTajo:e.au,auchTajo:e.auch,altitudeTajo:e.altitude,descripcionTajo:"",heightTajo:e.height,litoTajo:e.litio,materialTajo:null===(i=e.material)||void 0===i?void 0:i.type,namePolTajo:e.name,nameProjectTajo:e.nameProject,onzasTajo:e.onzas,orezonetTajo:e.orezonet,ptaucnTajo:e.ptaucn,sTajo:e.s,tonnesTajo:e.tonnes,volumeTajo:e.volume,nameDme:`${e.name}`,points_polygonDme:e.pointList.map((e=>[e.longitude,e.latitude])),id_polygonDme:e.id,tonnesDme:e.tonnes,volumeDme:e.volume,namePad:`${e.name}`,id_Pad:`${e.id}_pad`,points_Pad:e.pointList.map((e=>[e.longitude,e.latitude])),tonnesPad:e.tonnes,volumePad:e.volume,nameStock:`${e.name}`,id_polygonStock:e.id,points_polygonStock:e.pointList.map((e=>[e.longitude,e.latitude])),materialStock:null===(a=e.material)||void 0===a?void 0:a.type,altitudeStock:e.altitude,volumeStock:e.volume}}}))}generateFeatures(){return this.polygonList.map((e=>({type:"Feature",properties:{color:a.O[e.color]?a.O[e.color].hex:e.color,out_color:"blue",opacity:this.haveCentroid?1:.2,opacity_border:1},geometry:{type:"Polygon",coordinates:[e.pointList.map((e=>[e.longitude,e.latitude,e.altitude]))]}})))}addToMap(){!this.getInMap()&&this.polygonList.length>0?(console.log("this.generateFeatures()",this.generateFeatures()),this.map.getSource(this.idSource)||this.map.addSource(this.idSource,{type:"geojson",data:{type:"FeatureCollection",features:this.generateFeatures()}}),this.map.getLayer(this.idLayer)||this.map.addLayer({id:this.idLayer,type:"fill",source:this.idSource,paint:{"fill-color":["get","color"],"fill-outline-color":["get","out_color"],"fill-opacity":["get","opacity"]}}),this.map.getLayer(`BORDER_${this.idLayer}`)||this.map.addLayer({id:`BORDER_${this.idLayer}`,type:"line",source:this.idSource,paint:{"line-color":["get","out_color"],"line-width":2,"line-opacity":["get","opacity_border"]},filter:["==","$type","Polygon"]}),this.haveCentroid&&(this.map.getSource(this.idSourceCentroid)||this.map.addSource(this.idSourceCentroid,{type:"geojson",data:{type:"FeatureCollection",features:this.generateCentroids()}}),this.map.getLayer(this.idLayerCentroid)||this.map.addLayer({id:this.idLayerCentroid,type:"symbol",source:this.idSourceCentroid,layout:{"text-field":["get","name"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":this.fontSize},paint:{"text-color":"#00296b","text-halo-color":"#f8f7ff","text-halo-width":2}})),this.map.on("click",this.idLayerCentroid,(e=>{this.onClickElement&&this.onClickElement(e)})),this.map.on("mouseenter",this.idLayerCentroid,(()=>{this.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave",this.idLayerCentroid,(()=>{this.map.getCanvas().style.cursor=""}))):this.getInMap()&&this.updateInMap()}updateInMap(){const e=this.getInMap();e?e.setData({type:"FeatureCollection",features:this.generateFeatures()}):this.addToMap()}removeOfMap(){this.getInMap()&&(this.map.removeLayer(this.idLayer),this.map.removeLayer(`BORDER_${this.idLayer}`),this.map.removeSource(this.idSource),this.getCenterInMap()&&(this.map.removeLayer(this.idLayerCentroid),this.map.removeSource(this.idSourceCentroid)))}}},8850:(e,t,i)=>{"use strict";i.d(t,{h:()=>l});var a=i(5893),s=i(5258),n=i(8358),o=i(282),r=i(2318),d=i(3471),c=i(5977);const l=({title:e})=>{const t=(0,c.k6)();return(0,a.jsx)(s.Z,Object.assign({position:"sticky",color:"secondary"},{children:(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(o.Z,{size:"small",startIcon:(0,a.jsx)(d.Z,{color:"action",style:{color:"#fff"}},void 0),onClick:()=>{t.goBack()}},void 0),(0,a.jsx)(r.Z,Object.assign({variant:"h6"},{children:e}),void 0)]},void 0)}),void 0)}},4469:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>de});var a=i(5893),s=i(7294),n=i(46),o=i(1749),r=i(282),d=i(9895),c=i(1120),l=i(1423),u=i(2318),p=i(4096),g=i(2822),h=i(3570),v=i(998),m=i(5757);const j=(0,c.Z)((e=>({disablePadding:{padding:0,margin:0,flex:1},nested:{margin:0,padding:0,marginLeft:e.spacing(2.5),flex:1}}))),b=({primary:e,Icon:t,isSubItem:i,isSelect:n,onClick:o})=>{(0,s.useEffect)((()=>()=>{}),[]);const r=j();return(0,a.jsxs)(v.Z,Object.assign({selected:n,onClick:o,dense:!0,button:!0,className:i?r.nested:r.disablePadding},{children:[t&&(0,a.jsx)(t,{fontSize:"small"},void 0),(0,a.jsx)(m.Z,{className:r.disablePadding,primary:e},void 0)]}),void 0)};var x=i(465),f=i(3855),y=i(3054),C=i(5090),O=i(6217);const L=({p:e})=>{const{selectedDownloadList:t}=(0,f.C)(y.nx),i=(0,f.T)(),n=(0,s.useCallback)((e=>!!t.find((t=>t.id===e.id))),[t]);return(0,a.jsx)(b,{primary:`Celda - ${e.name?e.name:"SIN NOM"}`,onClick:()=>{return t=e,void i((0,O.Ru)(Object.assign(Object.assign({},t),{type:C.NZ.PAD})));var t},isSelect:n(e)},void 0)},S=({padCells:e})=>{const t=(0,s.useState)(!1),[i]=t,n=e.map((e=>(0,a.jsx)(L,Object.assign({},{p:e}),e.id)));return(0,a.jsxs)(g.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,a.jsx)(h.v,{title:"Descarga",useOpen:t},void 0)},{children:[i&&(0,a.jsx)(x.V,{functionCancel:()=>{},functionFilter:()=>{}},void 0),n]}),void 0)};var k=i(8479);const Z=({p:e})=>{const{selectedDownloadList:t}=(0,f.C)(y.nx),i=(0,f.T)(),n=(0,s.useCallback)((e=>!!t.find((t=>t.id===e.id))),[t]);return(0,a.jsx)(b,{primary:`${e.name?e.name:"SIN NOM"}`,onClick:()=>{return t=e,void i((0,O.Ru)(Object.assign(Object.assign({},t),{type:C.NZ.DME})));var t},isSelect:n(e)},void 0)},T=({dmeCells:e})=>{const t=(0,s.useState)(!1),[i]=t,n=e.map((e=>(0,a.jsx)(Z,Object.assign({},{p:e}),e.id)));return(0,a.jsxs)(g.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,a.jsx)(h.v,{title:"Descarga",useOpen:t},void 0)},{children:[i&&(0,a.jsx)(x.V,{functionCancel:()=>{},functionFilter:()=>{}},void 0),n]}),void 0)};const _=(0,c.Z)((e=>({nested:{marginLeft:e.spacing(1),marginBottom:0},root_unload:{display:"flex"},tabs:{borderRight:`1px solid ${e.palette.divider}`},tab:{minWidth:10,padding:1,paddingTop:8,paddingBottom:8},buttonTab:{writingMode:"vertical-rl"}})));function I(e){const{children:t,value:i,index:s}=e,n=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(i[a[s]]=e[a[s]])}return i}(e,["children","value","index"]);return(0,a.jsx)("div",Object.assign({role:"tabpanel",hidden:i!==s,id:`vertical-tabpanel-${s}`,"aria-labelledby":`vertical-tab-${s}`,style:{flex:1}},n,{children:i===s&&t}),void 0)}function E(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const w=({value:e,handleChange:t})=>{const i=_();return(0,a.jsxs)(p.Z,Object.assign({orientation:"vertical",variant:"scrollable",value:e,indicatorColor:"primary",textColor:"primary",onChange:t,"aria-label":"Vertical tabs",className:i.tabs},{children:[(0,a.jsx)(l.Z,Object.assign({className:i.tab,label:(0,a.jsx)(u.Z,Object.assign({variant:"caption",className:i.buttonTab},{children:"PAD"}),void 0)},E(0)),void 0),(0,a.jsx)(l.Z,Object.assign({className:i.tab,label:(0,a.jsx)(u.Z,Object.assign({variant:"caption",className:i.buttonTab},{children:"DME"}),void 0)},E(1)),void 0),(0,a.jsx)(l.Z,Object.assign({className:i.tab,label:(0,a.jsx)(u.Z,Object.assign({variant:"caption",className:i.buttonTab},{children:"STOCKs"}),void 0)},E(2)),void 0)]}),void 0)},D=()=>{const{padCellList:e,dmeCellList:t}=(0,f.C)(y.WD),i=_(),[s,n]=(0,k._)("index_tab_unload_operation",0);return(0,a.jsx)(d.Z,Object.assign({elevation:4,style:{width:"100%"}},{children:(0,a.jsxs)(o.Z,Object.assign({container:!0,className:i.root_unload},{children:[(0,a.jsx)(w,Object.assign({},{value:s,handleChange:(e,t)=>{n(t)}}),void 0),(0,a.jsx)(I,Object.assign({value:s,index:0},{children:(0,a.jsx)(S,{padCells:e},void 0)}),void 0),(0,a.jsx)(I,Object.assign({value:s,index:1},{children:(0,a.jsx)(T,{dmeCells:t},void 0)}),void 0)]}),void 0)}),void 0)};var N=i(5738),M=i(461);const R=(0,c.Z)((e=>({root:{flex:1}}))),$=()=>{const e=(0,f.T)(),t=R(),[i,n]=(0,s.useState)([]);return(0,a.jsx)(d.Z,Object.assign({className:t.root,elevation:4,style:{flex:1}},{children:(0,a.jsx)(o.Z,Object.assign({container:!0,direction:"row"},{children:(0,a.jsx)(M.K,{handleonchangeTruck:t=>{e((0,O.Db)(t))},setTrucksSelect:n,trucksSelect:i},void 0)}),void 0)}),void 0)};var P=i(4436),F=i(2541),A=i(553),z=i(74),U=i(5517),B=i(2198);const W=(0,c.Z)((e=>({root:{flex:1},list:{maxHeight:"75vh",paddingLeft:e.spacing(1),marginLeft:e.spacing(1),overflowY:"scroll",marginBottom:e.spacing(2)}}))),Y=()=>{const e=(0,s.useState)(!1),{excavatorInfoList:t}=(0,f.C)(B.kW),i=(0,f.T)(),[n,o]=(0,s.useState)([]);(0,s.useEffect)((()=>{o(t)}),[t]);const r=W();return(0,a.jsx)(d.Z,Object.assign({elevation:4,style:{width:"100%"}},{children:(0,a.jsx)(g.Z,Object.assign({className:r.list,dense:!0,disablePadding:!0,subheader:(0,a.jsx)(h.v,{title:"Palas",useOpen:e},void 0)},{children:(0,a.jsx)(v.Z,Object.assign({dense:!0,disableGutters:!0},{children:(0,a.jsx)(P.Z,Object.assign({size:"small",fullWidth:!0,component:"fieldset"},{children:(0,a.jsx)(F.Z,Object.assign({"aria-label":"gender",name:"radio-buttons-group"},{children:n.map((e=>(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(A.Z,{value:e.id,control:(0,a.jsx)(z.Z,{size:"small"},void 0),onClick:()=>(e=>{i((0,O.Zh)(e))})(e),label:(0,a.jsx)(u.Z,Object.assign({component:"span",variant:"body2"},{children:e.deviceAlias}),void 0)},void 0),(0,a.jsx)(U.Z,{},void 0)]},e.id)))}),void 0)}),void 0)}),void 0)}),void 0)}),void 0)};var V=i(5501),H=i(8101),K=i(4248),q=i(4276),G=i(8693),J=i(2837),X=i(6886),Q=i(9800);const ee=({map:e})=>{const{excavatorInfoList:t}=(0,f.C)(B.kW),{truckInfoList:i}=(0,f.C)(G.ej),n=(0,s.useMemo)((()=>{const t=i.filter((e=>e.sensor)),s=new q.c(t,e.current,"TRUCK_LIST_SOURCE","TRUCK_LIST_LAYER","truck_nav");return(0,a.jsx)(J.b,{truckList:t,truckListClass:s},void 0)}),[i]),o=(0,s.useMemo)((()=>{const i=t.filter((e=>e.sensor)),s=new q.c(i,e.current,"EXCAVATOR_LIST_SOURCE","EXCAVATOR_LIST_LAYER","excavator_nav");return(0,a.jsx)(X.N,{excavatorList:i,excavatorListClass:s},void 0)}),[t]);return(0,a.jsxs)(a.Fragment,{children:[n,o]},void 0)},te=()=>{const e=(0,s.useRef)(null),t=(0,s.useRef)(null),{selectedUploadList:i,selectedDownloadList:n}=(0,f.C)(y.nx),[o,r]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{o&&(0,Q.H)(e)}),[o]),(0,a.jsxs)(a.Fragment,{children:[o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K.f,Object.assign({},{polygonList:i,map:e.current,idSource:"UPLOAD_SOURCE",idLayer:"UPLOAD_LAYER",idSourceCentroid:"CENTROID_UPLOAD_SOURCE",idLayerCentroid:"CENTROID_UPLOAD_LAYER",haveCentroid:!0}),void 0),(0,a.jsx)(K.f,Object.assign({},{polygonList:n,map:e.current,idSource:"DOWNLOAD_SOURCE",idLayer:"DOWNLOAD_LAYER",idSourceCentroid:"CENTROID_DOWNLOAD_SOURCE",idLayerCentroid:"CENTROID_DOWNLOAD_LAYER",haveCentroid:!0,onClickFeature:()=>{}}),void 0),(0,a.jsx)(ee,{map:e},void 0)]},void 0),(0,a.jsx)(H.Z,Object.assign({map:e,dragRotate:!1,style:"mapbox://styles/dispatchgat/ckqqsfc2y46bo17sf1y29zwnj",mapContainer:t,bearing:0,pitch:15,height:"90vh"},{lat:-7.6163,lng:-78.196,zoom:14,setLoad:r}),void 0)]},void 0)};var ie=i(8965),ae=i(5977),se=i(2672);(0,s.createContext)(null);const ne=()=>{const e=(0,ae.k6)(),t=(0,f.T)(),{selectedExcavator:i,selectedTruckList:s,selectedUploadList:d,selectedDownloadList:c}=(0,f.C)(y.nx);return(0,a.jsx)(n.Z,Object.assign({padding:1},{children:(0,a.jsx)(o.Z,Object.assign({container:!0,justifyContent:"flex-end",alignItems:"center",alignContent:"center"},{children:(0,a.jsx)(r.Z,Object.assign({variant:"outlined",onClick:()=>{i.length<=0?t((0,se.L8)({msg:"Debe seleccionar una excavadora",open:!0,severity:"warning"})):d.length>0&&c.length>0?(0,V.pg)(d,c,s,i,[]).then((i=>{(0,se.L8)({msg:"Done!!",open:!0,severity:"success"}),e.replace("/operation"),t((0,O.nw)())})).catch((e=>{console.log(e),t((0,se.L8)({msg:`Error al guardar: posiblemente las unidades ya estan en otra operación: ${e.message}`,open:!0,severity:"warning"}))})):t((0,se.L8)({msg:"Debe seleccionar un Carguío y descarga",open:!0,severity:"warning"}))},color:"primary",size:"small",startIcon:(0,a.jsx)(ie.Z,{fontSize:"small"},void 0)},{children:"Guardar"}),void 0)}),void 0)}),void 0)},oe=()=>(0,a.jsxs)(o.Z,Object.assign({container:!0},{children:[(0,a.jsxs)(d.Z,{children:[(0,a.jsxs)(o.Z,Object.assign({container:!0,style:{padding:4,flex:1}},{children:[(0,a.jsx)(N.m,{},void 0),(0,a.jsxs)(o.Z,Object.assign({container:!0,alignContent:"flex-start",style:{flex:1,marginLeft:8,marginRight:8,gap:8}},{children:[(0,a.jsx)(D,{},void 0),(0,a.jsx)(Y,{},void 0)]}),void 0),(0,a.jsx)($,{},void 0)]}),void 0),(0,a.jsx)(ne,{},void 0)]},void 0),(0,a.jsx)(te,{},void 0)]}),void 0);var re=i(8850);function de(){return(0,a.jsxs)("div",{children:[(0,a.jsx)(re.h,{title:"Create Operation"},void 0),(0,a.jsx)(oe,{},void 0)]},void 0)}}}]);