(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[835],{3534:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var o=i(5893),s=i(7294),r=i(4880);const n=i(6158);n.accessToken=r.c3;const a=({dragRotate:e,map:t,pitch:i,bearing:r,mapContainer:a,lng:l,lat:c,zoom:p,setLng:d,setLat:u,setZoom:g,setLoad:v,style:h})=>((0,s.useEffect)((()=>{console.log("map.current",t.current,r),t.current||(a&&(t.current=new n.Map({container:a.current,style:h,center:[l,c],pitch:i,bearing:r,zoom:p,maxBounds:[[-78.2747922,-7.6626779],[-78.1305246,-7.5534415]],antialias:!0,dragRotate:e})),console.log("inianco"))}),[t,a]),(0,s.useEffect)((()=>{t.current&&(t.current.addControl(new n.FullscreenControl,"bottom-left"),t.current.addControl(new n.NavigationControl,"bottom-left"),t.current.on("move",(()=>{t.current&&g(t.current.getZoom().toFixed(2))})),t.current.on("load",(()=>{v(!0)})))}),[t]),(0,s.useEffect)((()=>{t.current&&t.current.setBearing(r)}),[r]),(0,o.jsx)("div",{ref:a,style:{flex:1,height:"100vh",width:"100%"},className:"map-container"},void 0))},2515:(e,t,i)=>{"use strict";i.d(t,{t:()=>n,m:()=>a});var o=i(5893),s=i(1920),r=i(5757);const n=({value:e,cy:t})=>{var i,n,a,l;switch(e){case s.u6.PAD:return(0,o.jsx)(r.Z,{primary:`Descarga: ${s.WW[t.download.type]} -  ${null===(i=t.download.pad.cellList[0])||void 0===i?void 0:i.name}`},void 0);case s.u6.DME:return(0,o.jsx)(r.Z,{primary:`Descarga: ${s.WW[t.download.type]} -  ${null===(n=t.download.dme.cellList[0])||void 0===n?void 0:n.name}`},void 0);case s.u6.PIT:return(0,o.jsx)(r.Z,{primary:`Descarga: ${s.WW[t.download.type]} -  ${null===(a=t.download.pit.cellList[0])||void 0===a?void 0:a.name}`},void 0);case s.u6.STOCK:return(0,o.jsx)(r.Z,{primary:`Descarga: ${s.WW[t.download.type]} -  ${null===(l=t.download.stock.cellList[0])||void 0===l?void 0:l.name}`},void 0);default:return(0,o.jsx)(o.Fragment,{},void 0)}},a=({value:e,cy:t})=>{switch(e){case s.u6.PAD:return(0,o.jsx)(r.Z,{primary:`Carga: ${s.WW[t.upload.type]} -  ${t.upload.pad.projectList[0].name}-${t.upload.pad.projectList[0].polygonList[0].name}`},void 0);case s.u6.DME:return(0,o.jsx)(r.Z,{primary:`Carga: ${t.upload.dme.projectList[0].name} - ${t.upload.dme.projectList[0].polygonList[0].name}`},void 0);case s.u6.PIT:return(0,o.jsx)(r.Z,{primary:`Carga: ${s.WW[t.upload.type]} -  ${t.upload.pit.projectList[0].name}- ${t.upload.pit.projectList[0].polygonList[0].name}`},void 0);case s.u6.STOCK:return(0,o.jsx)(r.Z,{primary:`Carga: ${s.WW[t.upload.type]} -  ${t.upload.stock.projectList[0].name}-${t.upload.stock.projectList[0].polygonList[0].name}`},void 0);default:return(0,o.jsx)(o.Fragment,{children:"node"},void 0)}}},1920:(e,t,i)=>{"use strict";var o,s,r,n;i.d(t,{WW:()=>o,PW:()=>s,u6:()=>r,J8:()=>n}),function(e){e[e.DESCONOCIDO=0]="DESCONOCIDO",e[e.TAJO=1]="TAJO",e[e.PAD=2]="PAD",e[e.STOCK=3]="STOCK",e[e.DME=4]="DME",e[e.RUTA=5]="RUTA"}(o||(o={})),function(e){e[e._=0]="_",e[e.pit=1]="pit",e[e.pad=2]="pad",e[e.stock=3]="stock",e[e.dme=4]="dme",e[e.road=5]="road"}(s||(s={})),function(e){e.PIT="pit",e.PAD="pad",e.STOCK="stock",e.DME="dme",e.ROAD="road"}(r||(r={})),function(e){e[e.Desconocido=0]="Desconocido",e[e.Pendiente=1]="Pendiente",e[e.Operando=2]="Operando",e[e.Finalizado=3]="Finalizado"}(n||(n={}))},7211:(e,t,i)=>{"use strict";i.d(t,{X:()=>a});var o=i(4880),s=i(3040),r=i(6034);const n=new class{constructor(e,t,i){this.methodInfoCreateExcavator=new s.AbstractClientBase.MethodInfo(r.ExcavatorResponse,(e=>e.serializeBinary()),r.ExcavatorResponse.deserializeBinary),this.methodInfoRetrieveExcavator=new s.AbstractClientBase.MethodInfo(r.ExcavatorResponse,(e=>e.serializeBinary()),r.ExcavatorResponse.deserializeBinary),this.methodInfoRetrieveExcavators=new s.AbstractClientBase.MethodInfo(r.ExcavatorsResponse,(e=>e.serializeBinary()),r.ExcavatorsResponse.deserializeBinary),this.methodInfoUpdateExcavator=new s.AbstractClientBase.MethodInfo(r.ExcavatorResponse,(e=>e.serializeBinary()),r.ExcavatorResponse.deserializeBinary),this.methodInfoDeleteExcavator=new s.AbstractClientBase.MethodInfo(r.ExcavatorResponse,(e=>e.serializeBinary()),r.ExcavatorResponse.deserializeBinary),i||(i={}),t||(t={}),i.format="text",this.client_=new s.GrpcWebClientBase(i),this.hostname_=e,this.credentials_=t,this.options_=i}createExcavator(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.ExcavatorService/CreateExcavator",e,t||{},this.methodInfoCreateExcavator,i):this.client_.unaryCall(this.hostname_+"/pb.ExcavatorService/CreateExcavator",e,t||{},this.methodInfoCreateExcavator)}retrieveExcavator(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.ExcavatorService/RetrieveExcavator",e,t||{},this.methodInfoRetrieveExcavator,i):this.client_.unaryCall(this.hostname_+"/pb.ExcavatorService/RetrieveExcavator",e,t||{},this.methodInfoRetrieveExcavator)}retrieveExcavators(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.ExcavatorService/RetrieveExcavators",e,t||{},this.methodInfoRetrieveExcavators,i):this.client_.unaryCall(this.hostname_+"/pb.ExcavatorService/RetrieveExcavators",e,t||{},this.methodInfoRetrieveExcavators)}updateExcavator(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.ExcavatorService/UpdateExcavator",e,t||{},this.methodInfoUpdateExcavator,i):this.client_.unaryCall(this.hostname_+"/pb.ExcavatorService/UpdateExcavator",e,t||{},this.methodInfoUpdateExcavator)}deleteExcavator(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.ExcavatorService/DeleteExcavator",e,t||{},this.methodInfoDeleteExcavator,i):this.client_.unaryCall(this.hostname_+"/pb.ExcavatorService/DeleteExcavator",e,t||{},this.methodInfoDeleteExcavator)}}(`${o.$s}:${o.Vs}`,null,null),a=()=>{const e={authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2MzQzODk4MDUsInVzZXJuYW1lIjoiZGlzcGF0Y2hlciIsInJvbGUiOiJESVMifQ.IIKVGiv1ve4AST9EdQ1XjujDWDG3qCHzF57knK7A1Y8"},t=new r.Excavator,i=new r.ExcavatorRequest;return i.setExcavator(t),new Promise(((t,o)=>{n.retrieveExcavators(i,e,((e,i)=>{if(e)console.log("error message excavators get",e.message),o(e);else{console.log("excavators",i);const e=i.toObject();t(e.excavatorsList?e.excavatorsList:[])}}))}))}},7816:(e,t,i)=>{"use strict";i.d(t,{r:()=>c});var o=i(4880),s=i(3040),r=i(3779);const n=new class{constructor(e,t,i){this.methodInfoCreateTruck=new s.AbstractClientBase.MethodInfo(r.TruckResponse,(e=>e.serializeBinary()),r.TruckResponse.deserializeBinary),this.methodInfoRetrieveTruck=new s.AbstractClientBase.MethodInfo(r.TruckResponse,(e=>e.serializeBinary()),r.TruckResponse.deserializeBinary),this.methodInfoRetrieveTrucks=new s.AbstractClientBase.MethodInfo(r.TrucksResponse,(e=>e.serializeBinary()),r.TrucksResponse.deserializeBinary),this.methodInfoUpdateTruck=new s.AbstractClientBase.MethodInfo(r.TruckResponse,(e=>e.serializeBinary()),r.TruckResponse.deserializeBinary),this.methodInfoDeleteTruck=new s.AbstractClientBase.MethodInfo(r.TruckResponse,(e=>e.serializeBinary()),r.TruckResponse.deserializeBinary),i||(i={}),t||(t={}),i.format="text",this.client_=new s.GrpcWebClientBase(i),this.hostname_=e,this.credentials_=t,this.options_=i}createTruck(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.TruckService/CreateTruck",e,t||{},this.methodInfoCreateTruck,i):this.client_.unaryCall(this.hostname_+"/pb.TruckService/CreateTruck",e,t||{},this.methodInfoCreateTruck)}retrieveTruck(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.TruckService/RetrieveTruck",e,t||{},this.methodInfoRetrieveTruck,i):this.client_.unaryCall(this.hostname_+"/pb.TruckService/RetrieveTruck",e,t||{},this.methodInfoRetrieveTruck)}retrieveTrucks(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.TruckService/RetrieveTrucks",e,t||{},this.methodInfoRetrieveTrucks,i):this.client_.unaryCall(this.hostname_+"/pb.TruckService/RetrieveTrucks",e,t||{},this.methodInfoRetrieveTrucks)}updateTruck(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.TruckService/UpdateTruck",e,t||{},this.methodInfoUpdateTruck,i):this.client_.unaryCall(this.hostname_+"/pb.TruckService/UpdateTruck",e,t||{},this.methodInfoUpdateTruck)}deleteTruck(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.TruckService/DeleteTruck",e,t||{},this.methodInfoDeleteTruck,i):this.client_.unaryCall(this.hostname_+"/pb.TruckService/DeleteTruck",e,t||{},this.methodInfoDeleteTruck)}}(`${o.$s}:${o.Vs}`,null,null),a=new r.Truck,l=new r.TruckRequest,c=()=>{const e={authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2MzQzODk4MDUsInVzZXJuYW1lIjoiZGlzcGF0Y2hlciIsInJvbGUiOiJESVMifQ.IIKVGiv1ve4AST9EdQ1XjujDWDG3qCHzF57knK7A1Y8"};return l.setTruck(a),new Promise(((t,i)=>{n.retrieveTrucks(l,e,((e,o)=>{if(e)console.log("error message trucks get",e.message),500===e.code?t([]):i(e);else{const e=o.toObject();t(e.trucksList?e.trucksList:[])}}))}))}},6835:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>qt});var o=i(5893),s=i(9895),r=i(1749),n=i(7812),a=i(7661),l=i(1594),c=i(7221),p=i(282),d=i(1120),u=i(1423),g=i(2318),v=i(4096),h=i(7294),b=i(2822),O=i(6837),m=i(9544),j=i(7215),f=i(3914);const y=(0,f.Z)((()=>({subHeader:{lineHeight:0,background:"#fff",paddingLeft:0,display:"flex"}}))),x=({useOpen:e,title:t})=>{const i=y(),[s,r]=e,a=(0,o.jsx)(n.Z,Object.assign({onClick:()=>{r((e=>!e))},size:"small"},{children:s?(0,o.jsx)(m.Z,{fontSize:"small"},void 0):(0,o.jsx)(j.Z,{fontSize:"small"},void 0)}),void 0);return(0,o.jsx)(O.Z,Object.assign({component:"span",className:i.subHeader},{children:(0,o.jsxs)("div",Object.assign({style:{display:"flex",alignItems:"center"}},{children:[(0,o.jsx)("span",{children:t},void 0),(0,o.jsx)("div",Object.assign({style:{marginLeft:8}},{children:a}),void 0)]}),void 0)}),void 0)};var R=i(998),S=i(5757);const k=(0,d.Z)((e=>({disablePadding:{padding:0,margin:0,flex:1},nested:{margin:0,padding:0,marginLeft:e.spacing(2.5),flex:1}}))),T=({primary:e,Icon:t,isSubItem:i,isSelect:s,onClick:r})=>{(0,h.useEffect)((()=>()=>{}),[]);const n=k();return(0,o.jsxs)(R.Z,Object.assign({selected:s,onClick:r,dense:!0,button:!0,className:i?n.nested:n.disablePadding},{children:[t&&(0,o.jsx)(t,{fontSize:"small"},void 0),(0,o.jsx)(S.Z,{className:n.disablePadding,primary:e},void 0)]}),void 0)};var C=i(465);const I=({p:e,map:t,addUnload:i,isSelect:s})=>(0,o.jsx)(T,{primary:`Celda - ${e.name?e.name:"SIN NOM"}`,onClick:()=>{i(e,t,`Celda: ${e.name?e.name:"SIN NOM"}`)},isSelect:s},void 0),E=({addUnload:e,map:t,unloadSelect:i,padCells:s})=>{const r=(0,h.useState)(!1),[n]=r,a=s.map((s=>(0,o.jsx)(I,Object.assign({},{p:s,map:t,addUnload:e},{isSelect:i&&i.value.id===s.id}),s.id)));return(0,o.jsxs)(b.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,o.jsx)(x,{title:"Descarga",useOpen:r},void 0)},{children:[n&&(0,o.jsx)(C.V,{setItems:()=>{},items:[],functionFilter:()=>{}},void 0),a]}),void 0)};var Z=i(3658);const M=(e,t,i)=>{const o=e.getSource(t);e.getLayer(i)&&e.removeLayer(i),o&&e.removeSource(t)},D=(e,t,i)=>{e&&(M(e,`${t}_centroid`,`${i}_centroid`),M(e,t,i))},z=(e,t,i,o,s)=>{const{points:r,color:n}=t,a={type:"FeatureCollection",features:[{type:"Feature",properties:{color:n||"green",out_color:"blue",opacity:1,opacity_border:1},geometry:{type:"Polygon",coordinates:[r]}}]},l=(0,Z.uHA)(a,1.5),c=(0,Z.MqI)({type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[r]}},{properties:{color:"white",opacity:1,name:s}});e.addSource(`${i}_centroid`,{type:"geojson",data:{type:"FeatureCollection",features:[c]}}),e.addSource(i,{type:"geojson",data:l}),e.addLayer({id:o,type:"fill",source:i,layout:{},paint:{"fill-color":["get","color"],"fill-outline-color":["get","out_color"],"fill-opacity":1}}),e.addLayer({id:`${o}_centroid`,type:"symbol",source:`${i}_centroid`,layout:{"text-field":["get","name"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":12},paint:{"text-color":"#00296b","text-halo-color":"#f8f7ff","text-halo-width":2}}),console.log("center",c),c&&c.geometry&&c.geometry.coordinates&&Xe(e,c.geometry.coordinates)},L=(e,t,i,o,s,r,n,a)=>{console.log(t);const l=t.map((e=>({type:"Feature",properties:{color:n?a:e.color,out_color:"red",opacity:r,opacity_border:0,id:e.id},geometry:{type:"LineString",coordinates:e.points}})));console.log("!map.getSource(idSource)",!e.getSource(o)),e.getSource(o)||e.addSource(o,{type:"geojson",data:{type:"FeatureCollection",features:l}}),console.log("!map.getLayer(idSource)",!e.getLayer(s)),e.getLayer(s)?e.getSource(o).setData({type:"FeatureCollection",features:l}):(e.addLayer({id:s,type:"line",source:o,paint:{"line-width":10,"line-color":["get","color"],"line-opacity":r},layout:{"line-join":"round","line-cap":"round"},filter:["==","$type","LineString"]}),n||(console.log("agregando"),e.on("click",s,(e=>{if(console.log("eeee",e.features),e.features.length>0){const o=e.features[0],{id:s}=o.properties,r=s?t.find((e=>e.id===s)):null;s&&r&&i((e=>{const t=e.findIndex((e=>e.id===s));return-1===t?e.push(r):e.splice(t,1),console.log("indexFind",t,s),JSON.parse(JSON.stringify(e))}))}})),e.on("mouseenter",s,(function(){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave",s,(function(){e.getCanvas().style.cursor=""}))))};var w=i(8479);const _=({p:e,map:t,addUnload:i,isSelect:s})=>(0,o.jsx)(T,{primary:`${e.name?e.name:"SIN NOM"}`,onClick:()=>{i(e,t,`${e.name?e.name:"SIN NOM"}`)},isSelect:s},void 0),F=({addUnload:e,map:t,unloadSelect:i,dmeCells:s})=>{const r=(0,h.useState)(!1),[n]=r,a=s.map((s=>(0,o.jsx)(_,Object.assign({},{p:s,map:t,addUnload:e},{isSelect:i&&i.value.id===s.id}),s.id)));return(0,o.jsxs)(b.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,o.jsx)(x,{title:"Descarga",useOpen:r},void 0)},{children:[n&&(0,o.jsx)(C.V,{setItems:()=>{},items:[],functionFilter:()=>{}},void 0),a]}),void 0)};const B=(0,d.Z)((e=>({nested:{marginLeft:e.spacing(1),marginBottom:0},root_unload:{flexGrow:1,display:"flex",height:"100%"},tabs:{borderRight:`1px solid ${e.palette.divider}`},tab:{minWidth:10,padding:1,paddingTop:8,paddingBottom:8},buttonTab:{writingMode:"vertical-rl"}})));function A(e){const{children:t,value:i,index:s}=e,r=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i}(e,["children","value","index"]);return(0,o.jsx)("div",Object.assign({role:"tabpanel",hidden:i!==s,id:`vertical-tabpanel-${s}`,"aria-labelledby":`vertical-tab-${s}`,style:{flex:1}},r,{children:i===s&&t}),void 0)}function W(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const N=({value:e,handleChange:t})=>{const i=B();return(0,o.jsxs)(v.Z,Object.assign({orientation:"vertical",variant:"scrollable",value:e,indicatorColor:"primary",textColor:"primary",onChange:t,"aria-label":"Vertical tabs",className:i.tabs},{children:[(0,o.jsx)(u.Z,Object.assign({className:i.tab,label:(0,o.jsx)(g.Z,Object.assign({variant:"caption",className:i.buttonTab},{children:"PAD"}),void 0)},W(0)),void 0),(0,o.jsx)(u.Z,Object.assign({className:i.tab,label:(0,o.jsx)(g.Z,Object.assign({variant:"caption",className:i.buttonTab},{children:"DME"}),void 0)},W(1)),void 0),(0,o.jsx)(u.Z,Object.assign({className:i.tab,label:(0,o.jsx)(g.Z,Object.assign({variant:"caption",className:i.buttonTab},{children:"STOCKs"}),void 0)},W(2)),void 0)]}),void 0)},U=({padCells:e,useUnloadSelect:t,dmeCells:i})=>{const n=B(),[a,l]=t,c=(e,t,i)=>{D(t,"ID_LAYER_UNLOAD_DME","ID_LAYER_UNLOAD_DME"),a&&a.value.id===e.id?(D(t,"ID_SOURCE_UNLOAD_PAD","ID_LAYER_UNLOAD_PAD"),l(void 0)):(D(t,"ID_SOURCE_UNLOAD_PAD","ID_LAYER_UNLOAD_PAD"),l({type:1,value:e}),setTimeout((()=>{t&&z(t,e,"ID_SOURCE_UNLOAD_PAD","ID_LAYER_UNLOAD_PAD",i)}),10))},p=(e,t,i)=>{D(t,"ID_SOURCE_UNLOAD_PAD","ID_LAYER_UNLOAD_PAD"),a&&a.value.id===e.id?(D(t,"ID_SOURCE_UNLOAD_DME","ID_LAYER_UNLOAD_DME"),l(void 0)):(D(t,"ID_SOURCE_UNLOAD_DME","ID_LAYER_UNLOAD_DME"),l({type:2,value:e}),setTimeout((()=>{t&&z(t,e,"ID_SOURCE_UNLOAD_DME","ID_LAYER_UNLOAD_DME",i)}),10))},[d,u]=(0,w._)("index_tab_unload_operation",0),g=(e,t)=>{u(t)};return(0,o.jsx)(Gt.Consumer,{children:t=>(0,o.jsx)(s.Z,Object.assign({elevation:4,style:{flex:1,marginLeft:8}},{children:(0,o.jsxs)(r.Z,Object.assign({container:!0,className:n.root_unload},{children:[(0,o.jsx)(N,Object.assign({},{value:d,handleChange:g}),void 0),(0,o.jsx)(A,Object.assign({value:d,index:0},{children:(0,o.jsx)(E,{padCells:e,addUnload:c,map:t,unloadSelect:a},void 0)}),void 0),(0,o.jsx)(A,Object.assign({value:d,index:1},{children:(0,o.jsx)(F,{dmeCells:i,addUnload:p,map:t,unloadSelect:a},void 0)}),void 0)]}),void 0)}),void 0)},void 0)};var $=i(6037),P=i(7129),G=i(4610),J=i(1125),q=i(3099);const V=(0,d.Z)((e=>({disabledPadding:{padding:0},disabledMargin:{padding:0,minWidth:0}}))),Y=({p:e,addLoad:t,map:i,isSelect:s,idProject:r})=>(0,o.jsx)(T,{onClick:()=>t(e,i,`Polígono: ${e.name?e.name:"SIN NOM"} - ${e.material?e.material.type:""}`,r),primary:`Polígono ${e.name}${e.material?` - ${e.material.type}`:""}`,isSubItem:!0,isSelect:s},void 0),K=({map:e,project:t,addLoad:i,idProject:s,loadSelect:a})=>{const[l,c]=(0,h.useState)(!1),p=V(),d=t.polygons.map((function(t){return t?(0,o.jsx)(Y,Object.assign({},{p:t,addLoad:i,map:e,idProject:s},{isSelect:a&&a.value.id===t.id}),t.id):null}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(R.Z,Object.assign({className:p.disabledPadding,dense:!0,onClick:()=>c((e=>!e))},{children:[(0,o.jsx)(S.Z,{className:p.disabledMargin,primary:(0,o.jsxs)(r.Z,Object.assign({container:!0},{children:[(0,o.jsxs)(g.Z,Object.assign({variant:"caption",style:{alignItems:"center",display:"flex",fontSize:12}},{children:[l?(0,o.jsx)(P.Z,{fontSize:"small"},void 0):(0,o.jsx)(G.Z,{fontSize:"small"},void 0),t.name]}),void 0),(0,o.jsx)(g.Z,Object.assign({color:"primary",style:{fontSize:11,marginLeft:4}},{children:`${t.polygons.length}▰s`}),void 0)]}),void 0)},void 0),(0,o.jsx)(n.Z,Object.assign({size:"small"},{children:l?(0,o.jsx)(J.Z,{fontSize:"small"},void 0):(0,o.jsx)(q.Z,{fontSize:"small"},void 0)}),void 0)]}),void 0),(0,o.jsx)($.Z,Object.assign({in:l},{children:(0,o.jsx)(b.Z,Object.assign({dense:!0,disablePadding:!0},{children:d}),void 0)}),void 0)]},void 0)};const H=(0,d.Z)((e=>({root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{marginLeft:e.spacing(1),marginBottom:0},root_unload:{flexGrow:1,display:"flex",height:"100%"},tabs:{borderRight:`1px solid ${e.palette.divider}`},tab:{minWidth:10,padding:1,paddingTop:8,paddingBottom:8},buttonTab:{writingMode:"vertical-rl"}})));function X(e){const{children:t,value:i,index:s}=e,r=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i}(e,["children","value","index"]);return(0,o.jsx)("div",Object.assign({role:"tabpanel",hidden:i!==s,id:`vertical-tabpanel-${s}`,"aria-labelledby":`vertical-tab-${s}`,style:{flex:1}},r,{children:i===s&&t}),void 0)}function Q(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const ee=({benchs:e,useLoadSelect:t,stockCells:i})=>{const n=H(),[a,l]=t,[c,p]=(0,h.useState)([]),[d,O]=(0,w._)("index_tab_load_operation",0),m=(0,h.useState)(!1),[j,f]=(0,h.useState)([]);(0,h.useEffect)((()=>{let t=[];e.forEach((e=>{t=[...t,...e.projects]})),p(t),f(t)}),[e]);const y=(e,t,i,o)=>{D(t,"ID_SOURCE_LOAD_STOCK","ID_LAYER_LOAD_STOCK"),a&&a.value.id===e.id?(D(t,"ID_SOURCE_LOAD","ID_LAYER_LOAD"),l(void 0)):(D(t,"ID_SOURCE_LOAD","ID_LAYER_LOAD"),l({type:1,value:e,idProject:o}),setTimeout((()=>{t&&z(t,e,"ID_SOURCE_LOAD","ID_LAYER_LOAD",i)}),10))},k=(e,t)=>{O(t)},T=e=>j.filter((t=>t.name.toUpperCase().includes(e.toUpperCase())));return(0,o.jsx)(Gt.Consumer,{children:e=>(0,o.jsx)(s.Z,Object.assign({elevation:4,style:{flex:1}},{children:(0,o.jsxs)(r.Z,Object.assign({container:!0,style:{height:"100%"}},{children:[(0,o.jsxs)(v.Z,Object.assign({orientation:"vertical",variant:"scrollable",value:d,indicatorColor:"primary",textColor:"primary",onChange:k,"aria-label":"Vertical tabs",className:n.tabs},{children:[(0,o.jsx)(u.Z,Object.assign({className:n.tab,label:(0,o.jsx)(g.Z,Object.assign({variant:"caption",className:n.buttonTab},{children:"TAJO"}),void 0)},Q(0)),void 0),(0,o.jsx)(u.Z,Object.assign({className:n.tab,label:(0,o.jsx)(g.Z,Object.assign({variant:"caption",className:n.buttonTab},{children:"STOCKs"}),void 0)},Q(1)),void 0)]}),void 0),(0,o.jsx)(X,Object.assign({value:d,index:0},{children:(0,o.jsxs)(b.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,o.jsx)(x,{title:"Carguío",useOpen:m},void 0)},{children:[m[0]&&(0,o.jsx)(C.V,{functionFilter:T,setItems:p,items:j,placeholder:"Buscar por proyecto"},void 0),c.map((t=>function(e,t){return(0,o.jsx)(K,Object.assign({project:e},{map:t,addLoad:y,loadSelect:a},{idProject:e.id}),e.id)}(t,e)))]}),void 0)}),void 0),(0,o.jsx)(X,Object.assign({value:d,index:1},{children:(0,o.jsxs)(b.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,o.jsx)(x,{title:"Carguío",useOpen:m},void 0)},{children:[m[0]&&(0,o.jsx)(C.V,{functionFilter:()=>{},setItems:()=>{},items:[]},void 0),i.map((t=>(0,o.jsx)(R.Z,Object.assign({selected:a&&a.value.id===t.id,button:!0,dense:!0,onClick:()=>{((e,t,i)=>{D(t,"ID_SOURCE_LOAD","ID_LAYER_LOAD"),a&&a.value.id===e.id?(D(t,"ID_SOURCE_LOAD_STOCK","ID_LAYER_LOAD_STOCK"),l(void 0)):(D(t,"ID_SOURCE_LOAD_STOCK","ID_LAYER_LOAD_STOCK"),l({type:2,value:e}),setTimeout((()=>{t&&z(t,e,"ID_SOURCE_LOAD_STOCK","ID_LAYER_LOAD_STOCK",i)}),10))})(t,e,t.name)}},{children:(0,o.jsx)(S.Z,{primary:t.name},void 0)}),t.id)))]}),void 0)}),void 0)]}),void 0)}),void 0)},void 0)};var te=i(5517),ie=i(6072),oe=i(3960);const se=(0,d.Z)((e=>({disabledMargin:{margin:0},centerListItem:{justifyContent:"center"},root:{flex:1,overflowY:"scroll",marginBottom:8,marginLeft:e.spacing(1)}}))),re=({routes:e,map:t,addRoutes:i,useSelect:s})=>{const[r,n]=s;return(0,h.useEffect)((()=>(e.length>0&&i(t,e,n,"source_routes_all_assigment","layer_routes_all_assigment",.2,!1),()=>{})),[e]),(0,h.useEffect)((()=>(console.log("routesSelect",r),i(t,r,n,"id_source_routes_select","id_layer_routes_select",1,!0,"red"),()=>{})),[r]),(0,o.jsx)(o.Fragment,{},void 0)},ne=({routes:e,useSelect:t})=>{const[i,a]=(0,h.useState)(e),[l,c]=t,p=(0,h.useState)(!1),[d]=p,u=se();return(0,h.useEffect)((()=>{a(e)}),[e]),(0,o.jsx)(s.Z,Object.assign({elevation:4,className:u.root},{children:(0,o.jsx)(Gt.Consumer,{children:e=>e?(0,o.jsxs)(r.Z,Object.assign({container:!0},{children:[(0,o.jsx)(re,{routes:i,map:e,addRoutes:L,useSelect:t},void 0),(0,o.jsxs)(b.Z,Object.assign({dense:!0,style:{padding:4},subheader:(0,o.jsx)(x,{title:"Ruta",useOpen:p},void 0)},{children:[d&&(0,o.jsx)(C.V,{functionFilter:()=>{},setItems:()=>{},items:[]},void 0),(0,o.jsxs)(R.Z,Object.assign({dense:!0,className:u.centerListItem},{children:[(0,o.jsxs)(g.Z,Object.assign({variant:"inherit"},{children:["Seleccione los tramos en el mapa"," "]}),void 0),(0,o.jsx)(ie.Z,{fontSize:"small"},void 0)]}),void 0),l.map((e=>(0,o.jsxs)(h.Fragment,{children:[(0,o.jsxs)(r.Z,Object.assign({container:!0},{children:[(0,o.jsx)(T,{primary:` Tramo: ${e.name?e.name:"Sin Nomb."}`,Icon:oe.Z},void 0),(0,o.jsx)(n.Z,Object.assign({size:"small",onClick:()=>{return t=e,void c((e=>{const i=e.findIndex((e=>e.id===t.id));return-1===i||e.splice(i,1),JSON.parse(JSON.stringify(e))}));var t}},{children:(0,o.jsx)(m.Z,{fontSize:"small"},void 0)}),void 0)]}),void 0),(0,o.jsx)(te.Z,{},void 0)]},e.id)))]}),void 0)]}),void 0):null},void 0)}),void 0)};var ae=i(4436),le=i(2541),ce=i(553),pe=i(74),de=i(3513),ue=i(5477),ge=i(2663),ve=i(6856),he=i(9525);function be({open:e,setOpen:t,handleClickConfirm:i,children:s,loading:r,handleClose:n}){return(0,o.jsxs)(ge.Z,Object.assign({fullWidth:!0,maxWidth:"lg",open:e,onClose:n||(()=>{t(!1)}),"aria-labelledby":"max-width-dialog-title"},{children:[(0,o.jsx)(he.Z,{children:s},void 0),(0,o.jsx)(ve.Z,{children:r?(0,o.jsx)(ue.Z,{},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.Z,Object.assign({onClick:n,color:"secondary"},{children:"Cancelar"}),void 0),(0,o.jsx)(p.Z,Object.assign({onClick:i,color:"primary"},{children:"Confirmar"}),void 0)]},void 0)},void 0)]}),void 0)}var Oe=i(6083),me=i(8657);const je=({open:e,handleClose:t,handleConfirm:i,title:s,message:r})=>(0,o.jsxs)(ge.Z,Object.assign({open:e,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},{children:[(0,o.jsx)(Oe.Z,{children:s},void 0),(0,o.jsx)(he.Z,{children:(0,o.jsx)(me.Z,Object.assign({severity:"warning"},{children:r}),void 0)},void 0),(0,o.jsxs)(ve.Z,{children:[(0,o.jsx)(p.Z,Object.assign({color:"primary",onClick:t},{children:"Cancelar"}),void 0),(0,o.jsx)(p.Z,Object.assign({color:"secondary",onClick:i,autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)]}),void 0);var fe=i(4880),ye=i(3040),xe=i(2799),Re=i(1783),Se=i(7461),ke=i(3068),Te=i(5631),Ce=i(2733),Ie=i(8060),Ee=i(3423),Ze=i(3112),Me=i(3779),De=i(6928),ze=i(6034);const Le=new class{constructor(e,t,i){this.methodInfoCreateOperation=new ye.AbstractClientBase.MethodInfo(xe.OperationResponse,(e=>e.serializeBinary()),xe.OperationResponse.deserializeBinary),this.methodInfoRetrieveOperation=new ye.AbstractClientBase.MethodInfo(xe.OperationResponse,(e=>e.serializeBinary()),xe.OperationResponse.deserializeBinary),this.methodInfoRetrieveOperations=new ye.AbstractClientBase.MethodInfo(xe.OperationsResponse,(e=>e.serializeBinary()),xe.OperationsResponse.deserializeBinary),this.methodInfoUpdateOperation=new ye.AbstractClientBase.MethodInfo(xe.OperationResponse,(e=>e.serializeBinary()),xe.OperationResponse.deserializeBinary),this.methodInfoDeleteOperation=new ye.AbstractClientBase.MethodInfo(xe.OperationResponse,(e=>e.serializeBinary()),xe.OperationResponse.deserializeBinary),this.methodInfoRemoveTrucksOperation=new ye.AbstractClientBase.MethodInfo(xe.OperationResponse,(e=>e.serializeBinary()),xe.OperationResponse.deserializeBinary),this.methodInfoReassigmentTrucksOperation=new ye.AbstractClientBase.MethodInfo(xe.OperationReassigmentResponse,(e=>e.serializeBinary()),xe.OperationReassigmentResponse.deserializeBinary),this.methodInfoFinalizeOperation=new ye.AbstractClientBase.MethodInfo(xe.OperationFinalizeResponse,(e=>e.serializeBinary()),xe.OperationFinalizeResponse.deserializeBinary),i||(i={}),t||(t={}),i.format="text",this.client_=new ye.GrpcWebClientBase(i),this.hostname_=e,this.credentials_=t,this.options_=i}createOperation(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.OperationService/CreateOperation",e,t||{},this.methodInfoCreateOperation,i):this.client_.unaryCall(this.hostname_+"/pb.OperationService/CreateOperation",e,t||{},this.methodInfoCreateOperation)}retrieveOperation(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.OperationService/RetrieveOperation",e,t||{},this.methodInfoRetrieveOperation,i):this.client_.unaryCall(this.hostname_+"/pb.OperationService/RetrieveOperation",e,t||{},this.methodInfoRetrieveOperation)}retrieveOperations(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.OperationService/RetrieveOperations",e,t||{},this.methodInfoRetrieveOperations,i):this.client_.unaryCall(this.hostname_+"/pb.OperationService/RetrieveOperations",e,t||{},this.methodInfoRetrieveOperations)}updateOperation(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.OperationService/UpdateOperation",e,t||{},this.methodInfoUpdateOperation,i):this.client_.unaryCall(this.hostname_+"/pb.OperationService/UpdateOperation",e,t||{},this.methodInfoUpdateOperation)}deleteOperation(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.OperationService/DeleteOperation",e,t||{},this.methodInfoDeleteOperation,i):this.client_.unaryCall(this.hostname_+"/pb.OperationService/DeleteOperation",e,t||{},this.methodInfoDeleteOperation)}removeTrucksOperation(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.OperationService/RemoveTrucksOperation",e,t||{},this.methodInfoRemoveTrucksOperation,i):this.client_.unaryCall(this.hostname_+"/pb.OperationService/RemoveTrucksOperation",e,t||{},this.methodInfoRemoveTrucksOperation)}reassigmentTrucksOperation(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.OperationService/ReassigmentTrucksOperation",e,t||{},this.methodInfoReassigmentTrucksOperation,i):this.client_.unaryCall(this.hostname_+"/pb.OperationService/ReassigmentTrucksOperation",e,t||{},this.methodInfoReassigmentTrucksOperation)}finalizeOperation(e,t,i){return void 0!==i?this.client_.rpcCall(this.hostname_+"/pb.OperationService/FinalizeOperation",e,t||{},this.methodInfoFinalizeOperation,i):this.client_.unaryCall(this.hostname_+"/pb.OperationService/FinalizeOperation",e,t||{},this.methodInfoFinalizeOperation)}}(`${fe.$s}:${fe.Vs}`,null,null),we=(e,t)=>{console.log("RESSIGMENT_DATA_SEND: ",e,t);const i={authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2MzQzODk4MDUsInVzZXJuYW1lIjoiZGlzcGF0Y2hlciIsInJvbGUiOiJESVMifQ.IIKVGiv1ve4AST9EdQ1XjujDWDG3qCHzF57knK7A1Y8"},o=new xe.Operation,s=new xe.OperationReassigmentRequest;return o.setId(e),s.setOperationDestination(o),console.log("idDest",e),console.log("trucks",t),t.map((e=>{const t=new Me.Truck;t.setId(e.id),t.setDeviceId(e.deviceId),t.setDeviceAlias(e.deviceAlias),t.setDeviceInterval(e.deviceInterval),t.setDescription(e.description),t.setPlate(e.plate),s.addTruck(t)})),new Promise(((e,t)=>{Le.reassigmentTrucksOperation(s,i,((i,o)=>{if(i)console.log("error message operations get",i.message),t(i);else{const t=o.toObject();console.log("operationsbackend",t),e(t)}}))}))};var _e=i(7816),Fe=i(7211),Be=i(3258),Ae=i(5090);const We=(0,d.Z)((e=>({disabledSpacing:{margin:0,padding:0,width:"100%"},checkbox:{"& .MuiCheckbox-root":{margin:0,padding:0,paddingLeft:8}}}))),Ne=({truck:e,checked:t,useTrucksSelect:i,disableWithOperation:s})=>{const r=We(),[n,a]=i,l=e.state>=0?Ae.S[e.state]:"Sin conex...",c=e.operationList&&e.operationList.length>0?e.operationList[0].excavator.deviceAlias:"";return(0,o.jsx)(R.Z,Object.assign({selected:!0,button:!0,dense:!0,className:r.disabledSpacing,disabled:!!s&&!!c},{children:(0,o.jsx)(ce.Z,{className:r.checkbox,onChange:()=>{const t=n.findIndex((t=>e.deviceId===t.deviceId));-1===t?n.push(e):n.splice(t,1),a(JSON.parse(JSON.stringify(n)))},control:(0,o.jsx)(Be.Z,{size:"small",checked:t,inputProps:{style:{padding:0}}},void 0),label:(0,o.jsx)(S.Z,{primary:`${e.deviceAlias} ${c?` --\x3e ${c}`:""} (${l})`},void 0)},void 0)}),void 0)};var Ue=i(702);const $e=({open:e,handleClose:t,msg:i,severity:s})=>(0,o.jsx)(Ue.Z,Object.assign({open:e,onClose:t},{children:(0,o.jsx)(me.Z,Object.assign({onClose:t,severity:s},{children:i}),void 0)}),void 0);var Pe=function(e,t,i,o){return new(i||(i=Promise))((function(s,r){function n(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,a)}l((o=o.apply(e,t||[])).next())}))};const Ge=({trucks:e,useTrucksSelect:t,streamTruck:i,disableWithOperation:s})=>{const r=t[0],[n,a]=(0,h.useState)([]),l=e=>!!r.find((t=>e.id===t.id));return(0,h.useEffect)((()=>{a(e)}),[e]),(0,h.useEffect)((()=>{if(console.log("streamTruck",i),i&&i.sensor){const e=n.findIndex((e=>e.deviceId===i.deviceId));e>=0&&(n[e].sensor=i.sensor,n[e].state=i.state,n[e].operationList=i.operationList,console.log("trucksAll",n),a(JSON.parse(JSON.stringify(n))))}}),[i]),(0,o.jsx)(b.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"}},{children:n.map((e=>(0,o.jsx)(Ne,{disableWithOperation:s,checked:l(e),useTrucksSelect:t,truck:e},e.id)))}),void 0)},Je=({open:e,setOpen:t,setRefresh:i,operations:n})=>{const[a,l]=(0,h.useState)([]),[c,p]=(0,h.useState)([]),[d,u]=(0,h.useState)([]),[v,m]=(0,h.useState)(""),j=(0,h.useState)([]),[f,y]=j,[x,k]=(0,h.useState)(!1),[T,I]=h.useState(!1),[E,Z]=(0,h.useState)(!1),[M,D]=(0,h.useState)("success"),[z,L]=(0,h.useState)(""),w=()=>{Z(!1)};(0,h.useEffect)((()=>{((e,t,i)=>{Pe(void 0,void 0,void 0,(function*(){(0,_e.r)().then((t=>{e(t),i(t)})).catch((t=>{e([]),console.log(t)})),(0,Fe.X)().then((e=>{t(e)})).catch((e=>{console.log(e),t([])}))}))})(l,u,p)}),[]);const _=e=>{m(e.target.value)},F=()=>{k(!1)},B=()=>{t(!1),y([]),m("")},A=()=>{f.length<=0||v.length<=0?(Z(!0),L("Debe seleccionar almenos una excabadora y un camion"),D("warning")):k(!0)},W=()=>{k(!1),t(!1),y([]),m(""),((e,t,i,o)=>{Pe(void 0,void 0,void 0,(function*(){i(!0);const s=yield we(e,t);console.log("responseAssigment",s),i(!1),o((e=>!e));let r="";s.truckErrorList.length>0&&s.truckErrorList.forEach((e=>{const t=1===e.state?"CARGANDO":"A DESCARGA";r+=` ${e.truckError.deviceAlias}=> ${t},`})),""!==r&&alert(`Las siguientes unidades no han podido ser reasignadas: ${r}`)}))})(v,f,I,i)},N=e=>c.filter((t=>t.deviceAlias.includes(e)));return(0,o.jsx)(de.a.Consumer,{children:({streamTruck:t})=>(0,o.jsxs)(be,Object.assign({},{loading:T},{open:e,handleClickConfirm:A,handleClose:B},{children:[(0,o.jsx)(r.Z,Object.assign({container:!0},{children:(0,o.jsx)(r.Z,Object.assign({item:!0,xs:12},{children:(0,o.jsx)(g.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16}},{children:"Reasignación de camiones"}),void 0)}),void 0)}),void 0),(0,o.jsxs)(r.Z,Object.assign({container:!0,style:{paddingLeft:4}},{children:[(0,o.jsx)(r.Z,Object.assign({item:!0,xs:6},{children:(0,o.jsx)(s.Z,Object.assign({style:{margin:10}},{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.Z,Object.assign({style:{position:"sticky",zIndex:1,top:0,background:"#f6f6f6",padding:2}},{children:(0,o.jsx)(C.V,{functionFilter:N,setItems:l,items:c,placeholder:"Camiones"},void 0)}),void 0),(0,o.jsx)(Ge,Object.assign({},{trucks:a,useTrucksSelect:j,streamTruck:t,disableWithOperation:!1}),void 0)]},void 0)}),void 0)}),void 0),(0,o.jsx)(r.Z,Object.assign({item:!0,xs:6},{children:(0,o.jsx)(s.Z,Object.assign({style:{margin:10}},{children:(0,o.jsx)(b.Z,Object.assign({subheader:(0,o.jsx)(O.Z,Object.assign({component:"div"},{children:"Excavadora destino"}),void 0)},{children:(0,o.jsx)(R.Z,{children:(0,o.jsx)(S.Z,{children:(0,o.jsx)(ae.Z,Object.assign({component:"fieldset"},{children:(0,o.jsx)(le.Z,Object.assign({"aria-label":"gender",name:"radio-buttons-group"},{children:n.filter((e=>2===e.state)).map((e=>{var t;return(0,o.jsx)(ce.Z,{value:e.id,control:(0,o.jsx)(pe.Z,{},void 0),onChange:_,label:`  ${null===(t=e.excavatorList[0])||void 0===t?void 0:t.deviceAlias}`},e.id)}))}),void 0)}),void 0)},void 0)},void 0)}),void 0)}),void 0)}),void 0)]}),void 0),(0,o.jsx)(je,{open:x,handleClose:F,handleConfirm:W,title:"¿Esta seguro?",message:"Intentaremos mover estos camiones, si ocurre algun error se le informará"},void 0),(0,o.jsx)($e,{open:E,handleClose:w,msg:z,severity:M},void 0)]}),void 0)},void 0)},qe=(0,d.Z)((e=>({root:{flex:1},list:{flex:1,maxHeight:"75vh",paddingLeft:e.spacing(1),marginLeft:e.spacing(1),overflowY:"scroll",marginBottom:e.spacing(2)}}))),Ve=({trucks:e,excavators:t,useExcasSelect:i,useTrucksSelect:n})=>{const[a,l]=i,c=(0,h.useState)(),p=qe(),[d,u]=(0,h.useState)(e),g=t=>e.filter((e=>e.deviceAlias.includes(t)));return(0,o.jsx)(s.Z,Object.assign({className:p.root,elevation:4},{children:(0,o.jsxs)(r.Z,Object.assign({container:!0,direction:"row"},{children:[(0,o.jsxs)(b.Z,Object.assign({className:p.list,dense:!0,subheader:(0,o.jsx)(x,{title:"Palas",useOpen:c},void 0)},{children:[(0,o.jsx)(ae.Z,Object.assign({component:"fieldset"},{children:(0,o.jsx)(le.Z,Object.assign({"aria-label":"gender",name:"radio-buttons-group"},{children:t.map((e=>(0,o.jsx)(h.Fragment,{children:(0,o.jsx)(ce.Z,{value:e.id,control:(0,o.jsx)(pe.Z,{},void 0),onClick:()=>(e=>{a.pop(),a.push(e),l(JSON.parse(JSON.stringify(a)))})(e),label:`${e.deviceAlias}`},void 0)},e.id)))}),void 0)}),void 0),(0,o.jsx)(te.Z,{},void 0)]}),void 0),(0,o.jsx)(de.a.Consumer,{children:({streamTruck:t})=>(0,o.jsxs)(b.Z,Object.assign({className:p.list,dense:!0,subheader:(0,o.jsx)(x,{title:"Camiones",useOpen:c},void 0)},{children:[c[0]&&(0,o.jsx)(C.V,{functionFilter:g,setItems:u,items:e},void 0),(0,o.jsx)(Ge,{streamTruck:t,trucks:d,useTrucksSelect:n,disableWithOperation:!0},void 0)]}),void 0)},void 0)]}),void 0)}),void 0)};var Ye=i(724),Ke=i(3471),He=i(9813);const Xe=(e,t)=>{e.flyTo({center:t}),setTimeout((()=>{e.zoomTo(14,{duration:2e3})}),1e3)},Qe=({setIsNew:e,map:t,setZoom:i})=>{const d=(0,h.useState)([]),u=(0,h.useState)([]),g=(0,h.useState)([]),v=(0,h.useState)(),b=(0,h.useState)(),[O,m]=(0,h.useState)(0),[j,f]=(0,h.useState)([]),[y,x]=(0,h.useState)([]),[R,S]=(0,h.useState)(!1),[k,T]=(0,h.useState)(""),[C,I]=(0,h.useState)(""),E=()=>{S(!1)};function Z(e,t,i,s,r){switch(console.log(),O){case 0:return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ee,Object.assign({},{useLoadSelect:v,benchs:e,stockCells:s}),void 0)," ",(0,o.jsx)(U,Object.assign({},{useUnloadSelect:b,padCells:t,dmeCells:r}),void 0)]},void 0);case 1:return(0,o.jsx)(ne,Object.assign({},{routes:i,useSelect:d}),void 0);case 2:return(0,o.jsx)(Ve,Object.assign({},{trucks:j,excavators:y,useTrucksSelect:u,useExcasSelect:g}),void 0)}}(0,h.useEffect)((()=>{((e,t)=>{var i,o,s,r;i=void 0,o=void 0,r=function*(){(0,_e.r)().then((t=>{e(t)})).catch((t=>{e([]),console.log(t)})),(0,Fe.X)().then((e=>{t(e)})).catch((e=>{console.log(e),t([])}))},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{l(r.next(e))}catch(e){t(e)}}function a(e){try{l(r.throw(e))}catch(e){t(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(n,a)}l((r=r.apply(i,o||[])).next())}))})(f,x)}),[]);const M=()=>{m((e=>e-1))},D=()=>{m((e=>e+1))},z=v[0],L=b[0],w=u[0],_=g[0],F=d[0],B=()=>{_.length<=0&&w.length<=0?(S(!0),I("Debe seleccionar una excabadora"),T("warning")):z&&L&&w&&_&&((e,t,i,o,s)=>{console.log("unload",t);const r={authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2MzQzODk4MDUsInVzZXJuYW1lIjoiZGlzcGF0Y2hlciIsInJvbGUiOiJESVMifQ.IIKVGiv1ve4AST9EdQ1XjujDWDG3qCHzF57knK7A1Y8"},n=new xe.Operation,a=new Re.Upload,l=new Re.Download,c=new Se.Polygon,p=new ke.Cell,d=new Te.Dme,u=new De.Stock,g=new Ce.Pit,v=new Ee.Project,h=new xe.OperationRequest;if(console.log(e),1===e.type?(c.setId(e.value.id),a.setType(1),v.addPolygon(c),v.setId(e.idProject),g.addProject(v),a.setPit(g)):(u.setId(e.value.id),a.setType(3),a.setStock(u)),1===t.type){const e=new Ie.Pad;e.setId(t.value.idPad),p.setId(t.value.id),e.addCell(p),l.setType(2),l.setPad(e)}return 2===t.type&&(d.setId(t.value.idDme),p.setId(t.value.id),d.addCell(p),l.setType(4),l.setDme(d)),n.setShift(1),n.setState(2),n.setUpload(a),n.setDownload(l),s.forEach((e=>{const t=new Ze.Road;t.setId(e.id),n.addRoad(t)})),i.forEach((e=>{const t=new Me.Truck;t.setId(e.id),n.addTruck(t)})),o.forEach((e=>{const t=new ze.Excavator;t.setId(e.id),n.addExcavator(t)})),console.log("operation",n),h.setOperation(n),new Promise(((e,t)=>{Le.createOperation(h,r,((i,o)=>{if(i)console.log("error message",i.message),t(i);else{const t=o.getOperation().toObject();console.log("saveOperationResponse",t),e(t)}}))}))})(z,L,w,_,F).then((t=>{e(!1)})).catch((e=>{console.log(e),S(!0),I("Error al guardar: posiblemente las unidades ya estan en otra operación: "+e.message),T("warning")}))},A=e=>{switch(e){case 0:return!(!z||!L);case 1:return F.length>0;case 2:return _.length>0}},W=()=>{e(!1),i(14.81)};return(0,o.jsx)(de.a.Consumer,{children:({padCells:e,benchs:t,stockCells:i,routes:d,dmeCells:u})=>(0,o.jsxs)(s.Z,Object.assign({style:{height:"100vh",minWidth:600,overflowY:"scroll",display:"flex",flexDirection:"column",alignItems:"center"}},{children:[(0,o.jsxs)(r.Z,Object.assign({container:!0,alignItems:"center",alignContent:"center"},{children:[(0,o.jsx)(n.Z,Object.assign({onClick:W},{children:(0,o.jsx)(Ye.Z,{fontSize:"small"},void 0)}),void 0),(0,o.jsxs)(a.Z,Object.assign({style:{padding:8},alternativeLabel:!0,nonLinear:!0,activeStep:O},{children:[(0,o.jsx)(l.Z,Object.assign({completed:!0},{children:(0,o.jsx)(c.Z,Object.assign({completed:A(0)},{children:"Carga/Descarga"}),void 0)}),void 0),(0,o.jsx)(l.Z,Object.assign({completed:!0},{children:(0,o.jsx)(c.Z,Object.assign({completed:A(1)},{children:"Tramos/Ruta"}),void 0)}),void 0),(0,o.jsx)(l.Z,Object.assign({completed:!0},{children:(0,o.jsx)(c.Z,Object.assign({completed:A(2)},{children:"Pala/Camiones"}),void 0)}),void 0)]}),void 0)]}),void 0),(0,o.jsx)(r.Z,Object.assign({container:!0,style:{padding:4,flex:1}},{children:Z(t,e,d,i,u)}),void 0),(0,o.jsxs)(r.Z,Object.assign({container:!0,style:{marginBottom:8}},{children:[(0,o.jsx)(p.Z,Object.assign({size:"small",color:"inherit",variant:"contained",onClick:M,disabled:0===O,startIcon:(0,o.jsx)(Ke.Z,{fontSize:"small"},void 0)},{children:"Regresar"}),void 0),(0,o.jsx)(p.Z,Object.assign({size:"small",disabled:!A(O),color:"secondary",onClick:2==O?B:D,variant:"contained",endIcon:(0,o.jsx)(He.Z,{fontSize:"small"},void 0)},{children:2==O?"Guardar":"Siguiente"}),void 0)]}),void 0),(0,o.jsx)($e,{open:R,handleClose:E,msg:C,severity:k},void 0)]}),void 0)},void 0)};var et=i(3534),tt=i(46),it=i(9966),ot=i(5263),st=i(2200),rt=i(179),nt=i(868),at=i(1920);const lt=({setOperationSelect:e,setReassignSelect:t})=>[{field:"startTime",headerName:"Inicio",type:"date",width:170},{field:"excavator",headerName:"Palas",width:110},{field:"trunks",headerName:"Camiones",flex:1},{field:"cycles",headerName:"Ciclos",minWidth:50,maxWidth:60},{field:"labelUpload",headerName:"Carga",minWidth:200},{field:"labelDownload",headerName:"Descarga",minWidth:160},{field:"labelstate",headerName:"Estado",minWidth:130},{field:"Opciones",headerName:"Opc",minWidth:110,renderCell:({row:i})=>{const[s,r]=(0,h.useState)(!0);return(0,o.jsxs)(o.Fragment,{children:[i.state!==at.J8.Finalizado&&(0,o.jsx)(nt.ZP,Object.assign({title:"Reasignar"},{children:(0,o.jsx)(n.Z,Object.assign({size:"small",onClick:()=>{t(i)}},{children:(0,o.jsx)(st.Z,{fontSize:"small"},void 0)}),void 0)}),void 0),(0,o.jsx)(nt.ZP,Object.assign({title:"Detalle"},{children:(0,o.jsx)(n.Z,Object.assign({size:"small",onClick:()=>{e(i),r((e=>!e))}},{children:s?(0,o.jsx)(ie.Z,{fontSize:"small"},void 0):(0,o.jsx)(Ke.Z,{fontSize:"small"},void 0)}),void 0)}),void 0)]},void 0)}}];var ct=i(6562),pt=function(e,t,i,o){return new(i||(i=Promise))((function(s,r){function n(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,a)}l((o=o.apply(e,t||[])).next())}))};const dt=({operation:e,operations:t,setOperation:i,setRefresh:n})=>{if(!e)return(0,o.jsx)(o.Fragment,{},void 0);const[a,l]=(0,h.useState)([]),[c]=(0,h.useState)(e),[p,d]=h.useState(!1),[u,v]=h.useState(!1),[m,j]=(0,h.useState)(),[f,y]=(0,h.useState)(!1),[x,k]=(0,h.useState)("success"),[T,C]=(0,h.useState)(""),I=()=>{i(void 0)},E=e=>{j(e.target.value)},Z=e=>!!a.find((t=>e.id===t.id)),M=c.excavatorList&&c.excavatorList.length>0?c.excavatorList[0]:{};return(0,o.jsxs)(be,Object.assign({},{loading:u},{open:!!e,setOpen:()=>i(void 0),handleClickConfirm:()=>{a.length>0&&m&&e.id?d(!0):(y(!0),k("warning"),C("Es necesario seleccionar algún camión y una excavadora"))},handleClose:I},{children:[(0,o.jsx)(r.Z,Object.assign({container:!0},{children:(0,o.jsx)(r.Z,Object.assign({item:!0,xs:12},{children:(0,o.jsx)(g.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16}},{children:"Reasignación de camiones"}),void 0)}),void 0)}),void 0),(0,o.jsxs)(r.Z,Object.assign({container:!0,style:{paddingLeft:4}},{children:[(0,o.jsx)(r.Z,Object.assign({item:!0,xs:6},{children:(0,o.jsx)(s.Z,Object.assign({style:{margin:10}},{children:(0,o.jsx)(b.Z,Object.assign({subheader:(0,o.jsxs)(O.Z,Object.assign({component:"div",id:"nested-list-subheader"},{children:["Camiones en ",M.deviceAlias]}),void 0)},{children:(0,o.jsx)(R.Z,{children:(0,o.jsx)(S.Z,{children:(0,o.jsx)(ct.Z,{children:c.truckList.map((e=>(0,o.jsx)(ce.Z,{checked:Z(e),value:e.id,control:(0,o.jsx)(Be.Z,{onClick:()=>(e=>{const t=a.findIndex((t=>t.deviceId===e.deviceId));-1===t?a.push(e):a.splice(t,1),l(JSON.parse(JSON.stringify(a)))})(e)},void 0),label:`${e.deviceAlias}`},e.id)))},void 0)},void 0)},void 0)}),void 0)}),void 0)}),void 0),(0,o.jsx)(r.Z,Object.assign({item:!0,xs:6},{children:(0,o.jsx)(s.Z,Object.assign({style:{margin:10}},{children:(0,o.jsx)(b.Z,Object.assign({subheader:(0,o.jsx)(O.Z,Object.assign({component:"div"},{children:"Excavadora destino"}),void 0)},{children:(0,o.jsx)(R.Z,{children:(0,o.jsx)(S.Z,{children:(0,o.jsx)(ae.Z,Object.assign({component:"fieldset"},{children:(0,o.jsx)(le.Z,Object.assign({"aria-label":"gender",name:"radio-buttons-group"},{children:t.map((e=>3!==e.state&&(0,o.jsx)(ce.Z,{value:e.id,disabled:c.id===e.id,control:(0,o.jsx)(pe.Z,{},void 0),onChange:E,label:`${e.excavatorList[0].deviceAlias}`},e.id)))}),void 0)}),void 0)},void 0)},void 0)}),void 0)}),void 0)}),void 0),(0,o.jsx)(je,{open:p,handleClose:I,handleConfirm:()=>{((e,t,i,o,s)=>{pt(void 0,void 0,void 0,(function*(){i(!0);const r=yield we(e,t);console.log("responseAssigment",r),i(!1),o((e=>!e)),s(void 0);let n="";r.truckErrorList.length>0&&r.truckErrorList.forEach((e=>{const t=1===e.state?"CARGANDO":"A DESCARGA";n+=` ${e.truckError.deviceAlias}=> ${t},`})),""!==n&&alert(`Las siguientes unidades no han podido ser reasignadas: ${n}`)}))})(m,a,v,n,i),d(!1)},title:"¿Esta seguro?",message:"Intentaremos mover estos camiones, si ocurre algun error se le informará"},void 0),(0,o.jsx)($e,{open:f,handleClose:()=>{y(!1)},msg:T,severity:x},void 0)]}),void 0)]}),void 0)};var ut=i(1860),gt=i(2515);const vt=({cy:e,index:t})=>{var i,n,a;const[l,c]=(0,h.useState)(!1),p=()=>{c(!l)},d=e.startTime?new Date(1e3*(null===(i=e.startTime)||void 0===i?void 0:i.seconds)).toISOString():"NO REG",u=e.downloadArrivalTime?new Date(1e3*(null===(n=e.downloadArrivalTime)||void 0===n?void 0:n.seconds)).toISOString():"NO REG. ",g=e.endTime?new Date(1e3*(null===(a=e.endTime)||void 0===a?void 0:a.seconds)).toISOString():"NO REG. ";return(0,o.jsxs)(s.Z,Object.assign({elevation:1,style:{marginBottom:4},id:e.id},{children:[(0,o.jsxs)(R.Z,Object.assign({dense:!0,disableGutters:!0,selected:!0,button:!0,onClick:p},{children:[(0,o.jsxs)(r.Z,Object.assign({justify:"space-between",container:!0},{children:[(0,o.jsx)(S.Z,{primary:`${t}.${e.truck.deviceAlias} `},void 0),(0,o.jsx)(S.Z,{primary:d},void 0),(0,o.jsx)(S.Z,{primary:u},void 0),(0,o.jsx)(S.Z,{primary:g},void 0)]}),void 0),(0,o.jsx)(ut.Z,Object.assign({onClick:p},{children:(0,o.jsx)(r.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:l?(0,o.jsx)(J.Z,{fontSize:"small",onClick:p},void 0):(0,o.jsx)(q.Z,{fontSize:"small",onClick:p},void 0)}),void 0)}),void 0)]}),void 0),(0,o.jsx)($.Z,Object.assign({in:l,style:{paddingLeft:10}},{children:(0,o.jsxs)(b.Z,Object.assign({dense:!0,disablePadding:!0},{children:[(0,o.jsx)(R.Z,{children:(0,o.jsx)((()=>{let t="";return e.upload.pit&&(t="pit"),e.upload.stock&&(t="stock"),(0,o.jsx)(gt.m,{value:t,cy:e},void 0)}),{},void 0)},void 0),(0,o.jsx)(R.Z,{children:(0,o.jsx)((()=>{let t="";return e.download.dme&&(t="dme"),e.download.pad&&(t="pad"),e.download.stock&&(t="stock"),(0,o.jsx)(gt.t,{value:t,cy:e},void 0)}),{},void 0)},void 0),(0,o.jsx)(R.Z,{children:(0,o.jsx)(S.Z,{primary:`Pala: ${e.excavator.deviceAlias} `},void 0)},void 0),(0,o.jsx)(R.Z,{children:(0,o.jsx)(S.Z,{primary:`Camion: ${e.truck.deviceAlias} `},void 0)},void 0)]}),void 0)}),void 0)]}),e.id)},ht=()=>(0,o.jsx)(s.Z,Object.assign({elevation:1,style:{marginBottom:4}},{children:(0,o.jsx)(R.Z,Object.assign({dense:!0,disableGutters:!0,selected:!0,button:!0},{children:(0,o.jsxs)(r.Z,Object.assign({justify:"space-between",container:!0},{children:[(0,o.jsx)(S.Z,{primary:"TRUCK"},void 0),(0,o.jsx)(S.Z,{primary:"INICIO"},void 0),(0,o.jsx)(S.Z,{primary:"DESCARGA"},void 0),(0,o.jsx)(S.Z,{primary:"FIN"},void 0)]}),void 0)}),void 0)}),void 0);var bt=i(6019),Ot=i(2930),mt=i(1267),jt=i(5639),ft=i(2285);const yt=(0,d.Z)((e=>({disabledSpacing:{},checkbox:{"& .MuiCheckbox-root":{margin:0,padding:0,paddingLeft:8}}}))),xt=({truck:e,checked:t,useTrucksSelect:i})=>{const s=yt(),[r,n]=i;return(0,o.jsx)(R.Z,Object.assign({button:!0,dense:!0,className:s.disabledSpacing},{children:(0,o.jsx)(ce.Z,{className:s.checkbox,onChange:()=>{const t=r.findIndex((t=>e.deviceId===t.deviceId));-1===t?r.push(e):r.splice(t,1),n(JSON.parse(JSON.stringify(r)))},control:(0,o.jsx)(Be.Z,{size:"small",checked:t,inputProps:{style:{padding:0}}},void 0),label:`${e.deviceAlias} `},void 0)}),void 0)};var Rt=i(4673),St=i(8561);const kt=({value:e,operationSelect:t})=>(0,o.jsx)(r.Z,Object.assign({item:!0},{children:(0,o.jsx)(mt.Z,{style:{marginLeft:4},icon:(0,o.jsx)(St.Z,{},void 0),size:"small",label:(()=>{switch(e){case at.u6.DME:return`Descarga: ${at.WW[t.download.type]} ${t.download.dme.name}`;case at.u6.PAD:return`Descarga: ${at.WW[t.download.type]} ${t.download.pad.name}`;case at.u6.STOCK:return`Descarga: ${at.WW[t.download.type]}`;default:return""}})()},void 0)}),void 0),Tt=({value:e,operationSelect:t})=>(0,o.jsx)(r.Z,Object.assign({item:!0},{children:(0,o.jsx)(mt.Z,{style:{marginLeft:4},icon:(0,o.jsx)(St.Z,{},void 0),size:"small",label:(()=>{switch(e){case at.u6.STOCK:return`Carga:  ${at.WW[t.upload.type]}  ${t.upload.stock.name}`;case at.u6.PIT:return`Carga:  ${at.WW[t.upload.type]}  ${t.upload.pit.name}`;default:return""}})()},void 0)}),void 0);var Ct=i(7965);const It=e=>{const{operation:t,setOperationSelect:i,setRefresh:s}=e,[n,a]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=(0,h.useState)(""),[v,b]=(0,h.useState)("success"),O=t&&t.excavatorList&&t.excavatorList.length>0?t.excavatorList[0]:{};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(r.Z,Object.assign({container:!0,style:{paddingLeft:2},alignItems:"center"},{children:[(0,o.jsx)(r.Z,Object.assign({item:!0},{children:(0,o.jsxs)(g.Z,Object.assign({variant:"button",style:{paddingLeft:4,paddingTop:16}},{children:["Detalle de operación",(0,o.jsx)(mt.Z,{style:{marginLeft:4},icon:(0,o.jsx)(Ct.Z,{},void 0),size:"small",label:O.deviceAlias},void 0)]}),void 0)}),void 0),(0,o.jsx)(r.Z,Object.assign({item:!0},{children:(0,o.jsx)(mt.Z,{style:{marginLeft:4},icon:(0,o.jsx)(Ct.Z,{},void 0),size:"small",label:`Camiones: ${t?t.truckList.length:0}`},void 0)}),void 0),(0,o.jsx)(r.Z,Object.assign({item:!0},{children:(0,o.jsx)(mt.Z,{style:{marginLeft:4},icon:(0,o.jsx)(Ct.Z,{},void 0),size:"small",label:`Palas: ${t?t.excavatorList.length:0}`},void 0)}),void 0),(0,o.jsx)(r.Z,Object.assign({item:!0},{children:(0,o.jsx)(mt.Z,{style:{marginLeft:4},icon:(0,o.jsx)(Ct.Z,{},void 0),size:"small",label:`Ciclos: ${t?t.cycleList.length:0}`},void 0)}),void 0),(0,o.jsx)(r.Z,Object.assign({item:!0},{children:(0,o.jsx)((()=>{let e="";return t?(t.upload.pit&&(e="pit"),t.upload.stock&&(e="stock"),(0,o.jsx)(Tt,{value:e,operationSelect:t},void 0)):(0,o.jsx)(o.Fragment,{},void 0)}),{},void 0)}),void 0),(0,o.jsx)(r.Z,Object.assign({item:!0},{children:(0,o.jsx)((()=>{let e="";return t?(t.download.dme&&(e="dme"),t.download.pad&&(e="pad"),t.download.stock&&(e="stock"),(0,o.jsx)(kt,{value:e,operationSelect:t},void 0)):(0,o.jsx)(o.Fragment,{},void 0)}),{},void 0)}),void 0),t&&t.state===at.J8.Operando&&(0,o.jsxs)(tt.Z,Object.assign({m:.5},{children:[(0,o.jsx)(p.Z,Object.assign({variant:"contained",color:"primary",onClick:()=>{a(!0)},size:"small"},{children:"Finalizar Operación"}),void 0),(0,o.jsx)(je,{open:n,handleClose:()=>{a(!1)},handleConfirm:()=>{((e,t,i,o)=>{pt(void 0,void 0,void 0,(function*(){const s=yield(e=>{const t={authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2MzQzODk4MDUsInVzZXJuYW1lIjoiZGlzcGF0Y2hlciIsInJvbGUiOiJESVMifQ.IIKVGiv1ve4AST9EdQ1XjujDWDG3qCHzF57knK7A1Y8"},i=new xe.Operation,o=new xe.OperationRequest;return i.setId(e),o.setOperation(i),new Promise(((e,i)=>{Le.finalizeOperation(o,t,((t,o)=>{if(t)console.log("error message operations get",t.message),i(t);else{const t=o.toObject();console.log("operationFinalize",t),e(t)}}))}))})(e);t((e=>!e));let r="";s.operation&&(i("La operacion se ha finalizado exitosamente"),o("success")),s.truckErrorList.length>0&&s.truckErrorList.forEach((e=>{const t=1===e.state?"CARGANDO":"A DESCARGA";r+=` ${e.truckError.deviceAlias} => ${t},`})),""!==r&&(i(`La operacion no ha podido finalizarse porque el camión : ${r}`),o("error"))}))})(t.id,s,u,b),a(!1),c(!0)},title:"¿Esta seguro?",message:`Esta intentando finalizar la operacion  ${t.excavatorList[0].deviceAlias}, si ocurre algun error se le informará`},void 0)]}),void 0),(0,o.jsx)($e,{open:l,handleClose:()=>{i(void 0)},msg:d,severity:v},void 0)]}),void 0)},void 0)};function Et(e,t){return(0,o.jsx)(vt,{cy:e,index:t+1},e.id)}const Zt=function({cycles:e}){const[t,i]=(0,h.useState)([]),[s,r]=(0,h.useState)([]);return(0,h.useEffect)((()=>{const t=e.map((e=>e.truck)),o=[...new Set(t.map((e=>e.deviceId)))];i(o.map((e=>t.find((t=>t.deviceId===e)))))}),[e.length]),(0,o.jsxs)(b.Z,Object.assign({dense:!0,style:{margin:"0px 8px"}},{children:[(0,o.jsx)(bt.Z,Object.assign({id:"id-label"},{children:"Filtro por Camión"}),void 0),(0,o.jsx)(Ot.Z,Object.assign({labelId:"id-label",style:{width:"100%"},multiple:!0,value:s,onChange:e=>{const t=e.target.value;r(t)},renderValue:e=>(0,o.jsx)("div",{children:e.map((e=>(0,o.jsx)(mt.Z,{label:t.find((t=>t.deviceId===e)).deviceAlias,clickable:!0,deleteIcon:(0,o.jsx)(Rt.Z,{onMouseDown:e=>e.stopPropagation()},void 0),onDelete:t=>(e=>{const t=s.findIndex((t=>t===e));t>=0&&s.splice(t,1),r(JSON.parse(JSON.stringify(s)))})(e)},e)))},void 0)},{children:t.map((e=>(0,o.jsxs)(jt.Z,Object.assign({value:e.deviceId},{children:[(0,o.jsx)(Be.Z,{checked:!!s.find((t=>t===e.deviceId))},void 0),(0,o.jsx)(S.Z,{primary:e.deviceAlias},void 0)]}),e.deviceId)))}),void 0),(0,o.jsx)(tt.Z,{height:4},void 0),(0,o.jsx)(ht,{},void 0),0===s.length?e.map(Et):e.filter((e=>s.find((t=>t===e.truck.deviceId)))).map(Et)]}),void 0)},Mt=({operationSelect:e,setRefresh:t,setOperationSelect:i})=>{const n=(0,h.useState)([]),a=n[0],[l,c]=(0,h.useState)(!1),[d,u]=(0,h.useState)("success"),[v,O]=(0,h.useState)(""),m=e=>!!a.find((t=>e.id===t.id)),j=e&&e.cycleList;return e?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(r.Z,Object.assign({container:!0},{children:[(0,o.jsx)(It,{operation:e,setRefresh:t,setOperationSelect:i},void 0),(0,o.jsxs)(r.Z,Object.assign({container:!0},{children:[j&&(0,o.jsx)(r.Z,Object.assign({item:!0,md:6},{children:(0,o.jsx)(ft.Z,Object.assign({direction:"left",in:!!e,mountOnEnter:!0,unmountOnExit:!0},{children:(0,o.jsxs)(s.Z,Object.assign({elevation:4},{children:[(0,o.jsx)(g.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16}},{children:"Ciclos"}),void 0),(0,o.jsx)(Zt,{cycles:e.cycleList},void 0)]}),void 0)}),void 0)}),void 0),(0,o.jsx)(r.Z,Object.assign({item:!0,md:3,style:{paddingLeft:4}},{children:(0,o.jsx)(ft.Z,Object.assign({in:!!e,mountOnEnter:!0,unmountOnExit:!0},{children:(0,o.jsxs)(s.Z,Object.assign({elevation:4},{children:[(0,o.jsx)(g.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16}},{children:"Camiones"}),void 0),(0,o.jsxs)(b.Z,Object.assign({dense:!0},{children:[j&&e.truckList.map((e=>(0,o.jsx)(xt,{checked:m(e),useTrucksSelect:n,truck:e},e.id))),(0,o.jsx)(R.Z,{children:(0,o.jsx)(p.Z,Object.assign({onClick:()=>{a.length<=0?(c(!0),O("Debe seleccionar por lo menos un camión"),u("warning")):((e,t,i,o,s,r,n)=>{pt(void 0,void 0,void 0,(function*(){console.log("idOperation",e),console.log("eventRemoveTrucks",t);const a=yield((e,t)=>{const i={authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2MzQzODk4MDUsInVzZXJuYW1lIjoiZGlzcGF0Y2hlciIsInJvbGUiOiJESVMifQ.IIKVGiv1ve4AST9EdQ1XjujDWDG3qCHzF57knK7A1Y8"},o=new xe.Operation,s=new xe.OperationRequest;return o.setId(t),e.map((e=>{const t=new Me.Truck;t.setId(e.id),t.setDeviceId(e.deviceId),t.setDeviceAlias(e.deviceAlias),t.setDeviceInterval(e.deviceInterval),t.setDescription(e.description),t.setPlate(e.plate),o.addTruck(t)})),s.setOperation(o),new Promise(((e,t)=>{Le.removeTrucksOperation(s,i,((i,o)=>{if(i)console.log("error message operations get",i.message),t(i);else{const t=o.toObject();console.log("removeTrucks",t),e(t)}}))}))})(t,e);console.log("responseRemoveTrucks",a),i((e=>!e)),o(!0),s("Camiones liberados"),r("success"),setTimeout((()=>{n(void 0)}),100),console.log("response",a)}))})(e.id,a,t,c,O,u,i)},color:"secondary",variant:"contained",size:"small",disabled:0===a.length},{children:"Liberar Camiones"}),void 0)},void 0)]}),void 0)]}),void 0)}),void 0)}),void 0),(0,o.jsx)(r.Z,Object.assign({item:!0,md:3,style:{paddingLeft:4}},{children:(0,o.jsx)(ft.Z,Object.assign({in:!!e,mountOnEnter:!0,unmountOnExit:!0},{children:(0,o.jsxs)(s.Z,Object.assign({elevation:4},{children:[(0,o.jsx)(g.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16}},{children:"Rutas"}),void 0),(0,o.jsx)(b.Z,Object.assign({dense:!0},{children:j&&e.roadList.map((e=>(0,o.jsx)(R.Z,{children:(0,o.jsx)(S.Z,{primary:`${e.name}`},void 0)},e.id)))}),void 0)]}),void 0)}),void 0)}),void 0)]}),void 0),(0,o.jsx)($e,{open:l,handleClose:()=>{c(!1),i(void 0)},msg:v,severity:d},void 0)]}),void 0)},void 0):(0,o.jsx)(o.Fragment,{},void 0)};var Dt=i(7623),zt=i(8920),Lt=i(6211),wt=i(3758);const _t=(0,d.Z)((e=>(0,Dt.Z)({fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)}})));function Ft({actionClick:e,Icon:t,visible:i,disabled:s,right:r,color:n,keyAction:a}){const l=_t(),c=(0,zt.Z)();(0,h.useEffect)((()=>{const t=t=>{console.log(t.key),t.key!==(null==a?void 0:a.toUpperCase())&&t.key!==(null==a?void 0:a.toLocaleLowerCase())&&t.key!==a||e()};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}),[]);const p={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen};return(0,o.jsx)(Lt.Z,Object.assign({in:i,timeout:p,unmountOnExit:!0},{children:(0,o.jsx)(wt.Z,Object.assign({disabled:s,onClick:e,className:l.fab,style:{right:r},size:"small",color:n||"primary"},{children:(0,o.jsx)(t,{},void 0)}),void 0)}),void 0)}const Bt=(0,i(7850).A)(),At=(0,f.Z)((e=>({root:{flexDirection:"column","& .ant-empty-img-1":{fill:"light"===e.palette.type?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:"light"===e.palette.type?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:"light"===e.palette.type?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:"light"===e.palette.type?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:"light"===e.palette.type?"0.8":"0.08",fill:"light"===e.palette.type?"#f5f5f5":"#fff"}},label:{marginTop:e.spacing(1)}})),{defaultTheme:Bt});function Wt(){const e=At();return(0,o.jsxs)(it.nik,Object.assign({className:e.root},{children:[(0,o.jsx)("svg",Object.assign({width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false"},{children:(0,o.jsxs)("g",Object.assign({fill:"none",fillRule:"evenodd"},{children:[(0,o.jsxs)("g",Object.assign({transform:"translate(24 31.67)"},{children:[(0,o.jsx)("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"},void 0),(0,o.jsx)("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"},void 0),(0,o.jsx)("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"},void 0),(0,o.jsx)("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"},void 0)]}),void 0),(0,o.jsx)("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"},void 0),(0,o.jsxs)("g",Object.assign({className:"ant-empty-img-4",transform:"translate(149.65 15.383)"},{children:[(0,o.jsx)("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"},void 0),(0,o.jsx)("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"},void 0)]}),void 0)]}),void 0)}),void 0),(0,o.jsx)("div",Object.assign({className:e.label},{children:"Sin datos"}),void 0)]}),void 0)}const Nt=(e,t)=>{return i=void 0,o=void 0,r=function*(){t(!0),(()=>{const e={authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2MzQzODk4MDUsInVzZXJuYW1lIjoiZGlzcGF0Y2hlciIsInJvbGUiOiJESVMifQ.IIKVGiv1ve4AST9EdQ1XjujDWDG3qCHzF57knK7A1Y8"},t=new xe.Operation,i=new xe.OperationRequest;return i.setOperation(t),new Promise(((t,o)=>{Le.retrieveOperations(i,e,((e,i)=>{if(e)console.log("error message operations get",e.message),o(e);else{const e=i.toObject();console.log("operations",i),t(e.operationsList?e.operationsList:[])}}))}))})().then((i=>{console.log("opers",i),e(i),t(!1)})).catch((i=>{e([]),console.log(i),t(!1)}))},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{l(r.next(e))}catch(e){t(e)}}function a(e){try{l(r.throw(e))}catch(e){t(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(n,a)}l((r=r.apply(i,o||[])).next())}));var i,o,s,r},Ut=e=>{if(!e)return"";const t=at.PW[e.type];switch(e.type){case 1:return e.pit&&e.pit.projectList&&e.pit.projectList.length>0&&e.pit.projectList[0].polygonList&&e.pit.projectList[0].polygonList.length>0?`${e.pit.projectList[0].name} - ${e.pit.projectList[0].polygonList[0].name}`:"";case 3:return e[t]&&e[t].cellList&&e[t].cellList.length>0?e[t].cellList[0].name:"";default:return""}},$t=e=>{if(!e&&1!==e.type)return"";const t=at.PW[e.type];return`${"dme"===t?"Desm.":"Mine."} ${e[t]&&e[t].cellList&&e[t].cellList.length>0?e[t].cellList[0].name:""}`},Pt=({setIsNew:e})=>{const[t,i]=(0,h.useState)([]),[n,a]=(0,h.useState)([]),[l,c]=(0,h.useState)(!1),[d,u]=(0,h.useState)(!0),[v,b]=(0,h.useState)(null),[O,m]=(0,h.useState)(null);(0,h.useEffect)((()=>{a(t.map((e=>Object.assign(Object.assign({},e),{startTime:new Date(1e3*e.startTime.seconds),trunks:e.truckList.map((e=>e.deviceAlias)),excavator:e.excavatorList.map((e=>e.deviceAlias)),typeUpload:at.WW[e.upload.type],labelUpload:`${at.WW[e.upload.type]} ${Ut(e.upload)}`,labelDownload:`${$t(e.download)}`,typeDownload:at.WW[e.download.type],labelstate:at.J8[e.state],cycles:e.cycleList.length}))))}),[t]);const[j,f]=(0,h.useState)([{field:"startTime",sort:"desc"}]);(0,h.useEffect)((()=>{const e=setInterval((()=>{R()}),3e5);return()=>{clearInterval(e)}}),[]),(0,h.useEffect)((()=>{if(v){const e=t.findIndex((e=>v.id===e.id));b(t[e])}}),[t]);const[y,x]=(0,h.useState)(!1);(0,h.useEffect)((()=>{Nt(i,u)}),[l]);const R=()=>{c((e=>!e))};return(0,o.jsx)(tt.Z,Object.assign({m:2},{children:(0,o.jsxs)(r.Z,Object.assign({style:{height:v?"100%":"90vh",overflowY:"scroll",display:"flex",flexDirection:"column"}},{children:[(0,o.jsx)(tt.Z,Object.assign({m:.5},{children:(0,o.jsx)(g.Z,Object.assign({variant:"h5"},{children:"Lista de operaciones"}),void 0)}),void 0),(0,o.jsx)(s.Z,Object.assign({elevation:2,style:{height:"100%",margin:4}},{children:(0,o.jsx)(tt.Z,Object.assign({p:.5,style:{height:"100%"}},{children:(0,o.jsxs)(r.Z,Object.assign({container:!0,direction:"column",style:{height:"100%"}},{children:[(0,o.jsxs)(r.Z,Object.assign({item:!0},{children:[(0,o.jsxs)("div",Object.assign({style:{display:v||O?"none":"block"}},{children:[(0,o.jsx)(p.Z,Object.assign({onClick:()=>e(!0),color:"primary",variant:"contained",size:"small",startIcon:(0,o.jsx)(ot.Z,{fontSize:"small"},void 0)},{children:"Nueva"}),void 0),(0,o.jsx)(p.Z,Object.assign({onClick:()=>{x(!0)},style:{marginLeft:8},color:"secondary",variant:"outlined",size:"small",startIcon:(0,o.jsx)(st.Z,{fontSize:"small"},void 0)},{children:"Reasignacion"}),void 0)]}),void 0),(0,o.jsx)(Ft,{visible:!d,actionClick:R,Icon:rt.Z,disabled:d,color:"secondary",right:v?56:8,keyAction:"R"},void 0),(0,o.jsx)(Ft,{visible:!!v,actionClick:()=>{b(void 0),m(void 0),c((e=>!e))},Icon:Ke.Z,disabled:!1,right:8,keyAction:"Backspace"},void 0)]}),void 0),(0,o.jsx)(r.Z,Object.assign({item:!0,style:{display:v?"none":"flex",flex:1}},{children:(0,o.jsx)(it._$r,{rows:n,columns:lt({setOperationSelect:b,setReassignSelect:m}),components:{NoRowsOverlay:Wt},loading:d,density:"compact",sortModel:j,onSortModelChange:e=>(e=>{0!=e.length?e[0].field!=j[0].field||e[0].sort!=j[0].sort?f(e):console.log("else"):"desc"==j[0].sort?f([Object.assign(Object.assign({},j[0]),{sort:"asc"})]):f([Object.assign(Object.assign({},j[0]),{sort:"desc"})])})(e)},void 0)}),void 0),(0,o.jsx)(Mt,Object.assign({},{operationSelect:v,setRefresh:c,setOperationSelect:b}),void 0)]}),void 0)}),void 0)}),void 0),(0,o.jsx)(Je,{open:y,setOpen:x,setRefresh:c,operations:t},void 0),(0,o.jsx)(dt,Object.assign({operations:t,operation:O,setOperation:m},{setRefresh:c}),void 0)]}),void 0)}),void 0)},Gt=(0,h.createContext)(null),Jt=()=>{const[e,t]=(0,h.useState)(-78.196),[i,s]=(0,h.useState)(-7.6163),n=(0,h.useRef)(null),a=(0,h.useRef)(null),[l,c]=(0,h.useState)(14.81),[p,d]=(0,h.useState)(!1);return(0,h.useEffect)((()=>{p||(a.current=null)}),[p]),(0,o.jsx)(Gt.Provider,Object.assign({value:a.current},{children:p?(0,o.jsxs)(r.Z,Object.assign({container:!0},{children:[(0,o.jsx)(Qe,{map:a,setZoom:c,setIsNew:d},void 0),(0,o.jsx)(et.Z,Object.assign({map:a,dragRotate:!1,style:"mapbox://styles/dispatchgat/ckqqsfc2y46bo17sf1y29zwnj",mapContainer:n,bearing:0,pitch:15},{lat:i,lng:e,zoom:l,setLat:s,setLng:t,setZoom:c,setLoad:()=>{}}),"map1")]}),void 0):(0,o.jsx)(Pt,{setIsNew:d},void 0)}),void 0)};function qt(){return(0,o.jsx)("div",{children:(0,o.jsx)(Jt,{},void 0)},void 0)}},2799:(e,t,i)=>{var o=i(3019),s=o,r=Function("return this")(),n=i(3779);s.object.extend(proto,n);var a=i(6034);s.object.extend(proto,a);var l=i(3112);s.object.extend(proto,l);var c=i(2357);s.object.extend(proto,c);var p=i(1783);s.object.extend(proto,p);var d=i(1134);s.object.extend(proto,d),s.exportSymbol("proto.pb.Operation",null,r),s.exportSymbol("proto.pb.Operation.Shift",null,r),s.exportSymbol("proto.pb.Operation.State",null,r),s.exportSymbol("proto.pb.OperationFinalizeResponse",null,r),s.exportSymbol("proto.pb.OperationReassigmentRequest",null,r),s.exportSymbol("proto.pb.OperationReassigmentResponse",null,r),s.exportSymbol("proto.pb.OperationRequest",null,r),s.exportSymbol("proto.pb.OperationResponse",null,r),s.exportSymbol("proto.pb.OperationsResponse",null,r),s.exportSymbol("proto.pb.TruckStateMessage",null,r),s.exportSymbol("proto.pb.TruckStateMessage.State",null,r),proto.pb.Operation=function(e){o.Message.initialize(this,e,0,-1,proto.pb.Operation.repeatedFields_,null)},s.inherits(proto.pb.Operation,o.Message),s.DEBUG&&!COMPILED&&(proto.pb.Operation.displayName="proto.pb.Operation"),proto.pb.OperationRequest=function(e){o.Message.initialize(this,e,0,-1,null,null)},s.inherits(proto.pb.OperationRequest,o.Message),s.DEBUG&&!COMPILED&&(proto.pb.OperationRequest.displayName="proto.pb.OperationRequest"),proto.pb.OperationResponse=function(e){o.Message.initialize(this,e,0,-1,null,null)},s.inherits(proto.pb.OperationResponse,o.Message),s.DEBUG&&!COMPILED&&(proto.pb.OperationResponse.displayName="proto.pb.OperationResponse"),proto.pb.TruckStateMessage=function(e){o.Message.initialize(this,e,0,-1,null,null)},s.inherits(proto.pb.TruckStateMessage,o.Message),s.DEBUG&&!COMPILED&&(proto.pb.TruckStateMessage.displayName="proto.pb.TruckStateMessage"),proto.pb.OperationsResponse=function(e){o.Message.initialize(this,e,0,-1,proto.pb.OperationsResponse.repeatedFields_,null)},s.inherits(proto.pb.OperationsResponse,o.Message),s.DEBUG&&!COMPILED&&(proto.pb.OperationsResponse.displayName="proto.pb.OperationsResponse"),proto.pb.OperationReassigmentRequest=function(e){o.Message.initialize(this,e,0,-1,proto.pb.OperationReassigmentRequest.repeatedFields_,null)},s.inherits(proto.pb.OperationReassigmentRequest,o.Message),s.DEBUG&&!COMPILED&&(proto.pb.OperationReassigmentRequest.displayName="proto.pb.OperationReassigmentRequest"),proto.pb.OperationReassigmentResponse=function(e){o.Message.initialize(this,e,0,-1,proto.pb.OperationReassigmentResponse.repeatedFields_,null)},s.inherits(proto.pb.OperationReassigmentResponse,o.Message),s.DEBUG&&!COMPILED&&(proto.pb.OperationReassigmentResponse.displayName="proto.pb.OperationReassigmentResponse"),proto.pb.OperationFinalizeResponse=function(e){o.Message.initialize(this,e,0,-1,proto.pb.OperationFinalizeResponse.repeatedFields_,null)},s.inherits(proto.pb.OperationFinalizeResponse,o.Message),s.DEBUG&&!COMPILED&&(proto.pb.OperationFinalizeResponse.displayName="proto.pb.OperationFinalizeResponse"),proto.pb.Operation.repeatedFields_=[12,13,14,15],o.Message.GENERATE_TO_OBJECT&&(proto.pb.Operation.prototype.toObject=function(e){return proto.pb.Operation.toObject(e,this)},proto.pb.Operation.toObject=function(e,t){var i,s={id:o.Message.getFieldWithDefault(t,1,""),name:o.Message.getFieldWithDefault(t,2,""),description:o.Message.getFieldWithDefault(t,3,""),startTime:(i=t.getStartTime())&&d.Timestamp.toObject(e,i),endTime:(i=t.getEndTime())&&d.Timestamp.toObject(e,i),distance:o.Message.getFloatingPointFieldWithDefault(t,6,0),duration:o.Message.getFloatingPointFieldWithDefault(t,7,0),shift:o.Message.getFieldWithDefault(t,8,0),state:o.Message.getFieldWithDefault(t,9,0),upload:(i=t.getUpload())&&p.Upload.toObject(e,i),download:(i=t.getDownload())&&p.Download.toObject(e,i),roadList:o.Message.toObjectList(t.getRoadList(),l.Road.toObject,e),truckList:o.Message.toObjectList(t.getTruckList(),n.Truck.toObject,e),excavatorList:o.Message.toObjectList(t.getExcavatorList(),a.Excavator.toObject,e),cycleList:o.Message.toObjectList(t.getCycleList(),c.Cycle.toObject,e)};return e&&(s.$jspbMessageInstance=t),s}),proto.pb.Operation.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.Operation;return proto.pb.Operation.deserializeBinaryFromReader(i,t)},proto.pb.Operation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=t.readString();e.setId(i);break;case 2:i=t.readString(),e.setName(i);break;case 3:i=t.readString(),e.setDescription(i);break;case 4:i=new d.Timestamp,t.readMessage(i,d.Timestamp.deserializeBinaryFromReader),e.setStartTime(i);break;case 5:i=new d.Timestamp,t.readMessage(i,d.Timestamp.deserializeBinaryFromReader),e.setEndTime(i);break;case 6:i=t.readDouble(),e.setDistance(i);break;case 7:i=t.readDouble(),e.setDuration(i);break;case 8:i=t.readEnum(),e.setShift(i);break;case 9:i=t.readEnum(),e.setState(i);break;case 10:i=new p.Upload,t.readMessage(i,p.Upload.deserializeBinaryFromReader),e.setUpload(i);break;case 11:i=new p.Download,t.readMessage(i,p.Download.deserializeBinaryFromReader),e.setDownload(i);break;case 12:i=new l.Road,t.readMessage(i,l.Road.deserializeBinaryFromReader),e.addRoad(i);break;case 13:i=new n.Truck,t.readMessage(i,n.Truck.deserializeBinaryFromReader),e.addTruck(i);break;case 14:i=new a.Excavator,t.readMessage(i,a.Excavator.deserializeBinaryFromReader),e.addExcavator(i);break;case 15:i=new c.Cycle,t.readMessage(i,c.Cycle.deserializeBinaryFromReader),e.addCycle(i);break;default:t.skipField()}return e},proto.pb.Operation.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.Operation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.Operation.serializeBinaryToWriter=function(e,t){var i=void 0;(i=e.getId()).length>0&&t.writeString(1,i),(i=e.getName()).length>0&&t.writeString(2,i),(i=e.getDescription()).length>0&&t.writeString(3,i),null!=(i=e.getStartTime())&&t.writeMessage(4,i,d.Timestamp.serializeBinaryToWriter),null!=(i=e.getEndTime())&&t.writeMessage(5,i,d.Timestamp.serializeBinaryToWriter),0!==(i=e.getDistance())&&t.writeDouble(6,i),0!==(i=e.getDuration())&&t.writeDouble(7,i),0!==(i=e.getShift())&&t.writeEnum(8,i),0!==(i=e.getState())&&t.writeEnum(9,i),null!=(i=e.getUpload())&&t.writeMessage(10,i,p.Upload.serializeBinaryToWriter),null!=(i=e.getDownload())&&t.writeMessage(11,i,p.Download.serializeBinaryToWriter),(i=e.getRoadList()).length>0&&t.writeRepeatedMessage(12,i,l.Road.serializeBinaryToWriter),(i=e.getTruckList()).length>0&&t.writeRepeatedMessage(13,i,n.Truck.serializeBinaryToWriter),(i=e.getExcavatorList()).length>0&&t.writeRepeatedMessage(14,i,a.Excavator.serializeBinaryToWriter),(i=e.getCycleList()).length>0&&t.writeRepeatedMessage(15,i,c.Cycle.serializeBinaryToWriter)},proto.pb.Operation.Shift={UNKNOWN_SHIFT:0,NIGHT:1,DAY:2},proto.pb.Operation.State={UNKNOWN_STATE:0,PENDING:1,OPENED:2,CLOSED:3},proto.pb.Operation.prototype.getId=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.pb.Operation.prototype.setId=function(e){return o.Message.setProto3StringField(this,1,e)},proto.pb.Operation.prototype.getName=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.pb.Operation.prototype.setName=function(e){return o.Message.setProto3StringField(this,2,e)},proto.pb.Operation.prototype.getDescription=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.pb.Operation.prototype.setDescription=function(e){return o.Message.setProto3StringField(this,3,e)},proto.pb.Operation.prototype.getStartTime=function(){return o.Message.getWrapperField(this,d.Timestamp,4)},proto.pb.Operation.prototype.setStartTime=function(e){return o.Message.setWrapperField(this,4,e)},proto.pb.Operation.prototype.clearStartTime=function(){return this.setStartTime(void 0)},proto.pb.Operation.prototype.hasStartTime=function(){return null!=o.Message.getField(this,4)},proto.pb.Operation.prototype.getEndTime=function(){return o.Message.getWrapperField(this,d.Timestamp,5)},proto.pb.Operation.prototype.setEndTime=function(e){return o.Message.setWrapperField(this,5,e)},proto.pb.Operation.prototype.clearEndTime=function(){return this.setEndTime(void 0)},proto.pb.Operation.prototype.hasEndTime=function(){return null!=o.Message.getField(this,5)},proto.pb.Operation.prototype.getDistance=function(){return o.Message.getFloatingPointFieldWithDefault(this,6,0)},proto.pb.Operation.prototype.setDistance=function(e){return o.Message.setProto3FloatField(this,6,e)},proto.pb.Operation.prototype.getDuration=function(){return o.Message.getFloatingPointFieldWithDefault(this,7,0)},proto.pb.Operation.prototype.setDuration=function(e){return o.Message.setProto3FloatField(this,7,e)},proto.pb.Operation.prototype.getShift=function(){return o.Message.getFieldWithDefault(this,8,0)},proto.pb.Operation.prototype.setShift=function(e){return o.Message.setProto3EnumField(this,8,e)},proto.pb.Operation.prototype.getState=function(){return o.Message.getFieldWithDefault(this,9,0)},proto.pb.Operation.prototype.setState=function(e){return o.Message.setProto3EnumField(this,9,e)},proto.pb.Operation.prototype.getUpload=function(){return o.Message.getWrapperField(this,p.Upload,10)},proto.pb.Operation.prototype.setUpload=function(e){return o.Message.setWrapperField(this,10,e)},proto.pb.Operation.prototype.clearUpload=function(){return this.setUpload(void 0)},proto.pb.Operation.prototype.hasUpload=function(){return null!=o.Message.getField(this,10)},proto.pb.Operation.prototype.getDownload=function(){return o.Message.getWrapperField(this,p.Download,11)},proto.pb.Operation.prototype.setDownload=function(e){return o.Message.setWrapperField(this,11,e)},proto.pb.Operation.prototype.clearDownload=function(){return this.setDownload(void 0)},proto.pb.Operation.prototype.hasDownload=function(){return null!=o.Message.getField(this,11)},proto.pb.Operation.prototype.getRoadList=function(){return o.Message.getRepeatedWrapperField(this,l.Road,12)},proto.pb.Operation.prototype.setRoadList=function(e){return o.Message.setRepeatedWrapperField(this,12,e)},proto.pb.Operation.prototype.addRoad=function(e,t){return o.Message.addToRepeatedWrapperField(this,12,e,proto.pb.Road,t)},proto.pb.Operation.prototype.clearRoadList=function(){return this.setRoadList([])},proto.pb.Operation.prototype.getTruckList=function(){return o.Message.getRepeatedWrapperField(this,n.Truck,13)},proto.pb.Operation.prototype.setTruckList=function(e){return o.Message.setRepeatedWrapperField(this,13,e)},proto.pb.Operation.prototype.addTruck=function(e,t){return o.Message.addToRepeatedWrapperField(this,13,e,proto.pb.Truck,t)},proto.pb.Operation.prototype.clearTruckList=function(){return this.setTruckList([])},proto.pb.Operation.prototype.getExcavatorList=function(){return o.Message.getRepeatedWrapperField(this,a.Excavator,14)},proto.pb.Operation.prototype.setExcavatorList=function(e){return o.Message.setRepeatedWrapperField(this,14,e)},proto.pb.Operation.prototype.addExcavator=function(e,t){return o.Message.addToRepeatedWrapperField(this,14,e,proto.pb.Excavator,t)},proto.pb.Operation.prototype.clearExcavatorList=function(){return this.setExcavatorList([])},proto.pb.Operation.prototype.getCycleList=function(){return o.Message.getRepeatedWrapperField(this,c.Cycle,15)},proto.pb.Operation.prototype.setCycleList=function(e){return o.Message.setRepeatedWrapperField(this,15,e)},proto.pb.Operation.prototype.addCycle=function(e,t){return o.Message.addToRepeatedWrapperField(this,15,e,proto.pb.Cycle,t)},proto.pb.Operation.prototype.clearCycleList=function(){return this.setCycleList([])},o.Message.GENERATE_TO_OBJECT&&(proto.pb.OperationRequest.prototype.toObject=function(e){return proto.pb.OperationRequest.toObject(e,this)},proto.pb.OperationRequest.toObject=function(e,t){var i,o={operation:(i=t.getOperation())&&proto.pb.Operation.toObject(e,i)};return e&&(o.$jspbMessageInstance=t),o}),proto.pb.OperationRequest.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.OperationRequest;return proto.pb.OperationRequest.deserializeBinaryFromReader(i,t)},proto.pb.OperationRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var i=new proto.pb.Operation;t.readMessage(i,proto.pb.Operation.deserializeBinaryFromReader),e.setOperation(i)}else t.skipField();return e},proto.pb.OperationRequest.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.OperationRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.OperationRequest.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.getOperation())&&t.writeMessage(1,i,proto.pb.Operation.serializeBinaryToWriter)},proto.pb.OperationRequest.prototype.getOperation=function(){return o.Message.getWrapperField(this,proto.pb.Operation,1)},proto.pb.OperationRequest.prototype.setOperation=function(e){return o.Message.setWrapperField(this,1,e)},proto.pb.OperationRequest.prototype.clearOperation=function(){return this.setOperation(void 0)},proto.pb.OperationRequest.prototype.hasOperation=function(){return null!=o.Message.getField(this,1)},o.Message.GENERATE_TO_OBJECT&&(proto.pb.OperationResponse.prototype.toObject=function(e){return proto.pb.OperationResponse.toObject(e,this)},proto.pb.OperationResponse.toObject=function(e,t){var i,o={operation:(i=t.getOperation())&&proto.pb.Operation.toObject(e,i)};return e&&(o.$jspbMessageInstance=t),o}),proto.pb.OperationResponse.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.OperationResponse;return proto.pb.OperationResponse.deserializeBinaryFromReader(i,t)},proto.pb.OperationResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var i=new proto.pb.Operation;t.readMessage(i,proto.pb.Operation.deserializeBinaryFromReader),e.setOperation(i)}else t.skipField();return e},proto.pb.OperationResponse.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.OperationResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.OperationResponse.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.getOperation())&&t.writeMessage(1,i,proto.pb.Operation.serializeBinaryToWriter)},proto.pb.OperationResponse.prototype.getOperation=function(){return o.Message.getWrapperField(this,proto.pb.Operation,1)},proto.pb.OperationResponse.prototype.setOperation=function(e){return o.Message.setWrapperField(this,1,e)},proto.pb.OperationResponse.prototype.clearOperation=function(){return this.setOperation(void 0)},proto.pb.OperationResponse.prototype.hasOperation=function(){return null!=o.Message.getField(this,1)},o.Message.GENERATE_TO_OBJECT&&(proto.pb.TruckStateMessage.prototype.toObject=function(e){return proto.pb.TruckStateMessage.toObject(e,this)},proto.pb.TruckStateMessage.toObject=function(e,t){var i,s={truckError:(i=t.getTruckError())&&n.Truck.toObject(e,i),state:o.Message.getFieldWithDefault(t,2,0)};return e&&(s.$jspbMessageInstance=t),s}),proto.pb.TruckStateMessage.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.TruckStateMessage;return proto.pb.TruckStateMessage.deserializeBinaryFromReader(i,t)},proto.pb.TruckStateMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new n.Truck;t.readMessage(i,n.Truck.deserializeBinaryFromReader),e.setTruckError(i);break;case 2:i=t.readEnum(),e.setState(i);break;default:t.skipField()}return e},proto.pb.TruckStateMessage.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.TruckStateMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.TruckStateMessage.serializeBinaryToWriter=function(e,t){var i=void 0;null!=(i=e.getTruckError())&&t.writeMessage(1,i,n.Truck.serializeBinaryToWriter),0!==(i=e.getState())&&t.writeEnum(2,i)},proto.pb.TruckStateMessage.State={UNKNOWN_STATE:0,UPLOAD:1,DOWNLOAD:2,TO_UPLOAD:3,TO_DOWNLOAD:4,WAITING:5,QUEUE:6},proto.pb.TruckStateMessage.prototype.getTruckError=function(){return o.Message.getWrapperField(this,n.Truck,1)},proto.pb.TruckStateMessage.prototype.setTruckError=function(e){return o.Message.setWrapperField(this,1,e)},proto.pb.TruckStateMessage.prototype.clearTruckError=function(){return this.setTruckError(void 0)},proto.pb.TruckStateMessage.prototype.hasTruckError=function(){return null!=o.Message.getField(this,1)},proto.pb.TruckStateMessage.prototype.getState=function(){return o.Message.getFieldWithDefault(this,2,0)},proto.pb.TruckStateMessage.prototype.setState=function(e){return o.Message.setProto3EnumField(this,2,e)},proto.pb.OperationsResponse.repeatedFields_=[1],o.Message.GENERATE_TO_OBJECT&&(proto.pb.OperationsResponse.prototype.toObject=function(e){return proto.pb.OperationsResponse.toObject(e,this)},proto.pb.OperationsResponse.toObject=function(e,t){var i={operationsList:o.Message.toObjectList(t.getOperationsList(),proto.pb.Operation.toObject,e)};return e&&(i.$jspbMessageInstance=t),i}),proto.pb.OperationsResponse.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.OperationsResponse;return proto.pb.OperationsResponse.deserializeBinaryFromReader(i,t)},proto.pb.OperationsResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var i=new proto.pb.Operation;t.readMessage(i,proto.pb.Operation.deserializeBinaryFromReader),e.addOperations(i)}else t.skipField();return e},proto.pb.OperationsResponse.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.OperationsResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.OperationsResponse.serializeBinaryToWriter=function(e,t){var i;(i=e.getOperationsList()).length>0&&t.writeRepeatedMessage(1,i,proto.pb.Operation.serializeBinaryToWriter)},proto.pb.OperationsResponse.prototype.getOperationsList=function(){return o.Message.getRepeatedWrapperField(this,proto.pb.Operation,1)},proto.pb.OperationsResponse.prototype.setOperationsList=function(e){return o.Message.setRepeatedWrapperField(this,1,e)},proto.pb.OperationsResponse.prototype.addOperations=function(e,t){return o.Message.addToRepeatedWrapperField(this,1,e,proto.pb.Operation,t)},proto.pb.OperationsResponse.prototype.clearOperationsList=function(){return this.setOperationsList([])},proto.pb.OperationReassigmentRequest.repeatedFields_=[1],o.Message.GENERATE_TO_OBJECT&&(proto.pb.OperationReassigmentRequest.prototype.toObject=function(e){return proto.pb.OperationReassigmentRequest.toObject(e,this)},proto.pb.OperationReassigmentRequest.toObject=function(e,t){var i,s={truckList:o.Message.toObjectList(t.getTruckList(),n.Truck.toObject,e),operationDestination:(i=t.getOperationDestination())&&proto.pb.Operation.toObject(e,i)};return e&&(s.$jspbMessageInstance=t),s}),proto.pb.OperationReassigmentRequest.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.OperationReassigmentRequest;return proto.pb.OperationReassigmentRequest.deserializeBinaryFromReader(i,t)},proto.pb.OperationReassigmentRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new n.Truck;t.readMessage(i,n.Truck.deserializeBinaryFromReader),e.addTruck(i);break;case 2:i=new proto.pb.Operation,t.readMessage(i,proto.pb.Operation.deserializeBinaryFromReader),e.setOperationDestination(i);break;default:t.skipField()}return e},proto.pb.OperationReassigmentRequest.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.OperationReassigmentRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.OperationReassigmentRequest.serializeBinaryToWriter=function(e,t){var i=void 0;(i=e.getTruckList()).length>0&&t.writeRepeatedMessage(1,i,n.Truck.serializeBinaryToWriter),null!=(i=e.getOperationDestination())&&t.writeMessage(2,i,proto.pb.Operation.serializeBinaryToWriter)},proto.pb.OperationReassigmentRequest.prototype.getTruckList=function(){return o.Message.getRepeatedWrapperField(this,n.Truck,1)},proto.pb.OperationReassigmentRequest.prototype.setTruckList=function(e){return o.Message.setRepeatedWrapperField(this,1,e)},proto.pb.OperationReassigmentRequest.prototype.addTruck=function(e,t){return o.Message.addToRepeatedWrapperField(this,1,e,proto.pb.Truck,t)},proto.pb.OperationReassigmentRequest.prototype.clearTruckList=function(){return this.setTruckList([])},proto.pb.OperationReassigmentRequest.prototype.getOperationDestination=function(){return o.Message.getWrapperField(this,proto.pb.Operation,2)},proto.pb.OperationReassigmentRequest.prototype.setOperationDestination=function(e){return o.Message.setWrapperField(this,2,e)},proto.pb.OperationReassigmentRequest.prototype.clearOperationDestination=function(){return this.setOperationDestination(void 0)},proto.pb.OperationReassigmentRequest.prototype.hasOperationDestination=function(){return null!=o.Message.getField(this,2)},proto.pb.OperationReassigmentResponse.repeatedFields_=[2],o.Message.GENERATE_TO_OBJECT&&(proto.pb.OperationReassigmentResponse.prototype.toObject=function(e){return proto.pb.OperationReassigmentResponse.toObject(e,this)},proto.pb.OperationReassigmentResponse.toObject=function(e,t){var i,s={operation:(i=t.getOperation())&&proto.pb.Operation.toObject(e,i),truckErrorList:o.Message.toObjectList(t.getTruckErrorList(),proto.pb.TruckStateMessage.toObject,e)};return e&&(s.$jspbMessageInstance=t),s}),proto.pb.OperationReassigmentResponse.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.OperationReassigmentResponse;return proto.pb.OperationReassigmentResponse.deserializeBinaryFromReader(i,t)},proto.pb.OperationReassigmentResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new proto.pb.Operation;t.readMessage(i,proto.pb.Operation.deserializeBinaryFromReader),e.setOperation(i);break;case 2:i=new proto.pb.TruckStateMessage,t.readMessage(i,proto.pb.TruckStateMessage.deserializeBinaryFromReader),e.addTruckError(i);break;default:t.skipField()}return e},proto.pb.OperationReassigmentResponse.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.OperationReassigmentResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.OperationReassigmentResponse.serializeBinaryToWriter=function(e,t){var i=void 0;null!=(i=e.getOperation())&&t.writeMessage(1,i,proto.pb.Operation.serializeBinaryToWriter),(i=e.getTruckErrorList()).length>0&&t.writeRepeatedMessage(2,i,proto.pb.TruckStateMessage.serializeBinaryToWriter)},proto.pb.OperationReassigmentResponse.prototype.getOperation=function(){return o.Message.getWrapperField(this,proto.pb.Operation,1)},proto.pb.OperationReassigmentResponse.prototype.setOperation=function(e){return o.Message.setWrapperField(this,1,e)},proto.pb.OperationReassigmentResponse.prototype.clearOperation=function(){return this.setOperation(void 0)},proto.pb.OperationReassigmentResponse.prototype.hasOperation=function(){return null!=o.Message.getField(this,1)},proto.pb.OperationReassigmentResponse.prototype.getTruckErrorList=function(){return o.Message.getRepeatedWrapperField(this,proto.pb.TruckStateMessage,2)},proto.pb.OperationReassigmentResponse.prototype.setTruckErrorList=function(e){return o.Message.setRepeatedWrapperField(this,2,e)},proto.pb.OperationReassigmentResponse.prototype.addTruckError=function(e,t){return o.Message.addToRepeatedWrapperField(this,2,e,proto.pb.TruckStateMessage,t)},proto.pb.OperationReassigmentResponse.prototype.clearTruckErrorList=function(){return this.setTruckErrorList([])},proto.pb.OperationFinalizeResponse.repeatedFields_=[2],o.Message.GENERATE_TO_OBJECT&&(proto.pb.OperationFinalizeResponse.prototype.toObject=function(e){return proto.pb.OperationFinalizeResponse.toObject(e,this)},proto.pb.OperationFinalizeResponse.toObject=function(e,t){var i,s={operation:(i=t.getOperation())&&proto.pb.Operation.toObject(e,i),truckErrorList:o.Message.toObjectList(t.getTruckErrorList(),proto.pb.TruckStateMessage.toObject,e)};return e&&(s.$jspbMessageInstance=t),s}),proto.pb.OperationFinalizeResponse.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.OperationFinalizeResponse;return proto.pb.OperationFinalizeResponse.deserializeBinaryFromReader(i,t)},proto.pb.OperationFinalizeResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new proto.pb.Operation;t.readMessage(i,proto.pb.Operation.deserializeBinaryFromReader),e.setOperation(i);break;case 2:i=new proto.pb.TruckStateMessage,t.readMessage(i,proto.pb.TruckStateMessage.deserializeBinaryFromReader),e.addTruckError(i);break;default:t.skipField()}return e},proto.pb.OperationFinalizeResponse.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.OperationFinalizeResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.OperationFinalizeResponse.serializeBinaryToWriter=function(e,t){var i=void 0;null!=(i=e.getOperation())&&t.writeMessage(1,i,proto.pb.Operation.serializeBinaryToWriter),(i=e.getTruckErrorList()).length>0&&t.writeRepeatedMessage(2,i,proto.pb.TruckStateMessage.serializeBinaryToWriter)},proto.pb.OperationFinalizeResponse.prototype.getOperation=function(){return o.Message.getWrapperField(this,proto.pb.Operation,1)},proto.pb.OperationFinalizeResponse.prototype.setOperation=function(e){return o.Message.setWrapperField(this,1,e)},proto.pb.OperationFinalizeResponse.prototype.clearOperation=function(){return this.setOperation(void 0)},proto.pb.OperationFinalizeResponse.prototype.hasOperation=function(){return null!=o.Message.getField(this,1)},proto.pb.OperationFinalizeResponse.prototype.getTruckErrorList=function(){return o.Message.getRepeatedWrapperField(this,proto.pb.TruckStateMessage,2)},proto.pb.OperationFinalizeResponse.prototype.setTruckErrorList=function(e){return o.Message.setRepeatedWrapperField(this,2,e)},proto.pb.OperationFinalizeResponse.prototype.addTruckError=function(e,t){return o.Message.addToRepeatedWrapperField(this,2,e,proto.pb.TruckStateMessage,t)},proto.pb.OperationFinalizeResponse.prototype.clearTruckErrorList=function(){return this.setTruckErrorList([])},s.object.extend(t,proto.pb)}}]);