"use strict";(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[930],{2515:(e,i,t)=>{t.d(i,{t:()=>d,m:()=>o});var s=t(5893),a=t(1920),n=t(5757);const d=({value:e,cy:i})=>{var t,d,o,r;switch(e){case a.u6.PAD:return(0,s.jsx)(n.Z,{primary:`Descarga: ${a.WW[i.download.type]} -  ${null===(t=i.download.pad.cellList[0])||void 0===t?void 0:t.name}`},void 0);case a.u6.DME:return(0,s.jsx)(n.Z,{primary:`Descarga: ${a.WW[i.download.type]} -  ${null===(d=i.download.dme.cellList[0])||void 0===d?void 0:d.name}`},void 0);case a.u6.PIT:return(0,s.jsx)(n.Z,{primary:`Descarga: ${a.WW[i.download.type]} -  ${null===(o=i.download.pit.cellList[0])||void 0===o?void 0:o.name}`},void 0);case a.u6.STOCK:return(0,s.jsx)(n.Z,{primary:`Descarga: ${a.WW[i.download.type]} -  ${null===(r=i.download.stock.cellList[0])||void 0===r?void 0:r.name}`},void 0);default:return(0,s.jsx)(s.Fragment,{},void 0)}},o=({value:e,cy:i})=>{switch(e){case a.u6.PAD:return(0,s.jsx)(n.Z,{primary:`Carga: ${a.WW[i.upload.type]} -  ${i.upload.pad.projectList[0].name}-${i.upload.pad.projectList[0].polygonList[0].name}`},void 0);case a.u6.DME:return(0,s.jsx)(n.Z,{primary:`Carga: ${i.upload.dme.projectList[0].name} - ${i.upload.dme.projectList[0].polygonList[0].name}`},void 0);case a.u6.PIT:return(0,s.jsx)(n.Z,{primary:`Carga: ${a.WW[i.upload.type]} -  ${i.upload.pit.projectList[0].name}- ${i.upload.pit.projectList[0].polygonList[0].name}`},void 0);case a.u6.STOCK:return(0,s.jsx)(n.Z,{primary:`Carga: ${a.WW[i.upload.type]} -  ${i.upload.stock.projectList[0].name}-${i.upload.stock.projectList[0].polygonList[0].name}`},void 0);default:return(0,s.jsx)(s.Fragment,{children:"node"},void 0)}}},1920:(e,i,t)=>{var s,a,n,d;t.d(i,{WW:()=>s,PW:()=>a,u6:()=>n,J8:()=>d}),function(e){e[e.DESCONOCIDO=0]="DESCONOCIDO",e[e.TAJO=1]="TAJO",e[e.PAD=2]="PAD",e[e.STOCK=3]="STOCK",e[e.DME=4]="DME",e[e.RUTA=5]="RUTA"}(s||(s={})),function(e){e[e._=0]="_",e[e.pit=1]="pit",e[e.pad=2]="pad",e[e.stock=3]="stock",e[e.dme=4]="dme",e[e.road=5]="road"}(a||(a={})),function(e){e.PIT="pit",e.PAD="pad",e.STOCK="stock",e.DME="dme",e.ROAD="road"}(n||(n={})),function(e){e[e.Desconocido=0]="Desconocido",e[e.Pendiente=1]="Pendiente",e[e.Operando=2]="Operando",e[e.Finalizado=3]="Finalizado"}(d||(d={}))},5930:(e,i,t)=>{t.r(i),t.d(i,{default:()=>Y});var s=t(5893),a=t(1120),n=t(7623),d=t(1749),o=t(2318),r=t(46),l=t(4436),c=t(6394),p=t(2930),v=t(5639),u=t(8286),j=t(282),h=t(5477),x=t(5517),g=t(7215),m=t(7294),y=t(9704);const b=()=>(0,y.I0)(),Z=y.v9;var f=t(3133),O=t(8463),k=t(4697),C=t(3901),S=t(9912);const L=(0,t(3914).Z)({rootContainer:{flexGrow:1},rootItemCont:{height:"100%",width:"100%",padding:"2px"},card:{height:"100%",width:"100%",border:"3px"}}),D=({title:e,icon:i,subheader:t,children:a})=>(L(),(0,s.jsxs)(O.Z,{children:[(0,s.jsx)(k.Z,{avatar:(0,s.jsx)(C.Z,{"aria-label":"recipe",variant:"square",src:i},void 0),title:e,subheader:t},void 0),(0,s.jsx)(S.Z,{children:a},void 0)]},void 0));var $=t(7229);const w=()=>(0,s.jsx)(d.Z,Object.assign({style:{display:"flex",justifyContent:"center"}},{children:(0,s.jsx)(h.Z,{},void 0)}),void 0),F=()=>{const{truckReportList:e,status:i}=Z(f.Gn),{excavatorCycleList:t}=e,[a,n]=(0,m.useState)([]),[d,o]=(0,m.useState)([]),[r,l]=(0,m.useState)([]);(0,m.useEffect)((()=>{n([]),o([]),l([]),null==t||t.forEach((e=>{n((i=>i.concat(e.excavator.deviceAlias))),o((i=>i.concat(e.lenPad))),l((i=>i.concat(e.lenDme)))}))}),[e]);const c={options:{colors:["#0B4B88","#F3C507"],chart:{id:"bar-excavator"},xaxis:{categories:a},noData:{text:"No hay datos",style:{color:"#376CA4",fontSize:"24px"}}},series:[{name:"Mineral",data:r},{name:"Desmonte",data:d}],animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}};return(0,s.jsx)("div",{children:"loading"===i?(0,s.jsx)(w,{},void 0):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)($.Z,{options:c.options,series:c.series,type:"bar",height:"300"},void 0)},void 0)},void 0)},T=()=>{const{truckReportList:e,status:i}=Z(f.Gn),[t,a]=(0,m.useState)([]),[n,d]=(0,m.useState)([]),[o,r]=(0,m.useState)([]);console.log("truckReportListTRuck",e),(0,m.useEffect)((()=>{var i;a([]),d([]),r([]),null===(i=null==e?void 0:e.truckCycleList)||void 0===i||i.forEach((e=>{a((i=>i.concat(e.truck.deviceAlias))),r((i=>i.concat(e.lenDme))),d((i=>i.concat(e.lenPad)))}))}),[e]);var l={options:{colors:["#0B4B88","#F3C507"],chart:{id:"bar-trucks",type:"bar",height:350,stacked:!1},plotOptions:{bar:{borderRadius:10,horizontal:!1,columnWidth:"70%",endingShape:"rounded"}},xaxis:{categories:t.slice(0,t.length/2)},noData:{text:"No hay datos",style:{color:"#192D4D",fontSize:"24px"}},legend:{position:"top",horizontalAlign:"center",offsetX:40}},series:[{name:"Mineral",data:o.slice(0,o.length/2)},{name:"Desmonte",data:n.slice(0,n.length/2)}],animations:{enabled:!0,easing:"easein",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}};const c={options:{colors:["#0B4B88","#F3C507"],chart:{id:"bar-trucks",type:"bar",height:350,stacked:!1},plotOptions:{bar:{borderRadius:10,horizontal:!1,columnWidth:"70%",endingShape:"rounded"}},xaxis:{categories:t.slice(t.length/2,t.length)},noData:{text:"No hay datos",style:{color:"#192D4D",fontSize:"24px"}},legend:{position:"top",horizontalAlign:"center",offsetX:40}},series:[{name:"Mineral",data:o.slice(o.length/2,o.length)},{name:"Desmonte",data:n.slice(n.length/2,n.length)}],animations:{enabled:!0,easing:"easein",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}};return(0,s.jsx)("div",{children:"loading"===i?(0,s.jsx)(w,{},void 0):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($.Z,{options:l.options,series:l.series,type:"bar",height:"300"},void 0),(0,s.jsx)($.Z,{options:c.options,series:c.series,type:"bar",height:"300"},void 0)]},void 0)},void 0)};var I=t(3258),A=t(6090),E=t(465),W=t(6037),P=t(2822),R=t(5757),z=t(2515);const M=({cycle:e,index:i})=>(0,s.jsxs)(r.Z,Object.assign({style:{display:"flex",flexDirection:"column",padding:"15px",paddingTop:"15px"}},{children:[(0,s.jsxs)(r.Z,Object.assign({style:{display:"flex",justifyContent:"space-evenly",paddingLeft:"15px"}},{children:[(0,s.jsxs)(o.Z,Object.assign({variant:"h4"},{children:[i+1," "]}),void 0),(0,s.jsxs)(r.Z,Object.assign({style:{paddingLeft:"15px"}},{children:[(0,s.jsx)((()=>{let i="";return e.download.dme&&(i="dme"),e.download.pad&&(i="pad"),e.download.stock&&(i="stock"),(0,s.jsx)(z.t,{value:i,cy:e},void 0)}),{},void 0),(0,s.jsx)((()=>{let i="";return e.upload.pit&&(i="pit"),e.upload.stock&&(i="stock"),(0,s.jsx)(z.m,{value:i,cy:e},void 0)}),{},void 0)]}),void 0)]}),void 0),(0,s.jsx)(x.Z,{},void 0),(0,s.jsxs)(r.Z,Object.assign({style:{padding:"15px",display:"flex",flexDirection:"column"}},{children:[(0,s.jsx)(o.Z,Object.assign({style:{alignSelf:"center"},variant:"h6"},{children:"MATERIAL"}),void 0),(0,s.jsx)(R.Z,{primary:` Tipo:${e.material.type} `},void 0),(0,s.jsx)(R.Z,{primary:` Descripcion :${e.material.description} `},void 0),(0,s.jsx)(R.Z,{primary:` crs : ${e.material.crs}`},void 0),(0,s.jsx)(R.Z,{primary:` orezone : ${e.material.orezone}`},void 0),(0,s.jsx)(R.Z,{primary:` Law : ${e.material.law}`},void 0),(0,s.jsx)(R.Z,{primary:` thins : ${e.material.thins}`},void 0),(0,s.jsx)(R.Z,{primary:` cf : ${e.material.cf}`},void 0),(0,s.jsx)(R.Z,{primary:` Lugar :${e.material.place}`},void 0)]}),void 0),(0,s.jsx)(x.Z,{},void 0)]}),void 0),B=t(5158),G=({isChecked:e,truck:i,setTrucksSelect:t,trucksSelect:a})=>{const[n,d]=m.useState(e),[r,l]=(0,m.useState)(0),[c,p]=(0,m.useState)(0),[v,u]=(0,m.useState)(!1);return(0,m.useEffect)((()=>{d(e)}),[e]),(0,m.useEffect)((()=>{var e;return null===(e=null==i?void 0:i.cycleList)||void 0===e||e.map((e=>{2===e.download.type&&p((e=>e+1)),4===e.download.type&&l((e=>e+1))})),()=>{l(0),p(0)}}),[i]),(0,s.jsxs)(O.Z,{children:[(0,s.jsxs)(O.Z,Object.assign({style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},{children:[(0,s.jsxs)(S.Z,Object.assign({onClick:()=>{u((e=>!e))},style:{display:"flex",alignItems:"center",paddingLeft:"60px"}},{children:[(0,s.jsx)(C.Z,{alt:"truck",src:B},void 0),(0,s.jsx)(o.Z,Object.assign({variant:"h6",style:{paddingLeft:"30px"}},{children:i.truck.deviceAlias}),void 0),(0,s.jsxs)(o.Z,Object.assign({variant:"h6",style:{paddingLeft:"60px"}},{children:[r," Ciclos desmonte"]}),void 0),(0,s.jsxs)(o.Z,Object.assign({variant:"h6",style:{paddingLeft:"60px"}},{children:[c," Ciclos mineral"]}),void 0)]}),void 0),(0,s.jsx)(S.Z,{children:(0,s.jsx)(I.Z,{checked:e,onChange:()=>{const e=[...a],s=e.findIndex((e=>i.truck.id===e.id));-1===s?e.push(i):e.splice(s,1),t(e)},inputProps:{"aria-label":"secondary checkbox"}},void 0)},void 0)]}),void 0),v&&(0,s.jsx)(W.Z,Object.assign({in:v,style:{paddingLeft:10}},{children:(0,s.jsx)(P.Z,Object.assign({dense:!0,disablePadding:!0,style:{display:"flex",flexWrap:"wrap",paddingLeft:"60",overflowY:"auto",height:"350px"}},{children:i.cycleList.map(((e,i)=>(0,s.jsx)(M,{cycle:e,index:i},e.id)))}),void 0)}),void 0),(0,s.jsx)(x.Z,{light:!0},void 0)]},void 0)};var N=t(1355);const U=({startField:e,endField:i,shift:t})=>{const[a,n]=(0,m.useState)(!0),{truckReportList:l,status:c,statusReportFile:p}=Z(f.Gn),v=b(),{truckCycleList:u}=l,[x,g]=(0,m.useState)([]),[y,O]=(0,m.useState)([]),[k,C]=(0,m.useState)("Holass"),[S,L]=(0,m.useState)([]);return(0,m.useEffect)((()=>{g(u),O(u)}),[l]),(0,m.useEffect)((()=>{L(a?x:[])}),[x,a]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.Z,Object.assign({container:!0,justifyContent:"space-evenly",alignItems:"center"},{children:[(0,s.jsx)(d.Z,Object.assign({item:!0},{children:(0,s.jsx)(E.V,{functionFilter:e=>y.filter((i=>i.truck.deviceAlias.toUpperCase().includes(e.toUpperCase()))),setItems:g,items:y,placeholder:"Buscar por CamiÃ³n"},void 0)}),void 0),(0,s.jsx)(d.Z,Object.assign({item:!0},{children:(0,s.jsx)(j.Z,Object.assign({color:"secondary",variant:"contained",onClick:()=>{const s=`${e}T00:00`,a=`${i}T00:00`;v((0,f.Sf)({dateStart:s,dateEnd:a,shift:t,trucks:S,allTrucks:(null==S?void 0:S.length)===(null==x?void 0:x.length)}))},endIcon:"loading"===p?(0,s.jsx)(h.Z,{style:{width:"20px",height:"20px"}},void 0):(0,s.jsx)(A.Z,{},void 0)},{children:"exportar a excel"}),void 0)}),void 0),(0,s.jsx)(d.Z,Object.assign({item:!0},{children:(0,s.jsxs)(r.Z,Object.assign({style:{display:"flex",alignItems:"center"}},{children:[(0,s.jsx)(o.Z,Object.assign({variant:"h6"},{children:" Todos "}),void 0),(0,s.jsx)(I.Z,{indeterminate:(null==S?void 0:S.length)>0&&(null==S?void 0:S.length)!=(null==x?void 0:x.length),color:"primary",icon:(0,s.jsx)(N.Z,{},void 0),checkedIcon:(0,s.jsx)(N.Z,{},void 0),checked:a,onChange:e=>{n(e.target.checked)},inputProps:{"aria-label":"secondary checkbox"}},void 0)]}),void 0)}),void 0)]}),void 0),(0,s.jsx)(d.Z,Object.assign({container:!0},{children:(0,s.jsx)(d.Z,Object.assign({item:!0,xs:12,sm:12,md:12,lg:12,style:{overflowY:"auto",height:"500px"}},{children:"loading"===c?(0,s.jsx)(w,{},void 0):null==x?void 0:x.map(((e,i)=>{return(0,s.jsx)(G,{isChecked:(t=e,!!(null==S?void 0:S.find((e=>{var i,s;return(null===(i=t.truck)||void 0===i?void 0:i.id)===(null===(s=e.truck)||void 0===s?void 0:s.id)})))),truck:e,trucksSelect:S,setTrucksSelect:L},i);var t}))}),void 0)}),void 0)]},void 0)},K=t(6593),_=t(5158),J=(0,a.Z)((e=>(0,n.Z)({formControl:{margin:e.spacing(1),minWidth:120}}))),V=()=>{const e=J(),{status:i}=Z(f.Gn),t=new Date,a=`${t.getFullYear()}-${`0${t.getMonth()+1}`.substr(-2)}-${t.getDate()}`,{startField:n,endField:y,handleInputChange:O}=(e=>{const[i,t]=(0,m.useState)(e);return Object.assign({form:i,handleInputChange:e=>{t(Object.assign(Object.assign({},i),{[e.target.name]:e.target.value}))},handleReactChange:e=>{console.log(e.target),t(Object.assign(Object.assign({},i),{[e.target.name]:e.target.value}))},reset:()=>{t(e)}},i)})({startField:a,endField:a}),k=b(),[C,S]=(0,m.useState)(3),[L,$]=(0,m.useState)(!1);return(0,m.useEffect)((()=>{const e=`${n}T00:00`,i=`${y}T00:00`,t=setInterval((()=>{const t={dateStart:e,dateEnd:i,shift:C};k((0,f.aU)(t))}),3e5),s={dateStart:e,dateEnd:i,shift:C};return k((0,f.aU)(s)),()=>{clearInterval(t)}}),[]),(0,s.jsx)(m.Fragment,{children:(0,s.jsxs)(d.Z,Object.assign({container:!0,direction:"column"},{children:[(0,s.jsx)(d.Z,Object.assign({item:!0,container:!0,direction:"column",alignItems:"flex-end"},{children:(0,s.jsxs)(d.Z,Object.assign({item:!0},{children:[(0,s.jsxs)(o.Z,Object.assign({variant:"subtitle2"},{children:["Fecha de inicio: ",n.toString()]}),void 0),(0,s.jsxs)(o.Z,Object.assign({variant:"subtitle2"},{children:["Fecha de Fin: ",y.toString()]}),void 0)]}),void 0)}),void 0),(0,s.jsx)(d.Z,Object.assign({item:!0},{children:(0,s.jsxs)(r.Z,Object.assign({p:3},{children:[(0,s.jsxs)(d.Z,Object.assign({container:!0,justifyContent:"space-evenly"},{children:[(0,s.jsx)(d.Z,Object.assign({item:!0},{children:(0,s.jsxs)(l.Z,Object.assign({className:e.formControl},{children:[(0,s.jsx)(c.Z,{children:"Turno"},void 0),(0,s.jsxs)(p.Z,Object.assign({open:L,onClose:()=>{$(!1)},onOpen:()=>{$(!0)},value:C,name:"shith",onChange:e=>{S(e.target.value)}},{children:[(0,s.jsx)(v.Z,Object.assign({value:1},{children:"Noche"}),void 0),(0,s.jsx)(v.Z,Object.assign({value:2},{children:"Dia"}),void 0),(0,s.jsx)(v.Z,Object.assign({value:3},{children:"Ambos"}),void 0)]}),void 0)]}),void 0)}),void 0),(0,s.jsx)(d.Z,Object.assign({item:!0},{children:(0,s.jsxs)(d.Z,Object.assign({container:!0,spacing:5},{children:[(0,s.jsx)(d.Z,Object.assign({item:!0},{children:(0,s.jsx)("form",Object.assign({noValidate:!0},{children:(0,s.jsx)(u.Z,{id:"start",label:"Inicio",type:"date",name:"startField",value:n,onChange:O,InputLabelProps:{shrink:!0}},void 0)}),void 0)}),void 0),(0,s.jsx)(d.Z,Object.assign({item:!0},{children:(0,s.jsx)("form",Object.assign({noValidate:!0},{children:(0,s.jsx)(u.Z,{id:"endField",label:"Fin",type:"date",name:"endField",value:y,onChange:O,InputLabelProps:{shrink:!0},InputProps:{required:!0}},void 0)}),void 0)}),void 0)]}),void 0)}),void 0),(0,s.jsx)(d.Z,Object.assign({item:!0},{children:(0,s.jsx)(j.Z,Object.assign({color:"secondary",variant:"contained",onClick:()=>{console.log(a);const e={dateStart:`${n}T00:00`,dateEnd:`${y}T00:00`,shift:C};k((0,f.aU)(e))},endIcon:"loading"===i?(0,s.jsx)(h.Z,{style:{width:"20px",height:"20px"}},void 0):(0,s.jsx)(g.Z,{},void 0)},{children:"Buscar"}),void 0)}),void 0)]}),void 0),(0,s.jsx)(x.Z,{},void 0),(0,s.jsx)(D,Object.assign({title:"Lista de camiones",icon:_},{children:(0,s.jsx)(T,{},void 0)}),void 0),(0,s.jsx)(D,Object.assign({title:"Lista de excavadoras",icon:K},{children:(0,s.jsx)(F,{},void 0)}),void 0)]}),void 0)}),void 0),(0,s.jsx)(d.Z,Object.assign({item:!0},{children:(0,s.jsx)(r.Z,Object.assign({p:3},{children:(0,s.jsx)(U,{startField:n,endField:y,shift:C},void 0)}),void 0)}),void 0)]}),void 0)},void 0)};function Y(){return(0,s.jsx)("div",{children:(0,s.jsx)(V,{},void 0)},void 0)}}}]);