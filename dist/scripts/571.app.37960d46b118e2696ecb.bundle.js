(self.webpackChunkdts_hytera=self.webpackChunkdts_hytera||[]).push([[571],{1571:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>ei});var o=i(5893),r=i(9895),s=i(1749),n=i(7812),a=i(7661),p=i(1594),l=i(7221),c=i(282),d=i(1120),u=i(1423),g=i(2318),b=i(4096),y=i(7294),O=i(2822),h=i(6837),v=i(9544),m=i(7215),f=i(3914);const j=(0,f.Z)((()=>({subHeader:{lineHeight:0,background:"#fff",paddingLeft:0,display:"flex"}}))),x=({useOpen:e,title:t})=>{const i=j(),[r,s]=e,a=(0,o.jsx)(n.Z,Object.assign({onClick:()=>{s((e=>!e))},size:"small"},{children:r?(0,o.jsx)(v.Z,{fontSize:"small"},void 0):(0,o.jsx)(m.Z,{fontSize:"small"},void 0)}),void 0);return(0,o.jsx)(h.Z,Object.assign({component:"span",className:i.subHeader},{children:(0,o.jsxs)("div",Object.assign({style:{display:"flex",alignItems:"center"}},{children:[(0,o.jsx)("span",{children:t},void 0),(0,o.jsx)("div",Object.assign({style:{marginLeft:8}},{children:a}),void 0)]}),void 0)}),void 0)};var R=i(998),C=i(5757);const S=(0,d.Z)((e=>({disablePadding:{padding:0,margin:0,flex:1},nested:{margin:0,padding:0,marginLeft:e.spacing(2.5),flex:1}}))),M=({primary:e,Icon:t,isSubItem:i,isSelect:r,onClick:s})=>{(0,y.useEffect)((()=>()=>{}),[]);const n=S();return(0,o.jsxs)(R.Z,Object.assign({selected:r,onClick:s,dense:!0,button:!0,className:i?n.nested:n.disablePadding},{children:[t&&(0,o.jsx)(t,{fontSize:"small"},void 0),(0,o.jsx)(C.Z,{className:n.disablePadding,primary:e},void 0)]}),void 0)};var T=i(465);const k=({p:e,map:t,addUnload:i,isSelect:r})=>(0,o.jsx)(M,{primary:`Celda - ${e.name?e.name:"SIN NOM"}`,onClick:()=>{i(e,t,`Celda: ${e.name?e.name:"SIN NOM"}`)},isSelect:r},void 0),D=({addUnload:e,map:t,unloadSelect:i,padCells:r})=>{const s=(0,y.useState)(!1),[n]=s,a=r.map((r=>(0,o.jsx)(k,Object.assign({},{p:r,map:t,addUnload:e},{isSelect:i&&i.value.id===r.id}),r.id)));return(0,o.jsxs)(O.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,o.jsx)(x,{title:"Descarga",useOpen:s},void 0)},{children:[n&&(0,o.jsx)(T.V,{setItems:()=>{},items:[],functionFilter:()=>{}},void 0),a]}),void 0)};var F=i(4376);const w=(e,t,i)=>{const o=e.getSource(t);e.getLayer(i)&&e.removeLayer(i),o&&e.removeSource(t)},E=(e,t,i)=>{e&&(w(e,`${t}_centroid`,`${i}_centroid`),w(e,t,i))},z=(e,t,i,o,r)=>{const{points:s,color:n}=t,a={type:"FeatureCollection",features:[{type:"Feature",properties:{color:n||"green",out_color:"blue",opacity:1,opacity_border:1},geometry:{type:"Polygon",coordinates:[s]}}]},p=(0,F.uHA)(a,1.5),l=(0,F.MqI)({type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[s]}},{properties:{color:"white",opacity:1,name:r}});e.addSource(`${i}_centroid`,{type:"geojson",data:{type:"FeatureCollection",features:[l]}}),e.addSource(i,{type:"geojson",data:p}),e.addLayer({id:o,type:"fill",source:i,layout:{},paint:{"fill-color":["get","color"],"fill-outline-color":["get","out_color"],"fill-opacity":1}}),e.addLayer({id:`${o}_centroid`,type:"symbol",source:`${i}_centroid`,layout:{"text-field":["get","name"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":12},paint:{"text-color":"#00296b","text-halo-color":"#f8f7ff","text-halo-width":2}}),console.log("center",l),l&&l.geometry&&l.geometry.coordinates&&tt(e,l.geometry.coordinates)},L=(e,t,i,o,r,s,n,a)=>{console.log(t);const p=t.map((e=>({type:"Feature",properties:{color:n?a:e.color,out_color:"red",opacity:s,opacity_border:0,id:e.id},geometry:{type:"LineString",coordinates:e.points}})));console.log("!map.getSource(idSource)",!e.getSource(o)),e.getSource(o)||e.addSource(o,{type:"geojson",data:{type:"FeatureCollection",features:p}}),console.log("!map.getLayer(idSource)",!e.getLayer(r)),e.getLayer(r)?e.getSource(o).setData({type:"FeatureCollection",features:p}):(e.addLayer({id:r,type:"line",source:o,paint:{"line-width":10,"line-color":["get","color"],"line-opacity":s},layout:{"line-join":"round","line-cap":"round"},filter:["==","$type","LineString"]}),n||(console.log("agregando"),e.on("click",r,(e=>{if(console.log("eeee",e.features),e.features.length>0){const o=e.features[0],{id:r}=o.properties,s=r?t.find((e=>e.id===r)):null;r&&s&&i((e=>{const t=e.findIndex((e=>e.id===r));return-1===t?e.push(s):e.splice(t,1),console.log("indexFind",t,r),JSON.parse(JSON.stringify(e))}))}})),e.on("mouseenter",r,(function(){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave",r,(function(){e.getCanvas().style.cursor=""}))))};var Z=i(8479);const I=({p:e,map:t,addUnload:i,isSelect:r})=>(0,o.jsx)(M,{primary:`${e.name?e.name:"SIN NOM"}`,onClick:()=>{i(e,t,`${e.name?e.name:"SIN NOM"}`)},isSelect:r},void 0),B=({addUnload:e,map:t,unloadSelect:i,dmeCells:r})=>{const s=(0,y.useState)(!1),[n]=s,a=r.map((r=>(0,o.jsx)(I,Object.assign({},{p:r,map:t,addUnload:e},{isSelect:i&&i.value.id===r.id}),r.id)));return(0,o.jsxs)(O.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,o.jsx)(x,{title:"Descarga",useOpen:s},void 0)},{children:[n&&(0,o.jsx)(T.V,{setItems:()=>{},items:[],functionFilter:()=>{}},void 0),a]}),void 0)};const W=(0,d.Z)((e=>({nested:{marginLeft:e.spacing(1),marginBottom:0},root_unload:{flexGrow:1,display:"flex",height:"100%"},tabs:{borderRight:`1px solid ${e.palette.divider}`},tab:{minWidth:10,padding:1,paddingTop:8,paddingBottom:8},buttonTab:{writingMode:"vertical-rl"}})));function _(e){const{children:t,value:i,index:r}=e,s=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(i[o[r]]=e[o[r]])}return i}(e,["children","value","index"]);return(0,o.jsx)("div",Object.assign({role:"tabpanel",hidden:i!==r,id:`vertical-tabpanel-${r}`,"aria-labelledby":`vertical-tab-${r}`,style:{flex:1}},s,{children:i===r&&t}),void 0)}function N(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const A=({value:e,handleChange:t})=>{const i=W();return(0,o.jsxs)(b.Z,Object.assign({orientation:"vertical",variant:"scrollable",value:e,indicatorColor:"primary",textColor:"primary",onChange:t,"aria-label":"Vertical tabs",className:i.tabs},{children:[(0,o.jsx)(u.Z,Object.assign({className:i.tab,label:(0,o.jsx)(g.Z,Object.assign({variant:"caption",className:i.buttonTab},{children:"PAD"}),void 0)},N(0)),void 0),(0,o.jsx)(u.Z,Object.assign({className:i.tab,label:(0,o.jsx)(g.Z,Object.assign({variant:"caption",className:i.buttonTab},{children:"DME"}),void 0)},N(1)),void 0),(0,o.jsx)(u.Z,Object.assign({className:i.tab,label:(0,o.jsx)(g.Z,Object.assign({variant:"caption",className:i.buttonTab},{children:"STOCKs"}),void 0)},N(2)),void 0)]}),void 0)},P=({padCells:e,useUnloadSelect:t,dmeCells:i})=>{const n=W(),[a,p]=t,l=(e,t,i)=>{E(t,"ID_LAYER_UNLOAD_DME","ID_LAYER_UNLOAD_DME"),a&&a.value.id===e.id?(E(t,"ID_SOURCE_UNLOAD_PAD","ID_LAYER_UNLOAD_PAD"),p(void 0)):(E(t,"ID_SOURCE_UNLOAD_PAD","ID_LAYER_UNLOAD_PAD"),p({type:1,value:e}),setTimeout((()=>{t&&z(t,e,"ID_SOURCE_UNLOAD_PAD","ID_LAYER_UNLOAD_PAD",i)}),10))},c=(e,t,i)=>{E(t,"ID_SOURCE_UNLOAD_PAD","ID_LAYER_UNLOAD_PAD"),a&&a.value.id===e.id?(E(t,"ID_SOURCE_UNLOAD_DME","ID_LAYER_UNLOAD_DME"),p(void 0)):(E(t,"ID_SOURCE_UNLOAD_DME","ID_LAYER_UNLOAD_DME"),p({type:2,value:e}),setTimeout((()=>{t&&z(t,e,"ID_SOURCE_UNLOAD_DME","ID_LAYER_UNLOAD_DME",i)}),10))},[d,u]=(0,Z._)("index_tab_unload_operation",0),g=(e,t)=>{u(t)};return(0,o.jsx)(Xt.Consumer,{children:t=>(0,o.jsx)(r.Z,Object.assign({elevation:4,style:{flex:1,marginLeft:8}},{children:(0,o.jsxs)(s.Z,Object.assign({container:!0,className:n.root_unload},{children:[(0,o.jsx)(A,Object.assign({},{value:d,handleChange:g}),void 0),(0,o.jsx)(_,Object.assign({value:d,index:0},{children:(0,o.jsx)(D,{padCells:e,addUnload:l,map:t,unloadSelect:a},void 0)}),void 0),(0,o.jsx)(_,Object.assign({value:d,index:1},{children:(0,o.jsx)(B,{dmeCells:i,addUnload:c,map:t,unloadSelect:a},void 0)}),void 0)]}),void 0)}),void 0)},void 0)};var U=i(6037),$=i(7129),G=i(4610),q=i(1125),J=i(3099);const Y=(0,d.Z)((e=>({disabledPadding:{padding:0},disabledMargin:{padding:0,minWidth:0}}))),V=({p:e,addLoad:t,map:i,isSelect:r,idProject:s})=>(0,o.jsx)(M,{onClick:()=>t(e,i,`Polígono: ${e.name?e.name:"SIN NOM"} - ${e.material?e.material.type:""}`,s),primary:`Polígono ${e.name}${e.material?` - ${e.material.type}`:""}`,isSubItem:!0,isSelect:r},void 0),K=({map:e,project:t,addLoad:i,idProject:r,loadSelect:a})=>{const[p,l]=(0,y.useState)(!1),c=Y(),d=t.polygons.map((function(t){return t?(0,o.jsx)(V,Object.assign({},{p:t,addLoad:i,map:e,idProject:r},{isSelect:a&&a.value.id===t.id}),t.id):null}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(R.Z,Object.assign({className:c.disabledPadding,dense:!0,onClick:()=>l((e=>!e))},{children:[(0,o.jsx)(C.Z,{className:c.disabledMargin,primary:(0,o.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,o.jsxs)(g.Z,Object.assign({variant:"caption",style:{alignItems:"center",display:"flex",fontSize:12}},{children:[p?(0,o.jsx)($.Z,{fontSize:"small"},void 0):(0,o.jsx)(G.Z,{fontSize:"small"},void 0),t.name]}),void 0),(0,o.jsx)(g.Z,Object.assign({color:"primary",style:{fontSize:11,marginLeft:4}},{children:`${t.polygons.length}▰s`}),void 0)]}),void 0)},void 0),(0,o.jsx)(n.Z,Object.assign({size:"small"},{children:p?(0,o.jsx)(q.Z,{fontSize:"small"},void 0):(0,o.jsx)(J.Z,{fontSize:"small"},void 0)}),void 0)]}),void 0),(0,o.jsx)(U.Z,Object.assign({in:p},{children:(0,o.jsx)(O.Z,Object.assign({dense:!0,disablePadding:!0},{children:d}),void 0)}),void 0)]},void 0)};const H=(0,d.Z)((e=>({root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{marginLeft:e.spacing(1),marginBottom:0},root_unload:{flexGrow:1,display:"flex",height:"100%"},tabs:{borderRight:`1px solid ${e.palette.divider}`},tab:{minWidth:10,padding:1,paddingTop:8,paddingBottom:8},buttonTab:{writingMode:"vertical-rl"}})));function X(e){const{children:t,value:i,index:r}=e,s=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(i[o[r]]=e[o[r]])}return i}(e,["children","value","index"]);return(0,o.jsx)("div",Object.assign({role:"tabpanel",hidden:i!==r,id:`vertical-tabpanel-${r}`,"aria-labelledby":`vertical-tab-${r}`,style:{flex:1}},s,{children:i===r&&t}),void 0)}function Q(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const ee=({benchs:e,useLoadSelect:t,stockCells:i})=>{const n=H(),[a,p]=t,[l,c]=(0,y.useState)([]),[d,h]=(0,Z._)("index_tab_load_operation",0),v=(0,y.useState)(!1),[m,f]=(0,y.useState)([]);(0,y.useEffect)((()=>{let t=[];e.forEach((e=>{t=[...t,...e.projects]})),c(t),f(t)}),[e]);const j=(e,t,i,o)=>{E(t,"ID_SOURCE_LOAD_STOCK","ID_LAYER_LOAD_STOCK"),a&&a.value.id===e.id?(E(t,"ID_SOURCE_LOAD","ID_LAYER_LOAD"),p(void 0)):(E(t,"ID_SOURCE_LOAD","ID_LAYER_LOAD"),p({type:1,value:e,idProject:o}),setTimeout((()=>{t&&z(t,e,"ID_SOURCE_LOAD","ID_LAYER_LOAD",i)}),10))},S=(e,t)=>{h(t)},M=e=>m.filter((t=>t.name.toUpperCase().includes(e.toUpperCase())));return(0,o.jsx)(Xt.Consumer,{children:e=>(0,o.jsx)(r.Z,Object.assign({elevation:4,style:{flex:1}},{children:(0,o.jsxs)(s.Z,Object.assign({container:!0,style:{height:"100%"}},{children:[(0,o.jsxs)(b.Z,Object.assign({orientation:"vertical",variant:"scrollable",value:d,indicatorColor:"primary",textColor:"primary",onChange:S,"aria-label":"Vertical tabs",className:n.tabs},{children:[(0,o.jsx)(u.Z,Object.assign({className:n.tab,label:(0,o.jsx)(g.Z,Object.assign({variant:"caption",className:n.buttonTab},{children:"TAJO"}),void 0)},Q(0)),void 0),(0,o.jsx)(u.Z,Object.assign({className:n.tab,label:(0,o.jsx)(g.Z,Object.assign({variant:"caption",className:n.buttonTab},{children:"STOCKs"}),void 0)},Q(1)),void 0)]}),void 0),(0,o.jsx)(X,Object.assign({value:d,index:0},{children:(0,o.jsxs)(O.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,o.jsx)(x,{title:"Carguío",useOpen:v},void 0)},{children:[v[0]&&(0,o.jsx)(T.V,{functionFilter:M,setItems:c,items:m,placeholder:"Buscar por proyecto"},void 0),l.map((t=>function(e,t){return(0,o.jsx)(K,Object.assign({project:e},{map:t,addLoad:j,loadSelect:a},{idProject:e.id}),e.id)}(t,e)))]}),void 0)}),void 0),(0,o.jsx)(X,Object.assign({value:d,index:1},{children:(0,o.jsxs)(O.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"},subheader:(0,o.jsx)(x,{title:"Carguío",useOpen:v},void 0)},{children:[v[0]&&(0,o.jsx)(T.V,{functionFilter:()=>{},setItems:()=>{},items:[]},void 0),i.map((t=>(0,o.jsx)(R.Z,Object.assign({selected:a&&a.value.id===t.id,button:!0,dense:!0,onClick:()=>{((e,t,i)=>{E(t,"ID_SOURCE_LOAD","ID_LAYER_LOAD"),a&&a.value.id===e.id?(E(t,"ID_SOURCE_LOAD_STOCK","ID_LAYER_LOAD_STOCK"),p(void 0)):(E(t,"ID_SOURCE_LOAD_STOCK","ID_LAYER_LOAD_STOCK"),p({type:2,value:e}),setTimeout((()=>{t&&z(t,e,"ID_SOURCE_LOAD_STOCK","ID_LAYER_LOAD_STOCK",i)}),10))})(t,e,t.name)}},{children:(0,o.jsx)(C.Z,{primary:t.name},void 0)}),t.id)))]}),void 0)}),void 0)]}),void 0)}),void 0)},void 0)};var te=i(5517),ie=i(6072),oe=i(3960);const re=(0,d.Z)((e=>({disabledMargin:{margin:0},centerListItem:{justifyContent:"center"},root:{flex:1,overflowY:"scroll",marginBottom:8,marginLeft:e.spacing(1)}}))),se=({routes:e,map:t,addRoutes:i,useSelect:r})=>{const[s,n]=r;return(0,y.useEffect)((()=>(e.length>0&&i(t,e,n,"source_routes_all_assigment","layer_routes_all_assigment",.2,!1),()=>{})),[e]),(0,y.useEffect)((()=>(console.log("routesSelect",s),i(t,s,n,"id_source_routes_select","id_layer_routes_select",1,!0,"red"),()=>{})),[s]),(0,o.jsx)(o.Fragment,{},void 0)},ne=({routes:e,useSelect:t})=>{const[i,a]=(0,y.useState)(e),[p,l]=t,c=(0,y.useState)(!1),[d]=c,u=re();return(0,y.useEffect)((()=>{a(e)}),[e]),(0,o.jsx)(r.Z,Object.assign({elevation:4,className:u.root},{children:(0,o.jsx)(Xt.Consumer,{children:e=>e?(0,o.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,o.jsx)(se,{routes:i,map:e,addRoutes:L,useSelect:t},void 0),(0,o.jsxs)(O.Z,Object.assign({dense:!0,style:{padding:4},subheader:(0,o.jsx)(x,{title:"Ruta",useOpen:c},void 0)},{children:[d&&(0,o.jsx)(T.V,{functionFilter:()=>{},setItems:()=>{},items:[]},void 0),(0,o.jsxs)(R.Z,Object.assign({dense:!0,className:u.centerListItem},{children:[(0,o.jsxs)(g.Z,Object.assign({variant:"inherit"},{children:["Seleccione los tramos en el mapa"," "]}),void 0),(0,o.jsx)(ie.Z,{fontSize:"small"},void 0)]}),void 0),p.map((e=>(0,o.jsxs)(y.Fragment,{children:[(0,o.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,o.jsx)(M,{primary:` Tramo: ${e.name?e.name:"Sin Nomb."}`,Icon:oe.Z},void 0),(0,o.jsx)(n.Z,Object.assign({size:"small",onClick:()=>{return t=e,void l((e=>{const i=e.findIndex((e=>e.id===t.id));return-1===i||e.splice(i,1),JSON.parse(JSON.stringify(e))}));var t}},{children:(0,o.jsx)(v.Z,{fontSize:"small"},void 0)}),void 0)]}),void 0),(0,o.jsx)(te.Z,{},void 0)]},e.id)))]}),void 0)]}),void 0):null},void 0)}),void 0)};var ae=i(4436),pe=i(2541),le=i(553),ce=i(74),de=i(3513),ue=i(5477),ge=i(2663),be=i(6856),ye=i(9525);function Oe({open:e,setOpen:t,handleClickConfirm:i,children:r,loading:s,handleClose:n}){return(0,o.jsxs)(ge.Z,Object.assign({fullWidth:!0,maxWidth:"lg",open:e,onClose:n||(()=>{t(!1)}),"aria-labelledby":"max-width-dialog-title"},{children:[(0,o.jsx)(ye.Z,{children:r},void 0),(0,o.jsx)(be.Z,{children:s?(0,o.jsx)(ue.Z,{},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.Z,Object.assign({onClick:n,color:"secondary"},{children:"Cancelar"}),void 0),(0,o.jsx)(c.Z,Object.assign({onClick:i,color:"primary"},{children:"Confirmar"}),void 0)]},void 0)},void 0)]}),void 0)}var he=i(6083),ve=i(8657);const me=({open:e,handleClose:t,handleConfirm:i,title:r,message:s})=>(0,o.jsxs)(ge.Z,Object.assign({open:e,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},{children:[(0,o.jsx)(he.Z,{children:r},void 0),(0,o.jsx)(ye.Z,{children:(0,o.jsx)(ve.Z,Object.assign({severity:"warning"},{children:s}),void 0)},void 0),(0,o.jsxs)(be.Z,{children:[(0,o.jsx)(c.Z,Object.assign({color:"primary",onClick:t},{children:"Cancelar"}),void 0),(0,o.jsx)(c.Z,Object.assign({color:"secondary",onClick:i,autoFocus:!0},{children:"Confirmar"}),void 0)]},void 0)]}),void 0);var fe=i(4880);const{OperationServiceClient:je}=i(7872),{Operation:xe,OperationRequest:Re,OperationReassigmentRequest:Ce}=i(2799),{Upload:Se,Download:Me}=i(1783),{Polygon:Te}=i(7461),{Cell:ke}=i(3068),{Dme:De}=i(5631),{Pit:Fe}=i(2733),{Pad:we}=i(8060),{Project:Ee}=i(3423),{Road:ze}=i(3112),{Truck:Le}=i(3779),{Stock:Ze}=i(6928),{Excavator:Ie}=i(6034),Be=new je(`${fe.$s}:${fe.Vs}`,null,null),We=(e,t)=>{console.log("RESSIGMENT_DATA_SEND: ",e,t);const i={authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2MzQzODk4MDUsInVzZXJuYW1lIjoiZGlzcGF0Y2hlciIsInJvbGUiOiJESVMifQ.IIKVGiv1ve4AST9EdQ1XjujDWDG3qCHzF57knK7A1Y8"},o=new xe,r=new Ce;return o.setId(e),r.setOperationDestination(o),console.log("idDest",e),console.log("trucks",t),t.map((e=>{const t=new Le;t.setId(e.id),t.setDeviceId(e.deviceId),t.setDeviceAlias(e.deviceAlias),t.setDeviceInterval(e.deviceInterval),t.setDescription(e.description),t.setPlate(e.plate),r.addTruck(t)})),new Promise(((e,t)=>{Be.reassigmentTrucksOperation(r,i,((i,o)=>{if(i)console.log("error message operations get",i.message),t(i);else{const t=o.toObject();console.log("operationsbackend",t),e(t)}}))}))};var _e=i(94),Ne=i(9038),Ae=i(3258),Pe=i(5090);const Ue=(0,d.Z)((e=>({disabledSpacing:{margin:0,padding:0,width:"100%"},checkbox:{"& .MuiCheckbox-root":{margin:0,padding:0,paddingLeft:8}}}))),$e=({truck:e,checked:t,useTrucksSelect:i,disableWithOperation:r})=>{const s=Ue(),[n,a]=i,p=e.state>=0?Pe.S[e.state]:"Sin conex...",l=e.operationList&&e.operationList.length>0?e.operationList[0].excavator.deviceAlias:"";return(0,o.jsx)(R.Z,Object.assign({selected:!0,button:!0,dense:!0,className:s.disabledSpacing,disabled:!!r&&!!l},{children:(0,o.jsx)(le.Z,{className:s.checkbox,onChange:()=>{const t=n.findIndex((t=>e.deviceId===t.deviceId));-1===t?n.push(e):n.splice(t,1),a(JSON.parse(JSON.stringify(n)))},control:(0,o.jsx)(Ae.Z,{size:"small",checked:t,inputProps:{style:{padding:0}}},void 0),label:(0,o.jsx)(C.Z,{primary:`${e.deviceAlias} ${l?` --\x3e ${l}`:""} (${p})`},void 0)},void 0)}),void 0)};var Ge=i(702);const qe=({open:e,handleClose:t,msg:i,severity:r})=>(0,o.jsx)(Ge.Z,Object.assign({open:e,onClose:t},{children:(0,o.jsx)(ve.Z,Object.assign({onClose:t,severity:r},{children:i}),void 0)}),void 0);var Je=function(e,t,i,o){return new(i||(i=Promise))((function(r,s){function n(e){try{p(o.next(e))}catch(e){s(e)}}function a(e){try{p(o.throw(e))}catch(e){s(e)}}function p(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,a)}p((o=o.apply(e,t||[])).next())}))};const Ye=({trucks:e,useTrucksSelect:t,streamTruck:i,disableWithOperation:r})=>{const s=t[0],[n,a]=(0,y.useState)([]),p=e=>!!s.find((t=>e.id===t.id));return(0,y.useEffect)((()=>{a(e)}),[e]),(0,y.useEffect)((()=>{if(console.log("streamTruck",i),i&&i.sensor){const e=n.findIndex((e=>e.deviceId===i.deviceId));e>=0&&(n[e].sensor=i.sensor,n[e].state=i.state,n[e].operationList=i.operationList,console.log("trucksAll",n),a(JSON.parse(JSON.stringify(n))))}}),[i]),(0,o.jsx)(O.Z,Object.assign({dense:!0,style:{width:"100%",paddingLeft:4,maxHeight:"75vh",overflowY:"scroll"}},{children:n.map((e=>(0,o.jsx)($e,{disableWithOperation:r,checked:p(e),useTrucksSelect:t,truck:e},e.id)))}),void 0)},Ve=({open:e,setOpen:t,setRefresh:i,operations:n})=>{const[a,p]=(0,y.useState)([]),[l,c]=(0,y.useState)([]),[d,u]=(0,y.useState)([]),[b,v]=(0,y.useState)(""),m=(0,y.useState)([]),[f,j]=m,[x,S]=(0,y.useState)(!1),[M,k]=y.useState(!1),[D,F]=(0,y.useState)(!1),[w,E]=(0,y.useState)("success"),[z,L]=(0,y.useState)(""),Z=()=>{F(!1)};(0,y.useEffect)((()=>{((e,t,i)=>{Je(void 0,void 0,void 0,(function*(){(0,_e.r)().then((t=>{e(t),i(t)})).catch((t=>{e([]),console.log(t)})),(0,Ne.X)().then((e=>{t(e)})).catch((e=>{console.log(e),t([])}))}))})(p,u,c)}),[]);const I=e=>{v(e.target.value)},B=()=>{S(!1)},W=()=>{t(!1),j([]),v("")},_=()=>{f.length<=0||b.length<=0?(F(!0),L("Debe seleccionar almenos una excabadora y un camion"),E("warning")):S(!0)},N=()=>{S(!1),t(!1),j([]),v(""),((e,t,i,o)=>{Je(void 0,void 0,void 0,(function*(){i(!0);const r=yield We(e,t);console.log("responseAssigment",r),i(!1),o((e=>!e));let s="";r.truckErrorList.length>0&&r.truckErrorList.forEach((e=>{const t=1===e.state?"CARGANDO":"A DESCARGA";s+=` ${e.truckError.deviceAlias}=> ${t},`})),""!==s&&alert(`Las siguientes unidades no han podido ser reasignadas: ${s}`)}))})(b,f,k,i)},A=e=>l.filter((t=>t.deviceAlias.includes(e)));return(0,o.jsx)(de.a.Consumer,{children:({streamTruck:t})=>(0,o.jsxs)(Oe,Object.assign({},{loading:M},{open:e,handleClickConfirm:_,handleClose:W},{children:[(0,o.jsx)(s.Z,Object.assign({container:!0},{children:(0,o.jsx)(s.Z,Object.assign({item:!0,xs:12},{children:(0,o.jsx)(g.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16}},{children:"Reasignación de camiones"}),void 0)}),void 0)}),void 0),(0,o.jsxs)(s.Z,Object.assign({container:!0,style:{paddingLeft:4}},{children:[(0,o.jsx)(s.Z,Object.assign({item:!0,xs:6},{children:(0,o.jsx)(r.Z,Object.assign({style:{margin:10}},{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.Z,Object.assign({style:{position:"sticky",zIndex:1,top:0,background:"#f6f6f6",padding:2}},{children:(0,o.jsx)(T.V,{functionFilter:A,setItems:p,items:l,placeholder:"Camiones"},void 0)}),void 0),(0,o.jsx)(Ye,Object.assign({},{trucks:a,useTrucksSelect:m,streamTruck:t,disableWithOperation:!1}),void 0)]},void 0)}),void 0)}),void 0),(0,o.jsx)(s.Z,Object.assign({item:!0,xs:6},{children:(0,o.jsx)(r.Z,Object.assign({style:{margin:10}},{children:(0,o.jsx)(O.Z,Object.assign({subheader:(0,o.jsx)(h.Z,Object.assign({component:"div"},{children:"Excavadora destino"}),void 0)},{children:(0,o.jsx)(R.Z,{children:(0,o.jsx)(C.Z,{children:(0,o.jsx)(ae.Z,Object.assign({component:"fieldset"},{children:(0,o.jsx)(pe.Z,Object.assign({"aria-label":"gender",name:"radio-buttons-group"},{children:n.filter((e=>2===e.state)).map((e=>{var t;return(0,o.jsx)(le.Z,{value:e.id,control:(0,o.jsx)(ce.Z,{},void 0),onChange:I,label:`  ${null===(t=e.excavatorList[0])||void 0===t?void 0:t.deviceAlias}`},e.id)}))}),void 0)}),void 0)},void 0)},void 0)}),void 0)}),void 0)}),void 0)]}),void 0),(0,o.jsx)(me,{open:x,handleClose:B,handleConfirm:N,title:"¿Esta seguro?",message:"Intentaremos mover estos camiones, si ocurre algun error se le informará"},void 0),(0,o.jsx)(qe,{open:D,handleClose:Z,msg:z,severity:w},void 0)]}),void 0)},void 0)},Ke=(0,d.Z)((e=>({root:{flex:1},list:{flex:1,maxHeight:"75vh",paddingLeft:e.spacing(1),marginLeft:e.spacing(1),overflowY:"scroll",marginBottom:e.spacing(2)}}))),He=({trucks:e,excavators:t,useExcasSelect:i,useTrucksSelect:n})=>{const[a,p]=i,l=(0,y.useState)(),c=Ke(),[d,u]=(0,y.useState)(e),g=t=>e.filter((e=>e.deviceAlias.includes(t)));return(0,o.jsx)(r.Z,Object.assign({className:c.root,elevation:4},{children:(0,o.jsxs)(s.Z,Object.assign({container:!0,direction:"row"},{children:[(0,o.jsxs)(O.Z,Object.assign({className:c.list,dense:!0,subheader:(0,o.jsx)(x,{title:"Palas",useOpen:l},void 0)},{children:[(0,o.jsx)(ae.Z,Object.assign({component:"fieldset"},{children:(0,o.jsx)(pe.Z,Object.assign({"aria-label":"gender",name:"radio-buttons-group"},{children:t.map((e=>(0,o.jsx)(y.Fragment,{children:(0,o.jsx)(le.Z,{value:e.id,control:(0,o.jsx)(ce.Z,{},void 0),onClick:()=>(e=>{a.pop(),a.push(e),p(JSON.parse(JSON.stringify(a)))})(e),label:`${e.deviceAlias}`},void 0)},e.id)))}),void 0)}),void 0),(0,o.jsx)(te.Z,{},void 0)]}),void 0),(0,o.jsx)(de.a.Consumer,{children:({streamTruck:t})=>(0,o.jsxs)(O.Z,Object.assign({className:c.list,dense:!0,subheader:(0,o.jsx)(x,{title:"Camiones",useOpen:l},void 0)},{children:[l[0]&&(0,o.jsx)(T.V,{functionFilter:g,setItems:u,items:e},void 0),(0,o.jsx)(Ye,{streamTruck:t,trucks:d,useTrucksSelect:n,disableWithOperation:!0},void 0)]}),void 0)},void 0)]}),void 0)}),void 0)};var Xe=i(724),Qe=i(3471),et=i(9813);const tt=(e,t)=>{e.flyTo({center:t}),setTimeout((()=>{e.zoomTo(14,{duration:2e3})}),1e3)},it=({setIsNew:e,map:t,setZoom:i})=>{const d=(0,y.useState)([]),u=(0,y.useState)([]),g=(0,y.useState)([]),b=(0,y.useState)(),O=(0,y.useState)(),[h,v]=(0,y.useState)(0),[m,f]=(0,y.useState)([]),[j,x]=(0,y.useState)([]),[R,C]=(0,y.useState)(!1),[S,M]=(0,y.useState)(""),[T,k]=(0,y.useState)(""),D=()=>{C(!1)};function F(e,t,i,r,s){switch(console.log(),h){case 0:return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ee,Object.assign({},{useLoadSelect:b,benchs:e,stockCells:r}),void 0)," ",(0,o.jsx)(P,Object.assign({},{useUnloadSelect:O,padCells:t,dmeCells:s}),void 0)]},void 0);case 1:return(0,o.jsx)(ne,Object.assign({},{routes:i,useSelect:d}),void 0);case 2:return(0,o.jsx)(He,Object.assign({},{trucks:m,excavators:j,useTrucksSelect:u,useExcasSelect:g}),void 0)}}(0,y.useEffect)((()=>{((e,t)=>{var i,o,r,s;i=void 0,o=void 0,s=function*(){(0,_e.r)().then((t=>{e(t)})).catch((t=>{e([]),console.log(t)})),(0,Ne.X)().then((e=>{t(e)})).catch((e=>{console.log(e),t([])}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{p(s.next(e))}catch(e){t(e)}}function a(e){try{p(s.throw(e))}catch(e){t(e)}}function p(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(n,a)}p((s=s.apply(i,o||[])).next())}))})(f,x)}),[]);const w=()=>{v((e=>e-1))},E=()=>{v((e=>e+1))},z=b[0],L=O[0],Z=u[0],I=g[0],B=d[0],W=()=>{I.length<=0&&Z.length<=0?(C(!0),k("Debe seleccionar una excabadora"),M("warning")):z&&L&&Z&&I&&((e,t,i,o,r)=>{console.log("unload",t);const s={authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2MzQzODk4MDUsInVzZXJuYW1lIjoiZGlzcGF0Y2hlciIsInJvbGUiOiJESVMifQ.IIKVGiv1ve4AST9EdQ1XjujDWDG3qCHzF57knK7A1Y8"},n=new xe,a=new Se,p=new Me,l=new Te,c=new ke,d=new De,u=new Ze,g=new Fe,b=new Ee,y=new Re;if(console.log(e),1===e.type?(l.setId(e.value.id),a.setType(1),b.addPolygon(l),b.setId(e.idProject),g.addProject(b),a.setPit(g)):(u.setId(e.value.id),a.setType(3),a.setStock(u)),1===t.type){const e=new we;e.setId(t.value.idPad),c.setId(t.value.id),e.addCell(c),p.setType(2),p.setPad(e)}return 2===t.type&&(d.setId(t.value.idDme),c.setId(t.value.id),d.addCell(c),p.setType(4),p.setDme(d)),n.setShift(1),n.setState(2),n.setUpload(a),n.setDownload(p),r.forEach((e=>{const t=new ze;t.setId(e.id),n.addRoad(t)})),i.forEach((e=>{const t=new Le;t.setId(e.id),n.addTruck(t)})),o.forEach((e=>{const t=new Ie;t.setId(e.id),n.addExcavator(t)})),console.log("operation",n),y.setOperation(n),new Promise(((e,t)=>{Be.createOperation(y,s,((i,o)=>{if(i)console.log("error message",i.message),t(i);else{const t=o.getOperation().toObject();console.log("saveOperationResponse",t),e(t)}}))}))})(z,L,Z,I,B).then((t=>{e(!1)})).catch((e=>{console.log(e),C(!0),k("Error al guardar: posiblemente las unidades ya estan en otra operación: "+e.message),M("warning")}))},_=e=>{switch(e){case 0:return!(!z||!L);case 1:return B.length>0;case 2:return I.length>0}},N=()=>{e(!1),i(14.81)};return(0,o.jsx)(de.a.Consumer,{children:({padCells:e,benchs:t,stockCells:i,routes:d,dmeCells:u})=>(0,o.jsxs)(r.Z,Object.assign({style:{height:"100vh",minWidth:600,overflowY:"scroll",display:"flex",flexDirection:"column",alignItems:"center"}},{children:[(0,o.jsxs)(s.Z,Object.assign({container:!0,alignItems:"center",alignContent:"center"},{children:[(0,o.jsx)(n.Z,Object.assign({onClick:N},{children:(0,o.jsx)(Xe.Z,{fontSize:"small"},void 0)}),void 0),(0,o.jsxs)(a.Z,Object.assign({style:{padding:8},alternativeLabel:!0,nonLinear:!0,activeStep:h},{children:[(0,o.jsx)(p.Z,Object.assign({completed:!0},{children:(0,o.jsx)(l.Z,Object.assign({completed:_(0)},{children:"Carga/Descarga"}),void 0)}),void 0),(0,o.jsx)(p.Z,Object.assign({completed:!0},{children:(0,o.jsx)(l.Z,Object.assign({completed:_(1)},{children:"Tramos/Ruta"}),void 0)}),void 0),(0,o.jsx)(p.Z,Object.assign({completed:!0},{children:(0,o.jsx)(l.Z,Object.assign({completed:_(2)},{children:"Pala/Camiones"}),void 0)}),void 0)]}),void 0)]}),void 0),(0,o.jsx)(s.Z,Object.assign({container:!0,style:{padding:4,flex:1}},{children:F(t,e,d,i,u)}),void 0),(0,o.jsxs)(s.Z,Object.assign({container:!0,style:{marginBottom:8}},{children:[(0,o.jsx)(c.Z,Object.assign({size:"small",color:"inherit",variant:"contained",onClick:w,disabled:0===h,startIcon:(0,o.jsx)(Qe.Z,{fontSize:"small"},void 0)},{children:"Regresar"}),void 0),(0,o.jsx)(c.Z,Object.assign({size:"small",disabled:!_(h),color:"secondary",onClick:2==h?W:E,variant:"contained",endIcon:(0,o.jsx)(et.Z,{fontSize:"small"},void 0)},{children:2==h?"Guardar":"Siguiente"}),void 0)]}),void 0),(0,o.jsx)(qe,{open:R,handleClose:D,msg:T,severity:S},void 0)]}),void 0)},void 0)};var ot,rt,st,nt,at=i(3534),pt=i(529),lt=i(6438),ct=i(5263),dt=i(2200),ut=i(179),gt=i(868);!function(e){e[e.DESCONOCIDO=0]="DESCONOCIDO",e[e.TAJO=1]="TAJO",e[e.PAD=2]="PAD",e[e.STOCK=3]="STOCK",e[e.DME=4]="DME",e[e.RUTA=5]="RUTA"}(ot||(ot={})),function(e){e[e._=0]="_",e[e.pit=1]="pit",e[e.pad=2]="pad",e[e.stock=3]="stock",e[e.dme=4]="dme",e[e.road=5]="road"}(rt||(rt={})),function(e){e.PIT="pit",e.PAD="pad",e.STOCK="stock",e.DME="dme",e.ROAD="road"}(st||(st={})),function(e){e[e.Desconocido=0]="Desconocido",e[e.Pendiente=1]="Pendiente",e[e.Operando=2]="Operando",e[e.Finalizado=3]="Finalizado"}(nt||(nt={}));const bt=({setOperationSelect:e,setReassignSelect:t})=>[{field:"startTime",headerName:"Inicio",type:"date",width:170},{field:"excavator",headerName:"Palas",width:110},{field:"trunks",headerName:"Camiones",flex:1},{field:"cycles",headerName:"Ciclos",minWidth:50,maxWidth:60},{field:"labelUpload",headerName:"Carga",minWidth:200},{field:"labelDownload",headerName:"Descarga",minWidth:160},{field:"state",headerName:"Estado",minWidth:130},{field:"Opciones",headerName:"Opc",minWidth:110,renderCell:({row:i})=>{const[r,s]=(0,y.useState)(!0);return(0,o.jsxs)(o.Fragment,{children:[i.state!==nt[3]&&(0,o.jsx)(gt.ZP,Object.assign({title:"Reasignar"},{children:(0,o.jsx)(n.Z,Object.assign({size:"small",onClick:()=>{t(i)}},{children:(0,o.jsx)(dt.Z,{fontSize:"small"},void 0)}),void 0)}),void 0),(0,o.jsx)(gt.ZP,Object.assign({title:"Detalle"},{children:(0,o.jsx)(n.Z,Object.assign({size:"small",onClick:()=>{e(i),s((e=>!e))}},{children:r?(0,o.jsx)(ie.Z,{fontSize:"small"},void 0):(0,o.jsx)(Qe.Z,{fontSize:"small"},void 0)}),void 0)}),void 0)]},void 0)}}];var yt=i(6562),Ot=function(e,t,i,o){return new(i||(i=Promise))((function(r,s){function n(e){try{p(o.next(e))}catch(e){s(e)}}function a(e){try{p(o.throw(e))}catch(e){s(e)}}function p(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,a)}p((o=o.apply(e,t||[])).next())}))};const ht=({operation:e,operations:t,setOperation:i,setRefresh:n})=>{if(!e)return(0,o.jsx)(o.Fragment,{},void 0);const[a,p]=(0,y.useState)([]),[l]=(0,y.useState)(e),[c,d]=y.useState(!1),[u,b]=y.useState(!1),[v,m]=(0,y.useState)(),[f,j]=(0,y.useState)(!1),[x,S]=(0,y.useState)("success"),[M,T]=(0,y.useState)(""),k=()=>{i(void 0)},D=e=>{m(e.target.value)},F=e=>!!a.find((t=>e.id===t.id)),w=l.excavatorList&&l.excavatorList.length>0?l.excavatorList[0]:{};return(0,o.jsxs)(Oe,Object.assign({},{loading:u},{open:!!e,setOpen:()=>i(void 0),handleClickConfirm:()=>{a.length>0&&v&&e.id?d(!0):(j(!0),S("warning"),T("Es necesario seleccionar algún camión y una excavadora"))},handleClose:k},{children:[(0,o.jsx)(s.Z,Object.assign({container:!0},{children:(0,o.jsx)(s.Z,Object.assign({item:!0,xs:12},{children:(0,o.jsx)(g.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16}},{children:"Reasignación de camiones"}),void 0)}),void 0)}),void 0),(0,o.jsxs)(s.Z,Object.assign({container:!0,style:{paddingLeft:4}},{children:[(0,o.jsx)(s.Z,Object.assign({item:!0,xs:6},{children:(0,o.jsx)(r.Z,Object.assign({style:{margin:10}},{children:(0,o.jsx)(O.Z,Object.assign({subheader:(0,o.jsxs)(h.Z,Object.assign({component:"div",id:"nested-list-subheader"},{children:["Camiones en ",w.deviceAlias]}),void 0)},{children:(0,o.jsx)(R.Z,{children:(0,o.jsx)(C.Z,{children:(0,o.jsx)(yt.Z,{children:l.truckList.map((e=>(0,o.jsx)(le.Z,{checked:F(e),value:e.id,control:(0,o.jsx)(Ae.Z,{onClick:()=>(e=>{const t=a.findIndex((t=>t.deviceId===e.deviceId));-1===t?a.push(e):a.splice(t,1),p(JSON.parse(JSON.stringify(a)))})(e)},void 0),label:`${e.deviceAlias}`},e.id)))},void 0)},void 0)},void 0)}),void 0)}),void 0)}),void 0),(0,o.jsx)(s.Z,Object.assign({item:!0,xs:6},{children:(0,o.jsx)(r.Z,Object.assign({style:{margin:10}},{children:(0,o.jsx)(O.Z,Object.assign({subheader:(0,o.jsx)(h.Z,Object.assign({component:"div"},{children:"Excavadora destino"}),void 0)},{children:(0,o.jsx)(R.Z,{children:(0,o.jsx)(C.Z,{children:(0,o.jsx)(ae.Z,Object.assign({component:"fieldset"},{children:(0,o.jsx)(pe.Z,Object.assign({"aria-label":"gender",name:"radio-buttons-group"},{children:t.map((e=>3!==e.state&&(0,o.jsx)(le.Z,{value:e.id,disabled:l.id===e.id,control:(0,o.jsx)(ce.Z,{},void 0),onChange:D,label:`${e.excavatorList[0].deviceAlias}`},e.id)))}),void 0)}),void 0)},void 0)},void 0)}),void 0)}),void 0)}),void 0),(0,o.jsx)(me,{open:c,handleClose:k,handleConfirm:()=>{((e,t,i,o,r)=>{Ot(void 0,void 0,void 0,(function*(){i(!0);const s=yield We(e,t);console.log("responseAssigment",s),i(!1),o((e=>!e)),r(void 0);let n="";s.truckErrorList.length>0&&s.truckErrorList.forEach((e=>{const t=1===e.state?"CARGANDO":"A DESCARGA";n+=` ${e.truckError.deviceAlias}=> ${t},`})),""!==n&&alert(`Las siguientes unidades no han podido ser reasignadas: ${n}`)}))})(v,a,b,n,i),d(!1)},title:"¿Esta seguro?",message:"Intentaremos mover estos camiones, si ocurre algun error se le informará"},void 0),(0,o.jsx)(qe,{open:f,handleClose:()=>{j(!1)},msg:M,severity:x},void 0)]}),void 0)]}),void 0)};var vt=i(1860);const mt=({value:e,cy:t})=>{switch(e){case st.PAD:return(0,o.jsx)(C.Z,{primary:`Descarga: ${ot[t.download.type]} -  ${t.download.pad.cellList[0].name}`},void 0);case st.DME:return(0,o.jsx)(C.Z,{primary:`Descarga: ${ot[t.download.type]} -  ${t.download.dme.cellList[0].name}`},void 0);case st.PIT:return(0,o.jsx)(C.Z,{primary:`Descarga: ${ot[t.download.type]} -  ${t.download.pit.cellList[0].name}`},void 0);case st.STOCK:return(0,o.jsx)(C.Z,{primary:`Descarga: ${ot[t.download.type]} -  ${t.download.stock.cellList[0].name}`},void 0);default:return(0,o.jsx)(o.Fragment,{},void 0)}},ft=({value:e,cy:t})=>{switch(e){case st.PAD:return(0,o.jsx)(C.Z,{primary:`Carga: ${ot[t.upload.type]} -  ${t.upload.pad.projectList[0].name}-${t.upload.pad.projectList[0].polygonList[0].name}`},void 0);case st.DME:return(0,o.jsx)(C.Z,{primary:`Carga: ${ot[t.upload.type]} -  ${t.upload.dme.projectList[0].name} - ${t.upload.dme.projectList[0].polygonList[0].name}`},void 0);case st.PIT:return(0,o.jsx)(C.Z,{primary:`Carga: ${ot[t.upload.type]} -  ${t.upload.pit.projectList[0].name}- ${t.upload.pit.projectList[0].polygonList[0].name}`},void 0);case st.STOCK:return(0,o.jsx)(C.Z,{primary:`Carga: ${ot[t.upload.type]} -  ${t.upload.stock.projectList[0].name}-${t.upload.stock.projectList[0].polygonList[0].name}`},void 0);default:return(0,o.jsx)(o.Fragment,{children:"node"},void 0)}},jt=({cy:e,index:t})=>{const[i,n]=(0,y.useState)(!1),a=()=>{n(!i)},p=e.startTime?e.startTime.substring(0,19):"NO REG",l=e.downloadArrivalTime?e.downloadArrivalTime.substring(0,19):"NO REG. ",c=e.endTime?e.endTime.substring(0,19):"NO REG. ";return(0,o.jsxs)(r.Z,Object.assign({elevation:1,style:{marginBottom:4},id:e.id},{children:[(0,o.jsxs)(R.Z,Object.assign({dense:!0,disableGutters:!0,selected:!0,button:!0,onClick:a},{children:[(0,o.jsxs)(s.Z,Object.assign({justify:"space-between",container:!0},{children:[(0,o.jsx)(C.Z,{primary:`${t}.${e.truck.deviceAlias} `},void 0),(0,o.jsx)(C.Z,{primary:p},void 0),(0,o.jsx)(C.Z,{primary:l},void 0),(0,o.jsx)(C.Z,{primary:c},void 0)]}),void 0),(0,o.jsx)(vt.Z,Object.assign({onClick:a},{children:(0,o.jsx)(s.Z,Object.assign({container:!0,direction:"row",alignItems:"center"},{children:i?(0,o.jsx)(q.Z,{fontSize:"small",onClick:a},void 0):(0,o.jsx)(J.Z,{fontSize:"small",onClick:a},void 0)}),void 0)}),void 0)]}),void 0),(0,o.jsx)(U.Z,Object.assign({in:i,style:{paddingLeft:10}},{children:(0,o.jsxs)(O.Z,Object.assign({dense:!0,disablePadding:!0},{children:[(0,o.jsx)(R.Z,{children:(0,o.jsx)((()=>{let t="";return e.upload.pit&&(t="pit"),e.upload.stock&&(t="stock"),(0,o.jsx)(ft,{value:t,cy:e},void 0)}),{},void 0)},void 0),(0,o.jsx)(R.Z,{children:(0,o.jsx)((()=>{let t="";return e.download.dme&&(t="dme"),e.download.pad&&(t="pad"),e.download.stock&&(t="stock"),(0,o.jsx)(mt,{value:t,cy:e},void 0)}),{},void 0)},void 0),(0,o.jsx)(R.Z,{children:(0,o.jsx)(C.Z,{primary:`Pala: ${e.excavator.deviceAlias} `},void 0)},void 0),(0,o.jsx)(R.Z,{children:(0,o.jsx)(C.Z,{primary:`Camion: ${e.truck.deviceAlias} `},void 0)},void 0)]}),void 0)}),void 0)]}),e.id)},xt=()=>(0,o.jsx)(r.Z,Object.assign({elevation:1,style:{marginBottom:4}},{children:(0,o.jsx)(R.Z,Object.assign({dense:!0,disableGutters:!0,selected:!0,button:!0},{children:(0,o.jsxs)(s.Z,Object.assign({justify:"space-between",container:!0},{children:[(0,o.jsx)(C.Z,{primary:"TRUCK"},void 0),(0,o.jsx)(C.Z,{primary:"INICIO"},void 0),(0,o.jsx)(C.Z,{primary:"DESCARGA"},void 0),(0,o.jsx)(C.Z,{primary:"FIN"},void 0)]}),void 0)}),void 0)}),void 0);var Rt=i(6019),Ct=i(2930),St=i(1267),Mt=i(5639),Tt=i(2285);const kt=(0,d.Z)((e=>({disabledSpacing:{},checkbox:{"& .MuiCheckbox-root":{margin:0,padding:0,paddingLeft:8}}}))),Dt=({truck:e,checked:t,useTrucksSelect:i})=>{const r=kt(),[s,n]=i;return(0,o.jsx)(R.Z,Object.assign({button:!0,dense:!0,className:r.disabledSpacing},{children:(0,o.jsx)(le.Z,{className:r.checkbox,onChange:()=>{const t=s.findIndex((t=>e.deviceId===t.deviceId));-1===t?s.push(e):s.splice(t,1),n(JSON.parse(JSON.stringify(s)))},control:(0,o.jsx)(Ae.Z,{size:"small",checked:t,inputProps:{style:{padding:0}}},void 0),label:`${e.deviceAlias} `},void 0)}),void 0)};var Ft=i(4673),wt=i(8561);const Et=({value:e,operationSelect:t})=>(0,o.jsx)(s.Z,Object.assign({item:!0},{children:(0,o.jsx)(St.Z,{style:{marginLeft:4},icon:(0,o.jsx)(wt.Z,{},void 0),size:"small",label:(()=>{switch(e){case st.DME:return`Descarga: ${ot[t.download.type]} ${t.download.dme.name}`;case st.PAD:return`Descarga: ${ot[t.download.type]} ${t.download.pad.name}`;case st.STOCK:return`Descarga: ${ot[t.download.type]}`;default:return""}})()},void 0)}),void 0),zt=({value:e,operationSelect:t})=>(0,o.jsx)(s.Z,Object.assign({item:!0},{children:(0,o.jsx)(St.Z,{style:{marginLeft:4},icon:(0,o.jsx)(wt.Z,{},void 0),size:"small",label:(()=>{switch(e){case st.STOCK:return`Carga:  ${ot[t.upload.type]}  ${t.upload.stock.name}`;case st.PIT:return`Carga:  ${ot[t.upload.type]}  ${t.upload.pit.name}`;default:return""}})()},void 0)}),void 0);var Lt=i(7965);const Zt=e=>{const{operation:t,setOperationSelect:i,setRefresh:r}=e,[n,a]=y.useState(!1),[p,l]=y.useState(!1),[d,u]=(0,y.useState)(""),[b,O]=(0,y.useState)("success"),h=t&&t.excavatorList&&t.excavatorList.length>0?t.excavatorList[0]:{};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(s.Z,Object.assign({container:!0,style:{paddingLeft:2},alignItems:"center"},{children:[(0,o.jsx)(s.Z,Object.assign({item:!0},{children:(0,o.jsxs)(g.Z,Object.assign({variant:"button",style:{paddingLeft:4,paddingTop:16}},{children:["Detalle de operación",(0,o.jsx)(St.Z,{style:{marginLeft:4},icon:(0,o.jsx)(Lt.Z,{},void 0),size:"small",label:h.deviceAlias},void 0)]}),void 0)}),void 0),(0,o.jsx)(s.Z,Object.assign({item:!0},{children:(0,o.jsx)(St.Z,{style:{marginLeft:4},icon:(0,o.jsx)(Lt.Z,{},void 0),size:"small",label:`Camiones: ${t?t.truckList.length:0}`},void 0)}),void 0),(0,o.jsx)(s.Z,Object.assign({item:!0},{children:(0,o.jsx)(St.Z,{style:{marginLeft:4},icon:(0,o.jsx)(Lt.Z,{},void 0),size:"small",label:`Palas: ${t?t.excavatorList.length:0}`},void 0)}),void 0),(0,o.jsx)(s.Z,Object.assign({item:!0},{children:(0,o.jsx)(St.Z,{style:{marginLeft:4},icon:(0,o.jsx)(Lt.Z,{},void 0),size:"small",label:`Ciclos: ${t?t.cycleList.length:0}`},void 0)}),void 0),(0,o.jsx)(s.Z,Object.assign({item:!0},{children:(0,o.jsx)((()=>{let e="";return t?(t.upload.pit&&(e="pit"),t.upload.stock&&(e="stock"),(0,o.jsx)(zt,{value:e,operationSelect:t},void 0)):(0,o.jsx)(o.Fragment,{},void 0)}),{},void 0)}),void 0),(0,o.jsx)(s.Z,Object.assign({item:!0},{children:(0,o.jsx)((()=>{let e="";return t?(t.download.dme&&(e="dme"),t.download.pad&&(e="pad"),t.download.stock&&(e="stock"),(0,o.jsx)(Et,{value:e,operationSelect:t},void 0)):(0,o.jsx)(o.Fragment,{},void 0)}),{},void 0)}),void 0),t&&(t.state===nt[2]||2===t.state)&&(0,o.jsxs)(pt.Z,Object.assign({m:.5},{children:[(0,o.jsx)(c.Z,Object.assign({variant:"contained",color:"primary",onClick:()=>{a(!0)},size:"small"},{children:"Finalizar Operación"}),void 0),(0,o.jsx)(me,{open:n,handleClose:()=>{a(!1)},handleConfirm:()=>{((e,t,i,o)=>{Ot(void 0,void 0,void 0,(function*(){const r=yield(e=>{const t={authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2MzQzODk4MDUsInVzZXJuYW1lIjoiZGlzcGF0Y2hlciIsInJvbGUiOiJESVMifQ.IIKVGiv1ve4AST9EdQ1XjujDWDG3qCHzF57knK7A1Y8"},i=new xe,o=new Re;return i.setId(e),o.setOperation(i),new Promise(((e,i)=>{Be.finalizeOperation(o,t,((t,o)=>{if(t)console.log("error message operations get",t.message),i(t);else{const t=o.toObject();console.log("operationFinalize",t),e(t)}}))}))})(e);t((e=>!e));let s="";r.operation&&(i("La operacion se ha finalizado exitosamente"),o("success")),r.truckErrorList.length>0&&r.truckErrorList.forEach((e=>{const t=1===e.state?"CARGANDO":"A DESCARGA";s+=` ${e.truckError.deviceAlias} => ${t},`})),""!==s&&(i(`La operacion no ha podido finalizarse porque el camión : ${s}`),o("error"))}))})(t.id,r,u,O),a(!1),l(!0)},title:"¿Esta seguro?",message:`Esta intentando finalizar la operacion  ${t.excavatorList[0].deviceAlias}, si ocurre algun error se le informará`},void 0)]}),void 0),(0,o.jsx)(qe,{open:p,handleClose:()=>{i(void 0)},msg:d,severity:b},void 0)]}),void 0)},void 0)};function It(e,t){return(0,o.jsx)(jt,{cy:e,index:t+1},e.id)}const Bt=function({cycles:e}){const[t,i]=(0,y.useState)([]),[r,s]=(0,y.useState)([]);return(0,y.useEffect)((()=>{const t=e.map((e=>e.truck)),o=[...new Set(t.map((e=>e.deviceId)))];i(o.map((e=>t.find((t=>t.deviceId===e)))))}),[e.length]),(0,o.jsxs)(O.Z,Object.assign({dense:!0,style:{margin:"0px 8px"}},{children:[(0,o.jsx)(Rt.Z,Object.assign({id:"id-label"},{children:"Filtro por Camión"}),void 0),(0,o.jsx)(Ct.Z,Object.assign({labelId:"id-label",style:{width:"100%"},multiple:!0,value:r,onChange:e=>{const t=e.target.value;s(t)},renderValue:e=>(0,o.jsx)("div",{children:e.map((e=>(0,o.jsx)(St.Z,{label:t.find((t=>t.deviceId===e)).deviceAlias,clickable:!0,deleteIcon:(0,o.jsx)(Ft.Z,{onMouseDown:e=>e.stopPropagation()},void 0),onDelete:t=>(e=>{const t=r.findIndex((t=>t===e));t>=0&&r.splice(t,1),s(JSON.parse(JSON.stringify(r)))})(e)},e)))},void 0)},{children:t.map((e=>(0,o.jsxs)(Mt.Z,Object.assign({value:e.deviceId},{children:[(0,o.jsx)(Ae.Z,{checked:!!r.find((t=>t===e.deviceId))},void 0),(0,o.jsx)(C.Z,{primary:e.deviceAlias},void 0)]}),e.deviceId)))}),void 0),(0,o.jsx)(pt.Z,{height:4},void 0),(0,o.jsx)(xt,{},void 0),0===r.length?e.map(It):e.filter((e=>r.find((t=>t===e.truck.deviceId)))).map(It)]}),void 0)},Wt=({operationSelect:e,setRefresh:t,setOperationSelect:i})=>{const n=(0,y.useState)([]),a=n[0],[p,l]=(0,y.useState)(!1),[d,u]=(0,y.useState)("success"),[b,h]=(0,y.useState)(""),v=e=>!!a.find((t=>e.id===t.id)),m=e&&e.cycleList;return e?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,o.jsx)(Zt,{operation:e,setRefresh:t,setOperationSelect:i},void 0),(0,o.jsxs)(s.Z,Object.assign({container:!0},{children:[m&&(0,o.jsx)(s.Z,Object.assign({item:!0,md:6},{children:(0,o.jsx)(Tt.Z,Object.assign({direction:"left",in:!!e,mountOnEnter:!0,unmountOnExit:!0},{children:(0,o.jsxs)(r.Z,Object.assign({elevation:4},{children:[(0,o.jsx)(g.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16}},{children:"Ciclos"}),void 0),(0,o.jsx)(Bt,{cycles:e.cycleList},void 0)]}),void 0)}),void 0)}),void 0),(0,o.jsx)(s.Z,Object.assign({item:!0,md:3,style:{paddingLeft:4}},{children:(0,o.jsx)(Tt.Z,Object.assign({in:!!e,mountOnEnter:!0,unmountOnExit:!0},{children:(0,o.jsxs)(r.Z,Object.assign({elevation:4},{children:[(0,o.jsx)(g.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16}},{children:"Camiones"}),void 0),(0,o.jsxs)(O.Z,Object.assign({dense:!0},{children:[m&&e.truckList.map((e=>(0,o.jsx)(Dt,{checked:v(e),useTrucksSelect:n,truck:e},e.id))),(0,o.jsx)(R.Z,{children:(0,o.jsx)(c.Z,Object.assign({onClick:()=>{a.length<=0?(l(!0),h("Debe seleccionar por lo menos un camión"),u("warning")):((e,t,i,o,r,s,n)=>{Ot(void 0,void 0,void 0,(function*(){console.log("idOperation",e),console.log("eventRemoveTrucks",t);const a=yield((e,t)=>{const i={authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2MzQzODk4MDUsInVzZXJuYW1lIjoiZGlzcGF0Y2hlciIsInJvbGUiOiJESVMifQ.IIKVGiv1ve4AST9EdQ1XjujDWDG3qCHzF57knK7A1Y8"},o=new xe,r=new Re;return o.setId(t),e.map((e=>{const t=new Le;t.setId(e.id),t.setDeviceId(e.deviceId),t.setDeviceAlias(e.deviceAlias),t.setDeviceInterval(e.deviceInterval),t.setDescription(e.description),t.setPlate(e.plate),o.addTruck(t)})),r.setOperation(o),new Promise(((e,t)=>{Be.removeTrucksOperation(r,i,((i,o)=>{if(i)console.log("error message operations get",i.message),t(i);else{const t=o.toObject();console.log("removeTrucks",t),e(t)}}))}))})(t,e);console.log("responseRemoveTrucks",a),i((e=>!e)),o(!0),r("Camiones liberados"),s("success"),setTimeout((()=>{n(void 0)}),100),console.log("response",a)}))})(e.id,a,t,l,h,u,i)},color:"secondary",variant:"contained",size:"small",disabled:0===a.length},{children:"Liberar Camiones"}),void 0)},void 0)]}),void 0)]}),void 0)}),void 0)}),void 0),(0,o.jsx)(s.Z,Object.assign({item:!0,md:3,style:{paddingLeft:4}},{children:(0,o.jsx)(Tt.Z,Object.assign({in:!!e,mountOnEnter:!0,unmountOnExit:!0},{children:(0,o.jsxs)(r.Z,Object.assign({elevation:4},{children:[(0,o.jsx)(g.Z,Object.assign({variant:"button",style:{paddingLeft:8,paddingTop:16}},{children:"Rutas"}),void 0),(0,o.jsx)(O.Z,Object.assign({dense:!0},{children:m&&e.roadList.map((e=>(0,o.jsx)(R.Z,{children:(0,o.jsx)(C.Z,{primary:`${e.name}`},void 0)},e.id)))}),void 0)]}),void 0)}),void 0)}),void 0)]}),void 0),(0,o.jsx)(qe,{open:p,handleClose:()=>{l(!1),i(void 0)},msg:b,severity:d},void 0)]}),void 0)},void 0):(0,o.jsx)(o.Fragment,{},void 0)};var _t=i(7623),Nt=i(8920),At=i(6211),Pt=i(3758);const Ut=(0,d.Z)((e=>(0,_t.Z)({fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)}})));function $t({actionClick:e,Icon:t,visible:i,disabled:r,right:s,color:n,keyAction:a}){const p=Ut(),l=(0,Nt.Z)();(0,y.useEffect)((()=>{const t=t=>{console.log(t.key),t.key!==(null==a?void 0:a.toUpperCase())&&t.key!==(null==a?void 0:a.toLocaleLowerCase())&&t.key!==a||e()};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}),[]);const c={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen};return(0,o.jsx)(At.Z,Object.assign({in:i,timeout:c,unmountOnExit:!0},{children:(0,o.jsx)(Pt.Z,Object.assign({disabled:r,onClick:e,className:p.fab,style:{right:s},size:"small",color:n||"primary"},{children:(0,o.jsx)(t,{},void 0)}),void 0)}),void 0)}const Gt=(0,i(8129).Z)(),qt=(0,f.Z)((e=>({root:{flexDirection:"column","& .ant-empty-img-1":{fill:"light"===e.palette.type?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:"light"===e.palette.type?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:"light"===e.palette.type?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:"light"===e.palette.type?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:"light"===e.palette.type?"0.8":"0.08",fill:"light"===e.palette.type?"#f5f5f5":"#fff"}},label:{marginTop:e.spacing(1)}})),{defaultTheme:Gt});function Jt(){const e=qt();return(0,o.jsxs)(lt.nik,Object.assign({className:e.root},{children:[(0,o.jsx)("svg",Object.assign({width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false"},{children:(0,o.jsxs)("g",Object.assign({fill:"none",fillRule:"evenodd"},{children:[(0,o.jsxs)("g",Object.assign({transform:"translate(24 31.67)"},{children:[(0,o.jsx)("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"},void 0),(0,o.jsx)("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"},void 0),(0,o.jsx)("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"},void 0),(0,o.jsx)("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"},void 0)]}),void 0),(0,o.jsx)("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"},void 0),(0,o.jsxs)("g",Object.assign({className:"ant-empty-img-4",transform:"translate(149.65 15.383)"},{children:[(0,o.jsx)("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"},void 0),(0,o.jsx)("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"},void 0)]}),void 0)]}),void 0)}),void 0),(0,o.jsx)("div",Object.assign({className:e.label},{children:"Sin datos"}),void 0)]}),void 0)}const Yt=(e,t)=>{return i=void 0,o=void 0,s=function*(){t(!0),(()=>{const e={authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2MzQzODk4MDUsInVzZXJuYW1lIjoiZGlzcGF0Y2hlciIsInJvbGUiOiJESVMifQ.IIKVGiv1ve4AST9EdQ1XjujDWDG3qCHzF57knK7A1Y8"},t=new xe,i=new Re;return i.setOperation(t),new Promise(((t,o)=>{Be.retrieveOperations(i,e,((e,i)=>{if(e)console.log("error message operations get",e.message),o(e);else{const e=i.toObject();console.log("operations",i),t(e.operationsList?e.operationsList:[])}}))}))})().then((i=>{console.log("opers",i),e(i),t(!1)})).catch((i=>{e([]),console.log(i),t(!1)}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{p(s.next(e))}catch(e){t(e)}}function a(e){try{p(s.throw(e))}catch(e){t(e)}}function p(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(n,a)}p((s=s.apply(i,o||[])).next())}));var i,o,r,s},Vt=e=>{if(!e)return"";const t=rt[e.type];switch(e.type){case 1:return e.pit&&e.pit.projectList&&e.pit.projectList.length>0&&e.pit.projectList[0].polygonList&&e.pit.projectList[0].polygonList.length>0?`${e.pit.projectList[0].name} - ${e.pit.projectList[0].polygonList[0].name}`:"";case 3:return e[t]&&e[t].cellList&&e[t].cellList.length>0?e[t].cellList[0].name:"";default:return""}},Kt=e=>{if(!e&&1!==e.type)return"";const t=rt[e.type];return`${"dme"===t?"Desm.":"Mine."} ${e[t]&&e[t].cellList&&e[t].cellList.length>0?e[t].cellList[0].name:""}`},Ht=({setIsNew:e})=>{const[t,i]=(0,y.useState)([]),[n,a]=(0,y.useState)([]),[p,l]=(0,y.useState)(!1),[d,u]=(0,y.useState)(!0),[b,O]=(0,y.useState)(null),[h,v]=(0,y.useState)(null);(0,y.useEffect)((()=>{a(t.map((e=>Object.assign(Object.assign({},e),{startTime:e.startTime.substring(0,19),trunks:e.truckList.map((e=>e.deviceAlias)),excavator:e.excavatorList.map((e=>e.deviceAlias)),typeUpload:ot[e.upload.type],labelUpload:`${ot[e.upload.type]} ${Vt(e.upload)}`,labelDownload:`${Kt(e.download)}`,typeDownload:ot[e.download.type],state:nt[e.state],cycles:e.cycleList.length}))))}),[t]);const[m,f]=(0,y.useState)([{field:"startTime",sort:"desc"}]);(0,y.useEffect)((()=>{const e=setInterval((()=>{R()}),3e5);return()=>{clearInterval(e)}}),[]),(0,y.useEffect)((()=>{if(b){const e=t.findIndex((e=>b.id===e.id));O(t[e])}}),[t]);const[j,x]=(0,y.useState)(!1);(0,y.useEffect)((()=>{Yt(i,u)}),[p]);const R=()=>{l((e=>!e))};return(0,o.jsx)(pt.Z,Object.assign({m:2},{children:(0,o.jsxs)(s.Z,Object.assign({style:{height:b?"100%":"90vh",overflowY:"scroll",display:"flex",flexDirection:"column"}},{children:[(0,o.jsx)(pt.Z,Object.assign({m:.5},{children:(0,o.jsx)(g.Z,Object.assign({variant:"h5"},{children:"Lista de operaciones"}),void 0)}),void 0),(0,o.jsx)(r.Z,Object.assign({elevation:2,style:{height:"100%",margin:4}},{children:(0,o.jsx)(pt.Z,Object.assign({p:.5,style:{height:"100%"}},{children:(0,o.jsxs)(s.Z,Object.assign({container:!0,direction:"column",style:{height:"100%"}},{children:[(0,o.jsxs)(s.Z,Object.assign({item:!0},{children:[(0,o.jsxs)("div",Object.assign({style:{display:b||h?"none":"block"}},{children:[(0,o.jsx)(c.Z,Object.assign({onClick:()=>e(!0),color:"primary",variant:"contained",size:"small",startIcon:(0,o.jsx)(ct.Z,{fontSize:"small"},void 0)},{children:"Nueva"}),void 0),(0,o.jsx)(c.Z,Object.assign({onClick:()=>{x(!0)},style:{marginLeft:8},color:"secondary",variant:"outlined",size:"small",startIcon:(0,o.jsx)(dt.Z,{fontSize:"small"},void 0)},{children:"Reasignacion"}),void 0)]}),void 0),(0,o.jsx)($t,{visible:!d,actionClick:R,Icon:ut.Z,disabled:d,color:"secondary",right:b?56:8,keyAction:"R"},void 0),(0,o.jsx)($t,{visible:!!b,actionClick:()=>{O(void 0),v(void 0),l((e=>!e))},Icon:Qe.Z,disabled:!1,right:8,keyAction:"Backspace"},void 0)]}),void 0),(0,o.jsx)(s.Z,Object.assign({item:!0,style:{display:b?"none":"flex",flex:1}},{children:(0,o.jsx)(lt._$r,{rows:n,columns:bt({setOperationSelect:O,setReassignSelect:v}),components:{NoRowsOverlay:Jt},loading:d,density:"compact",sortModel:m,onSortModelChange:e=>(e=>{0!=e.length?e[0].field!=m[0].field||e[0].sort!=m[0].sort?f(e):console.log("else"):"desc"==m[0].sort?f([Object.assign(Object.assign({},m[0]),{sort:"asc"})]):f([Object.assign(Object.assign({},m[0]),{sort:"desc"})])})(e)},void 0)}),void 0),(0,o.jsx)(Wt,Object.assign({},{operationSelect:b,setRefresh:l,setOperationSelect:O}),void 0)]}),void 0)}),void 0)}),void 0),(0,o.jsx)(Ve,{open:j,setOpen:x,setRefresh:l,operations:t},void 0),(0,o.jsx)(ht,Object.assign({operations:t,operation:h,setOperation:v},{setRefresh:l}),void 0)]}),void 0)}),void 0)},Xt=(0,y.createContext)(null),Qt=()=>{const[e,t]=(0,y.useState)(-78.196),[i,r]=(0,y.useState)(-7.6163),n=(0,y.useRef)(null),a=(0,y.useRef)(null),[p,l]=(0,y.useState)(14.81),[c,d]=(0,y.useState)(!1);return(0,y.useEffect)((()=>{c||(a.current=null)}),[c]),(0,o.jsx)(Xt.Provider,Object.assign({value:a.current},{children:c?(0,o.jsxs)(s.Z,Object.assign({container:!0},{children:[(0,o.jsx)(it,{map:a,setZoom:l,setIsNew:d},void 0),(0,o.jsx)(at.Z,Object.assign({map:a,dragRotate:!1,style:"mapbox://styles/dispatchgat/ckqqsfc2y46bo17sf1y29zwnj",mapContainer:n,bearing:0,pitch:15},{lat:i,lng:e,zoom:p,setLat:r,setLng:t,setZoom:l,setLoad:()=>{}}),"map1")]}),void 0):(0,o.jsx)(Ht,{setIsNew:d},void 0)}),void 0)};function ei(){return(0,o.jsx)("div",{children:(0,o.jsx)(Qt,{},void 0)},void 0)}},2357:(e,t,i)=>{var o=i(3019),r=o,s=Function("return this")(),n=i(3779);r.object.extend(proto,n);var a=i(6034);r.object.extend(proto,a);var p=i(4188);r.object.extend(proto,p);var l=i(7007);r.object.extend(proto,l);var c=i(1783);r.object.extend(proto,c),r.exportSymbol("proto.pb.Cycle",null,s),r.exportSymbol("proto.pb.Cycle.Mode",null,s),r.exportSymbol("proto.pb.Cycle.Shift",null,s),r.exportSymbol("proto.pb.Cycle.State",null,s),r.exportSymbol("proto.pb.CycleRequest",null,s),r.exportSymbol("proto.pb.CycleResponse",null,s),r.exportSymbol("proto.pb.CyclesResponse",null,s),proto.pb.Cycle=function(e){o.Message.initialize(this,e,0,-1,proto.pb.Cycle.repeatedFields_,null)},r.inherits(proto.pb.Cycle,o.Message),r.DEBUG&&!COMPILED&&(proto.pb.Cycle.displayName="proto.pb.Cycle"),proto.pb.CycleRequest=function(e){o.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.pb.CycleRequest,o.Message),r.DEBUG&&!COMPILED&&(proto.pb.CycleRequest.displayName="proto.pb.CycleRequest"),proto.pb.CycleResponse=function(e){o.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.pb.CycleResponse,o.Message),r.DEBUG&&!COMPILED&&(proto.pb.CycleResponse.displayName="proto.pb.CycleResponse"),proto.pb.CyclesResponse=function(e){o.Message.initialize(this,e,0,-1,proto.pb.CyclesResponse.repeatedFields_,null)},r.inherits(proto.pb.CyclesResponse,o.Message),r.DEBUG&&!COMPILED&&(proto.pb.CyclesResponse.displayName="proto.pb.CyclesResponse"),proto.pb.Cycle.repeatedFields_=[21],o.Message.GENERATE_TO_OBJECT&&(proto.pb.Cycle.prototype.toObject=function(e){return proto.pb.Cycle.toObject(e,this)},proto.pb.Cycle.toObject=function(e,t){var i,r={id:o.Message.getFieldWithDefault(t,1,""),operationId:o.Message.getFieldWithDefault(t,2,""),name:o.Message.getFieldWithDefault(t,3,""),description:o.Message.getFieldWithDefault(t,4,""),arrivalTime:o.Message.getFieldWithDefault(t,5,""),downloadArrivalTime:o.Message.getFieldWithDefault(t,6,""),startTime:o.Message.getFieldWithDefault(t,7,""),endTime:o.Message.getFieldWithDefault(t,8,""),number:o.Message.getFieldWithDefault(t,9,0),distance:o.Message.getFloatingPointFieldWithDefault(t,10,0),duration:o.Message.getFloatingPointFieldWithDefault(t,11,0),mode:o.Message.getFieldWithDefault(t,12,0),state:o.Message.getFieldWithDefault(t,13,0),shift:o.Message.getFieldWithDefault(t,14,0),shiftDate:o.Message.getFieldWithDefault(t,15,""),upload:(i=t.getUpload())&&c.Upload.toObject(e,i),download:(i=t.getDownload())&&c.Download.toObject(e,i),material:(i=t.getMaterial())&&p.Material.toObject(e,i),truck:(i=t.getTruck())&&n.Truck.toObject(e,i),excavator:(i=t.getExcavator())&&a.Excavator.toObject(e,i),truckinfoList:o.Message.toObjectList(t.getTruckinfoList(),l.TruckInfo.toObject,e)};return e&&(r.$jspbMessageInstance=t),r}),proto.pb.Cycle.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.Cycle;return proto.pb.Cycle.deserializeBinaryFromReader(i,t)},proto.pb.Cycle.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=t.readString();e.setId(i);break;case 2:i=t.readString(),e.setOperationId(i);break;case 3:i=t.readString(),e.setName(i);break;case 4:i=t.readString(),e.setDescription(i);break;case 5:i=t.readString(),e.setArrivalTime(i);break;case 6:i=t.readString(),e.setDownloadArrivalTime(i);break;case 7:i=t.readString(),e.setStartTime(i);break;case 8:i=t.readString(),e.setEndTime(i);break;case 9:i=t.readInt64(),e.setNumber(i);break;case 10:i=t.readDouble(),e.setDistance(i);break;case 11:i=t.readDouble(),e.setDuration(i);break;case 12:i=t.readEnum(),e.setMode(i);break;case 13:i=t.readEnum(),e.setState(i);break;case 14:i=t.readEnum(),e.setShift(i);break;case 15:i=t.readString(),e.setShiftDate(i);break;case 16:i=new c.Upload,t.readMessage(i,c.Upload.deserializeBinaryFromReader),e.setUpload(i);break;case 17:i=new c.Download,t.readMessage(i,c.Download.deserializeBinaryFromReader),e.setDownload(i);break;case 18:i=new p.Material,t.readMessage(i,p.Material.deserializeBinaryFromReader),e.setMaterial(i);break;case 19:i=new n.Truck,t.readMessage(i,n.Truck.deserializeBinaryFromReader),e.setTruck(i);break;case 20:i=new a.Excavator,t.readMessage(i,a.Excavator.deserializeBinaryFromReader),e.setExcavator(i);break;case 21:i=new l.TruckInfo,t.readMessage(i,l.TruckInfo.deserializeBinaryFromReader),e.addTruckinfo(i);break;default:t.skipField()}return e},proto.pb.Cycle.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.Cycle.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.Cycle.serializeBinaryToWriter=function(e,t){var i=void 0;(i=e.getId()).length>0&&t.writeString(1,i),(i=e.getOperationId()).length>0&&t.writeString(2,i),(i=e.getName()).length>0&&t.writeString(3,i),(i=e.getDescription()).length>0&&t.writeString(4,i),(i=e.getArrivalTime()).length>0&&t.writeString(5,i),(i=e.getDownloadArrivalTime()).length>0&&t.writeString(6,i),(i=e.getStartTime()).length>0&&t.writeString(7,i),(i=e.getEndTime()).length>0&&t.writeString(8,i),0!==(i=e.getNumber())&&t.writeInt64(9,i),0!==(i=e.getDistance())&&t.writeDouble(10,i),0!==(i=e.getDuration())&&t.writeDouble(11,i),0!==(i=e.getMode())&&t.writeEnum(12,i),0!==(i=e.getState())&&t.writeEnum(13,i),0!==(i=e.getShift())&&t.writeEnum(14,i),(i=e.getShiftDate()).length>0&&t.writeString(15,i),null!=(i=e.getUpload())&&t.writeMessage(16,i,c.Upload.serializeBinaryToWriter),null!=(i=e.getDownload())&&t.writeMessage(17,i,c.Download.serializeBinaryToWriter),null!=(i=e.getMaterial())&&t.writeMessage(18,i,p.Material.serializeBinaryToWriter),null!=(i=e.getTruck())&&t.writeMessage(19,i,n.Truck.serializeBinaryToWriter),null!=(i=e.getExcavator())&&t.writeMessage(20,i,a.Excavator.serializeBinaryToWriter),(i=e.getTruckinfoList()).length>0&&t.writeRepeatedMessage(21,i,l.TruckInfo.serializeBinaryToWriter)},proto.pb.Cycle.State={UNKNOWN_STATE:0,OPENED:1,CLOSED:2},proto.pb.Cycle.Mode={UNKNOWN_MODE:0,NORMAL:1,ALTERED:2},proto.pb.Cycle.Shift={UNKNOWN_SHIFT:0,NIGHT:1,DAY:2},proto.pb.Cycle.prototype.getId=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.pb.Cycle.prototype.setId=function(e){return o.Message.setProto3StringField(this,1,e)},proto.pb.Cycle.prototype.getOperationId=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.pb.Cycle.prototype.setOperationId=function(e){return o.Message.setProto3StringField(this,2,e)},proto.pb.Cycle.prototype.getName=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.pb.Cycle.prototype.setName=function(e){return o.Message.setProto3StringField(this,3,e)},proto.pb.Cycle.prototype.getDescription=function(){return o.Message.getFieldWithDefault(this,4,"")},proto.pb.Cycle.prototype.setDescription=function(e){return o.Message.setProto3StringField(this,4,e)},proto.pb.Cycle.prototype.getArrivalTime=function(){return o.Message.getFieldWithDefault(this,5,"")},proto.pb.Cycle.prototype.setArrivalTime=function(e){return o.Message.setProto3StringField(this,5,e)},proto.pb.Cycle.prototype.getDownloadArrivalTime=function(){return o.Message.getFieldWithDefault(this,6,"")},proto.pb.Cycle.prototype.setDownloadArrivalTime=function(e){return o.Message.setProto3StringField(this,6,e)},proto.pb.Cycle.prototype.getStartTime=function(){return o.Message.getFieldWithDefault(this,7,"")},proto.pb.Cycle.prototype.setStartTime=function(e){return o.Message.setProto3StringField(this,7,e)},proto.pb.Cycle.prototype.getEndTime=function(){return o.Message.getFieldWithDefault(this,8,"")},proto.pb.Cycle.prototype.setEndTime=function(e){return o.Message.setProto3StringField(this,8,e)},proto.pb.Cycle.prototype.getNumber=function(){return o.Message.getFieldWithDefault(this,9,0)},proto.pb.Cycle.prototype.setNumber=function(e){return o.Message.setProto3IntField(this,9,e)},proto.pb.Cycle.prototype.getDistance=function(){return o.Message.getFloatingPointFieldWithDefault(this,10,0)},proto.pb.Cycle.prototype.setDistance=function(e){return o.Message.setProto3FloatField(this,10,e)},proto.pb.Cycle.prototype.getDuration=function(){return o.Message.getFloatingPointFieldWithDefault(this,11,0)},proto.pb.Cycle.prototype.setDuration=function(e){return o.Message.setProto3FloatField(this,11,e)},proto.pb.Cycle.prototype.getMode=function(){return o.Message.getFieldWithDefault(this,12,0)},proto.pb.Cycle.prototype.setMode=function(e){return o.Message.setProto3EnumField(this,12,e)},proto.pb.Cycle.prototype.getState=function(){return o.Message.getFieldWithDefault(this,13,0)},proto.pb.Cycle.prototype.setState=function(e){return o.Message.setProto3EnumField(this,13,e)},proto.pb.Cycle.prototype.getShift=function(){return o.Message.getFieldWithDefault(this,14,0)},proto.pb.Cycle.prototype.setShift=function(e){return o.Message.setProto3EnumField(this,14,e)},proto.pb.Cycle.prototype.getShiftDate=function(){return o.Message.getFieldWithDefault(this,15,"")},proto.pb.Cycle.prototype.setShiftDate=function(e){return o.Message.setProto3StringField(this,15,e)},proto.pb.Cycle.prototype.getUpload=function(){return o.Message.getWrapperField(this,c.Upload,16)},proto.pb.Cycle.prototype.setUpload=function(e){return o.Message.setWrapperField(this,16,e)},proto.pb.Cycle.prototype.clearUpload=function(){return this.setUpload(void 0)},proto.pb.Cycle.prototype.hasUpload=function(){return null!=o.Message.getField(this,16)},proto.pb.Cycle.prototype.getDownload=function(){return o.Message.getWrapperField(this,c.Download,17)},proto.pb.Cycle.prototype.setDownload=function(e){return o.Message.setWrapperField(this,17,e)},proto.pb.Cycle.prototype.clearDownload=function(){return this.setDownload(void 0)},proto.pb.Cycle.prototype.hasDownload=function(){return null!=o.Message.getField(this,17)},proto.pb.Cycle.prototype.getMaterial=function(){return o.Message.getWrapperField(this,p.Material,18)},proto.pb.Cycle.prototype.setMaterial=function(e){return o.Message.setWrapperField(this,18,e)},proto.pb.Cycle.prototype.clearMaterial=function(){return this.setMaterial(void 0)},proto.pb.Cycle.prototype.hasMaterial=function(){return null!=o.Message.getField(this,18)},proto.pb.Cycle.prototype.getTruck=function(){return o.Message.getWrapperField(this,n.Truck,19)},proto.pb.Cycle.prototype.setTruck=function(e){return o.Message.setWrapperField(this,19,e)},proto.pb.Cycle.prototype.clearTruck=function(){return this.setTruck(void 0)},proto.pb.Cycle.prototype.hasTruck=function(){return null!=o.Message.getField(this,19)},proto.pb.Cycle.prototype.getExcavator=function(){return o.Message.getWrapperField(this,a.Excavator,20)},proto.pb.Cycle.prototype.setExcavator=function(e){return o.Message.setWrapperField(this,20,e)},proto.pb.Cycle.prototype.clearExcavator=function(){return this.setExcavator(void 0)},proto.pb.Cycle.prototype.hasExcavator=function(){return null!=o.Message.getField(this,20)},proto.pb.Cycle.prototype.getTruckinfoList=function(){return o.Message.getRepeatedWrapperField(this,l.TruckInfo,21)},proto.pb.Cycle.prototype.setTruckinfoList=function(e){return o.Message.setRepeatedWrapperField(this,21,e)},proto.pb.Cycle.prototype.addTruckinfo=function(e,t){return o.Message.addToRepeatedWrapperField(this,21,e,proto.pb.TruckInfo,t)},proto.pb.Cycle.prototype.clearTruckinfoList=function(){return this.setTruckinfoList([])},o.Message.GENERATE_TO_OBJECT&&(proto.pb.CycleRequest.prototype.toObject=function(e){return proto.pb.CycleRequest.toObject(e,this)},proto.pb.CycleRequest.toObject=function(e,t){var i,o={cycle:(i=t.getCycle())&&proto.pb.Cycle.toObject(e,i)};return e&&(o.$jspbMessageInstance=t),o}),proto.pb.CycleRequest.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.CycleRequest;return proto.pb.CycleRequest.deserializeBinaryFromReader(i,t)},proto.pb.CycleRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new proto.pb.Cycle;t.readMessage(i,proto.pb.Cycle.deserializeBinaryFromReader),e.setCycle(i);break;default:t.skipField()}return e},proto.pb.CycleRequest.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.CycleRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.CycleRequest.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.getCycle())&&t.writeMessage(1,i,proto.pb.Cycle.serializeBinaryToWriter)},proto.pb.CycleRequest.prototype.getCycle=function(){return o.Message.getWrapperField(this,proto.pb.Cycle,1)},proto.pb.CycleRequest.prototype.setCycle=function(e){return o.Message.setWrapperField(this,1,e)},proto.pb.CycleRequest.prototype.clearCycle=function(){return this.setCycle(void 0)},proto.pb.CycleRequest.prototype.hasCycle=function(){return null!=o.Message.getField(this,1)},o.Message.GENERATE_TO_OBJECT&&(proto.pb.CycleResponse.prototype.toObject=function(e){return proto.pb.CycleResponse.toObject(e,this)},proto.pb.CycleResponse.toObject=function(e,t){var i,o={cycle:(i=t.getCycle())&&proto.pb.Cycle.toObject(e,i)};return e&&(o.$jspbMessageInstance=t),o}),proto.pb.CycleResponse.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.CycleResponse;return proto.pb.CycleResponse.deserializeBinaryFromReader(i,t)},proto.pb.CycleResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new proto.pb.Cycle;t.readMessage(i,proto.pb.Cycle.deserializeBinaryFromReader),e.setCycle(i);break;default:t.skipField()}return e},proto.pb.CycleResponse.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.CycleResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.CycleResponse.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.getCycle())&&t.writeMessage(1,i,proto.pb.Cycle.serializeBinaryToWriter)},proto.pb.CycleResponse.prototype.getCycle=function(){return o.Message.getWrapperField(this,proto.pb.Cycle,1)},proto.pb.CycleResponse.prototype.setCycle=function(e){return o.Message.setWrapperField(this,1,e)},proto.pb.CycleResponse.prototype.clearCycle=function(){return this.setCycle(void 0)},proto.pb.CycleResponse.prototype.hasCycle=function(){return null!=o.Message.getField(this,1)},proto.pb.CyclesResponse.repeatedFields_=[1],o.Message.GENERATE_TO_OBJECT&&(proto.pb.CyclesResponse.prototype.toObject=function(e){return proto.pb.CyclesResponse.toObject(e,this)},proto.pb.CyclesResponse.toObject=function(e,t){var i={cyclesList:o.Message.toObjectList(t.getCyclesList(),proto.pb.Cycle.toObject,e)};return e&&(i.$jspbMessageInstance=t),i}),proto.pb.CyclesResponse.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.CyclesResponse;return proto.pb.CyclesResponse.deserializeBinaryFromReader(i,t)},proto.pb.CyclesResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new proto.pb.Cycle;t.readMessage(i,proto.pb.Cycle.deserializeBinaryFromReader),e.addCycles(i);break;default:t.skipField()}return e},proto.pb.CyclesResponse.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.CyclesResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.CyclesResponse.serializeBinaryToWriter=function(e,t){var i;(i=e.getCyclesList()).length>0&&t.writeRepeatedMessage(1,i,proto.pb.Cycle.serializeBinaryToWriter)},proto.pb.CyclesResponse.prototype.getCyclesList=function(){return o.Message.getRepeatedWrapperField(this,proto.pb.Cycle,1)},proto.pb.CyclesResponse.prototype.setCyclesList=function(e){return o.Message.setRepeatedWrapperField(this,1,e)},proto.pb.CyclesResponse.prototype.addCycles=function(e,t){return o.Message.addToRepeatedWrapperField(this,1,e,proto.pb.Cycle,t)},proto.pb.CyclesResponse.prototype.clearCyclesList=function(){return this.setCyclesList([])},r.object.extend(t,proto.pb)},7872:(e,t,i)=>{const o={};o.web=i(3040),i(3779),i(6034),i(3112),i(2357),i(1783);const r={};r.pb=i(2799),r.pb.OperationServiceClient=function(e,t,i){i||(i={}),i.format="text",this.client_=new o.web.GrpcWebClientBase(i),this.hostname_=e},r.pb.OperationServicePromiseClient=function(e,t,i){i||(i={}),i.format="text",this.client_=new o.web.GrpcWebClientBase(i),this.hostname_=e};const s=new o.web.MethodDescriptor("/pb.OperationService/CreateOperation",o.web.MethodType.UNARY,r.pb.OperationRequest,r.pb.OperationResponse,(function(e){return e.serializeBinary()}),r.pb.OperationResponse.deserializeBinary);new o.web.AbstractClientBase.MethodInfo(r.pb.OperationResponse,(function(e){return e.serializeBinary()}),r.pb.OperationResponse.deserializeBinary),r.pb.OperationServiceClient.prototype.createOperation=function(e,t,i){return this.client_.rpcCall(this.hostname_+"/pb.OperationService/CreateOperation",e,t||{},s,i)},r.pb.OperationServicePromiseClient.prototype.createOperation=function(e,t){return this.client_.unaryCall(this.hostname_+"/pb.OperationService/CreateOperation",e,t||{},s)};const n=new o.web.MethodDescriptor("/pb.OperationService/RetrieveOperation",o.web.MethodType.UNARY,r.pb.OperationRequest,r.pb.OperationResponse,(function(e){return e.serializeBinary()}),r.pb.OperationResponse.deserializeBinary);new o.web.AbstractClientBase.MethodInfo(r.pb.OperationResponse,(function(e){return e.serializeBinary()}),r.pb.OperationResponse.deserializeBinary),r.pb.OperationServiceClient.prototype.retrieveOperation=function(e,t,i){return this.client_.rpcCall(this.hostname_+"/pb.OperationService/RetrieveOperation",e,t||{},n,i)},r.pb.OperationServicePromiseClient.prototype.retrieveOperation=function(e,t){return this.client_.unaryCall(this.hostname_+"/pb.OperationService/RetrieveOperation",e,t||{},n)};const a=new o.web.MethodDescriptor("/pb.OperationService/RetrieveOperations",o.web.MethodType.UNARY,r.pb.OperationRequest,r.pb.OperationsResponse,(function(e){return e.serializeBinary()}),r.pb.OperationsResponse.deserializeBinary);new o.web.AbstractClientBase.MethodInfo(r.pb.OperationsResponse,(function(e){return e.serializeBinary()}),r.pb.OperationsResponse.deserializeBinary),r.pb.OperationServiceClient.prototype.retrieveOperations=function(e,t,i){return this.client_.rpcCall(this.hostname_+"/pb.OperationService/RetrieveOperations",e,t||{},a,i)},r.pb.OperationServicePromiseClient.prototype.retrieveOperations=function(e,t){return this.client_.unaryCall(this.hostname_+"/pb.OperationService/RetrieveOperations",e,t||{},a)};const p=new o.web.MethodDescriptor("/pb.OperationService/UpdateOperation",o.web.MethodType.UNARY,r.pb.OperationRequest,r.pb.OperationResponse,(function(e){return e.serializeBinary()}),r.pb.OperationResponse.deserializeBinary);new o.web.AbstractClientBase.MethodInfo(r.pb.OperationResponse,(function(e){return e.serializeBinary()}),r.pb.OperationResponse.deserializeBinary),r.pb.OperationServiceClient.prototype.updateOperation=function(e,t,i){return this.client_.rpcCall(this.hostname_+"/pb.OperationService/UpdateOperation",e,t||{},p,i)},r.pb.OperationServicePromiseClient.prototype.updateOperation=function(e,t){return this.client_.unaryCall(this.hostname_+"/pb.OperationService/UpdateOperation",e,t||{},p)};const l=new o.web.MethodDescriptor("/pb.OperationService/DeleteOperation",o.web.MethodType.UNARY,r.pb.OperationRequest,r.pb.OperationResponse,(function(e){return e.serializeBinary()}),r.pb.OperationResponse.deserializeBinary);new o.web.AbstractClientBase.MethodInfo(r.pb.OperationResponse,(function(e){return e.serializeBinary()}),r.pb.OperationResponse.deserializeBinary),r.pb.OperationServiceClient.prototype.deleteOperation=function(e,t,i){return this.client_.rpcCall(this.hostname_+"/pb.OperationService/DeleteOperation",e,t||{},l,i)},r.pb.OperationServicePromiseClient.prototype.deleteOperation=function(e,t){return this.client_.unaryCall(this.hostname_+"/pb.OperationService/DeleteOperation",e,t||{},l)};const c=new o.web.MethodDescriptor("/pb.OperationService/RemoveTrucksOperation",o.web.MethodType.UNARY,r.pb.OperationRequest,r.pb.OperationResponse,(function(e){return e.serializeBinary()}),r.pb.OperationResponse.deserializeBinary);new o.web.AbstractClientBase.MethodInfo(r.pb.OperationResponse,(function(e){return e.serializeBinary()}),r.pb.OperationResponse.deserializeBinary),r.pb.OperationServiceClient.prototype.removeTrucksOperation=function(e,t,i){return this.client_.rpcCall(this.hostname_+"/pb.OperationService/RemoveTrucksOperation",e,t||{},c,i)},r.pb.OperationServicePromiseClient.prototype.removeTrucksOperation=function(e,t){return this.client_.unaryCall(this.hostname_+"/pb.OperationService/RemoveTrucksOperation",e,t||{},c)};const d=new o.web.MethodDescriptor("/pb.OperationService/ReassigmentTrucksOperation",o.web.MethodType.UNARY,r.pb.OperationReassigmentRequest,r.pb.OperationReassigmentResponse,(function(e){return e.serializeBinary()}),r.pb.OperationReassigmentResponse.deserializeBinary);new o.web.AbstractClientBase.MethodInfo(r.pb.OperationReassigmentResponse,(function(e){return e.serializeBinary()}),r.pb.OperationReassigmentResponse.deserializeBinary),r.pb.OperationServiceClient.prototype.reassigmentTrucksOperation=function(e,t,i){return this.client_.rpcCall(this.hostname_+"/pb.OperationService/ReassigmentTrucksOperation",e,t||{},d,i)},r.pb.OperationServicePromiseClient.prototype.reassigmentTrucksOperation=function(e,t){return this.client_.unaryCall(this.hostname_+"/pb.OperationService/ReassigmentTrucksOperation",e,t||{},d)};const u=new o.web.MethodDescriptor("/pb.OperationService/FinalizeOperation",o.web.MethodType.UNARY,r.pb.OperationRequest,r.pb.OperationFinalizeResponse,(function(e){return e.serializeBinary()}),r.pb.OperationFinalizeResponse.deserializeBinary);new o.web.AbstractClientBase.MethodInfo(r.pb.OperationFinalizeResponse,(function(e){return e.serializeBinary()}),r.pb.OperationFinalizeResponse.deserializeBinary),r.pb.OperationServiceClient.prototype.finalizeOperation=function(e,t,i){return this.client_.rpcCall(this.hostname_+"/pb.OperationService/FinalizeOperation",e,t||{},u,i)},r.pb.OperationServicePromiseClient.prototype.finalizeOperation=function(e,t){return this.client_.unaryCall(this.hostname_+"/pb.OperationService/FinalizeOperation",e,t||{},u)},e.exports=r.pb},2799:(e,t,i)=>{var o=i(3019),r=o,s=Function("return this")(),n=i(3779);r.object.extend(proto,n);var a=i(6034);r.object.extend(proto,a);var p=i(3112);r.object.extend(proto,p);var l=i(2357);r.object.extend(proto,l);var c=i(1783);r.object.extend(proto,c),r.exportSymbol("proto.pb.Operation",null,s),r.exportSymbol("proto.pb.Operation.Shift",null,s),r.exportSymbol("proto.pb.Operation.State",null,s),r.exportSymbol("proto.pb.OperationFinalizeResponse",null,s),r.exportSymbol("proto.pb.OperationReassigmentRequest",null,s),r.exportSymbol("proto.pb.OperationReassigmentResponse",null,s),r.exportSymbol("proto.pb.OperationRequest",null,s),r.exportSymbol("proto.pb.OperationResponse",null,s),r.exportSymbol("proto.pb.OperationsResponse",null,s),r.exportSymbol("proto.pb.TruckStateMessage",null,s),r.exportSymbol("proto.pb.TruckStateMessage.State",null,s),proto.pb.Operation=function(e){o.Message.initialize(this,e,0,-1,proto.pb.Operation.repeatedFields_,null)},r.inherits(proto.pb.Operation,o.Message),r.DEBUG&&!COMPILED&&(proto.pb.Operation.displayName="proto.pb.Operation"),proto.pb.OperationRequest=function(e){o.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.pb.OperationRequest,o.Message),r.DEBUG&&!COMPILED&&(proto.pb.OperationRequest.displayName="proto.pb.OperationRequest"),proto.pb.OperationResponse=function(e){o.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.pb.OperationResponse,o.Message),r.DEBUG&&!COMPILED&&(proto.pb.OperationResponse.displayName="proto.pb.OperationResponse"),proto.pb.TruckStateMessage=function(e){o.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.pb.TruckStateMessage,o.Message),r.DEBUG&&!COMPILED&&(proto.pb.TruckStateMessage.displayName="proto.pb.TruckStateMessage"),proto.pb.OperationsResponse=function(e){o.Message.initialize(this,e,0,-1,proto.pb.OperationsResponse.repeatedFields_,null)},r.inherits(proto.pb.OperationsResponse,o.Message),r.DEBUG&&!COMPILED&&(proto.pb.OperationsResponse.displayName="proto.pb.OperationsResponse"),proto.pb.OperationReassigmentRequest=function(e){o.Message.initialize(this,e,0,-1,proto.pb.OperationReassigmentRequest.repeatedFields_,null)},r.inherits(proto.pb.OperationReassigmentRequest,o.Message),r.DEBUG&&!COMPILED&&(proto.pb.OperationReassigmentRequest.displayName="proto.pb.OperationReassigmentRequest"),proto.pb.OperationReassigmentResponse=function(e){o.Message.initialize(this,e,0,-1,proto.pb.OperationReassigmentResponse.repeatedFields_,null)},r.inherits(proto.pb.OperationReassigmentResponse,o.Message),r.DEBUG&&!COMPILED&&(proto.pb.OperationReassigmentResponse.displayName="proto.pb.OperationReassigmentResponse"),proto.pb.OperationFinalizeResponse=function(e){o.Message.initialize(this,e,0,-1,proto.pb.OperationFinalizeResponse.repeatedFields_,null)},r.inherits(proto.pb.OperationFinalizeResponse,o.Message),r.DEBUG&&!COMPILED&&(proto.pb.OperationFinalizeResponse.displayName="proto.pb.OperationFinalizeResponse"),proto.pb.Operation.repeatedFields_=[12,13,14,15],o.Message.GENERATE_TO_OBJECT&&(proto.pb.Operation.prototype.toObject=function(e){return proto.pb.Operation.toObject(e,this)},proto.pb.Operation.toObject=function(e,t){var i,r={id:o.Message.getFieldWithDefault(t,1,""),name:o.Message.getFieldWithDefault(t,2,""),description:o.Message.getFieldWithDefault(t,3,""),startTime:o.Message.getFieldWithDefault(t,4,""),endTime:o.Message.getFieldWithDefault(t,5,""),distance:o.Message.getFloatingPointFieldWithDefault(t,6,0),duration:o.Message.getFloatingPointFieldWithDefault(t,7,0),shift:o.Message.getFieldWithDefault(t,8,0),state:o.Message.getFieldWithDefault(t,9,0),upload:(i=t.getUpload())&&c.Upload.toObject(e,i),download:(i=t.getDownload())&&c.Download.toObject(e,i),roadList:o.Message.toObjectList(t.getRoadList(),p.Road.toObject,e),truckList:o.Message.toObjectList(t.getTruckList(),n.Truck.toObject,e),excavatorList:o.Message.toObjectList(t.getExcavatorList(),a.Excavator.toObject,e),cycleList:o.Message.toObjectList(t.getCycleList(),l.Cycle.toObject,e)};return e&&(r.$jspbMessageInstance=t),r}),proto.pb.Operation.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.Operation;return proto.pb.Operation.deserializeBinaryFromReader(i,t)},proto.pb.Operation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=t.readString();e.setId(i);break;case 2:i=t.readString(),e.setName(i);break;case 3:i=t.readString(),e.setDescription(i);break;case 4:i=t.readString(),e.setStartTime(i);break;case 5:i=t.readString(),e.setEndTime(i);break;case 6:i=t.readDouble(),e.setDistance(i);break;case 7:i=t.readDouble(),e.setDuration(i);break;case 8:i=t.readEnum(),e.setShift(i);break;case 9:i=t.readEnum(),e.setState(i);break;case 10:i=new c.Upload,t.readMessage(i,c.Upload.deserializeBinaryFromReader),e.setUpload(i);break;case 11:i=new c.Download,t.readMessage(i,c.Download.deserializeBinaryFromReader),e.setDownload(i);break;case 12:i=new p.Road,t.readMessage(i,p.Road.deserializeBinaryFromReader),e.addRoad(i);break;case 13:i=new n.Truck,t.readMessage(i,n.Truck.deserializeBinaryFromReader),e.addTruck(i);break;case 14:i=new a.Excavator,t.readMessage(i,a.Excavator.deserializeBinaryFromReader),e.addExcavator(i);break;case 15:i=new l.Cycle,t.readMessage(i,l.Cycle.deserializeBinaryFromReader),e.addCycle(i);break;default:t.skipField()}return e},proto.pb.Operation.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.Operation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.Operation.serializeBinaryToWriter=function(e,t){var i=void 0;(i=e.getId()).length>0&&t.writeString(1,i),(i=e.getName()).length>0&&t.writeString(2,i),(i=e.getDescription()).length>0&&t.writeString(3,i),(i=e.getStartTime()).length>0&&t.writeString(4,i),(i=e.getEndTime()).length>0&&t.writeString(5,i),0!==(i=e.getDistance())&&t.writeDouble(6,i),0!==(i=e.getDuration())&&t.writeDouble(7,i),0!==(i=e.getShift())&&t.writeEnum(8,i),0!==(i=e.getState())&&t.writeEnum(9,i),null!=(i=e.getUpload())&&t.writeMessage(10,i,c.Upload.serializeBinaryToWriter),null!=(i=e.getDownload())&&t.writeMessage(11,i,c.Download.serializeBinaryToWriter),(i=e.getRoadList()).length>0&&t.writeRepeatedMessage(12,i,p.Road.serializeBinaryToWriter),(i=e.getTruckList()).length>0&&t.writeRepeatedMessage(13,i,n.Truck.serializeBinaryToWriter),(i=e.getExcavatorList()).length>0&&t.writeRepeatedMessage(14,i,a.Excavator.serializeBinaryToWriter),(i=e.getCycleList()).length>0&&t.writeRepeatedMessage(15,i,l.Cycle.serializeBinaryToWriter)},proto.pb.Operation.Shift={UNKNOWN_SHIFT:0,NIGHT:1,DAY:2},proto.pb.Operation.State={UNKNOWN_STATE:0,PENDING:1,OPENED:2,CLOSED:3},proto.pb.Operation.prototype.getId=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.pb.Operation.prototype.setId=function(e){return o.Message.setProto3StringField(this,1,e)},proto.pb.Operation.prototype.getName=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.pb.Operation.prototype.setName=function(e){return o.Message.setProto3StringField(this,2,e)},proto.pb.Operation.prototype.getDescription=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.pb.Operation.prototype.setDescription=function(e){return o.Message.setProto3StringField(this,3,e)},proto.pb.Operation.prototype.getStartTime=function(){return o.Message.getFieldWithDefault(this,4,"")},proto.pb.Operation.prototype.setStartTime=function(e){return o.Message.setProto3StringField(this,4,e)},proto.pb.Operation.prototype.getEndTime=function(){return o.Message.getFieldWithDefault(this,5,"")},proto.pb.Operation.prototype.setEndTime=function(e){return o.Message.setProto3StringField(this,5,e)},proto.pb.Operation.prototype.getDistance=function(){return o.Message.getFloatingPointFieldWithDefault(this,6,0)},proto.pb.Operation.prototype.setDistance=function(e){return o.Message.setProto3FloatField(this,6,e)},proto.pb.Operation.prototype.getDuration=function(){return o.Message.getFloatingPointFieldWithDefault(this,7,0)},proto.pb.Operation.prototype.setDuration=function(e){return o.Message.setProto3FloatField(this,7,e)},proto.pb.Operation.prototype.getShift=function(){return o.Message.getFieldWithDefault(this,8,0)},proto.pb.Operation.prototype.setShift=function(e){return o.Message.setProto3EnumField(this,8,e)},proto.pb.Operation.prototype.getState=function(){return o.Message.getFieldWithDefault(this,9,0)},proto.pb.Operation.prototype.setState=function(e){return o.Message.setProto3EnumField(this,9,e)},proto.pb.Operation.prototype.getUpload=function(){return o.Message.getWrapperField(this,c.Upload,10)},proto.pb.Operation.prototype.setUpload=function(e){return o.Message.setWrapperField(this,10,e)},proto.pb.Operation.prototype.clearUpload=function(){return this.setUpload(void 0)},proto.pb.Operation.prototype.hasUpload=function(){return null!=o.Message.getField(this,10)},proto.pb.Operation.prototype.getDownload=function(){return o.Message.getWrapperField(this,c.Download,11)},proto.pb.Operation.prototype.setDownload=function(e){return o.Message.setWrapperField(this,11,e)},proto.pb.Operation.prototype.clearDownload=function(){return this.setDownload(void 0)},proto.pb.Operation.prototype.hasDownload=function(){return null!=o.Message.getField(this,11)},proto.pb.Operation.prototype.getRoadList=function(){return o.Message.getRepeatedWrapperField(this,p.Road,12)},proto.pb.Operation.prototype.setRoadList=function(e){return o.Message.setRepeatedWrapperField(this,12,e)},proto.pb.Operation.prototype.addRoad=function(e,t){return o.Message.addToRepeatedWrapperField(this,12,e,proto.pb.Road,t)},proto.pb.Operation.prototype.clearRoadList=function(){return this.setRoadList([])},proto.pb.Operation.prototype.getTruckList=function(){return o.Message.getRepeatedWrapperField(this,n.Truck,13)},proto.pb.Operation.prototype.setTruckList=function(e){return o.Message.setRepeatedWrapperField(this,13,e)},proto.pb.Operation.prototype.addTruck=function(e,t){return o.Message.addToRepeatedWrapperField(this,13,e,proto.pb.Truck,t)},proto.pb.Operation.prototype.clearTruckList=function(){return this.setTruckList([])},proto.pb.Operation.prototype.getExcavatorList=function(){return o.Message.getRepeatedWrapperField(this,a.Excavator,14)},proto.pb.Operation.prototype.setExcavatorList=function(e){return o.Message.setRepeatedWrapperField(this,14,e)},proto.pb.Operation.prototype.addExcavator=function(e,t){return o.Message.addToRepeatedWrapperField(this,14,e,proto.pb.Excavator,t)},proto.pb.Operation.prototype.clearExcavatorList=function(){return this.setExcavatorList([])},proto.pb.Operation.prototype.getCycleList=function(){return o.Message.getRepeatedWrapperField(this,l.Cycle,15)},proto.pb.Operation.prototype.setCycleList=function(e){return o.Message.setRepeatedWrapperField(this,15,e)},proto.pb.Operation.prototype.addCycle=function(e,t){return o.Message.addToRepeatedWrapperField(this,15,e,proto.pb.Cycle,t)},proto.pb.Operation.prototype.clearCycleList=function(){return this.setCycleList([])},o.Message.GENERATE_TO_OBJECT&&(proto.pb.OperationRequest.prototype.toObject=function(e){return proto.pb.OperationRequest.toObject(e,this)},proto.pb.OperationRequest.toObject=function(e,t){var i,o={operation:(i=t.getOperation())&&proto.pb.Operation.toObject(e,i)};return e&&(o.$jspbMessageInstance=t),o}),proto.pb.OperationRequest.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.OperationRequest;return proto.pb.OperationRequest.deserializeBinaryFromReader(i,t)},proto.pb.OperationRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new proto.pb.Operation;t.readMessage(i,proto.pb.Operation.deserializeBinaryFromReader),e.setOperation(i);break;default:t.skipField()}return e},proto.pb.OperationRequest.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.OperationRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.OperationRequest.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.getOperation())&&t.writeMessage(1,i,proto.pb.Operation.serializeBinaryToWriter)},proto.pb.OperationRequest.prototype.getOperation=function(){return o.Message.getWrapperField(this,proto.pb.Operation,1)},proto.pb.OperationRequest.prototype.setOperation=function(e){return o.Message.setWrapperField(this,1,e)},proto.pb.OperationRequest.prototype.clearOperation=function(){return this.setOperation(void 0)},proto.pb.OperationRequest.prototype.hasOperation=function(){return null!=o.Message.getField(this,1)},o.Message.GENERATE_TO_OBJECT&&(proto.pb.OperationResponse.prototype.toObject=function(e){return proto.pb.OperationResponse.toObject(e,this)},proto.pb.OperationResponse.toObject=function(e,t){var i,o={operation:(i=t.getOperation())&&proto.pb.Operation.toObject(e,i)};return e&&(o.$jspbMessageInstance=t),o}),proto.pb.OperationResponse.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.OperationResponse;return proto.pb.OperationResponse.deserializeBinaryFromReader(i,t)},proto.pb.OperationResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new proto.pb.Operation;t.readMessage(i,proto.pb.Operation.deserializeBinaryFromReader),e.setOperation(i);break;default:t.skipField()}return e},proto.pb.OperationResponse.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.OperationResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.OperationResponse.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.getOperation())&&t.writeMessage(1,i,proto.pb.Operation.serializeBinaryToWriter)},proto.pb.OperationResponse.prototype.getOperation=function(){return o.Message.getWrapperField(this,proto.pb.Operation,1)},proto.pb.OperationResponse.prototype.setOperation=function(e){return o.Message.setWrapperField(this,1,e)},proto.pb.OperationResponse.prototype.clearOperation=function(){return this.setOperation(void 0)},proto.pb.OperationResponse.prototype.hasOperation=function(){return null!=o.Message.getField(this,1)},o.Message.GENERATE_TO_OBJECT&&(proto.pb.TruckStateMessage.prototype.toObject=function(e){return proto.pb.TruckStateMessage.toObject(e,this)},proto.pb.TruckStateMessage.toObject=function(e,t){var i,r={truckError:(i=t.getTruckError())&&n.Truck.toObject(e,i),state:o.Message.getFieldWithDefault(t,2,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.pb.TruckStateMessage.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.TruckStateMessage;return proto.pb.TruckStateMessage.deserializeBinaryFromReader(i,t)},proto.pb.TruckStateMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new n.Truck;t.readMessage(i,n.Truck.deserializeBinaryFromReader),e.setTruckError(i);break;case 2:i=t.readEnum(),e.setState(i);break;default:t.skipField()}return e},proto.pb.TruckStateMessage.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.TruckStateMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.TruckStateMessage.serializeBinaryToWriter=function(e,t){var i=void 0;null!=(i=e.getTruckError())&&t.writeMessage(1,i,n.Truck.serializeBinaryToWriter),0!==(i=e.getState())&&t.writeEnum(2,i)},proto.pb.TruckStateMessage.State={UNKNOWN_STATE:0,UPLOAD:1,DOWNLOAD:2,TO_UPLOAD:3,TO_DOWNLOAD:4,WAITING:5,QUEUE:6},proto.pb.TruckStateMessage.prototype.getTruckError=function(){return o.Message.getWrapperField(this,n.Truck,1)},proto.pb.TruckStateMessage.prototype.setTruckError=function(e){return o.Message.setWrapperField(this,1,e)},proto.pb.TruckStateMessage.prototype.clearTruckError=function(){return this.setTruckError(void 0)},proto.pb.TruckStateMessage.prototype.hasTruckError=function(){return null!=o.Message.getField(this,1)},proto.pb.TruckStateMessage.prototype.getState=function(){return o.Message.getFieldWithDefault(this,2,0)},proto.pb.TruckStateMessage.prototype.setState=function(e){return o.Message.setProto3EnumField(this,2,e)},proto.pb.OperationsResponse.repeatedFields_=[1],o.Message.GENERATE_TO_OBJECT&&(proto.pb.OperationsResponse.prototype.toObject=function(e){return proto.pb.OperationsResponse.toObject(e,this)},proto.pb.OperationsResponse.toObject=function(e,t){var i={operationsList:o.Message.toObjectList(t.getOperationsList(),proto.pb.Operation.toObject,e)};return e&&(i.$jspbMessageInstance=t),i}),proto.pb.OperationsResponse.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.OperationsResponse;return proto.pb.OperationsResponse.deserializeBinaryFromReader(i,t)},proto.pb.OperationsResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new proto.pb.Operation;t.readMessage(i,proto.pb.Operation.deserializeBinaryFromReader),e.addOperations(i);break;default:t.skipField()}return e},proto.pb.OperationsResponse.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.OperationsResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.OperationsResponse.serializeBinaryToWriter=function(e,t){var i;(i=e.getOperationsList()).length>0&&t.writeRepeatedMessage(1,i,proto.pb.Operation.serializeBinaryToWriter)},proto.pb.OperationsResponse.prototype.getOperationsList=function(){return o.Message.getRepeatedWrapperField(this,proto.pb.Operation,1)},proto.pb.OperationsResponse.prototype.setOperationsList=function(e){return o.Message.setRepeatedWrapperField(this,1,e)},proto.pb.OperationsResponse.prototype.addOperations=function(e,t){return o.Message.addToRepeatedWrapperField(this,1,e,proto.pb.Operation,t)},proto.pb.OperationsResponse.prototype.clearOperationsList=function(){return this.setOperationsList([])},proto.pb.OperationReassigmentRequest.repeatedFields_=[1],o.Message.GENERATE_TO_OBJECT&&(proto.pb.OperationReassigmentRequest.prototype.toObject=function(e){return proto.pb.OperationReassigmentRequest.toObject(e,this)},proto.pb.OperationReassigmentRequest.toObject=function(e,t){var i,r={truckList:o.Message.toObjectList(t.getTruckList(),n.Truck.toObject,e),operationDestination:(i=t.getOperationDestination())&&proto.pb.Operation.toObject(e,i)};return e&&(r.$jspbMessageInstance=t),r}),proto.pb.OperationReassigmentRequest.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.OperationReassigmentRequest;return proto.pb.OperationReassigmentRequest.deserializeBinaryFromReader(i,t)},proto.pb.OperationReassigmentRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new n.Truck;t.readMessage(i,n.Truck.deserializeBinaryFromReader),e.addTruck(i);break;case 2:i=new proto.pb.Operation,t.readMessage(i,proto.pb.Operation.deserializeBinaryFromReader),e.setOperationDestination(i);break;default:t.skipField()}return e},proto.pb.OperationReassigmentRequest.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.OperationReassigmentRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.OperationReassigmentRequest.serializeBinaryToWriter=function(e,t){var i=void 0;(i=e.getTruckList()).length>0&&t.writeRepeatedMessage(1,i,n.Truck.serializeBinaryToWriter),null!=(i=e.getOperationDestination())&&t.writeMessage(2,i,proto.pb.Operation.serializeBinaryToWriter)},proto.pb.OperationReassigmentRequest.prototype.getTruckList=function(){return o.Message.getRepeatedWrapperField(this,n.Truck,1)},proto.pb.OperationReassigmentRequest.prototype.setTruckList=function(e){return o.Message.setRepeatedWrapperField(this,1,e)},proto.pb.OperationReassigmentRequest.prototype.addTruck=function(e,t){return o.Message.addToRepeatedWrapperField(this,1,e,proto.pb.Truck,t)},proto.pb.OperationReassigmentRequest.prototype.clearTruckList=function(){return this.setTruckList([])},proto.pb.OperationReassigmentRequest.prototype.getOperationDestination=function(){return o.Message.getWrapperField(this,proto.pb.Operation,2)},proto.pb.OperationReassigmentRequest.prototype.setOperationDestination=function(e){return o.Message.setWrapperField(this,2,e)},proto.pb.OperationReassigmentRequest.prototype.clearOperationDestination=function(){return this.setOperationDestination(void 0)},proto.pb.OperationReassigmentRequest.prototype.hasOperationDestination=function(){return null!=o.Message.getField(this,2)},proto.pb.OperationReassigmentResponse.repeatedFields_=[2],o.Message.GENERATE_TO_OBJECT&&(proto.pb.OperationReassigmentResponse.prototype.toObject=function(e){return proto.pb.OperationReassigmentResponse.toObject(e,this)},proto.pb.OperationReassigmentResponse.toObject=function(e,t){var i,r={operation:(i=t.getOperation())&&proto.pb.Operation.toObject(e,i),truckErrorList:o.Message.toObjectList(t.getTruckErrorList(),proto.pb.TruckStateMessage.toObject,e)};return e&&(r.$jspbMessageInstance=t),r}),proto.pb.OperationReassigmentResponse.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.OperationReassigmentResponse;return proto.pb.OperationReassigmentResponse.deserializeBinaryFromReader(i,t)},proto.pb.OperationReassigmentResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new proto.pb.Operation;t.readMessage(i,proto.pb.Operation.deserializeBinaryFromReader),e.setOperation(i);break;case 2:i=new proto.pb.TruckStateMessage,t.readMessage(i,proto.pb.TruckStateMessage.deserializeBinaryFromReader),e.addTruckError(i);break;default:t.skipField()}return e},proto.pb.OperationReassigmentResponse.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.OperationReassigmentResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.OperationReassigmentResponse.serializeBinaryToWriter=function(e,t){var i=void 0;null!=(i=e.getOperation())&&t.writeMessage(1,i,proto.pb.Operation.serializeBinaryToWriter),(i=e.getTruckErrorList()).length>0&&t.writeRepeatedMessage(2,i,proto.pb.TruckStateMessage.serializeBinaryToWriter)},proto.pb.OperationReassigmentResponse.prototype.getOperation=function(){return o.Message.getWrapperField(this,proto.pb.Operation,1)},proto.pb.OperationReassigmentResponse.prototype.setOperation=function(e){return o.Message.setWrapperField(this,1,e)},proto.pb.OperationReassigmentResponse.prototype.clearOperation=function(){return this.setOperation(void 0)},proto.pb.OperationReassigmentResponse.prototype.hasOperation=function(){return null!=o.Message.getField(this,1)},proto.pb.OperationReassigmentResponse.prototype.getTruckErrorList=function(){return o.Message.getRepeatedWrapperField(this,proto.pb.TruckStateMessage,2)},proto.pb.OperationReassigmentResponse.prototype.setTruckErrorList=function(e){return o.Message.setRepeatedWrapperField(this,2,e)},proto.pb.OperationReassigmentResponse.prototype.addTruckError=function(e,t){return o.Message.addToRepeatedWrapperField(this,2,e,proto.pb.TruckStateMessage,t)},proto.pb.OperationReassigmentResponse.prototype.clearTruckErrorList=function(){return this.setTruckErrorList([])},proto.pb.OperationFinalizeResponse.repeatedFields_=[2],o.Message.GENERATE_TO_OBJECT&&(proto.pb.OperationFinalizeResponse.prototype.toObject=function(e){return proto.pb.OperationFinalizeResponse.toObject(e,this)},proto.pb.OperationFinalizeResponse.toObject=function(e,t){var i,r={operation:(i=t.getOperation())&&proto.pb.Operation.toObject(e,i),truckErrorList:o.Message.toObjectList(t.getTruckErrorList(),proto.pb.TruckStateMessage.toObject,e)};return e&&(r.$jspbMessageInstance=t),r}),proto.pb.OperationFinalizeResponse.deserializeBinary=function(e){var t=new o.BinaryReader(e),i=new proto.pb.OperationFinalizeResponse;return proto.pb.OperationFinalizeResponse.deserializeBinaryFromReader(i,t)},proto.pb.OperationFinalizeResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new proto.pb.Operation;t.readMessage(i,proto.pb.Operation.deserializeBinaryFromReader),e.setOperation(i);break;case 2:i=new proto.pb.TruckStateMessage,t.readMessage(i,proto.pb.TruckStateMessage.deserializeBinaryFromReader),e.addTruckError(i);break;default:t.skipField()}return e},proto.pb.OperationFinalizeResponse.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.pb.OperationFinalizeResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.pb.OperationFinalizeResponse.serializeBinaryToWriter=function(e,t){var i=void 0;null!=(i=e.getOperation())&&t.writeMessage(1,i,proto.pb.Operation.serializeBinaryToWriter),(i=e.getTruckErrorList()).length>0&&t.writeRepeatedMessage(2,i,proto.pb.TruckStateMessage.serializeBinaryToWriter)},proto.pb.OperationFinalizeResponse.prototype.getOperation=function(){return o.Message.getWrapperField(this,proto.pb.Operation,1)},proto.pb.OperationFinalizeResponse.prototype.setOperation=function(e){return o.Message.setWrapperField(this,1,e)},proto.pb.OperationFinalizeResponse.prototype.clearOperation=function(){return this.setOperation(void 0)},proto.pb.OperationFinalizeResponse.prototype.hasOperation=function(){return null!=o.Message.getField(this,1)},proto.pb.OperationFinalizeResponse.prototype.getTruckErrorList=function(){return o.Message.getRepeatedWrapperField(this,proto.pb.TruckStateMessage,2)},proto.pb.OperationFinalizeResponse.prototype.setTruckErrorList=function(e){return o.Message.setRepeatedWrapperField(this,2,e)},proto.pb.OperationFinalizeResponse.prototype.addTruckError=function(e,t){return o.Message.addToRepeatedWrapperField(this,2,e,proto.pb.TruckStateMessage,t)},proto.pb.OperationFinalizeResponse.prototype.clearTruckErrorList=function(){return this.setTruckErrorList([])},r.object.extend(t,proto.pb)}}]);